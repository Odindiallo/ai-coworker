var lA=Object.defineProperty;var cA=(n,e,t)=>e in n?lA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Ns=(n,e,t)=>cA(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function vg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sp={exports:{}},hc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U_;function uA(){if(U_)return hc;U_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function t(r,s,l){var u=null;if(l!==void 0&&(u=""+l),s.key!==void 0&&(u=""+s.key),"key"in s){l={};for(var f in s)f!=="key"&&(l[f]=s[f])}else l=s;return s=l.ref,{$$typeof:n,type:r,key:u,ref:s!==void 0?s:null,props:l}}return hc.Fragment=e,hc.jsx=t,hc.jsxs=t,hc}var V_;function dA(){return V_||(V_=1,sp.exports=uA()),sp.exports}var m=dA(),op={exports:{}},je={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var z_;function hA(){if(z_)return je;z_=1;var n=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),u=Symbol.for("react.context"),f=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),E=Symbol.iterator;function w(k){return k===null||typeof k!="object"?null:(k=E&&k[E]||k["@@iterator"],typeof k=="function"?k:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},I=Object.assign,L={};function P(k,Q,le){this.props=k,this.context=Q,this.refs=L,this.updater=le||T}P.prototype.isReactComponent={},P.prototype.setState=function(k,Q){if(typeof k!="object"&&typeof k!="function"&&k!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,k,Q,"setState")},P.prototype.forceUpdate=function(k){this.updater.enqueueForceUpdate(this,k,"forceUpdate")};function V(){}V.prototype=P.prototype;function Y(k,Q,le){this.props=k,this.context=Q,this.refs=L,this.updater=le||T}var H=Y.prototype=new V;H.constructor=Y,I(H,P.prototype),H.isPureReactComponent=!0;var ee=Array.isArray,X={H:null,A:null,T:null,S:null},se=Object.prototype.hasOwnProperty;function M(k,Q,le,de,ce,Ne){return le=Ne.ref,{$$typeof:n,type:k,key:Q,ref:le!==void 0?le:null,props:Ne}}function N(k,Q){return M(k.type,Q,void 0,void 0,void 0,k.props)}function A(k){return typeof k=="object"&&k!==null&&k.$$typeof===n}function D(k){var Q={"=":"=0",":":"=2"};return"$"+k.replace(/[=:]/g,function(le){return Q[le]})}var U=/\/+/g;function B(k,Q){return typeof k=="object"&&k!==null&&k.key!=null?D(""+k.key):Q.toString(36)}function O(){}function me(k){switch(k.status){case"fulfilled":return k.value;case"rejected":throw k.reason;default:switch(typeof k.status=="string"?k.then(O,O):(k.status="pending",k.then(function(Q){k.status==="pending"&&(k.status="fulfilled",k.value=Q)},function(Q){k.status==="pending"&&(k.status="rejected",k.reason=Q)})),k.status){case"fulfilled":return k.value;case"rejected":throw k.reason}}throw k}function xe(k,Q,le,de,ce){var Ne=typeof k;(Ne==="undefined"||Ne==="boolean")&&(k=null);var we=!1;if(k===null)we=!0;else switch(Ne){case"bigint":case"string":case"number":we=!0;break;case"object":switch(k.$$typeof){case n:case e:we=!0;break;case _:return we=k._init,xe(we(k._payload),Q,le,de,ce)}}if(we)return ce=ce(k),we=de===""?"."+B(k,0):de,ee(ce)?(le="",we!=null&&(le=we.replace(U,"$&/")+"/"),xe(ce,Q,le,"",function(Je){return Je})):ce!=null&&(A(ce)&&(ce=N(ce,le+(ce.key==null||k&&k.key===ce.key?"":(""+ce.key).replace(U,"$&/")+"/")+we)),Q.push(ce)),1;we=0;var ot=de===""?".":de+":";if(ee(k))for(var Ee=0;Ee<k.length;Ee++)de=k[Ee],Ne=ot+B(de,Ee),we+=xe(de,Q,le,Ne,ce);else if(Ee=w(k),typeof Ee=="function")for(k=Ee.call(k),Ee=0;!(de=k.next()).done;)de=de.value,Ne=ot+B(de,Ee++),we+=xe(de,Q,le,Ne,ce);else if(Ne==="object"){if(typeof k.then=="function")return xe(me(k),Q,le,de,ce);throw Q=String(k),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(k).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.")}return we}function oe(k,Q,le){if(k==null)return k;var de=[],ce=0;return xe(k,de,"","",function(Ne){return Q.call(le,Ne,ce++)}),de}function ve(k){if(k._status===-1){var Q=k._result;Q=Q(),Q.then(function(le){(k._status===0||k._status===-1)&&(k._status=1,k._result=le)},function(le){(k._status===0||k._status===-1)&&(k._status=2,k._result=le)}),k._status===-1&&(k._status=0,k._result=Q)}if(k._status===1)return k._result.default;throw k._result}var fe=typeof reportError=="function"?reportError:function(k){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var Q=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof k=="object"&&k!==null&&typeof k.message=="string"?String(k.message):String(k),error:k});if(!window.dispatchEvent(Q))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",k);return}console.error(k)};function re(){}return je.Children={map:oe,forEach:function(k,Q,le){oe(k,function(){Q.apply(this,arguments)},le)},count:function(k){var Q=0;return oe(k,function(){Q++}),Q},toArray:function(k){return oe(k,function(Q){return Q})||[]},only:function(k){if(!A(k))throw Error("React.Children.only expected to receive a single React element child.");return k}},je.Component=P,je.Fragment=t,je.Profiler=s,je.PureComponent=Y,je.StrictMode=r,je.Suspense=p,je.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=X,je.act=function(){throw Error("act(...) is not supported in production builds of React.")},je.cache=function(k){return function(){return k.apply(null,arguments)}},je.cloneElement=function(k,Q,le){if(k==null)throw Error("The argument must be a React element, but you passed "+k+".");var de=I({},k.props),ce=k.key,Ne=void 0;if(Q!=null)for(we in Q.ref!==void 0&&(Ne=void 0),Q.key!==void 0&&(ce=""+Q.key),Q)!se.call(Q,we)||we==="key"||we==="__self"||we==="__source"||we==="ref"&&Q.ref===void 0||(de[we]=Q[we]);var we=arguments.length-2;if(we===1)de.children=le;else if(1<we){for(var ot=Array(we),Ee=0;Ee<we;Ee++)ot[Ee]=arguments[Ee+2];de.children=ot}return M(k.type,ce,void 0,void 0,Ne,de)},je.createContext=function(k){return k={$$typeof:u,_currentValue:k,_currentValue2:k,_threadCount:0,Provider:null,Consumer:null},k.Provider=k,k.Consumer={$$typeof:l,_context:k},k},je.createElement=function(k,Q,le){var de,ce={},Ne=null;if(Q!=null)for(de in Q.key!==void 0&&(Ne=""+Q.key),Q)se.call(Q,de)&&de!=="key"&&de!=="__self"&&de!=="__source"&&(ce[de]=Q[de]);var we=arguments.length-2;if(we===1)ce.children=le;else if(1<we){for(var ot=Array(we),Ee=0;Ee<we;Ee++)ot[Ee]=arguments[Ee+2];ce.children=ot}if(k&&k.defaultProps)for(de in we=k.defaultProps,we)ce[de]===void 0&&(ce[de]=we[de]);return M(k,Ne,void 0,void 0,null,ce)},je.createRef=function(){return{current:null}},je.forwardRef=function(k){return{$$typeof:f,render:k}},je.isValidElement=A,je.lazy=function(k){return{$$typeof:_,_payload:{_status:-1,_result:k},_init:ve}},je.memo=function(k,Q){return{$$typeof:v,type:k,compare:Q===void 0?null:Q}},je.startTransition=function(k){var Q=X.T,le={};X.T=le;try{var de=k(),ce=X.S;ce!==null&&ce(le,de),typeof de=="object"&&de!==null&&typeof de.then=="function"&&de.then(re,fe)}catch(Ne){fe(Ne)}finally{X.T=Q}},je.unstable_useCacheRefresh=function(){return X.H.useCacheRefresh()},je.use=function(k){return X.H.use(k)},je.useActionState=function(k,Q,le){return X.H.useActionState(k,Q,le)},je.useCallback=function(k,Q){return X.H.useCallback(k,Q)},je.useContext=function(k){return X.H.useContext(k)},je.useDebugValue=function(){},je.useDeferredValue=function(k,Q){return X.H.useDeferredValue(k,Q)},je.useEffect=function(k,Q){return X.H.useEffect(k,Q)},je.useId=function(){return X.H.useId()},je.useImperativeHandle=function(k,Q,le){return X.H.useImperativeHandle(k,Q,le)},je.useInsertionEffect=function(k,Q){return X.H.useInsertionEffect(k,Q)},je.useLayoutEffect=function(k,Q){return X.H.useLayoutEffect(k,Q)},je.useMemo=function(k,Q){return X.H.useMemo(k,Q)},je.useOptimistic=function(k,Q){return X.H.useOptimistic(k,Q)},je.useReducer=function(k,Q,le){return X.H.useReducer(k,Q,le)},je.useRef=function(k){return X.H.useRef(k)},je.useState=function(k){return X.H.useState(k)},je.useSyncExternalStore=function(k,Q,le){return X.H.useSyncExternalStore(k,Q,le)},je.useTransition=function(){return X.H.useTransition()},je.version="19.0.0",je}var B_;function yg(){return B_||(B_=1,op.exports=hA()),op.exports}var C=yg();const lw=vg(C);var lp={exports:{}},fc={},cp={exports:{}},up={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F_;function fA(){return F_||(F_=1,function(n){function e(oe,ve){var fe=oe.length;oe.push(ve);e:for(;0<fe;){var re=fe-1>>>1,k=oe[re];if(0<s(k,ve))oe[re]=ve,oe[fe]=k,fe=re;else break e}}function t(oe){return oe.length===0?null:oe[0]}function r(oe){if(oe.length===0)return null;var ve=oe[0],fe=oe.pop();if(fe!==ve){oe[0]=fe;e:for(var re=0,k=oe.length,Q=k>>>1;re<Q;){var le=2*(re+1)-1,de=oe[le],ce=le+1,Ne=oe[ce];if(0>s(de,fe))ce<k&&0>s(Ne,de)?(oe[re]=Ne,oe[ce]=fe,re=ce):(oe[re]=de,oe[le]=fe,re=le);else if(ce<k&&0>s(Ne,fe))oe[re]=Ne,oe[ce]=fe,re=ce;else break e}}return ve}function s(oe,ve){var fe=oe.sortIndex-ve.sortIndex;return fe!==0?fe:oe.id-ve.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();n.unstable_now=function(){return u.now()-f}}var p=[],v=[],_=1,E=null,w=3,T=!1,I=!1,L=!1,P=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function H(oe){for(var ve=t(v);ve!==null;){if(ve.callback===null)r(v);else if(ve.startTime<=oe)r(v),ve.sortIndex=ve.expirationTime,e(p,ve);else break;ve=t(v)}}function ee(oe){if(L=!1,H(oe),!I)if(t(p)!==null)I=!0,me();else{var ve=t(v);ve!==null&&xe(ee,ve.startTime-oe)}}var X=!1,se=-1,M=5,N=-1;function A(){return!(n.unstable_now()-N<M)}function D(){if(X){var oe=n.unstable_now();N=oe;var ve=!0;try{e:{I=!1,L&&(L=!1,V(se),se=-1),T=!0;var fe=w;try{t:{for(H(oe),E=t(p);E!==null&&!(E.expirationTime>oe&&A());){var re=E.callback;if(typeof re=="function"){E.callback=null,w=E.priorityLevel;var k=re(E.expirationTime<=oe);if(oe=n.unstable_now(),typeof k=="function"){E.callback=k,H(oe),ve=!0;break t}E===t(p)&&r(p),H(oe)}else r(p);E=t(p)}if(E!==null)ve=!0;else{var Q=t(v);Q!==null&&xe(ee,Q.startTime-oe),ve=!1}}break e}finally{E=null,w=fe,T=!1}ve=void 0}}finally{ve?U():X=!1}}}var U;if(typeof Y=="function")U=function(){Y(D)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,O=B.port2;B.port1.onmessage=D,U=function(){O.postMessage(null)}}else U=function(){P(D,0)};function me(){X||(X=!0,U())}function xe(oe,ve){se=P(function(){oe(n.unstable_now())},ve)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(oe){oe.callback=null},n.unstable_continueExecution=function(){I||T||(I=!0,me())},n.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<oe?Math.floor(1e3/oe):5},n.unstable_getCurrentPriorityLevel=function(){return w},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(oe){switch(w){case 1:case 2:case 3:var ve=3;break;default:ve=w}var fe=w;w=ve;try{return oe()}finally{w=fe}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(oe,ve){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var fe=w;w=oe;try{return ve()}finally{w=fe}},n.unstable_scheduleCallback=function(oe,ve,fe){var re=n.unstable_now();switch(typeof fe=="object"&&fe!==null?(fe=fe.delay,fe=typeof fe=="number"&&0<fe?re+fe:re):fe=re,oe){case 1:var k=-1;break;case 2:k=250;break;case 5:k=1073741823;break;case 4:k=1e4;break;default:k=5e3}return k=fe+k,oe={id:_++,callback:ve,priorityLevel:oe,startTime:fe,expirationTime:k,sortIndex:-1},fe>re?(oe.sortIndex=fe,e(v,oe),t(p)===null&&oe===t(v)&&(L?(V(se),se=-1):L=!0,xe(ee,fe-re))):(oe.sortIndex=k,e(p,oe),I||T||(I=!0,me())),oe},n.unstable_shouldYield=A,n.unstable_wrapCallback=function(oe){var ve=w;return function(){var fe=w;w=ve;try{return oe.apply(this,arguments)}finally{w=fe}}}}(up)),up}var q_;function mA(){return q_||(q_=1,cp.exports=fA()),cp.exports}var dp={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function pA(){if(H_)return an;H_=1;var n=yg();function e(p){var v="https://react.dev/errors/"+p;if(1<arguments.length){v+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)v+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function t(){}var r={d:{f:t,r:function(){throw Error(e(522))},D:t,C:t,L:t,m:t,X:t,S:t,M:t},p:0,findDOMNode:null},s=Symbol.for("react.portal");function l(p,v,_){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:s,key:E==null?null:""+E,children:p,containerInfo:v,implementation:_}}var u=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function f(p,v){if(p==="font")return"";if(typeof v=="string")return v==="use-credentials"?v:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,an.createPortal=function(p,v){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!v||v.nodeType!==1&&v.nodeType!==9&&v.nodeType!==11)throw Error(e(299));return l(p,v,null,_)},an.flushSync=function(p){var v=u.T,_=r.p;try{if(u.T=null,r.p=2,p)return p()}finally{u.T=v,r.p=_,r.d.f()}},an.preconnect=function(p,v){typeof p=="string"&&(v?(v=v.crossOrigin,v=typeof v=="string"?v==="use-credentials"?v:"":void 0):v=null,r.d.C(p,v))},an.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},an.preinit=function(p,v){if(typeof p=="string"&&v&&typeof v.as=="string"){var _=v.as,E=f(_,v.crossOrigin),w=typeof v.integrity=="string"?v.integrity:void 0,T=typeof v.fetchPriority=="string"?v.fetchPriority:void 0;_==="style"?r.d.S(p,typeof v.precedence=="string"?v.precedence:void 0,{crossOrigin:E,integrity:w,fetchPriority:T}):_==="script"&&r.d.X(p,{crossOrigin:E,integrity:w,fetchPriority:T,nonce:typeof v.nonce=="string"?v.nonce:void 0})}},an.preinitModule=function(p,v){if(typeof p=="string")if(typeof v=="object"&&v!==null){if(v.as==null||v.as==="script"){var _=f(v.as,v.crossOrigin);r.d.M(p,{crossOrigin:_,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0})}}else v==null&&r.d.M(p)},an.preload=function(p,v){if(typeof p=="string"&&typeof v=="object"&&v!==null&&typeof v.as=="string"){var _=v.as,E=f(_,v.crossOrigin);r.d.L(p,_,{crossOrigin:E,integrity:typeof v.integrity=="string"?v.integrity:void 0,nonce:typeof v.nonce=="string"?v.nonce:void 0,type:typeof v.type=="string"?v.type:void 0,fetchPriority:typeof v.fetchPriority=="string"?v.fetchPriority:void 0,referrerPolicy:typeof v.referrerPolicy=="string"?v.referrerPolicy:void 0,imageSrcSet:typeof v.imageSrcSet=="string"?v.imageSrcSet:void 0,imageSizes:typeof v.imageSizes=="string"?v.imageSizes:void 0,media:typeof v.media=="string"?v.media:void 0})}},an.preloadModule=function(p,v){if(typeof p=="string")if(v){var _=f(v.as,v.crossOrigin);r.d.m(p,{as:typeof v.as=="string"&&v.as!=="script"?v.as:void 0,crossOrigin:_,integrity:typeof v.integrity=="string"?v.integrity:void 0})}else r.d.m(p)},an.requestFormReset=function(p){r.d.r(p)},an.unstable_batchedUpdates=function(p,v){return p(v)},an.useFormState=function(p,v,_){return u.H.useFormState(p,v,_)},an.useFormStatus=function(){return u.H.useHostTransitionStatus()},an.version="19.0.0",an}var G_;function gA(){if(G_)return dp.exports;G_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),dp.exports=pA(),dp.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $_;function vA(){if($_)return fc;$_=1;var n=mA(),e=yg(),t=gA();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var o=2;o<arguments.length;o++)a+="&args[]="+encodeURIComponent(arguments[o])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}var l=Symbol.for("react.element"),u=Symbol.for("react.transitional.element"),f=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),T=Symbol.for("react.context"),I=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),V=Symbol.for("react.memo"),Y=Symbol.for("react.lazy"),H=Symbol.for("react.offscreen"),ee=Symbol.for("react.memo_cache_sentinel"),X=Symbol.iterator;function se(i){return i===null||typeof i!="object"?null:(i=X&&i[X]||i["@@iterator"],typeof i=="function"?i:null)}var M=Symbol.for("react.client.reference");function N(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===M?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case p:return"Fragment";case f:return"Portal";case _:return"Profiler";case v:return"StrictMode";case L:return"Suspense";case P:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case T:return(i.displayName||"Context")+".Provider";case w:return(i._context.displayName||"Context")+".Consumer";case I:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case V:return a=i.displayName||null,a!==null?a:N(i.type)||"Memo";case Y:a=i._payload,i=i._init;try{return N(i(a))}catch{}}return null}var A=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,D=Object.assign,U,B;function O(i){if(U===void 0)try{throw Error()}catch(o){var a=o.stack.trim().match(/\n( *(at )?)/);U=a&&a[1]||"",B=-1<o.stack.indexOf(`
    at`)?" (<anonymous>)":-1<o.stack.indexOf("@")?"@unknown:0:0":""}return`
`+U+i+B}var me=!1;function xe(i,a){if(!i||me)return"";me=!0;var o=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var c={DetermineComponentFrameRoot:function(){try{if(a){var ae=function(){throw Error()};if(Object.defineProperty(ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ae,[])}catch(J){var K=J}Reflect.construct(i,[],ae)}else{try{ae.call()}catch(J){K=J}i.call(ae.prototype)}}else{try{throw Error()}catch(J){K=J}(ae=i())&&typeof ae.catch=="function"&&ae.catch(function(){})}}catch(J){if(J&&K&&typeof J.stack=="string")return[J.stack,K.stack]}return[null,null]}};c.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(c.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(c.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=c.DetermineComponentFrameRoot(),b=g[0],S=g[1];if(b&&S){var j=b.split(`
`),F=S.split(`
`);for(h=c=0;c<j.length&&!j[c].includes("DetermineComponentFrameRoot");)c++;for(;h<F.length&&!F[h].includes("DetermineComponentFrameRoot");)h++;if(c===j.length||h===F.length)for(c=j.length-1,h=F.length-1;1<=c&&0<=h&&j[c]!==F[h];)h--;for(;1<=c&&0<=h;c--,h--)if(j[c]!==F[h]){if(c!==1||h!==1)do if(c--,h--,0>h||j[c]!==F[h]){var Z=`
`+j[c].replace(" at new "," at ");return i.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",i.displayName)),Z}while(1<=c&&0<=h);break}}}finally{me=!1,Error.prepareStackTrace=o}return(o=i?i.displayName||i.name:"")?O(o):""}function oe(i){switch(i.tag){case 26:case 27:case 5:return O(i.type);case 16:return O("Lazy");case 13:return O("Suspense");case 19:return O("SuspenseList");case 0:case 15:return i=xe(i.type,!1),i;case 11:return i=xe(i.type.render,!1),i;case 1:return i=xe(i.type,!0),i;default:return""}}function ve(i){try{var a="";do a+=oe(i),i=i.return;while(i);return a}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}function fe(i){var a=i,o=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(o=a.return),i=a.return;while(i)}return a.tag===3?o:null}function re(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function k(i){if(fe(i)!==i)throw Error(r(188))}function Q(i){var a=i.alternate;if(!a){if(a=fe(i),a===null)throw Error(r(188));return a!==i?null:i}for(var o=i,c=a;;){var h=o.return;if(h===null)break;var g=h.alternate;if(g===null){if(c=h.return,c!==null){o=c;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===o)return k(h),i;if(g===c)return k(h),a;g=g.sibling}throw Error(r(188))}if(o.return!==c.return)o=h,c=g;else{for(var b=!1,S=h.child;S;){if(S===o){b=!0,o=h,c=g;break}if(S===c){b=!0,c=h,o=g;break}S=S.sibling}if(!b){for(S=g.child;S;){if(S===o){b=!0,o=g,c=h;break}if(S===c){b=!0,c=g,o=h;break}S=S.sibling}if(!b)throw Error(r(189))}}if(o.alternate!==c)throw Error(r(190))}if(o.tag!==3)throw Error(r(188));return o.stateNode.current===o?i:a}function le(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=le(i),a!==null)return a;i=i.sibling}return null}var de=Array.isArray,ce=t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Ne={pending:!1,data:null,method:null,action:null},we=[],ot=-1;function Ee(i){return{current:i}}function Je(i){0>ot||(i.current=we[ot],we[ot]=null,ot--)}function qe(i,a){ot++,we[ot]=i.current,i.current=a}var It=Ee(null),nn=Ee(null),dn=Ee(null),oi=Ee(null);function li(i,a){switch(qe(dn,a),qe(nn,i),qe(It,null),i=a.nodeType,i){case 9:case 11:a=(a=a.documentElement)&&(a=a.namespaceURI)?f_(a):0;break;default:if(i=i===8?a.parentNode:a,a=i.tagName,i=i.namespaceURI)i=f_(i),a=m_(i,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}Je(It),qe(It,a)}function Ln(){Je(It),Je(nn),Je(dn)}function Un(i){i.memoizedState!==null&&qe(oi,i);var a=It.current,o=m_(a,i.type);a!==o&&(qe(nn,i),qe(It,o))}function Ai(i){nn.current===i&&(Je(It),Je(nn)),oi.current===i&&(Je(oi),oc._currentValue=Ne)}var ci=Object.prototype.hasOwnProperty,Vn=n.unstable_scheduleCallback,Hr=n.unstable_cancelCallback,dl=n.unstable_shouldYield,Wa=n.unstable_requestPaint,ue=n.unstable_now,Se=n.unstable_getCurrentPriorityLevel,Oe=n.unstable_ImmediatePriority,Ue=n.unstable_UserBlockingPriority,ft=n.unstable_NormalPriority,Ri=n.unstable_LowPriority,zn=n.unstable_IdlePriority,Xa=n.log,ui=n.unstable_setDisableYieldValue,Bn=null,St=null;function Ji(i){if(St&&typeof St.onCommitFiberRoot=="function")try{St.onCommitFiberRoot(Bn,i,void 0,(i.current.flags&128)===128)}catch{}}function yn(i){if(typeof Xa=="function"&&ui(i),St&&typeof St.setStrictMode=="function")try{St.setStrictMode(Bn,i)}catch{}}var Pt=Math.clz32?Math.clz32:fu,Zi=Math.log,$s=Math.LN2;function fu(i){return i>>>=0,i===0?32:31-(Zi(i)/$s|0)|0}var Ni=128,Gr=4194304;function di(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194176;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function Fn(i,a){var o=i.pendingLanes;if(o===0)return 0;var c=0,h=i.suspendedLanes,g=i.pingedLanes,b=i.warmLanes;i=i.finishedLanes!==0;var S=o&134217727;return S!==0?(o=S&~h,o!==0?c=di(o):(g&=S,g!==0?c=di(g):i||(b=S&~b,b!==0&&(c=di(b))))):(S=o&~h,S!==0?c=di(S):g!==0?c=di(g):i||(b=o&~b,b!==0&&(c=di(b)))),c===0?0:a!==0&&a!==c&&(a&h)===0&&(h=c&-c,b=a&-a,h>=b||h===32&&(b&4194176)!==0)?a:c}function $r(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Ks(i,a){switch(i){case 1:case 2:case 4:case 8:return a+250;case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hl(){var i=Ni;return Ni<<=1,(Ni&4194176)===0&&(Ni=128),i}function Kr(){var i=Gr;return Gr<<=1,(Gr&62914560)===0&&(Gr=4194304),i}function Ys(i){for(var a=[],o=0;31>o;o++)a.push(i);return a}function At(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function mu(i,a,o,c,h,g){var b=i.pendingLanes;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=o,i.entangledLanes&=o,i.errorRecoveryDisabledLanes&=o,i.shellSuspendCounter=0;var S=i.entanglements,j=i.expirationTimes,F=i.hiddenUpdates;for(o=b&~o;0<o;){var Z=31-Pt(o),ae=1<<Z;S[Z]=0,j[Z]=-1;var K=F[Z];if(K!==null)for(F[Z]=null,Z=0;Z<K.length;Z++){var J=K[Z];J!==null&&(J.lane&=-536870913)}o&=~ae}c!==0&&Yr(i,c,0),g!==0&&h===0&&i.tag!==0&&(i.suspendedLanes|=g&~(b&~a))}function Yr(i,a,o){i.pendingLanes|=a,i.suspendedLanes&=~a;var c=31-Pt(a);i.entangledLanes|=a,i.entanglements[c]=i.entanglements[c]|1073741824|o&4194218}function Qr(i,a){var o=i.entangledLanes|=a;for(i=i.entanglements;o;){var c=31-Pt(o),h=1<<c;h&a|i[c]&a&&(i[c]|=a),o&=~h}}function pu(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function gu(){var i=ce.p;return i!==0?i:(i=window.event,i===void 0?32:k_(i.type))}function Wr(i,a){var o=ce.p;try{return ce.p=i,a()}finally{ce.p=o}}var Ii=Math.random().toString(36).slice(2),Ft="__reactFiber$"+Ii,Mt="__reactProps$"+Ii,er="__reactContainer$"+Ii,Ja="__reactEvents$"+Ii,Qs="__reactListeners$"+Ii,Ci="__reactHandles$"+Ii,fl="__reactResources$"+Ii,Xr="__reactMarker$"+Ii;function Za(i){delete i[Ft],delete i[Mt],delete i[Ja],delete i[Qs],delete i[Ci]}function hi(i){var a=i[Ft];if(a)return a;for(var o=i.parentNode;o;){if(a=o[er]||o[Ft]){if(o=a.alternate,a.child!==null||o!==null&&o.child!==null)for(i=v_(i);i!==null;){if(o=i[Ft])return o;i=v_(i)}return a}i=o,o=i.parentNode}return null}function tr(i){if(i=i[Ft]||i[er]){var a=i.tag;if(a===5||a===6||a===13||a===26||a===27||a===3)return i}return null}function Jr(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function Zr(i){var a=i[fl];return a||(a=i[fl]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function mt(i){i[Xr]=!0}var ml=new Set,Ws={};function Rn(i,a){_n(i,a),_n(i+"Capture",a)}function _n(i,a){for(Ws[i]=a,i=0;i<a.length;i++)ml.add(a[i])}var Nn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uf=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),pl={},gl={};function vu(i){return ci.call(gl,i)?!0:ci.call(pl,i)?!1:uf.test(i)?gl[i]=!0:(pl[i]=!0,!1)}function ea(i,a,o){if(vu(a))if(o===null)i.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var c=a.toLowerCase().slice(0,5);if(c!=="data-"&&c!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+o)}}function ta(i,a,o){if(o===null)i.removeAttribute(a);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+o)}}function qn(i,a,o,c){if(c===null)i.removeAttribute(o);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(o);return}i.setAttributeNS(a,o,""+c)}}function hn(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function yu(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function df(i){var a=yu(i)?"checked":"value",o=Object.getOwnPropertyDescriptor(i.constructor.prototype,a),c=""+i[a];if(!i.hasOwnProperty(a)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var h=o.get,g=o.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return h.call(this)},set:function(b){c=""+b,g.call(this,b)}}),Object.defineProperty(i,a,{enumerable:o.enumerable}),{getValue:function(){return c},setValue:function(b){c=""+b},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function es(i){i._valueTracker||(i._valueTracker=df(i))}function vl(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var o=a.getValue(),c="";return i&&(c=yu(i)?i.checked?"true":"false":i.value),i=c,i!==o?(a.setValue(i),!0):!1}function Xs(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var nr=/[\n"\\]/g;function xt(i){return i.replace(nr,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function na(i,a,o,c,h,g,b,S){i.name="",b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"?i.type=b:i.removeAttribute("type"),a!=null?b==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+hn(a)):i.value!==""+hn(a)&&(i.value=""+hn(a)):b!=="submit"&&b!=="reset"||i.removeAttribute("value"),a!=null?Js(i,b,hn(a)):o!=null?Js(i,b,hn(o)):c!=null&&i.removeAttribute("value"),h==null&&g!=null&&(i.defaultChecked=!!g),h!=null&&(i.checked=h&&typeof h!="function"&&typeof h!="symbol"),S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?i.name=""+hn(S):i.removeAttribute("name")}function ts(i,a,o,c,h,g,b,S){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(i.type=g),a!=null||o!=null){if(!(g!=="submit"&&g!=="reset"||a!=null))return;o=o!=null?""+hn(o):"",a=a!=null?""+hn(a):o,S||a===i.value||(i.value=a),i.defaultValue=a}c=c??h,c=typeof c!="function"&&typeof c!="symbol"&&!!c,i.checked=S?i.checked:!!c,i.defaultChecked=!!c,b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.name=b)}function Js(i,a,o){a==="number"&&Xs(i.ownerDocument)===i||i.defaultValue===""+o||(i.defaultValue=""+o)}function Qe(i,a,o,c){if(i=i.options,a){a={};for(var h=0;h<o.length;h++)a["$"+o[h]]=!0;for(o=0;o<i.length;o++)h=a.hasOwnProperty("$"+i[o].value),i[o].selected!==h&&(i[o].selected=h),h&&c&&(i[o].defaultSelected=!0)}else{for(o=""+hn(o),a=null,h=0;h<i.length;h++){if(i[h].value===o){i[h].selected=!0,c&&(i[h].defaultSelected=!0);return}a!==null||i[h].disabled||(a=i[h])}a!==null&&(a.selected=!0)}}function ns(i,a,o){if(a!=null&&(a=""+hn(a),a!==i.value&&(i.value=a),o==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=o!=null?""+hn(o):""}function ia(i,a,o,c){if(a==null){if(c!=null){if(o!=null)throw Error(r(92));if(de(c)){if(1<c.length)throw Error(r(93));c=c[0]}o=c}o==null&&(o=""),a=o}o=hn(a),i.defaultValue=o,c=i.textContent,c===o&&c!==""&&c!==null&&(i.value=c)}function Hn(i,a){if(a){var o=i.firstChild;if(o&&o===i.lastChild&&o.nodeType===3){o.nodeValue=a;return}}i.textContent=a}var hf=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function yl(i,a,o){var c=a.indexOf("--")===0;o==null||typeof o=="boolean"||o===""?c?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":c?i.setProperty(a,o):typeof o!="number"||o===0||hf.has(a)?a==="float"?i.cssFloat=o:i[a]=(""+o).trim():i[a]=o+"px"}function _u(i,a,o){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,o!=null){for(var c in o)!o.hasOwnProperty(c)||a!=null&&a.hasOwnProperty(c)||(c.indexOf("--")===0?i.setProperty(c,""):c==="float"?i.cssFloat="":i[c]="");for(var h in a)c=a[h],a.hasOwnProperty(h)&&o[h]!==c&&yl(i,h,c)}else for(var g in a)a.hasOwnProperty(g)&&yl(i,g,a[g])}function _l(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ff=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),mf=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Di(i){return mf.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}var Gn=null;function Zs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var ir=null,rr=null;function ar(i){var a=tr(i);if(a&&(i=a.stateNode)){var o=i[Mt]||null;e:switch(i=a.stateNode,a.type){case"input":if(na(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name),a=o.name,o.type==="radio"&&a!=null){for(o=i;o.parentNode;)o=o.parentNode;for(o=o.querySelectorAll('input[name="'+xt(""+a)+'"][type="radio"]'),a=0;a<o.length;a++){var c=o[a];if(c!==i&&c.form===i.form){var h=c[Mt]||null;if(!h)throw Error(r(90));na(c,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(a=0;a<o.length;a++)c=o[a],c.form===i.form&&vl(c)}break e;case"textarea":ns(i,o.value,o.defaultValue);break e;case"select":a=o.value,a!=null&&Qe(i,!!o.multiple,a,!1)}}}var xl=!1;function xu(i,a,o){if(xl)return i(a,o);xl=!0;try{var c=i(a);return c}finally{if(xl=!1,(ir!==null||rr!==null)&&(dd(),ir&&(a=ir,i=rr,rr=ir=null,ar(a),i)))for(a=0;a<i.length;a++)ar(i[a])}}function is(i,a){var o=i.stateNode;if(o===null)return null;var c=o[Mt]||null;if(c===null)return null;o=c[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(c=!c.disabled)||(i=i.type,c=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!c;break e;default:i=!1}if(i)return null;if(o&&typeof o!="function")throw Error(r(231,a,typeof o));return o}var $n=!1;if(Nn)try{var rs={};Object.defineProperty(rs,"passive",{get:function(){$n=!0}}),window.addEventListener("test",rs,rs),window.removeEventListener("test",rs,rs)}catch{$n=!1}var ki=null,ra=null,sr=null;function bl(){if(sr)return sr;var i,a=ra,o=a.length,c,h="value"in ki?ki.value:ki.textContent,g=h.length;for(i=0;i<o&&a[i]===h[i];i++);var b=o-i;for(c=1;c<=b&&a[o-c]===h[g-c];c++);return sr=h.slice(i,1<c?1-c:void 0)}function ji(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Oi(){return!0}function wl(){return!1}function qt(i){function a(o,c,h,g,b){this._reactName=o,this._targetInst=h,this.type=c,this.nativeEvent=g,this.target=b,this.currentTarget=null;for(var S in i)i.hasOwnProperty(S)&&(o=i[S],this[S]=o?o(g):g[S]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Oi:wl,this.isPropagationStopped=wl,this}return D(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var o=this.nativeEvent;o&&(o.preventDefault?o.preventDefault():typeof o.returnValue!="unknown"&&(o.returnValue=!1),this.isDefaultPrevented=Oi)},stopPropagation:function(){var o=this.nativeEvent;o&&(o.stopPropagation?o.stopPropagation():typeof o.cancelBubble!="unknown"&&(o.cancelBubble=!0),this.isPropagationStopped=Oi)},persist:function(){},isPersistent:Oi}),a}var Ze={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eo=qt(Ze),as=D({},Ze,{view:0,detail:0}),bu=qt(as),to,no,Pi,ss=D({},as,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cs,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Pi&&(Pi&&i.type==="mousemove"?(to=i.screenX-Pi.screenX,no=i.screenY-Pi.screenY):no=to=0,Pi=i),to)},movementY:function(i){return"movementY"in i?i.movementY:no}}),Kn=qt(ss),wu=D({},ss,{dataTransfer:0}),pf=qt(wu),os=D({},as,{relatedTarget:0}),io=qt(os),El=D({},Ze,{animationName:0,elapsedTime:0,pseudoElement:0}),ro=qt(El),Eu=D({},Ze,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),ao=qt(Eu),gf=D({},Ze,{data:0}),Tl=qt(gf),ls={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Su={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sl(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=Su[i])?!!a[i]:!1}function cs(){return Sl}var Au=D({},as,{key:function(i){if(i.key){var a=ls[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=ji(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Tu[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cs,charCode:function(i){return i.type==="keypress"?ji(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?ji(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),so=qt(Au),Ru=D({},ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Al=qt(Ru),or=D({},as,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cs}),Nu=qt(or),Iu=D({},Ze,{propertyName:0,elapsedTime:0,pseudoElement:0}),Cu=qt(Iu),Du=D({},ss,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),oo=qt(Du),fn=D({},Ze,{newState:0,oldState:0}),ku=qt(fn),ju=[9,13,27,32],Mi=Nn&&"CompositionEvent"in window,d=null;Nn&&"documentMode"in document&&(d=document.documentMode);var y=Nn&&"TextEvent"in window&&!d,x=Nn&&(!Mi||d&&8<d&&11>=d),R=" ",G=!1;function W(i,a){switch(i){case"keyup":return ju.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var He=!1;function Lt(i,a){switch(i){case"compositionend":return he(a);case"keypress":return a.which!==32?null:(G=!0,R);case"textInput":return i=a.data,i===R&&G?null:i;default:return null}}function Ge(i,a){if(He)return i==="compositionend"||!Mi&&W(i,a)?(i=bl(),sr=ra=ki=null,He=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return x&&a.locale!=="ko"?null:a.data;default:return null}}var Ht={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ut(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!Ht[i.type]:a==="textarea"}function lr(i,a,o,c){ir?rr?rr.push(c):rr=[c]:ir=c,a=gd(a,"onChange"),0<a.length&&(o=new eo("onChange","change",null,o,c),i.push({event:o,listeners:a}))}var Qt=null,Li=null;function Rl(i){l_(i,0)}function Ou(i){var a=Jr(i);if(vl(a))return i}function Lv(i,a){if(i==="change")return a}var Uv=!1;if(Nn){var vf;if(Nn){var yf="oninput"in document;if(!yf){var Vv=document.createElement("div");Vv.setAttribute("oninput","return;"),yf=typeof Vv.oninput=="function"}vf=yf}else vf=!1;Uv=vf&&(!document.documentMode||9<document.documentMode)}function zv(){Qt&&(Qt.detachEvent("onpropertychange",Bv),Li=Qt=null)}function Bv(i){if(i.propertyName==="value"&&Ou(Li)){var a=[];lr(a,Li,i,Zs(i)),xu(Rl,a)}}function UT(i,a,o){i==="focusin"?(zv(),Qt=a,Li=o,Qt.attachEvent("onpropertychange",Bv)):i==="focusout"&&zv()}function VT(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ou(Li)}function zT(i,a){if(i==="click")return Ou(a)}function BT(i,a){if(i==="input"||i==="change")return Ou(a)}function FT(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var In=typeof Object.is=="function"?Object.is:FT;function Nl(i,a){if(In(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var o=Object.keys(i),c=Object.keys(a);if(o.length!==c.length)return!1;for(c=0;c<o.length;c++){var h=o[c];if(!ci.call(a,h)||!In(i[h],a[h]))return!1}return!0}function Fv(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function qv(i,a){var o=Fv(i);i=0;for(var c;o;){if(o.nodeType===3){if(c=i+o.textContent.length,i<=a&&c>=a)return{node:o,offset:a-i};i=c}e:{for(;o;){if(o.nextSibling){o=o.nextSibling;break e}o=o.parentNode}o=void 0}o=Fv(o)}}function Hv(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Hv(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Gv(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=Xs(i.document);a instanceof i.HTMLIFrameElement;){try{var o=typeof a.contentWindow.location.href=="string"}catch{o=!1}if(o)i=a.contentWindow;else break;a=Xs(i.document)}return a}function _f(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}function qT(i,a){var o=Gv(a);a=i.focusedElem;var c=i.selectionRange;if(o!==a&&a&&a.ownerDocument&&Hv(a.ownerDocument.documentElement,a)){if(c!==null&&_f(a)){if(i=c.start,o=c.end,o===void 0&&(o=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(o,a.value.length);else if(o=(i=a.ownerDocument||document)&&i.defaultView||window,o.getSelection){o=o.getSelection();var h=a.textContent.length,g=Math.min(c.start,h);c=c.end===void 0?g:Math.min(c.end,h),!o.extend&&g>c&&(h=c,c=g,g=h),h=qv(a,g);var b=qv(a,c);h&&b&&(o.rangeCount!==1||o.anchorNode!==h.node||o.anchorOffset!==h.offset||o.focusNode!==b.node||o.focusOffset!==b.offset)&&(i=i.createRange(),i.setStart(h.node,h.offset),o.removeAllRanges(),g>c?(o.addRange(i),o.extend(b.node,b.offset)):(i.setEnd(b.node,b.offset),o.addRange(i)))}}for(i=[],o=a;o=o.parentNode;)o.nodeType===1&&i.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)o=i[a],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var HT=Nn&&"documentMode"in document&&11>=document.documentMode,lo=null,xf=null,Il=null,bf=!1;function $v(i,a,o){var c=o.window===o?o.document:o.nodeType===9?o:o.ownerDocument;bf||lo==null||lo!==Xs(c)||(c=lo,"selectionStart"in c&&_f(c)?c={start:c.selectionStart,end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset}),Il&&Nl(Il,c)||(Il=c,c=gd(xf,"onSelect"),0<c.length&&(a=new eo("onSelect","select",null,a,o),i.push({event:a,listeners:c}),a.target=lo)))}function us(i,a){var o={};return o[i.toLowerCase()]=a.toLowerCase(),o["Webkit"+i]="webkit"+a,o["Moz"+i]="moz"+a,o}var co={animationend:us("Animation","AnimationEnd"),animationiteration:us("Animation","AnimationIteration"),animationstart:us("Animation","AnimationStart"),transitionrun:us("Transition","TransitionRun"),transitionstart:us("Transition","TransitionStart"),transitioncancel:us("Transition","TransitionCancel"),transitionend:us("Transition","TransitionEnd")},wf={},Kv={};Nn&&(Kv=document.createElement("div").style,"AnimationEvent"in window||(delete co.animationend.animation,delete co.animationiteration.animation,delete co.animationstart.animation),"TransitionEvent"in window||delete co.transitionend.transition);function ds(i){if(wf[i])return wf[i];if(!co[i])return i;var a=co[i],o;for(o in a)if(a.hasOwnProperty(o)&&o in Kv)return wf[i]=a[o];return i}var Yv=ds("animationend"),Qv=ds("animationiteration"),Wv=ds("animationstart"),GT=ds("transitionrun"),$T=ds("transitionstart"),KT=ds("transitioncancel"),Xv=ds("transitionend"),Jv=new Map,Zv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll scrollEnd toggle touchMove waiting wheel".split(" ");function fi(i,a){Jv.set(i,a),Rn(a,[i])}var Yn=[],uo=0,Ef=0;function Pu(){for(var i=uo,a=Ef=uo=0;a<i;){var o=Yn[a];Yn[a++]=null;var c=Yn[a];Yn[a++]=null;var h=Yn[a];Yn[a++]=null;var g=Yn[a];if(Yn[a++]=null,c!==null&&h!==null){var b=c.pending;b===null?h.next=h:(h.next=b.next,b.next=h),c.pending=h}g!==0&&ey(o,h,g)}}function Mu(i,a,o,c){Yn[uo++]=i,Yn[uo++]=a,Yn[uo++]=o,Yn[uo++]=c,Ef|=c,i.lanes|=c,i=i.alternate,i!==null&&(i.lanes|=c)}function Tf(i,a,o,c){return Mu(i,a,o,c),Lu(i)}function aa(i,a){return Mu(i,null,null,a),Lu(i)}function ey(i,a,o){i.lanes|=o;var c=i.alternate;c!==null&&(c.lanes|=o);for(var h=!1,g=i.return;g!==null;)g.childLanes|=o,c=g.alternate,c!==null&&(c.childLanes|=o),g.tag===22&&(i=g.stateNode,i===null||i._visibility&1||(h=!0)),i=g,g=g.return;h&&a!==null&&i.tag===3&&(g=i.stateNode,h=31-Pt(o),g=g.hiddenUpdates,i=g[h],i===null?g[h]=[a]:i.push(a),a.lane=o|536870912)}function Lu(i){if(50<ec)throw ec=0,Cm=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var ho={},ty=new WeakMap;function Qn(i,a){if(typeof i=="object"&&i!==null){var o=ty.get(i);return o!==void 0?o:(a={value:i,source:a,stack:ve(a)},ty.set(i,a),a)}return{value:i,source:a,stack:ve(a)}}var fo=[],mo=0,Uu=null,Vu=0,Wn=[],Xn=0,hs=null,cr=1,ur="";function fs(i,a){fo[mo++]=Vu,fo[mo++]=Uu,Uu=i,Vu=a}function ny(i,a,o){Wn[Xn++]=cr,Wn[Xn++]=ur,Wn[Xn++]=hs,hs=i;var c=cr;i=ur;var h=32-Pt(c)-1;c&=~(1<<h),o+=1;var g=32-Pt(a)+h;if(30<g){var b=h-h%5;g=(c&(1<<b)-1).toString(32),c>>=b,h-=b,cr=1<<32-Pt(a)+h|o<<h|c,ur=g+i}else cr=1<<g|o<<h|c,ur=i}function Sf(i){i.return!==null&&(fs(i,1),ny(i,1,0))}function Af(i){for(;i===Uu;)Uu=fo[--mo],fo[mo]=null,Vu=fo[--mo],fo[mo]=null;for(;i===hs;)hs=Wn[--Xn],Wn[Xn]=null,ur=Wn[--Xn],Wn[Xn]=null,cr=Wn[--Xn],Wn[Xn]=null}var mn=null,Wt=null,We=!1,mi=null,Ui=!1,Rf=Error(r(519));function ms(i){var a=Error(r(418,""));throw kl(Qn(a,i)),Rf}function iy(i){var a=i.stateNode,o=i.type,c=i.memoizedProps;switch(a[Ft]=i,a[Mt]=c,o){case"dialog":Fe("cancel",a),Fe("close",a);break;case"iframe":case"object":case"embed":Fe("load",a);break;case"video":case"audio":for(o=0;o<nc.length;o++)Fe(nc[o],a);break;case"source":Fe("error",a);break;case"img":case"image":case"link":Fe("error",a),Fe("load",a);break;case"details":Fe("toggle",a);break;case"input":Fe("invalid",a),ts(a,c.value,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name,!0),es(a);break;case"select":Fe("invalid",a);break;case"textarea":Fe("invalid",a),ia(a,c.value,c.defaultValue,c.children),es(a)}o=c.children,typeof o!="string"&&typeof o!="number"&&typeof o!="bigint"||a.textContent===""+o||c.suppressHydrationWarning===!0||h_(a.textContent,o)?(c.popover!=null&&(Fe("beforetoggle",a),Fe("toggle",a)),c.onScroll!=null&&Fe("scroll",a),c.onScrollEnd!=null&&Fe("scrollend",a),c.onClick!=null&&(a.onclick=vd),a=!0):a=!1,a||ms(i)}function ry(i){for(mn=i.return;mn;)switch(mn.tag){case 3:case 27:Ui=!0;return;case 5:case 13:Ui=!1;return;default:mn=mn.return}}function Cl(i){if(i!==mn)return!1;if(!We)return ry(i),We=!0,!1;var a=!1,o;if((o=i.tag!==3&&i.tag!==27)&&((o=i.tag===5)&&(o=i.type,o=!(o!=="form"&&o!=="button")||Km(i.type,i.memoizedProps)),o=!o),o&&(a=!0),a&&Wt&&ms(i),ry(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));e:{for(i=i.nextSibling,a=0;i;){if(i.nodeType===8)if(o=i.data,o==="/$"){if(a===0){Wt=gi(i.nextSibling);break e}a--}else o!=="$"&&o!=="$!"&&o!=="$?"||a++;i=i.nextSibling}Wt=null}}else Wt=mn?gi(i.stateNode.nextSibling):null;return!0}function Dl(){Wt=mn=null,We=!1}function kl(i){mi===null?mi=[i]:mi.push(i)}var jl=Error(r(460)),ay=Error(r(474)),Nf={then:function(){}};function sy(i){return i=i.status,i==="fulfilled"||i==="rejected"}function zu(){}function oy(i,a,o){switch(o=i[o],o===void 0?i.push(a):o!==a&&(a.then(zu,zu),a=o),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===jl?Error(r(483)):i;default:if(typeof a.status=="string")a.then(zu,zu);else{if(i=lt,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(c){if(a.status==="pending"){var h=a;h.status="fulfilled",h.value=c}},function(c){if(a.status==="pending"){var h=a;h.status="rejected",h.reason=c}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,i===jl?Error(r(483)):i}throw Ol=a,jl}}var Ol=null;function ly(){if(Ol===null)throw Error(r(459));var i=Ol;return Ol=null,i}var po=null,Pl=0;function Bu(i){var a=Pl;return Pl+=1,po===null&&(po=[]),oy(po,i,a)}function Ml(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function Fu(i,a){throw a.$$typeof===l?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function cy(i){var a=i._init;return a(i._payload)}function uy(i){function a(q,z){if(i){var $=q.deletions;$===null?(q.deletions=[z],q.flags|=16):$.push(z)}}function o(q,z){if(!i)return null;for(;z!==null;)a(q,z),z=z.sibling;return null}function c(q){for(var z=new Map;q!==null;)q.key!==null?z.set(q.key,q):z.set(q.index,q),q=q.sibling;return z}function h(q,z){return q=va(q,z),q.index=0,q.sibling=null,q}function g(q,z,$){return q.index=$,i?($=q.alternate,$!==null?($=$.index,$<z?(q.flags|=33554434,z):$):(q.flags|=33554434,z)):(q.flags|=1048576,z)}function b(q){return i&&q.alternate===null&&(q.flags|=33554434),q}function S(q,z,$,ne){return z===null||z.tag!==6?(z=wm($,q.mode,ne),z.return=q,z):(z=h(z,$),z.return=q,z)}function j(q,z,$,ne){var ye=$.type;return ye===p?Z(q,z,$.props.children,ne,$.key):z!==null&&(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Y&&cy(ye)===z.type)?(z=h(z,$.props),Ml(z,$),z.return=q,z):(z=sd($.type,$.key,$.props,null,q.mode,ne),Ml(z,$),z.return=q,z)}function F(q,z,$,ne){return z===null||z.tag!==4||z.stateNode.containerInfo!==$.containerInfo||z.stateNode.implementation!==$.implementation?(z=Em($,q.mode,ne),z.return=q,z):(z=h(z,$.children||[]),z.return=q,z)}function Z(q,z,$,ne,ye){return z===null||z.tag!==7?(z=Ts($,q.mode,ne,ye),z.return=q,z):(z=h(z,$),z.return=q,z)}function ae(q,z,$){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=wm(""+z,q.mode,$),z.return=q,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case u:return $=sd(z.type,z.key,z.props,null,q.mode,$),Ml($,z),$.return=q,$;case f:return z=Em(z,q.mode,$),z.return=q,z;case Y:var ne=z._init;return z=ne(z._payload),ae(q,z,$)}if(de(z)||se(z))return z=Ts(z,q.mode,$,null),z.return=q,z;if(typeof z.then=="function")return ae(q,Bu(z),$);if(z.$$typeof===T)return ae(q,id(q,z),$);Fu(q,z)}return null}function K(q,z,$,ne){var ye=z!==null?z.key:null;if(typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint")return ye!==null?null:S(q,z,""+$,ne);if(typeof $=="object"&&$!==null){switch($.$$typeof){case u:return $.key===ye?j(q,z,$,ne):null;case f:return $.key===ye?F(q,z,$,ne):null;case Y:return ye=$._init,$=ye($._payload),K(q,z,$,ne)}if(de($)||se($))return ye!==null?null:Z(q,z,$,ne,null);if(typeof $.then=="function")return K(q,z,Bu($),ne);if($.$$typeof===T)return K(q,z,id(q,$),ne);Fu(q,$)}return null}function J(q,z,$,ne,ye){if(typeof ne=="string"&&ne!==""||typeof ne=="number"||typeof ne=="bigint")return q=q.get($)||null,S(z,q,""+ne,ye);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case u:return q=q.get(ne.key===null?$:ne.key)||null,j(z,q,ne,ye);case f:return q=q.get(ne.key===null?$:ne.key)||null,F(z,q,ne,ye);case Y:var Le=ne._init;return ne=Le(ne._payload),J(q,z,$,ne,ye)}if(de(ne)||se(ne))return q=q.get($)||null,Z(z,q,ne,ye,null);if(typeof ne.then=="function")return J(q,z,$,Bu(ne),ye);if(ne.$$typeof===T)return J(q,z,$,id(z,ne),ye);Fu(z,ne)}return null}function _e(q,z,$,ne){for(var ye=null,Le=null,be=z,Ae=z=0,Kt=null;be!==null&&Ae<$.length;Ae++){be.index>Ae?(Kt=be,be=null):Kt=be.sibling;var Xe=K(q,be,$[Ae],ne);if(Xe===null){be===null&&(be=Kt);break}i&&be&&Xe.alternate===null&&a(q,be),z=g(Xe,z,Ae),Le===null?ye=Xe:Le.sibling=Xe,Le=Xe,be=Kt}if(Ae===$.length)return o(q,be),We&&fs(q,Ae),ye;if(be===null){for(;Ae<$.length;Ae++)be=ae(q,$[Ae],ne),be!==null&&(z=g(be,z,Ae),Le===null?ye=be:Le.sibling=be,Le=be);return We&&fs(q,Ae),ye}for(be=c(be);Ae<$.length;Ae++)Kt=J(be,q,Ae,$[Ae],ne),Kt!==null&&(i&&Kt.alternate!==null&&be.delete(Kt.key===null?Ae:Kt.key),z=g(Kt,z,Ae),Le===null?ye=Kt:Le.sibling=Kt,Le=Kt);return i&&be.forEach(function(Ta){return a(q,Ta)}),We&&fs(q,Ae),ye}function De(q,z,$,ne){if($==null)throw Error(r(151));for(var ye=null,Le=null,be=z,Ae=z=0,Kt=null,Xe=$.next();be!==null&&!Xe.done;Ae++,Xe=$.next()){be.index>Ae?(Kt=be,be=null):Kt=be.sibling;var Ta=K(q,be,Xe.value,ne);if(Ta===null){be===null&&(be=Kt);break}i&&be&&Ta.alternate===null&&a(q,be),z=g(Ta,z,Ae),Le===null?ye=Ta:Le.sibling=Ta,Le=Ta,be=Kt}if(Xe.done)return o(q,be),We&&fs(q,Ae),ye;if(be===null){for(;!Xe.done;Ae++,Xe=$.next())Xe=ae(q,Xe.value,ne),Xe!==null&&(z=g(Xe,z,Ae),Le===null?ye=Xe:Le.sibling=Xe,Le=Xe);return We&&fs(q,Ae),ye}for(be=c(be);!Xe.done;Ae++,Xe=$.next())Xe=J(be,q,Ae,Xe.value,ne),Xe!==null&&(i&&Xe.alternate!==null&&be.delete(Xe.key===null?Ae:Xe.key),z=g(Xe,z,Ae),Le===null?ye=Xe:Le.sibling=Xe,Le=Xe);return i&&be.forEach(function(oA){return a(q,oA)}),We&&fs(q,Ae),ye}function Et(q,z,$,ne){if(typeof $=="object"&&$!==null&&$.type===p&&$.key===null&&($=$.props.children),typeof $=="object"&&$!==null){switch($.$$typeof){case u:e:{for(var ye=$.key;z!==null;){if(z.key===ye){if(ye=$.type,ye===p){if(z.tag===7){o(q,z.sibling),ne=h(z,$.props.children),ne.return=q,q=ne;break e}}else if(z.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===Y&&cy(ye)===z.type){o(q,z.sibling),ne=h(z,$.props),Ml(ne,$),ne.return=q,q=ne;break e}o(q,z);break}else a(q,z);z=z.sibling}$.type===p?(ne=Ts($.props.children,q.mode,ne,$.key),ne.return=q,q=ne):(ne=sd($.type,$.key,$.props,null,q.mode,ne),Ml(ne,$),ne.return=q,q=ne)}return b(q);case f:e:{for(ye=$.key;z!==null;){if(z.key===ye)if(z.tag===4&&z.stateNode.containerInfo===$.containerInfo&&z.stateNode.implementation===$.implementation){o(q,z.sibling),ne=h(z,$.children||[]),ne.return=q,q=ne;break e}else{o(q,z);break}else a(q,z);z=z.sibling}ne=Em($,q.mode,ne),ne.return=q,q=ne}return b(q);case Y:return ye=$._init,$=ye($._payload),Et(q,z,$,ne)}if(de($))return _e(q,z,$,ne);if(se($)){if(ye=se($),typeof ye!="function")throw Error(r(150));return $=ye.call($),De(q,z,$,ne)}if(typeof $.then=="function")return Et(q,z,Bu($),ne);if($.$$typeof===T)return Et(q,z,id(q,$),ne);Fu(q,$)}return typeof $=="string"&&$!==""||typeof $=="number"||typeof $=="bigint"?($=""+$,z!==null&&z.tag===6?(o(q,z.sibling),ne=h(z,$),ne.return=q,q=ne):(o(q,z),ne=wm($,q.mode,ne),ne.return=q,q=ne),b(q)):o(q,z)}return function(q,z,$,ne){try{Pl=0;var ye=Et(q,z,$,ne);return po=null,ye}catch(be){if(be===jl)throw be;var Le=ti(29,be,null,q.mode);return Le.lanes=ne,Le.return=q,Le}finally{}}}var ps=uy(!0),dy=uy(!1),go=Ee(null),qu=Ee(0);function hy(i,a){i=br,qe(qu,i),qe(go,a),br=i|a.baseLanes}function If(){qe(qu,br),qe(go,go.current)}function Cf(){br=qu.current,Je(go),Je(qu)}var Jn=Ee(null),Vi=null;function sa(i){var a=i.alternate;qe(Vt,Vt.current&1),qe(Jn,i),Vi===null&&(a===null||go.current!==null||a.memoizedState!==null)&&(Vi=i)}function fy(i){if(i.tag===22){if(qe(Vt,Vt.current),qe(Jn,i),Vi===null){var a=i.alternate;a!==null&&a.memoizedState!==null&&(Vi=i)}}else oa()}function oa(){qe(Vt,Vt.current),qe(Jn,Jn.current)}function dr(i){Je(Jn),Vi===i&&(Vi=null),Je(Vt)}var Vt=Ee(0);function Hu(i){for(var a=i;a!==null;){if(a.tag===13){var o=a.memoizedState;if(o!==null&&(o=o.dehydrated,o===null||o.data==="$?"||o.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var YT=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(o,c){i.push(c)}};this.abort=function(){a.aborted=!0,i.forEach(function(o){return o()})}},QT=n.unstable_scheduleCallback,WT=n.unstable_NormalPriority,zt={$$typeof:T,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Df(){return{controller:new YT,data:new Map,refCount:0}}function Ll(i){i.refCount--,i.refCount===0&&QT(WT,function(){i.controller.abort()})}var Ul=null,kf=0,vo=0,yo=null;function XT(i,a){if(Ul===null){var o=Ul=[];kf=0,vo=Um(),yo={status:"pending",value:void 0,then:function(c){o.push(c)}}}return kf++,a.then(my,my),a}function my(){if(--kf===0&&Ul!==null){yo!==null&&(yo.status="fulfilled");var i=Ul;Ul=null,vo=0,yo=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function JT(i,a){var o=[],c={status:"pending",value:null,reason:null,then:function(h){o.push(h)}};return i.then(function(){c.status="fulfilled",c.value=a;for(var h=0;h<o.length;h++)(0,o[h])(a)},function(h){for(c.status="rejected",c.reason=h,h=0;h<o.length;h++)(0,o[h])(void 0)}),c}var py=A.S;A.S=function(i,a){typeof a=="object"&&a!==null&&typeof a.then=="function"&&XT(i,a),py!==null&&py(i,a)};var gs=Ee(null);function jf(){var i=gs.current;return i!==null?i:lt.pooledCache}function Gu(i,a){a===null?qe(gs,gs.current):qe(gs,a.pool)}function gy(){var i=jf();return i===null?null:{parent:zt._currentValue,pool:i}}var la=0,Pe=null,tt=null,Ct=null,$u=!1,_o=!1,vs=!1,Ku=0,Vl=0,xo=null,ZT=0;function Rt(){throw Error(r(321))}function Of(i,a){if(a===null)return!1;for(var o=0;o<a.length&&o<i.length;o++)if(!In(i[o],a[o]))return!1;return!0}function Pf(i,a,o,c,h,g){return la=g,Pe=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,A.H=i===null||i.memoizedState===null?ys:ca,vs=!1,g=o(c,h),vs=!1,_o&&(g=yy(a,o,c,h)),vy(i),g}function vy(i){A.H=zi;var a=tt!==null&&tt.next!==null;if(la=0,Ct=tt=Pe=null,$u=!1,Vl=0,xo=null,a)throw Error(r(300));i===null||Gt||(i=i.dependencies,i!==null&&nd(i)&&(Gt=!0))}function yy(i,a,o,c){Pe=i;var h=0;do{if(_o&&(xo=null),Vl=0,_o=!1,25<=h)throw Error(r(301));if(h+=1,Ct=tt=null,i.updateQueue!=null){var g=i.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}A.H=_s,g=a(o,c)}while(_o);return g}function eS(){var i=A.H,a=i.useState()[0];return a=typeof a.then=="function"?zl(a):a,i=i.useState()[0],(tt!==null?tt.memoizedState:null)!==i&&(Pe.flags|=1024),a}function Mf(){var i=Ku!==0;return Ku=0,i}function Lf(i,a,o){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~o}function Uf(i){if($u){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}$u=!1}la=0,Ct=tt=Pe=null,_o=!1,Vl=Ku=0,xo=null}function xn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ct===null?Pe.memoizedState=Ct=i:Ct=Ct.next=i,Ct}function Dt(){if(tt===null){var i=Pe.alternate;i=i!==null?i.memoizedState:null}else i=tt.next;var a=Ct===null?Pe.memoizedState:Ct.next;if(a!==null)Ct=a,tt=i;else{if(i===null)throw Pe.alternate===null?Error(r(467)):Error(r(310));tt=i,i={memoizedState:tt.memoizedState,baseState:tt.baseState,baseQueue:tt.baseQueue,queue:tt.queue,next:null},Ct===null?Pe.memoizedState=Ct=i:Ct=Ct.next=i}return Ct}var Yu;Yu=function(){return{lastEffect:null,events:null,stores:null,memoCache:null}};function zl(i){var a=Vl;return Vl+=1,xo===null&&(xo=[]),i=oy(xo,i,a),a=Pe,(Ct===null?a.memoizedState:Ct.next)===null&&(a=a.alternate,A.H=a===null||a.memoizedState===null?ys:ca),i}function Qu(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return zl(i);if(i.$$typeof===T)return rn(i)}throw Error(r(438,String(i)))}function Vf(i){var a=null,o=Pe.updateQueue;if(o!==null&&(a=o.memoCache),a==null){var c=Pe.alternate;c!==null&&(c=c.updateQueue,c!==null&&(c=c.memoCache,c!=null&&(a={data:c.data.map(function(h){return h.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),o===null&&(o=Yu(),Pe.updateQueue=o),o.memoCache=a,o=a.data[a.index],o===void 0)for(o=a.data[a.index]=Array(i),c=0;c<i;c++)o[c]=ee;return a.index++,o}function hr(i,a){return typeof a=="function"?a(i):a}function Wu(i){var a=Dt();return zf(a,tt,i)}function zf(i,a,o){var c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=o;var h=i.baseQueue,g=c.pending;if(g!==null){if(h!==null){var b=h.next;h.next=g.next,g.next=b}a.baseQueue=h=g,c.pending=null}if(g=i.baseState,h===null)i.memoizedState=g;else{a=h.next;var S=b=null,j=null,F=a,Z=!1;do{var ae=F.lane&-536870913;if(ae!==F.lane?($e&ae)===ae:(la&ae)===ae){var K=F.revertLane;if(K===0)j!==null&&(j=j.next={lane:0,revertLane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),ae===vo&&(Z=!0);else if((la&K)===K){F=F.next,K===vo&&(Z=!0);continue}else ae={lane:0,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},j===null?(S=j=ae,b=g):j=j.next=ae,Pe.lanes|=K,ya|=K;ae=F.action,vs&&o(g,ae),g=F.hasEagerState?F.eagerState:o(g,ae)}else K={lane:ae,revertLane:F.revertLane,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null},j===null?(S=j=K,b=g):j=j.next=K,Pe.lanes|=ae,ya|=ae;F=F.next}while(F!==null&&F!==a);if(j===null?b=g:j.next=S,!In(g,i.memoizedState)&&(Gt=!0,Z&&(o=yo,o!==null)))throw o;i.memoizedState=g,i.baseState=b,i.baseQueue=j,c.lastRenderedState=g}return h===null&&(c.lanes=0),[i.memoizedState,c.dispatch]}function Bf(i){var a=Dt(),o=a.queue;if(o===null)throw Error(r(311));o.lastRenderedReducer=i;var c=o.dispatch,h=o.pending,g=a.memoizedState;if(h!==null){o.pending=null;var b=h=h.next;do g=i(g,b.action),b=b.next;while(b!==h);In(g,a.memoizedState)||(Gt=!0),a.memoizedState=g,a.baseQueue===null&&(a.baseState=g),o.lastRenderedState=g}return[g,c]}function _y(i,a,o){var c=Pe,h=Dt(),g=We;if(g){if(o===void 0)throw Error(r(407));o=o()}else o=a();var b=!In((tt||h).memoizedState,o);if(b&&(h.memoizedState=o,Gt=!0),h=h.queue,Hf(wy.bind(null,c,h,i),[i]),h.getSnapshot!==a||b||Ct!==null&&Ct.memoizedState.tag&1){if(c.flags|=2048,bo(9,by.bind(null,c,h,o,a),{destroy:void 0},null),lt===null)throw Error(r(349));g||(la&60)!==0||xy(c,a,o)}return o}function xy(i,a,o){i.flags|=16384,i={getSnapshot:a,value:o},a=Pe.updateQueue,a===null?(a=Yu(),Pe.updateQueue=a,a.stores=[i]):(o=a.stores,o===null?a.stores=[i]:o.push(i))}function by(i,a,o,c){a.value=o,a.getSnapshot=c,Ey(a)&&Ty(i)}function wy(i,a,o){return o(function(){Ey(a)&&Ty(i)})}function Ey(i){var a=i.getSnapshot;i=i.value;try{var o=a();return!In(i,o)}catch{return!0}}function Ty(i){var a=aa(i,2);a!==null&&pn(a,i,2)}function Ff(i){var a=xn();if(typeof i=="function"){var o=i;if(i=o(),vs){yn(!0);try{o()}finally{yn(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:i},a}function Sy(i,a,o,c){return i.baseState=o,zf(i,tt,typeof c=="function"?c:hr)}function tS(i,a,o,c,h){if(Zu(i))throw Error(r(485));if(i=a.action,i!==null){var g={payload:h,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(b){g.listeners.push(b)}};A.T!==null?o(!0):g.isTransition=!1,c(g),o=a.pending,o===null?(g.next=a.pending=g,Ay(a,g)):(g.next=o.next,a.pending=o.next=g)}}function Ay(i,a){var o=a.action,c=a.payload,h=i.state;if(a.isTransition){var g=A.T,b={};A.T=b;try{var S=o(h,c),j=A.S;j!==null&&j(b,S),Ry(i,a,S)}catch(F){qf(i,a,F)}finally{A.T=g}}else try{g=o(h,c),Ry(i,a,g)}catch(F){qf(i,a,F)}}function Ry(i,a,o){o!==null&&typeof o=="object"&&typeof o.then=="function"?o.then(function(c){Ny(i,a,c)},function(c){return qf(i,a,c)}):Ny(i,a,o)}function Ny(i,a,o){a.status="fulfilled",a.value=o,Iy(a),i.state=o,a=i.pending,a!==null&&(o=a.next,o===a?i.pending=null:(o=o.next,a.next=o,Ay(i,o)))}function qf(i,a,o){var c=i.pending;if(i.pending=null,c!==null){c=c.next;do a.status="rejected",a.reason=o,Iy(a),a=a.next;while(a!==c)}i.action=null}function Iy(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Cy(i,a){return a}function Dy(i,a){if(We){var o=lt.formState;if(o!==null){e:{var c=Pe;if(We){if(Wt){t:{for(var h=Wt,g=Ui;h.nodeType!==8;){if(!g){h=null;break t}if(h=gi(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){Wt=gi(h.nextSibling),c=h.data==="F!";break e}}ms(c)}c=!1}c&&(a=o[0])}}return o=xn(),o.memoizedState=o.baseState=a,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Cy,lastRenderedState:a},o.queue=c,o=Qy.bind(null,Pe,c),c.dispatch=o,c=Ff(!1),g=Qf.bind(null,Pe,!1,c.queue),c=xn(),h={state:a,dispatch:null,action:i,pending:null},c.queue=h,o=tS.bind(null,Pe,h,g,o),h.dispatch=o,c.memoizedState=i,[a,o,!1]}function ky(i){var a=Dt();return jy(a,tt,i)}function jy(i,a,o){a=zf(i,a,Cy)[0],i=Wu(hr)[0],a=typeof a=="object"&&a!==null&&typeof a.then=="function"?zl(a):a;var c=Dt(),h=c.queue,g=h.dispatch;return o!==c.memoizedState&&(Pe.flags|=2048,bo(9,nS.bind(null,h,o),{destroy:void 0},null)),[a,g,i]}function nS(i,a){i.action=a}function Oy(i){var a=Dt(),o=tt;if(o!==null)return jy(a,o,i);Dt(),a=a.memoizedState,o=Dt();var c=o.queue.dispatch;return o.memoizedState=i,[a,c,!1]}function bo(i,a,o,c){return i={tag:i,create:a,inst:o,deps:c,next:null},a=Pe.updateQueue,a===null&&(a=Yu(),Pe.updateQueue=a),o=a.lastEffect,o===null?a.lastEffect=i.next=i:(c=o.next,o.next=i,i.next=c,a.lastEffect=i),i}function Py(){return Dt().memoizedState}function Xu(i,a,o,c){var h=xn();Pe.flags|=i,h.memoizedState=bo(1|a,o,{destroy:void 0},c===void 0?null:c)}function Ju(i,a,o,c){var h=Dt();c=c===void 0?null:c;var g=h.memoizedState.inst;tt!==null&&c!==null&&Of(c,tt.memoizedState.deps)?h.memoizedState=bo(a,o,g,c):(Pe.flags|=i,h.memoizedState=bo(1|a,o,g,c))}function My(i,a){Xu(8390656,8,i,a)}function Hf(i,a){Ju(2048,8,i,a)}function Ly(i,a){return Ju(4,2,i,a)}function Uy(i,a){return Ju(4,4,i,a)}function Vy(i,a){if(typeof a=="function"){i=i();var o=a(i);return function(){typeof o=="function"?o():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function zy(i,a,o){o=o!=null?o.concat([i]):null,Ju(4,4,Vy.bind(null,a,i),o)}function Gf(){}function By(i,a){var o=Dt();a=a===void 0?null:a;var c=o.memoizedState;return a!==null&&Of(a,c[1])?c[0]:(o.memoizedState=[i,a],i)}function Fy(i,a){var o=Dt();a=a===void 0?null:a;var c=o.memoizedState;if(a!==null&&Of(a,c[1]))return c[0];if(c=i(),vs){yn(!0);try{i()}finally{yn(!1)}}return o.memoizedState=[c,a],c}function $f(i,a,o){return o===void 0||(la&1073741824)!==0?i.memoizedState=a:(i.memoizedState=o,i=H0(),Pe.lanes|=i,ya|=i,o)}function qy(i,a,o,c){return In(o,a)?o:go.current!==null?(i=$f(i,o,c),In(i,a)||(Gt=!0),i):(la&42)===0?(Gt=!0,i.memoizedState=o):(i=H0(),Pe.lanes|=i,ya|=i,a)}function Hy(i,a,o,c,h){var g=ce.p;ce.p=g!==0&&8>g?g:8;var b=A.T,S={};A.T=S,Qf(i,!1,a,o);try{var j=h(),F=A.S;if(F!==null&&F(S,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var Z=JT(j,c);Bl(i,a,Z,jn(i))}else Bl(i,a,c,jn(i))}catch(ae){Bl(i,a,{then:function(){},status:"rejected",reason:ae},jn())}finally{ce.p=g,A.T=b}}function iS(){}function Kf(i,a,o,c){if(i.tag!==5)throw Error(r(476));var h=Gy(i).queue;Hy(i,h,a,Ne,o===null?iS:function(){return $y(i),o(c)})}function Gy(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:Ne,baseState:Ne,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:Ne},next:null};var o={};return a.next={memoizedState:o,baseState:o,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:hr,lastRenderedState:o},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function $y(i){var a=Gy(i).next.queue;Bl(i,a,{},jn())}function Yf(){return rn(oc)}function Ky(){return Dt().memoizedState}function Yy(){return Dt().memoizedState}function rS(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var o=jn();i=ha(o);var c=fa(a,i,o);c!==null&&(pn(c,a,o),Hl(c,a,o)),a={cache:Df()},i.payload=a;return}a=a.return}}function aS(i,a,o){var c=jn();o={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null},Zu(i)?Wy(a,o):(o=Tf(i,a,o,c),o!==null&&(pn(o,i,c),Xy(o,a,c)))}function Qy(i,a,o){var c=jn();Bl(i,a,o,c)}function Bl(i,a,o,c){var h={lane:c,revertLane:0,action:o,hasEagerState:!1,eagerState:null,next:null};if(Zu(i))Wy(a,h);else{var g=i.alternate;if(i.lanes===0&&(g===null||g.lanes===0)&&(g=a.lastRenderedReducer,g!==null))try{var b=a.lastRenderedState,S=g(b,o);if(h.hasEagerState=!0,h.eagerState=S,In(S,b))return Mu(i,a,h,0),lt===null&&Pu(),!1}catch{}finally{}if(o=Tf(i,a,h,c),o!==null)return pn(o,i,c),Xy(o,a,c),!0}return!1}function Qf(i,a,o,c){if(c={lane:2,revertLane:Um(),action:c,hasEagerState:!1,eagerState:null,next:null},Zu(i)){if(a)throw Error(r(479))}else a=Tf(i,o,c,2),a!==null&&pn(a,i,2)}function Zu(i){var a=i.alternate;return i===Pe||a!==null&&a===Pe}function Wy(i,a){_o=$u=!0;var o=i.pending;o===null?a.next=a:(a.next=o.next,o.next=a),i.pending=a}function Xy(i,a,o){if((o&4194176)!==0){var c=a.lanes;c&=i.pendingLanes,o|=c,a.lanes=o,Qr(i,o)}}var zi={readContext:rn,use:Qu,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt};zi.useCacheRefresh=Rt,zi.useMemoCache=Rt,zi.useHostTransitionStatus=Rt,zi.useFormState=Rt,zi.useActionState=Rt,zi.useOptimistic=Rt;var ys={readContext:rn,use:Qu,useCallback:function(i,a){return xn().memoizedState=[i,a===void 0?null:a],i},useContext:rn,useEffect:My,useImperativeHandle:function(i,a,o){o=o!=null?o.concat([i]):null,Xu(4194308,4,Vy.bind(null,a,i),o)},useLayoutEffect:function(i,a){return Xu(4194308,4,i,a)},useInsertionEffect:function(i,a){Xu(4,2,i,a)},useMemo:function(i,a){var o=xn();a=a===void 0?null:a;var c=i();if(vs){yn(!0);try{i()}finally{yn(!1)}}return o.memoizedState=[c,a],c},useReducer:function(i,a,o){var c=xn();if(o!==void 0){var h=o(a);if(vs){yn(!0);try{o(a)}finally{yn(!1)}}}else h=a;return c.memoizedState=c.baseState=h,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:h},c.queue=i,i=i.dispatch=aS.bind(null,Pe,i),[c.memoizedState,i]},useRef:function(i){var a=xn();return i={current:i},a.memoizedState=i},useState:function(i){i=Ff(i);var a=i.queue,o=Qy.bind(null,Pe,a);return a.dispatch=o,[i.memoizedState,o]},useDebugValue:Gf,useDeferredValue:function(i,a){var o=xn();return $f(o,i,a)},useTransition:function(){var i=Ff(!1);return i=Hy.bind(null,Pe,i.queue,!0,!1),xn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,o){var c=Pe,h=xn();if(We){if(o===void 0)throw Error(r(407));o=o()}else{if(o=a(),lt===null)throw Error(r(349));($e&60)!==0||xy(c,a,o)}h.memoizedState=o;var g={value:o,getSnapshot:a};return h.queue=g,My(wy.bind(null,c,g,i),[i]),c.flags|=2048,bo(9,by.bind(null,c,g,o,a),{destroy:void 0},null),o},useId:function(){var i=xn(),a=lt.identifierPrefix;if(We){var o=ur,c=cr;o=(c&~(1<<32-Pt(c)-1)).toString(32)+o,a=":"+a+"R"+o,o=Ku++,0<o&&(a+="H"+o.toString(32)),a+=":"}else o=ZT++,a=":"+a+"r"+o.toString(32)+":";return i.memoizedState=a},useCacheRefresh:function(){return xn().memoizedState=rS.bind(null,Pe)}};ys.useMemoCache=Vf,ys.useHostTransitionStatus=Yf,ys.useFormState=Dy,ys.useActionState=Dy,ys.useOptimistic=function(i){var a=xn();a.memoizedState=a.baseState=i;var o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=o,a=Qf.bind(null,Pe,!0,o),o.dispatch=a,[i,a]};var ca={readContext:rn,use:Qu,useCallback:By,useContext:rn,useEffect:Hf,useImperativeHandle:zy,useInsertionEffect:Ly,useLayoutEffect:Uy,useMemo:Fy,useReducer:Wu,useRef:Py,useState:function(){return Wu(hr)},useDebugValue:Gf,useDeferredValue:function(i,a){var o=Dt();return qy(o,tt.memoizedState,i,a)},useTransition:function(){var i=Wu(hr)[0],a=Dt().memoizedState;return[typeof i=="boolean"?i:zl(i),a]},useSyncExternalStore:_y,useId:Ky};ca.useCacheRefresh=Yy,ca.useMemoCache=Vf,ca.useHostTransitionStatus=Yf,ca.useFormState=ky,ca.useActionState=ky,ca.useOptimistic=function(i,a){var o=Dt();return Sy(o,tt,i,a)};var _s={readContext:rn,use:Qu,useCallback:By,useContext:rn,useEffect:Hf,useImperativeHandle:zy,useInsertionEffect:Ly,useLayoutEffect:Uy,useMemo:Fy,useReducer:Bf,useRef:Py,useState:function(){return Bf(hr)},useDebugValue:Gf,useDeferredValue:function(i,a){var o=Dt();return tt===null?$f(o,i,a):qy(o,tt.memoizedState,i,a)},useTransition:function(){var i=Bf(hr)[0],a=Dt().memoizedState;return[typeof i=="boolean"?i:zl(i),a]},useSyncExternalStore:_y,useId:Ky};_s.useCacheRefresh=Yy,_s.useMemoCache=Vf,_s.useHostTransitionStatus=Yf,_s.useFormState=Oy,_s.useActionState=Oy,_s.useOptimistic=function(i,a){var o=Dt();return tt!==null?Sy(o,tt,i,a):(o.baseState=i,[i,o.queue.dispatch])};function Wf(i,a,o,c){a=i.memoizedState,o=o(c,a),o=o==null?a:D({},a,o),i.memoizedState=o,i.lanes===0&&(i.updateQueue.baseState=o)}var Xf={isMounted:function(i){return(i=i._reactInternals)?fe(i)===i:!1},enqueueSetState:function(i,a,o){i=i._reactInternals;var c=jn(),h=ha(c);h.payload=a,o!=null&&(h.callback=o),a=fa(i,h,c),a!==null&&(pn(a,i,c),Hl(a,i,c))},enqueueReplaceState:function(i,a,o){i=i._reactInternals;var c=jn(),h=ha(c);h.tag=1,h.payload=a,o!=null&&(h.callback=o),a=fa(i,h,c),a!==null&&(pn(a,i,c),Hl(a,i,c))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var o=jn(),c=ha(o);c.tag=2,a!=null&&(c.callback=a),a=fa(i,c,o),a!==null&&(pn(a,i,o),Hl(a,i,o))}};function Jy(i,a,o,c,h,g,b){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(c,g,b):a.prototype&&a.prototype.isPureReactComponent?!Nl(o,c)||!Nl(h,g):!0}function Zy(i,a,o,c){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(o,c),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(o,c),a.state!==i&&Xf.enqueueReplaceState(a,a.state,null)}function xs(i,a){var o=a;if("ref"in a){o={};for(var c in a)c!=="ref"&&(o[c]=a[c])}if(i=i.defaultProps){o===a&&(o=D({},o));for(var h in i)o[h]===void 0&&(o[h]=i[h])}return o}var ed=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)};function e0(i){ed(i)}function t0(i){console.error(i)}function n0(i){ed(i)}function td(i,a){try{var o=i.onUncaughtError;o(a.value,{componentStack:a.stack})}catch(c){setTimeout(function(){throw c})}}function i0(i,a,o){try{var c=i.onCaughtError;c(o.value,{componentStack:o.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Jf(i,a,o){return o=ha(o),o.tag=3,o.payload={element:null},o.callback=function(){td(i,a)},o}function r0(i){return i=ha(i),i.tag=3,i}function a0(i,a,o,c){var h=o.type.getDerivedStateFromError;if(typeof h=="function"){var g=c.value;i.payload=function(){return h(g)},i.callback=function(){i0(a,o,c)}}var b=o.stateNode;b!==null&&typeof b.componentDidCatch=="function"&&(i.callback=function(){i0(a,o,c),typeof h!="function"&&(_a===null?_a=new Set([this]):_a.add(this));var S=c.stack;this.componentDidCatch(c.value,{componentStack:S!==null?S:""})})}function sS(i,a,o,c,h){if(o.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){if(a=o.alternate,a!==null&&ql(a,o,h,!0),o=Jn.current,o!==null){switch(o.tag){case 13:return Vi===null?jm():o.alternate===null&&wt===0&&(wt=3),o.flags&=-257,o.flags|=65536,o.lanes=h,c===Nf?o.flags|=16384:(a=o.updateQueue,a===null?o.updateQueue=new Set([c]):a.add(c),Pm(i,c,h)),!1;case 22:return o.flags|=65536,c===Nf?o.flags|=16384:(a=o.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([c])},o.updateQueue=a):(o=a.retryQueue,o===null?a.retryQueue=new Set([c]):o.add(c)),Pm(i,c,h)),!1}throw Error(r(435,o.tag))}return Pm(i,c,h),jm(),!1}if(We)return a=Jn.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=h,c!==Rf&&(i=Error(r(422),{cause:c}),kl(Qn(i,o)))):(c!==Rf&&(a=Error(r(423),{cause:c}),kl(Qn(a,o))),i=i.current.alternate,i.flags|=65536,h&=-h,i.lanes|=h,c=Qn(c,o),h=Jf(i.stateNode,c,h),fm(i,h),wt!==4&&(wt=2)),!1;var g=Error(r(520),{cause:c});if(g=Qn(g,o),Jl===null?Jl=[g]:Jl.push(g),wt!==4&&(wt=2),a===null)return!0;c=Qn(c,o),o=a;do{switch(o.tag){case 3:return o.flags|=65536,i=h&-h,o.lanes|=i,i=Jf(o.stateNode,c,i),fm(o,i),!1;case 1:if(a=o.type,g=o.stateNode,(o.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(_a===null||!_a.has(g))))return o.flags|=65536,h&=-h,o.lanes|=h,h=r0(h),a0(h,i,o,c),fm(o,h),!1}o=o.return}while(o!==null);return!1}var s0=Error(r(461)),Gt=!1;function Xt(i,a,o,c){a.child=i===null?dy(a,null,o,c):ps(a,i.child,o,c)}function o0(i,a,o,c,h){o=o.render;var g=a.ref;if("ref"in c){var b={};for(var S in c)S!=="ref"&&(b[S]=c[S])}else b=c;return ws(a),c=Pf(i,a,o,b,g,h),S=Mf(),i!==null&&!Gt?(Lf(i,a,h),fr(i,a,h)):(We&&S&&Sf(a),a.flags|=1,Xt(i,a,c,h),a.child)}function l0(i,a,o,c,h){if(i===null){var g=o.type;return typeof g=="function"&&!bm(g)&&g.defaultProps===void 0&&o.compare===null?(a.tag=15,a.type=g,c0(i,a,g,c,h)):(i=sd(o.type,null,c,a,a.mode,h),i.ref=a.ref,i.return=a,a.child=i)}if(g=i.child,!om(i,h)){var b=g.memoizedProps;if(o=o.compare,o=o!==null?o:Nl,o(b,c)&&i.ref===a.ref)return fr(i,a,h)}return a.flags|=1,i=va(g,c),i.ref=a.ref,i.return=a,a.child=i}function c0(i,a,o,c,h){if(i!==null){var g=i.memoizedProps;if(Nl(g,c)&&i.ref===a.ref)if(Gt=!1,a.pendingProps=c=g,om(i,h))(i.flags&131072)!==0&&(Gt=!0);else return a.lanes=i.lanes,fr(i,a,h)}return Zf(i,a,o,c,h)}function u0(i,a,o){var c=a.pendingProps,h=c.children,g=(a.stateNode._pendingVisibility&2)!==0,b=i!==null?i.memoizedState:null;if(Fl(i,a),c.mode==="hidden"||g){if((a.flags&128)!==0){if(c=b!==null?b.baseLanes|o:o,i!==null){for(h=a.child=i.child,g=0;h!==null;)g=g|h.lanes|h.childLanes,h=h.sibling;a.childLanes=g&~c}else a.childLanes=0,a.child=null;return d0(i,a,c,o)}if((o&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Gu(a,b!==null?b.cachePool:null),b!==null?hy(a,b):If(),fy(a);else return a.lanes=a.childLanes=536870912,d0(i,a,b!==null?b.baseLanes|o:o,o)}else b!==null?(Gu(a,b.cachePool),hy(a,b),oa(),a.memoizedState=null):(i!==null&&Gu(a,null),If(),oa());return Xt(i,a,h,o),a.child}function d0(i,a,o,c){var h=jf();return h=h===null?null:{parent:zt._currentValue,pool:h},a.memoizedState={baseLanes:o,cachePool:h},i!==null&&Gu(a,null),If(),fy(a),i!==null&&ql(i,a,c,!0),null}function Fl(i,a){var o=a.ref;if(o===null)i!==null&&i.ref!==null&&(a.flags|=2097664);else{if(typeof o!="function"&&typeof o!="object")throw Error(r(284));(i===null||i.ref!==o)&&(a.flags|=2097664)}}function Zf(i,a,o,c,h){return ws(a),o=Pf(i,a,o,c,void 0,h),c=Mf(),i!==null&&!Gt?(Lf(i,a,h),fr(i,a,h)):(We&&c&&Sf(a),a.flags|=1,Xt(i,a,o,h),a.child)}function h0(i,a,o,c,h,g){return ws(a),a.updateQueue=null,o=yy(a,c,o,h),vy(i),c=Mf(),i!==null&&!Gt?(Lf(i,a,g),fr(i,a,g)):(We&&c&&Sf(a),a.flags|=1,Xt(i,a,o,g),a.child)}function f0(i,a,o,c,h){if(ws(a),a.stateNode===null){var g=ho,b=o.contextType;typeof b=="object"&&b!==null&&(g=rn(b)),g=new o(c,g),a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Xf,a.stateNode=g,g._reactInternals=a,g=a.stateNode,g.props=c,g.state=a.memoizedState,g.refs={},dm(a),b=o.contextType,g.context=typeof b=="object"&&b!==null?rn(b):ho,g.state=a.memoizedState,b=o.getDerivedStateFromProps,typeof b=="function"&&(Wf(a,o,b,c),g.state=a.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(b=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),b!==g.state&&Xf.enqueueReplaceState(g,g.state,null),$l(a,c,g,h),Gl(),g.state=a.memoizedState),typeof g.componentDidMount=="function"&&(a.flags|=4194308),c=!0}else if(i===null){g=a.stateNode;var S=a.memoizedProps,j=xs(o,S);g.props=j;var F=g.context,Z=o.contextType;b=ho,typeof Z=="object"&&Z!==null&&(b=rn(Z));var ae=o.getDerivedStateFromProps;Z=typeof ae=="function"||typeof g.getSnapshotBeforeUpdate=="function",S=a.pendingProps!==S,Z||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S||F!==b)&&Zy(a,g,c,b),da=!1;var K=a.memoizedState;g.state=K,$l(a,c,g,h),Gl(),F=a.memoizedState,S||K!==F||da?(typeof ae=="function"&&(Wf(a,o,ae,c),F=a.memoizedState),(j=da||Jy(a,o,j,c,K,F,b))?(Z||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(a.flags|=4194308)):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=c,a.memoizedState=F),g.props=c,g.state=F,g.context=b,c=j):(typeof g.componentDidMount=="function"&&(a.flags|=4194308),c=!1)}else{g=a.stateNode,hm(i,a),b=a.memoizedProps,Z=xs(o,b),g.props=Z,ae=a.pendingProps,K=g.context,F=o.contextType,j=ho,typeof F=="object"&&F!==null&&(j=rn(F)),S=o.getDerivedStateFromProps,(F=typeof S=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(b!==ae||K!==j)&&Zy(a,g,c,j),da=!1,K=a.memoizedState,g.state=K,$l(a,c,g,h),Gl();var J=a.memoizedState;b!==ae||K!==J||da||i!==null&&i.dependencies!==null&&nd(i.dependencies)?(typeof S=="function"&&(Wf(a,o,S,c),J=a.memoizedState),(Z=da||Jy(a,o,Z,c,K,J,j)||i!==null&&i.dependencies!==null&&nd(i.dependencies))?(F||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(c,J,j),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(c,J,j)),typeof g.componentDidUpdate=="function"&&(a.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&K===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&K===i.memoizedState||(a.flags|=1024),a.memoizedProps=c,a.memoizedState=J),g.props=c,g.state=J,g.context=j,c=Z):(typeof g.componentDidUpdate!="function"||b===i.memoizedProps&&K===i.memoizedState||(a.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||b===i.memoizedProps&&K===i.memoizedState||(a.flags|=1024),c=!1)}return g=c,Fl(i,a),c=(a.flags&128)!==0,g||c?(g=a.stateNode,o=c&&typeof o.getDerivedStateFromError!="function"?null:g.render(),a.flags|=1,i!==null&&c?(a.child=ps(a,i.child,null,h),a.child=ps(a,null,o,h)):Xt(i,a,o,h),a.memoizedState=g.state,i=a.child):i=fr(i,a,h),i}function m0(i,a,o,c){return Dl(),a.flags|=256,Xt(i,a,o,c),a.child}var em={dehydrated:null,treeContext:null,retryLane:0};function tm(i){return{baseLanes:i,cachePool:gy()}}function nm(i,a,o){return i=i!==null?i.childLanes&~o:0,a&&(i|=ni),i}function p0(i,a,o){var c=a.pendingProps,h=!1,g=(a.flags&128)!==0,b;if((b=g)||(b=i!==null&&i.memoizedState===null?!1:(Vt.current&2)!==0),b&&(h=!0,a.flags&=-129),b=(a.flags&32)!==0,a.flags&=-33,i===null){if(We){if(h?sa(a):oa(),We){var S=Wt,j;if(j=S){e:{for(j=S,S=Ui;j.nodeType!==8;){if(!S){S=null;break e}if(j=gi(j.nextSibling),j===null){S=null;break e}}S=j}S!==null?(a.memoizedState={dehydrated:S,treeContext:hs!==null?{id:cr,overflow:ur}:null,retryLane:536870912},j=ti(18,null,null,0),j.stateNode=S,j.return=a,a.child=j,mn=a,Wt=null,j=!0):j=!1}j||ms(a)}if(S=a.memoizedState,S!==null&&(S=S.dehydrated,S!==null))return S.data==="$!"?a.lanes=16:a.lanes=536870912,null;dr(a)}return S=c.children,c=c.fallback,h?(oa(),h=a.mode,S=rm({mode:"hidden",children:S},h),c=Ts(c,h,o,null),S.return=a,c.return=a,S.sibling=c,a.child=S,h=a.child,h.memoizedState=tm(o),h.childLanes=nm(i,b,o),a.memoizedState=em,c):(sa(a),im(a,S))}if(j=i.memoizedState,j!==null&&(S=j.dehydrated,S!==null)){if(g)a.flags&256?(sa(a),a.flags&=-257,a=am(i,a,o)):a.memoizedState!==null?(oa(),a.child=i.child,a.flags|=128,a=null):(oa(),h=c.fallback,S=a.mode,c=rm({mode:"visible",children:c.children},S),h=Ts(h,S,o,null),h.flags|=2,c.return=a,h.return=a,c.sibling=h,a.child=c,ps(a,i.child,null,o),c=a.child,c.memoizedState=tm(o),c.childLanes=nm(i,b,o),a.memoizedState=em,a=h);else if(sa(a),S.data==="$!"){if(b=S.nextSibling&&S.nextSibling.dataset,b)var F=b.dgst;b=F,c=Error(r(419)),c.stack="",c.digest=b,kl({value:c,source:null,stack:null}),a=am(i,a,o)}else if(Gt||ql(i,a,o,!1),b=(o&i.childLanes)!==0,Gt||b){if(b=lt,b!==null){if(c=o&-o,(c&42)!==0)c=1;else switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=64;break;case 268435456:c=134217728;break;default:c=0}if(c=(c&(b.suspendedLanes|o))!==0?0:c,c!==0&&c!==j.retryLane)throw j.retryLane=c,aa(i,c),pn(b,i,c),s0}S.data==="$?"||jm(),a=am(i,a,o)}else S.data==="$?"?(a.flags|=128,a.child=i.child,a=bS.bind(null,i),S._reactRetry=a,a=null):(i=j.treeContext,Wt=gi(S.nextSibling),mn=a,We=!0,mi=null,Ui=!1,i!==null&&(Wn[Xn++]=cr,Wn[Xn++]=ur,Wn[Xn++]=hs,cr=i.id,ur=i.overflow,hs=a),a=im(a,c.children),a.flags|=4096);return a}return h?(oa(),h=c.fallback,S=a.mode,j=i.child,F=j.sibling,c=va(j,{mode:"hidden",children:c.children}),c.subtreeFlags=j.subtreeFlags&31457280,F!==null?h=va(F,h):(h=Ts(h,S,o,null),h.flags|=2),h.return=a,c.return=a,c.sibling=h,a.child=c,c=h,h=a.child,S=i.child.memoizedState,S===null?S=tm(o):(j=S.cachePool,j!==null?(F=zt._currentValue,j=j.parent!==F?{parent:F,pool:F}:j):j=gy(),S={baseLanes:S.baseLanes|o,cachePool:j}),h.memoizedState=S,h.childLanes=nm(i,b,o),a.memoizedState=em,c):(sa(a),o=i.child,i=o.sibling,o=va(o,{mode:"visible",children:c.children}),o.return=a,o.sibling=null,i!==null&&(b=a.deletions,b===null?(a.deletions=[i],a.flags|=16):b.push(i)),a.child=o,a.memoizedState=null,o)}function im(i,a){return a=rm({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function rm(i,a){return B0(i,a,0,null)}function am(i,a,o){return ps(a,i.child,null,o),i=im(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function g0(i,a,o){i.lanes|=a;var c=i.alternate;c!==null&&(c.lanes|=a),cm(i.return,a,o)}function sm(i,a,o,c,h){var g=i.memoizedState;g===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:c,tail:o,tailMode:h}:(g.isBackwards=a,g.rendering=null,g.renderingStartTime=0,g.last=c,g.tail=o,g.tailMode=h)}function v0(i,a,o){var c=a.pendingProps,h=c.revealOrder,g=c.tail;if(Xt(i,a,c.children,o),c=Vt.current,(c&2)!==0)c=c&1|2,a.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&g0(i,o,a);else if(i.tag===19)g0(i,o,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}c&=1}switch(qe(Vt,c),h){case"forwards":for(o=a.child,h=null;o!==null;)i=o.alternate,i!==null&&Hu(i)===null&&(h=o),o=o.sibling;o=h,o===null?(h=a.child,a.child=null):(h=o.sibling,o.sibling=null),sm(a,!1,h,o,g);break;case"backwards":for(o=null,h=a.child,a.child=null;h!==null;){if(i=h.alternate,i!==null&&Hu(i)===null){a.child=h;break}i=h.sibling,h.sibling=o,o=h,h=i}sm(a,!0,o,null,g);break;case"together":sm(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function fr(i,a,o){if(i!==null&&(a.dependencies=i.dependencies),ya|=a.lanes,(o&a.childLanes)===0)if(i!==null){if(ql(i,a,o,!1),(o&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,o=va(i,i.pendingProps),a.child=o,o.return=a;i.sibling!==null;)i=i.sibling,o=o.sibling=va(i,i.pendingProps),o.return=a;o.sibling=null}return a.child}function om(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&nd(i)))}function oS(i,a,o){switch(a.tag){case 3:li(a,a.stateNode.containerInfo),ua(a,zt,i.memoizedState.cache),Dl();break;case 27:case 5:Un(a);break;case 4:li(a,a.stateNode.containerInfo);break;case 10:ua(a,a.type,a.memoizedProps.value);break;case 13:var c=a.memoizedState;if(c!==null)return c.dehydrated!==null?(sa(a),a.flags|=128,null):(o&a.child.childLanes)!==0?p0(i,a,o):(sa(a),i=fr(i,a,o),i!==null?i.sibling:null);sa(a);break;case 19:var h=(i.flags&128)!==0;if(c=(o&a.childLanes)!==0,c||(ql(i,a,o,!1),c=(o&a.childLanes)!==0),h){if(c)return v0(i,a,o);a.flags|=128}if(h=a.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),qe(Vt,Vt.current),c)break;return null;case 22:case 23:return a.lanes=0,u0(i,a,o);case 24:ua(a,zt,i.memoizedState.cache)}return fr(i,a,o)}function y0(i,a,o){if(i!==null)if(i.memoizedProps!==a.pendingProps)Gt=!0;else{if(!om(i,o)&&(a.flags&128)===0)return Gt=!1,oS(i,a,o);Gt=(i.flags&131072)!==0}else Gt=!1,We&&(a.flags&1048576)!==0&&ny(a,Vu,a.index);switch(a.lanes=0,a.tag){case 16:e:{i=a.pendingProps;var c=a.elementType,h=c._init;if(c=h(c._payload),a.type=c,typeof c=="function")bm(c)?(i=xs(c,i),a.tag=1,a=f0(null,a,c,i,o)):(a.tag=0,a=Zf(null,a,c,i,o));else{if(c!=null){if(h=c.$$typeof,h===I){a.tag=11,a=o0(null,a,c,i,o);break e}else if(h===V){a.tag=14,a=l0(null,a,c,i,o);break e}}throw a=N(c)||c,Error(r(306,a,""))}}return a;case 0:return Zf(i,a,a.type,a.pendingProps,o);case 1:return c=a.type,h=xs(c,a.pendingProps),f0(i,a,c,h,o);case 3:e:{if(li(a,a.stateNode.containerInfo),i===null)throw Error(r(387));var g=a.pendingProps;h=a.memoizedState,c=h.element,hm(i,a),$l(a,g,null,o);var b=a.memoizedState;if(g=b.cache,ua(a,zt,g),g!==h.cache&&um(a,[zt],o,!0),Gl(),g=b.element,h.isDehydrated)if(h={element:g,isDehydrated:!1,cache:b.cache},a.updateQueue.baseState=h,a.memoizedState=h,a.flags&256){a=m0(i,a,g,o);break e}else if(g!==c){c=Qn(Error(r(424)),a),kl(c),a=m0(i,a,g,o);break e}else for(Wt=gi(a.stateNode.containerInfo.firstChild),mn=a,We=!0,mi=null,Ui=!0,o=dy(a,null,g,o),a.child=o;o;)o.flags=o.flags&-3|4096,o=o.sibling;else{if(Dl(),g===c){a=fr(i,a,o);break e}Xt(i,a,g,o)}a=a.child}return a;case 26:return Fl(i,a),i===null?(o=b_(a.type,null,a.pendingProps,null))?a.memoizedState=o:We||(o=a.type,i=a.pendingProps,c=yd(dn.current).createElement(o),c[Ft]=a,c[Mt]=i,Jt(c,o,i),mt(c),a.stateNode=c):a.memoizedState=b_(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Un(a),i===null&&We&&(c=a.stateNode=y_(a.type,a.pendingProps,dn.current),mn=a,Ui=!0,Wt=gi(c.firstChild)),c=a.pendingProps.children,i!==null||We?Xt(i,a,c,o):a.child=ps(a,null,c,o),Fl(i,a),a.child;case 5:return i===null&&We&&((h=c=Wt)&&(c=LS(c,a.type,a.pendingProps,Ui),c!==null?(a.stateNode=c,mn=a,Wt=gi(c.firstChild),Ui=!1,h=!0):h=!1),h||ms(a)),Un(a),h=a.type,g=a.pendingProps,b=i!==null?i.memoizedProps:null,c=g.children,Km(h,g)?c=null:b!==null&&Km(h,b)&&(a.flags|=32),a.memoizedState!==null&&(h=Pf(i,a,eS,null,null,o),oc._currentValue=h),Fl(i,a),Xt(i,a,c,o),a.child;case 6:return i===null&&We&&((i=o=Wt)&&(o=US(o,a.pendingProps,Ui),o!==null?(a.stateNode=o,mn=a,Wt=null,i=!0):i=!1),i||ms(a)),null;case 13:return p0(i,a,o);case 4:return li(a,a.stateNode.containerInfo),c=a.pendingProps,i===null?a.child=ps(a,null,c,o):Xt(i,a,c,o),a.child;case 11:return o0(i,a,a.type,a.pendingProps,o);case 7:return Xt(i,a,a.pendingProps,o),a.child;case 8:return Xt(i,a,a.pendingProps.children,o),a.child;case 12:return Xt(i,a,a.pendingProps.children,o),a.child;case 10:return c=a.pendingProps,ua(a,a.type,c.value),Xt(i,a,c.children,o),a.child;case 9:return h=a.type._context,c=a.pendingProps.children,ws(a),h=rn(h),c=c(h),a.flags|=1,Xt(i,a,c,o),a.child;case 14:return l0(i,a,a.type,a.pendingProps,o);case 15:return c0(i,a,a.type,a.pendingProps,o);case 19:return v0(i,a,o);case 22:return u0(i,a,o);case 24:return ws(a),c=rn(zt),i===null?(h=jf(),h===null&&(h=lt,g=Df(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=o),h=g),a.memoizedState={parent:c,cache:h},dm(a),ua(a,zt,h)):((i.lanes&o)!==0&&(hm(i,a),$l(a,null,null,o),Gl()),h=i.memoizedState,g=a.memoizedState,h.parent!==c?(h={parent:c,cache:c},a.memoizedState=h,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=h),ua(a,zt,c)):(c=g.cache,ua(a,zt,c),c!==h.cache&&um(a,[zt],o,!0))),Xt(i,a,a.pendingProps.children,o),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}var lm=Ee(null),bs=null,mr=null;function ua(i,a,o){qe(lm,a._currentValue),a._currentValue=o}function pr(i){i._currentValue=lm.current,Je(lm)}function cm(i,a,o){for(;i!==null;){var c=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,c!==null&&(c.childLanes|=a)):c!==null&&(c.childLanes&a)!==a&&(c.childLanes|=a),i===o)break;i=i.return}}function um(i,a,o,c){var h=i.child;for(h!==null&&(h.return=i);h!==null;){var g=h.dependencies;if(g!==null){var b=h.child;g=g.firstContext;e:for(;g!==null;){var S=g;g=h;for(var j=0;j<a.length;j++)if(S.context===a[j]){g.lanes|=o,S=g.alternate,S!==null&&(S.lanes|=o),cm(g.return,o,i),c||(b=null);break e}g=S.next}}else if(h.tag===18){if(b=h.return,b===null)throw Error(r(341));b.lanes|=o,g=b.alternate,g!==null&&(g.lanes|=o),cm(b,o,i),b=null}else b=h.child;if(b!==null)b.return=h;else for(b=h;b!==null;){if(b===i){b=null;break}if(h=b.sibling,h!==null){h.return=b.return,b=h;break}b=b.return}h=b}}function ql(i,a,o,c){i=null;for(var h=a,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var b=h.alternate;if(b===null)throw Error(r(387));if(b=b.memoizedProps,b!==null){var S=h.type;In(h.pendingProps.value,b.value)||(i!==null?i.push(S):i=[S])}}else if(h===oi.current){if(b=h.alternate,b===null)throw Error(r(387));b.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(i!==null?i.push(oc):i=[oc])}h=h.return}i!==null&&um(a,i,o,c),a.flags|=262144}function nd(i){for(i=i.firstContext;i!==null;){if(!In(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function ws(i){bs=i,mr=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function rn(i){return _0(bs,i)}function id(i,a){return bs===null&&ws(i),_0(i,a)}function _0(i,a){var o=a._currentValue;if(a={context:a,memoizedValue:o,next:null},mr===null){if(i===null)throw Error(r(308));mr=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else mr=mr.next=a;return o}var da=!1;function dm(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hm(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ha(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function fa(i,a,o){var c=i.updateQueue;if(c===null)return null;if(c=c.shared,(gt&2)!==0){var h=c.pending;return h===null?a.next=a:(a.next=h.next,h.next=a),c.pending=a,a=Lu(i),ey(i,null,o),a}return Mu(i,c,a,o),Lu(i)}function Hl(i,a,o){if(a=a.updateQueue,a!==null&&(a=a.shared,(o&4194176)!==0)){var c=a.lanes;c&=i.pendingLanes,o|=c,a.lanes=o,Qr(i,o)}}function fm(i,a){var o=i.updateQueue,c=i.alternate;if(c!==null&&(c=c.updateQueue,o===c)){var h=null,g=null;if(o=o.firstBaseUpdate,o!==null){do{var b={lane:o.lane,tag:o.tag,payload:o.payload,callback:null,next:null};g===null?h=g=b:g=g.next=b,o=o.next}while(o!==null);g===null?h=g=a:g=g.next=a}else h=g=a;o={baseState:c.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:c.shared,callbacks:c.callbacks},i.updateQueue=o;return}i=o.lastBaseUpdate,i===null?o.firstBaseUpdate=a:i.next=a,o.lastBaseUpdate=a}var mm=!1;function Gl(){if(mm){var i=yo;if(i!==null)throw i}}function $l(i,a,o,c){mm=!1;var h=i.updateQueue;da=!1;var g=h.firstBaseUpdate,b=h.lastBaseUpdate,S=h.shared.pending;if(S!==null){h.shared.pending=null;var j=S,F=j.next;j.next=null,b===null?g=F:b.next=F,b=j;var Z=i.alternate;Z!==null&&(Z=Z.updateQueue,S=Z.lastBaseUpdate,S!==b&&(S===null?Z.firstBaseUpdate=F:S.next=F,Z.lastBaseUpdate=j))}if(g!==null){var ae=h.baseState;b=0,Z=F=j=null,S=g;do{var K=S.lane&-536870913,J=K!==S.lane;if(J?($e&K)===K:(c&K)===K){K!==0&&K===vo&&(mm=!0),Z!==null&&(Z=Z.next={lane:0,tag:S.tag,payload:S.payload,callback:null,next:null});e:{var _e=i,De=S;K=a;var Et=o;switch(De.tag){case 1:if(_e=De.payload,typeof _e=="function"){ae=_e.call(Et,ae,K);break e}ae=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=De.payload,K=typeof _e=="function"?_e.call(Et,ae,K):_e,K==null)break e;ae=D({},ae,K);break e;case 2:da=!0}}K=S.callback,K!==null&&(i.flags|=64,J&&(i.flags|=8192),J=h.callbacks,J===null?h.callbacks=[K]:J.push(K))}else J={lane:K,tag:S.tag,payload:S.payload,callback:S.callback,next:null},Z===null?(F=Z=J,j=ae):Z=Z.next=J,b|=K;if(S=S.next,S===null){if(S=h.shared.pending,S===null)break;J=S,S=J.next,J.next=null,h.lastBaseUpdate=J,h.shared.pending=null}}while(!0);Z===null&&(j=ae),h.baseState=j,h.firstBaseUpdate=F,h.lastBaseUpdate=Z,g===null&&(h.shared.lanes=0),ya|=b,i.lanes=b,i.memoizedState=ae}}function x0(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function b0(i,a){var o=i.callbacks;if(o!==null)for(i.callbacks=null,i=0;i<o.length;i++)x0(o[i],a)}function Kl(i,a){try{var o=a.updateQueue,c=o!==null?o.lastEffect:null;if(c!==null){var h=c.next;o=h;do{if((o.tag&i)===i){c=void 0;var g=o.create,b=o.inst;c=g(),b.destroy=c}o=o.next}while(o!==h)}}catch(S){rt(a,a.return,S)}}function ma(i,a,o){try{var c=a.updateQueue,h=c!==null?c.lastEffect:null;if(h!==null){var g=h.next;c=g;do{if((c.tag&i)===i){var b=c.inst,S=b.destroy;if(S!==void 0){b.destroy=void 0,h=a;var j=o;try{S()}catch(F){rt(h,j,F)}}}c=c.next}while(c!==g)}}catch(F){rt(a,a.return,F)}}function w0(i){var a=i.updateQueue;if(a!==null){var o=i.stateNode;try{b0(a,o)}catch(c){rt(i,i.return,c)}}}function E0(i,a,o){o.props=xs(i.type,i.memoizedProps),o.state=i.memoizedState;try{o.componentWillUnmount()}catch(c){rt(i,a,c)}}function Es(i,a){try{var o=i.ref;if(o!==null){var c=i.stateNode;switch(i.tag){case 26:case 27:case 5:var h=c;break;default:h=c}typeof o=="function"?i.refCleanup=o(h):o.current=h}}catch(g){rt(i,a,g)}}function Cn(i,a){var o=i.ref,c=i.refCleanup;if(o!==null)if(typeof c=="function")try{c()}catch(h){rt(i,a,h)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof o=="function")try{o(null)}catch(h){rt(i,a,h)}else o.current=null}function T0(i){var a=i.type,o=i.memoizedProps,c=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":o.autoFocus&&c.focus();break e;case"img":o.src?c.src=o.src:o.srcSet&&(c.srcset=o.srcSet)}}catch(h){rt(i,i.return,h)}}function S0(i,a,o){try{var c=i.stateNode;kS(c,i.type,o,a),c[Mt]=a}catch(h){rt(i,i.return,h)}}function A0(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27||i.tag===4}function pm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||A0(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==27&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function gm(i,a,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?o.nodeType===8?o.parentNode.insertBefore(i,a):o.insertBefore(i,a):(o.nodeType===8?(a=o.parentNode,a.insertBefore(i,o)):(a=o,a.appendChild(i)),o=o._reactRootContainer,o!=null||a.onclick!==null||(a.onclick=vd));else if(c!==4&&c!==27&&(i=i.child,i!==null))for(gm(i,a,o),i=i.sibling;i!==null;)gm(i,a,o),i=i.sibling}function rd(i,a,o){var c=i.tag;if(c===5||c===6)i=i.stateNode,a?o.insertBefore(i,a):o.appendChild(i);else if(c!==4&&c!==27&&(i=i.child,i!==null))for(rd(i,a,o),i=i.sibling;i!==null;)rd(i,a,o),i=i.sibling}var gr=!1,bt=!1,vm=!1,R0=typeof WeakSet=="function"?WeakSet:Set,$t=null,N0=!1;function lS(i,a){if(i=i.containerInfo,Gm=Td,i=Gv(i),_f(i)){if("selectionStart"in i)var o={start:i.selectionStart,end:i.selectionEnd};else e:{o=(o=i.ownerDocument)&&o.defaultView||window;var c=o.getSelection&&o.getSelection();if(c&&c.rangeCount!==0){o=c.anchorNode;var h=c.anchorOffset,g=c.focusNode;c=c.focusOffset;try{o.nodeType,g.nodeType}catch{o=null;break e}var b=0,S=-1,j=-1,F=0,Z=0,ae=i,K=null;t:for(;;){for(var J;ae!==o||h!==0&&ae.nodeType!==3||(S=b+h),ae!==g||c!==0&&ae.nodeType!==3||(j=b+c),ae.nodeType===3&&(b+=ae.nodeValue.length),(J=ae.firstChild)!==null;)K=ae,ae=J;for(;;){if(ae===i)break t;if(K===o&&++F===h&&(S=b),K===g&&++Z===c&&(j=b),(J=ae.nextSibling)!==null)break;ae=K,K=ae.parentNode}ae=J}o=S===-1||j===-1?null:{start:S,end:j}}else o=null}o=o||{start:0,end:0}}else o=null;for($m={focusedElem:i,selectionRange:o},Td=!1,$t=a;$t!==null;)if(a=$t,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,$t=i;else for(;$t!==null;){switch(a=$t,g=a.alternate,i=a.flags,a.tag){case 0:break;case 11:case 15:break;case 1:if((i&1024)!==0&&g!==null){i=void 0,o=a,h=g.memoizedProps,g=g.memoizedState,c=o.stateNode;try{var _e=xs(o.type,h,o.elementType===o.type);i=c.getSnapshotBeforeUpdate(_e,g),c.__reactInternalSnapshotBeforeUpdate=i}catch(De){rt(o,o.return,De)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,o=i.nodeType,o===9)Wm(i);else if(o===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":Wm(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,$t=i;break}$t=a.return}return _e=N0,N0=!1,_e}function I0(i,a,o){var c=o.flags;switch(o.tag){case 0:case 11:case 15:yr(i,o),c&4&&Kl(5,o);break;case 1:if(yr(i,o),c&4)if(i=o.stateNode,a===null)try{i.componentDidMount()}catch(S){rt(o,o.return,S)}else{var h=xs(o.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(h,a,i.__reactInternalSnapshotBeforeUpdate)}catch(S){rt(o,o.return,S)}}c&64&&w0(o),c&512&&Es(o,o.return);break;case 3:if(yr(i,o),c&64&&(c=o.updateQueue,c!==null)){if(i=null,o.child!==null)switch(o.child.tag){case 27:case 5:i=o.child.stateNode;break;case 1:i=o.child.stateNode}try{b0(c,i)}catch(S){rt(o,o.return,S)}}break;case 26:yr(i,o),c&512&&Es(o,o.return);break;case 27:case 5:yr(i,o),a===null&&c&4&&T0(o),c&512&&Es(o,o.return);break;case 12:yr(i,o);break;case 13:yr(i,o),c&4&&k0(i,o);break;case 22:if(h=o.memoizedState!==null||gr,!h){a=a!==null&&a.memoizedState!==null||bt;var g=gr,b=bt;gr=h,(bt=a)&&!b?pa(i,o,(o.subtreeFlags&8772)!==0):yr(i,o),gr=g,bt=b}c&512&&(o.memoizedProps.mode==="manual"?Es(o,o.return):Cn(o,o.return));break;default:yr(i,o)}}function C0(i){var a=i.alternate;a!==null&&(i.alternate=null,C0(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Za(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var kt=null,Dn=!1;function vr(i,a,o){for(o=o.child;o!==null;)D0(i,a,o),o=o.sibling}function D0(i,a,o){if(St&&typeof St.onCommitFiberUnmount=="function")try{St.onCommitFiberUnmount(Bn,o)}catch{}switch(o.tag){case 26:bt||Cn(o,a),vr(i,a,o),o.memoizedState?o.memoizedState.count--:o.stateNode&&(o=o.stateNode,o.parentNode.removeChild(o));break;case 27:bt||Cn(o,a);var c=kt,h=Dn;for(kt=o.stateNode,vr(i,a,o),o=o.stateNode,a=o.attributes;a.length;)o.removeAttributeNode(a[0]);Za(o),kt=c,Dn=h;break;case 5:bt||Cn(o,a);case 6:h=kt;var g=Dn;if(kt=null,vr(i,a,o),kt=h,Dn=g,kt!==null)if(Dn)try{i=kt,c=o.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)}catch(b){rt(o,a,b)}else try{kt.removeChild(o.stateNode)}catch(b){rt(o,a,b)}break;case 18:kt!==null&&(Dn?(a=kt,o=o.stateNode,a.nodeType===8?Qm(a.parentNode,o):a.nodeType===1&&Qm(a,o),dc(a)):Qm(kt,o.stateNode));break;case 4:c=kt,h=Dn,kt=o.stateNode.containerInfo,Dn=!0,vr(i,a,o),kt=c,Dn=h;break;case 0:case 11:case 14:case 15:bt||ma(2,o,a),bt||ma(4,o,a),vr(i,a,o);break;case 1:bt||(Cn(o,a),c=o.stateNode,typeof c.componentWillUnmount=="function"&&E0(o,a,c)),vr(i,a,o);break;case 21:vr(i,a,o);break;case 22:bt||Cn(o,a),bt=(c=bt)||o.memoizedState!==null,vr(i,a,o),bt=c;break;default:vr(i,a,o)}}function k0(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{dc(i)}catch(o){rt(a,a.return,o)}}function cS(i){switch(i.tag){case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new R0),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new R0),a;default:throw Error(r(435,i.tag))}}function ym(i,a){var o=cS(i);a.forEach(function(c){var h=wS.bind(null,i,c);o.has(c)||(o.add(c),c.then(h,h))})}function Zn(i,a){var o=a.deletions;if(o!==null)for(var c=0;c<o.length;c++){var h=o[c],g=i,b=a,S=b;e:for(;S!==null;){switch(S.tag){case 27:case 5:kt=S.stateNode,Dn=!1;break e;case 3:kt=S.stateNode.containerInfo,Dn=!0;break e;case 4:kt=S.stateNode.containerInfo,Dn=!0;break e}S=S.return}if(kt===null)throw Error(r(160));D0(g,b,h),kt=null,Dn=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(a.subtreeFlags&13878)for(a=a.child;a!==null;)j0(a,i),a=a.sibling}var pi=null;function j0(i,a){var o=i.alternate,c=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:Zn(a,i),ei(i),c&4&&(ma(3,i,i.return),Kl(3,i),ma(5,i,i.return));break;case 1:Zn(a,i),ei(i),c&512&&(bt||o===null||Cn(o,o.return)),c&64&&gr&&(i=i.updateQueue,i!==null&&(c=i.callbacks,c!==null&&(o=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=o===null?c:o.concat(c))));break;case 26:var h=pi;if(Zn(a,i),ei(i),c&512&&(bt||o===null||Cn(o,o.return)),c&4){var g=o!==null?o.memoizedState:null;if(c=i.memoizedState,o===null)if(c===null)if(i.stateNode===null){e:{c=i.type,o=i.memoizedProps,h=h.ownerDocument||h;t:switch(c){case"title":g=h.getElementsByTagName("title")[0],(!g||g[Xr]||g[Ft]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(c),h.head.insertBefore(g,h.querySelector("head > title"))),Jt(g,c,o),g[Ft]=i,mt(g),c=g;break e;case"link":var b=T_("link","href",h).get(c+(o.href||""));if(b){for(var S=0;S<b.length;S++)if(g=b[S],g.getAttribute("href")===(o.href==null?null:o.href)&&g.getAttribute("rel")===(o.rel==null?null:o.rel)&&g.getAttribute("title")===(o.title==null?null:o.title)&&g.getAttribute("crossorigin")===(o.crossOrigin==null?null:o.crossOrigin)){b.splice(S,1);break t}}g=h.createElement(c),Jt(g,c,o),h.head.appendChild(g);break;case"meta":if(b=T_("meta","content",h).get(c+(o.content||""))){for(S=0;S<b.length;S++)if(g=b[S],g.getAttribute("content")===(o.content==null?null:""+o.content)&&g.getAttribute("name")===(o.name==null?null:o.name)&&g.getAttribute("property")===(o.property==null?null:o.property)&&g.getAttribute("http-equiv")===(o.httpEquiv==null?null:o.httpEquiv)&&g.getAttribute("charset")===(o.charSet==null?null:o.charSet)){b.splice(S,1);break t}}g=h.createElement(c),Jt(g,c,o),h.head.appendChild(g);break;default:throw Error(r(468,c))}g[Ft]=i,mt(g),c=g}i.stateNode=c}else S_(h,i.type,i.stateNode);else i.stateNode=E_(h,c,i.memoizedProps);else g!==c?(g===null?o.stateNode!==null&&(o=o.stateNode,o.parentNode.removeChild(o)):g.count--,c===null?S_(h,i.type,i.stateNode):E_(h,c,i.memoizedProps)):c===null&&i.stateNode!==null&&S0(i,i.memoizedProps,o.memoizedProps)}break;case 27:if(c&4&&i.alternate===null){h=i.stateNode,g=i.memoizedProps;try{for(var j=h.firstChild;j;){var F=j.nextSibling,Z=j.nodeName;j[Xr]||Z==="HEAD"||Z==="BODY"||Z==="SCRIPT"||Z==="STYLE"||Z==="LINK"&&j.rel.toLowerCase()==="stylesheet"||h.removeChild(j),j=F}for(var ae=i.type,K=h.attributes;K.length;)h.removeAttributeNode(K[0]);Jt(h,ae,g),h[Ft]=i,h[Mt]=g}catch(_e){rt(i,i.return,_e)}}case 5:if(Zn(a,i),ei(i),c&512&&(bt||o===null||Cn(o,o.return)),i.flags&32){h=i.stateNode;try{Hn(h,"")}catch(_e){rt(i,i.return,_e)}}c&4&&i.stateNode!=null&&(h=i.memoizedProps,S0(i,h,o!==null?o.memoizedProps:h)),c&1024&&(vm=!0);break;case 6:if(Zn(a,i),ei(i),c&4){if(i.stateNode===null)throw Error(r(162));c=i.memoizedProps,o=i.stateNode;try{o.nodeValue=c}catch(_e){rt(i,i.return,_e)}}break;case 3:if(bd=null,h=pi,pi=_d(a.containerInfo),Zn(a,i),pi=h,ei(i),c&4&&o!==null&&o.memoizedState.isDehydrated)try{dc(a.containerInfo)}catch(_e){rt(i,i.return,_e)}vm&&(vm=!1,O0(i));break;case 4:c=pi,pi=_d(i.stateNode.containerInfo),Zn(a,i),ei(i),pi=c;break;case 12:Zn(a,i),ei(i);break;case 13:Zn(a,i),ei(i),i.child.flags&8192&&i.memoizedState!==null!=(o!==null&&o.memoizedState!==null)&&(Rm=ue()),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ym(i,c)));break;case 22:if(c&512&&(bt||o===null||Cn(o,o.return)),j=i.memoizedState!==null,F=o!==null&&o.memoizedState!==null,Z=gr,ae=bt,gr=Z||j,bt=ae||F,Zn(a,i),bt=ae,gr=Z,ei(i),a=i.stateNode,a._current=i,a._visibility&=-3,a._visibility|=a._pendingVisibility&2,c&8192&&(a._visibility=j?a._visibility&-2:a._visibility|1,j&&(a=gr||bt,o===null||F||a||wo(i)),i.memoizedProps===null||i.memoizedProps.mode!=="manual"))e:for(o=null,a=i;;){if(a.tag===5||a.tag===26||a.tag===27){if(o===null){F=o=a;try{if(h=F.stateNode,j)g=h.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none";else{b=F.stateNode,S=F.memoizedProps.style;var J=S!=null&&S.hasOwnProperty("display")?S.display:null;b.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(_e){rt(F,F.return,_e)}}}else if(a.tag===6){if(o===null){F=a;try{F.stateNode.nodeValue=j?"":F.memoizedProps}catch(_e){rt(F,F.return,_e)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;o===a&&(o=null),a=a.return}o===a&&(o=null),a.sibling.return=a.return,a=a.sibling}c&4&&(c=i.updateQueue,c!==null&&(o=c.retryQueue,o!==null&&(c.retryQueue=null,ym(i,o))));break;case 19:Zn(a,i),ei(i),c&4&&(c=i.updateQueue,c!==null&&(i.updateQueue=null,ym(i,c)));break;case 21:break;default:Zn(a,i),ei(i)}}function ei(i){var a=i.flags;if(a&2){try{if(i.tag!==27){e:{for(var o=i.return;o!==null;){if(A0(o)){var c=o;break e}o=o.return}throw Error(r(160))}switch(c.tag){case 27:var h=c.stateNode,g=pm(i);rd(i,g,h);break;case 5:var b=c.stateNode;c.flags&32&&(Hn(b,""),c.flags&=-33);var S=pm(i);rd(i,S,b);break;case 3:case 4:var j=c.stateNode.containerInfo,F=pm(i);gm(i,F,j);break;default:throw Error(r(161))}}}catch(Z){rt(i,i.return,Z)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function O0(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;O0(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function yr(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)I0(i,a.alternate,a),a=a.sibling}function wo(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:ma(4,a,a.return),wo(a);break;case 1:Cn(a,a.return);var o=a.stateNode;typeof o.componentWillUnmount=="function"&&E0(a,a.return,o),wo(a);break;case 26:case 27:case 5:Cn(a,a.return),wo(a);break;case 22:Cn(a,a.return),a.memoizedState===null&&wo(a);break;default:wo(a)}i=i.sibling}}function pa(i,a,o){for(o=o&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var c=a.alternate,h=i,g=a,b=g.flags;switch(g.tag){case 0:case 11:case 15:pa(h,g,o),Kl(4,g);break;case 1:if(pa(h,g,o),c=g,h=c.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(F){rt(c,c.return,F)}if(c=g,h=c.updateQueue,h!==null){var S=c.stateNode;try{var j=h.shared.hiddenCallbacks;if(j!==null)for(h.shared.hiddenCallbacks=null,h=0;h<j.length;h++)x0(j[h],S)}catch(F){rt(c,c.return,F)}}o&&b&64&&w0(g),Es(g,g.return);break;case 26:case 27:case 5:pa(h,g,o),o&&c===null&&b&4&&T0(g),Es(g,g.return);break;case 12:pa(h,g,o);break;case 13:pa(h,g,o),o&&b&4&&k0(h,g);break;case 22:g.memoizedState===null&&pa(h,g,o),Es(g,g.return);break;default:pa(h,g,o)}a=a.sibling}}function _m(i,a){var o=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==o&&(i!=null&&i.refCount++,o!=null&&Ll(o))}function xm(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Ll(i))}function ga(i,a,o,c){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)P0(i,a,o,c),a=a.sibling}function P0(i,a,o,c){var h=a.flags;switch(a.tag){case 0:case 11:case 15:ga(i,a,o,c),h&2048&&Kl(9,a);break;case 3:ga(i,a,o,c),h&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Ll(i)));break;case 12:if(h&2048){ga(i,a,o,c),i=a.stateNode;try{var g=a.memoizedProps,b=g.id,S=g.onPostCommit;typeof S=="function"&&S(b,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(j){rt(a,a.return,j)}}else ga(i,a,o,c);break;case 23:break;case 22:g=a.stateNode,a.memoizedState!==null?g._visibility&4?ga(i,a,o,c):Yl(i,a):g._visibility&4?ga(i,a,o,c):(g._visibility|=4,Eo(i,a,o,c,(a.subtreeFlags&10256)!==0)),h&2048&&_m(a.alternate,a);break;case 24:ga(i,a,o,c),h&2048&&xm(a.alternate,a);break;default:ga(i,a,o,c)}}function Eo(i,a,o,c,h){for(h=h&&(a.subtreeFlags&10256)!==0,a=a.child;a!==null;){var g=i,b=a,S=o,j=c,F=b.flags;switch(b.tag){case 0:case 11:case 15:Eo(g,b,S,j,h),Kl(8,b);break;case 23:break;case 22:var Z=b.stateNode;b.memoizedState!==null?Z._visibility&4?Eo(g,b,S,j,h):Yl(g,b):(Z._visibility|=4,Eo(g,b,S,j,h)),h&&F&2048&&_m(b.alternate,b);break;case 24:Eo(g,b,S,j,h),h&&F&2048&&xm(b.alternate,b);break;default:Eo(g,b,S,j,h)}a=a.sibling}}function Yl(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var o=i,c=a,h=c.flags;switch(c.tag){case 22:Yl(o,c),h&2048&&_m(c.alternate,c);break;case 24:Yl(o,c),h&2048&&xm(c.alternate,c);break;default:Yl(o,c)}a=a.sibling}}var Ql=8192;function To(i){if(i.subtreeFlags&Ql)for(i=i.child;i!==null;)M0(i),i=i.sibling}function M0(i){switch(i.tag){case 26:To(i),i.flags&Ql&&i.memoizedState!==null&&XS(pi,i.memoizedState,i.memoizedProps);break;case 5:To(i);break;case 3:case 4:var a=pi;pi=_d(i.stateNode.containerInfo),To(i),pi=a;break;case 22:i.memoizedState===null&&(a=i.alternate,a!==null&&a.memoizedState!==null?(a=Ql,Ql=16777216,To(i),Ql=a):To(i));break;default:To(i)}}function L0(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function Wl(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var c=a[o];$t=c,V0(c,i)}L0(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)U0(i),i=i.sibling}function U0(i){switch(i.tag){case 0:case 11:case 15:Wl(i),i.flags&2048&&ma(9,i,i.return);break;case 3:Wl(i);break;case 12:Wl(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&4&&(i.return===null||i.return.tag!==13)?(a._visibility&=-5,ad(i)):Wl(i);break;default:Wl(i)}}function ad(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var o=0;o<a.length;o++){var c=a[o];$t=c,V0(c,i)}L0(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:ma(8,a,a.return),ad(a);break;case 22:o=a.stateNode,o._visibility&4&&(o._visibility&=-5,ad(a));break;default:ad(a)}i=i.sibling}}function V0(i,a){for(;$t!==null;){var o=$t;switch(o.tag){case 0:case 11:case 15:ma(8,o,a);break;case 23:case 22:if(o.memoizedState!==null&&o.memoizedState.cachePool!==null){var c=o.memoizedState.cachePool.pool;c!=null&&c.refCount++}break;case 24:Ll(o.memoizedState.cache)}if(c=o.child,c!==null)c.return=o,$t=c;else e:for(o=i;$t!==null;){c=$t;var h=c.sibling,g=c.return;if(C0(c),c===o){$t=null;break e}if(h!==null){h.return=g,$t=h;break e}$t=g}}}function uS(i,a,o,c){this.tag=i,this.key=o,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=c,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ti(i,a,o,c){return new uS(i,a,o,c)}function bm(i){return i=i.prototype,!(!i||!i.isReactComponent)}function va(i,a){var o=i.alternate;return o===null?(o=ti(i.tag,a,i.key,i.mode),o.elementType=i.elementType,o.type=i.type,o.stateNode=i.stateNode,o.alternate=i,i.alternate=o):(o.pendingProps=a,o.type=i.type,o.flags=0,o.subtreeFlags=0,o.deletions=null),o.flags=i.flags&31457280,o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,a=i.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},o.sibling=i.sibling,o.index=i.index,o.ref=i.ref,o.refCleanup=i.refCleanup,o}function z0(i,a){i.flags&=31457282;var o=i.alternate;return o===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,a=o.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function sd(i,a,o,c,h,g){var b=0;if(c=i,typeof i=="function")bm(i)&&(b=1);else if(typeof i=="string")b=QS(i,o,It.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case p:return Ts(o.children,h,g,a);case v:b=8,h|=24;break;case _:return i=ti(12,o,a,h|2),i.elementType=_,i.lanes=g,i;case L:return i=ti(13,o,a,h),i.elementType=L,i.lanes=g,i;case P:return i=ti(19,o,a,h),i.elementType=P,i.lanes=g,i;case H:return B0(o,h,g,a);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case E:case T:b=10;break e;case w:b=9;break e;case I:b=11;break e;case V:b=14;break e;case Y:b=16,c=null;break e}b=29,o=Error(r(130,i===null?"null":typeof i,"")),c=null}return a=ti(b,o,a,h),a.elementType=i,a.type=c,a.lanes=g,a}function Ts(i,a,o,c){return i=ti(7,i,c,a),i.lanes=o,i}function B0(i,a,o,c){i=ti(22,i,c,a),i.elementType=H,i.lanes=o;var h={_visibility:1,_pendingVisibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null,_current:null,detach:function(){var g=h._current;if(g===null)throw Error(r(456));if((h._pendingVisibility&2)===0){var b=aa(g,2);b!==null&&(h._pendingVisibility|=2,pn(b,g,2))}},attach:function(){var g=h._current;if(g===null)throw Error(r(456));if((h._pendingVisibility&2)!==0){var b=aa(g,2);b!==null&&(h._pendingVisibility&=-3,pn(b,g,2))}}};return i.stateNode=h,i}function wm(i,a,o){return i=ti(6,i,null,a),i.lanes=o,i}function Em(i,a,o){return a=ti(4,i.children!==null?i.children:[],i.key,a),a.lanes=o,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}function _r(i){i.flags|=4}function F0(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!A_(a)){if(a=Jn.current,a!==null&&(($e&4194176)===$e?Vi!==null:($e&62914560)!==$e&&($e&536870912)===0||a!==Vi))throw Ol=Nf,ay;i.flags|=8192}}function od(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Kr():536870912,i.lanes|=a,Ao|=a)}function Xl(i,a){if(!We)switch(i.tailMode){case"hidden":a=i.tail;for(var o=null;a!==null;)a.alternate!==null&&(o=a),a=a.sibling;o===null?i.tail=null:o.sibling=null;break;case"collapsed":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:c.sibling=null}}function pt(i){var a=i.alternate!==null&&i.alternate.child===i.child,o=0,c=0;if(a)for(var h=i.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags&31457280,c|=h.flags&31457280,h.return=i,h=h.sibling;else for(h=i.child;h!==null;)o|=h.lanes|h.childLanes,c|=h.subtreeFlags,c|=h.flags,h.return=i,h=h.sibling;return i.subtreeFlags|=c,i.childLanes=o,a}function dS(i,a,o){var c=a.pendingProps;switch(Af(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pt(a),null;case 1:return pt(a),null;case 3:return o=a.stateNode,c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),pr(zt),Ln(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Cl(a)?_r(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,mi!==null&&(Dm(mi),mi=null))),pt(a),null;case 26:return o=a.memoizedState,i===null?(_r(a),o!==null?(pt(a),F0(a,o)):(pt(a),a.flags&=-16777217)):o?o!==i.memoizedState?(_r(a),pt(a),F0(a,o)):(pt(a),a.flags&=-16777217):(i.memoizedProps!==c&&_r(a),pt(a),a.flags&=-16777217),null;case 27:Ai(a),o=dn.current;var h=a.type;if(i!==null&&a.stateNode!=null)i.memoizedProps!==c&&_r(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return pt(a),null}i=It.current,Cl(a)?iy(a):(i=y_(h,c,o),a.stateNode=i,_r(a))}return pt(a),null;case 5:if(Ai(a),o=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==c&&_r(a);else{if(!c){if(a.stateNode===null)throw Error(r(166));return pt(a),null}if(i=It.current,Cl(a))iy(a);else{switch(h=yd(dn.current),i){case 1:i=h.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:i=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":i=h.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":i=h.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":i=h.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i=typeof c.is=="string"?h.createElement("select",{is:c.is}):h.createElement("select"),c.multiple?i.multiple=!0:c.size&&(i.size=c.size);break;default:i=typeof c.is=="string"?h.createElement(o,{is:c.is}):h.createElement(o)}}i[Ft]=a,i[Mt]=c;e:for(h=a.child;h!==null;){if(h.tag===5||h.tag===6)i.appendChild(h.stateNode);else if(h.tag!==4&&h.tag!==27&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===a)break e;for(;h.sibling===null;){if(h.return===null||h.return===a)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}a.stateNode=i;e:switch(Jt(i,o,c),o){case"button":case"input":case"select":case"textarea":i=!!c.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&_r(a)}}return pt(a),a.flags&=-16777217,null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==c&&_r(a);else{if(typeof c!="string"&&a.stateNode===null)throw Error(r(166));if(i=dn.current,Cl(a)){if(i=a.stateNode,o=a.memoizedProps,c=null,h=mn,h!==null)switch(h.tag){case 27:case 5:c=h.memoizedProps}i[Ft]=a,i=!!(i.nodeValue===o||c!==null&&c.suppressHydrationWarning===!0||h_(i.nodeValue,o)),i||ms(a)}else i=yd(i).createTextNode(c),i[Ft]=a,a.stateNode=i}return pt(a),null;case 13:if(c=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(h=Cl(a),c!==null&&c.dehydrated!==null){if(i===null){if(!h)throw Error(r(318));if(h=a.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(r(317));h[Ft]=a}else Dl(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;pt(a),h=!1}else mi!==null&&(Dm(mi),mi=null),h=!0;if(!h)return a.flags&256?(dr(a),a):(dr(a),null)}if(dr(a),(a.flags&128)!==0)return a.lanes=o,a;if(o=c!==null,i=i!==null&&i.memoizedState!==null,o){c=a.child,h=null,c.alternate!==null&&c.alternate.memoizedState!==null&&c.alternate.memoizedState.cachePool!==null&&(h=c.alternate.memoizedState.cachePool.pool);var g=null;c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==h&&(c.flags|=2048)}return o!==i&&o&&(a.child.flags|=8192),od(a,a.updateQueue),pt(a),null;case 4:return Ln(),i===null&&Fm(a.stateNode.containerInfo),pt(a),null;case 10:return pr(a.type),pt(a),null;case 19:if(Je(Vt),h=a.memoizedState,h===null)return pt(a),null;if(c=(a.flags&128)!==0,g=h.rendering,g===null)if(c)Xl(h,!1);else{if(wt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(g=Hu(i),g!==null){for(a.flags|=128,Xl(h,!1),i=g.updateQueue,a.updateQueue=i,od(a,i),a.subtreeFlags=0,i=o,o=a.child;o!==null;)z0(o,i),o=o.sibling;return qe(Vt,Vt.current&1|2),a.child}i=i.sibling}h.tail!==null&&ue()>ld&&(a.flags|=128,c=!0,Xl(h,!1),a.lanes=4194304)}else{if(!c)if(i=Hu(g),i!==null){if(a.flags|=128,c=!0,i=i.updateQueue,a.updateQueue=i,od(a,i),Xl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!g.alternate&&!We)return pt(a),null}else 2*ue()-h.renderingStartTime>ld&&o!==536870912&&(a.flags|=128,c=!0,Xl(h,!1),a.lanes=4194304);h.isBackwards?(g.sibling=a.child,a.child=g):(i=h.last,i!==null?i.sibling=g:a.child=g,h.last=g)}return h.tail!==null?(a=h.tail,h.rendering=a,h.tail=a.sibling,h.renderingStartTime=ue(),a.sibling=null,i=Vt.current,qe(Vt,c?i&1|2:i&1),a):(pt(a),null);case 22:case 23:return dr(a),Cf(),c=a.memoizedState!==null,i!==null?i.memoizedState!==null!==c&&(a.flags|=8192):c&&(a.flags|=8192),c?(o&536870912)!==0&&(a.flags&128)===0&&(pt(a),a.subtreeFlags&6&&(a.flags|=8192)):pt(a),o=a.updateQueue,o!==null&&od(a,o.retryQueue),o=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(o=i.memoizedState.cachePool.pool),c=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(c=a.memoizedState.cachePool.pool),c!==o&&(a.flags|=2048),i!==null&&Je(gs),null;case 24:return o=null,i!==null&&(o=i.memoizedState.cache),a.memoizedState.cache!==o&&(a.flags|=2048),pr(zt),pt(a),null;case 25:return null}throw Error(r(156,a.tag))}function hS(i,a){switch(Af(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return pr(zt),Ln(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return Ai(a),null;case 13:if(dr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Dl()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return Je(Vt),null;case 4:return Ln(),null;case 10:return pr(a.type),null;case 22:case 23:return dr(a),Cf(),i!==null&&Je(gs),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return pr(zt),null;case 25:return null;default:return null}}function q0(i,a){switch(Af(a),a.tag){case 3:pr(zt),Ln();break;case 26:case 27:case 5:Ai(a);break;case 4:Ln();break;case 13:dr(a);break;case 19:Je(Vt);break;case 10:pr(a.type);break;case 22:case 23:dr(a),Cf(),i!==null&&Je(gs);break;case 24:pr(zt)}}var fS={getCacheForType:function(i){var a=rn(zt),o=a.data.get(i);return o===void 0&&(o=i(),a.data.set(i,o)),o}},mS=typeof WeakMap=="function"?WeakMap:Map,gt=0,lt=null,Ve=null,$e=0,ct=0,kn=null,xr=!1,So=!1,Tm=!1,br=0,wt=0,ya=0,Ss=0,Sm=0,ni=0,Ao=0,Jl=null,Bi=null,Am=!1,Rm=0,ld=1/0,cd=null,_a=null,ud=!1,As=null,Zl=0,Nm=0,Im=null,ec=0,Cm=null;function jn(){if((gt&2)!==0&&$e!==0)return $e&-$e;if(A.T!==null){var i=vo;return i!==0?i:Um()}return gu()}function H0(){ni===0&&(ni=($e&536870912)===0||We?hl():536870912);var i=Jn.current;return i!==null&&(i.flags|=32),ni}function pn(i,a,o){(i===lt&&ct===2||i.cancelPendingCommit!==null)&&(Ro(i,0),wr(i,$e,ni,!1)),At(i,o),((gt&2)===0||i!==lt)&&(i===lt&&((gt&2)===0&&(Ss|=o),wt===4&&wr(i,$e,ni,!1)),Fi(i))}function G0(i,a,o){if((gt&6)!==0)throw Error(r(327));var c=!o&&(a&60)===0&&(a&i.expiredLanes)===0||$r(i,a),h=c?vS(i,a):Om(i,a,!0),g=c;do{if(h===0){So&&!c&&wr(i,a,0,!1);break}else if(h===6)wr(i,a,0,!xr);else{if(o=i.current.alternate,g&&!pS(o)){h=Om(i,a,!1),g=!1;continue}if(h===2){if(g=a,i.errorRecoveryDisabledLanes&g)var b=0;else b=i.pendingLanes&-536870913,b=b!==0?b:b&536870912?536870912:0;if(b!==0){a=b;e:{var S=i;h=Jl;var j=S.current.memoizedState.isDehydrated;if(j&&(Ro(S,b).flags|=256),b=Om(S,b,!1),b!==2){if(Tm&&!j){S.errorRecoveryDisabledLanes|=g,Ss|=g,h=4;break e}g=Bi,Bi=h,g!==null&&Dm(g)}h=b}if(g=!1,h!==2)continue}}if(h===1){Ro(i,0),wr(i,a,0,!0);break}e:{switch(c=i,h){case 0:case 1:throw Error(r(345));case 4:if((a&4194176)===a){wr(c,a,ni,!xr);break e}break;case 2:Bi=null;break;case 3:case 5:break;default:throw Error(r(329))}if(c.finishedWork=o,c.finishedLanes=a,(a&62914560)===a&&(g=Rm+300-ue(),10<g)){if(wr(c,a,ni,!xr),Fn(c,0)!==0)break e;c.timeoutHandle=p_($0.bind(null,c,o,Bi,cd,Am,a,ni,Ss,Ao,xr,2,-0,0),g);break e}$0(c,o,Bi,cd,Am,a,ni,Ss,Ao,xr,0,-0,0)}}break}while(!0);Fi(i)}function Dm(i){Bi===null?Bi=i:Bi.push.apply(Bi,i)}function $0(i,a,o,c,h,g,b,S,j,F,Z,ae,K){var J=a.subtreeFlags;if((J&8192||(J&16785408)===16785408)&&(sc={stylesheets:null,count:0,unsuspend:WS},M0(a),a=JS(),a!==null)){i.cancelPendingCommit=a(Z0.bind(null,i,o,c,h,b,S,j,1,ae,K)),wr(i,g,b,!F);return}Z0(i,o,c,h,b,S,j,Z,ae,K)}function pS(i){for(var a=i;;){var o=a.tag;if((o===0||o===11||o===15)&&a.flags&16384&&(o=a.updateQueue,o!==null&&(o=o.stores,o!==null)))for(var c=0;c<o.length;c++){var h=o[c],g=h.getSnapshot;h=h.value;try{if(!In(g(),h))return!1}catch{return!1}}if(o=a.child,a.subtreeFlags&16384&&o!==null)o.return=a,a=o;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function wr(i,a,o,c){a&=~Sm,a&=~Ss,i.suspendedLanes|=a,i.pingedLanes&=~a,c&&(i.warmLanes|=a),c=i.expirationTimes;for(var h=a;0<h;){var g=31-Pt(h),b=1<<g;c[g]=-1,h&=~b}o!==0&&Yr(i,o,a)}function dd(){return(gt&6)===0?(tc(0),!1):!0}function km(){if(Ve!==null){if(ct===0)var i=Ve.return;else i=Ve,mr=bs=null,Uf(i),po=null,Pl=0,i=Ve;for(;i!==null;)q0(i.alternate,i),i=i.return;Ve=null}}function Ro(i,a){i.finishedWork=null,i.finishedLanes=0;var o=i.timeoutHandle;o!==-1&&(i.timeoutHandle=-1,OS(o)),o=i.cancelPendingCommit,o!==null&&(i.cancelPendingCommit=null,o()),km(),lt=i,Ve=o=va(i.current,null),$e=a,ct=0,kn=null,xr=!1,So=$r(i,a),Tm=!1,Ao=ni=Sm=Ss=ya=wt=0,Bi=Jl=null,Am=!1,(a&8)!==0&&(a|=a&32);var c=i.entangledLanes;if(c!==0)for(i=i.entanglements,c&=a;0<c;){var h=31-Pt(c),g=1<<h;a|=i[h],c&=~g}return br=a,Pu(),o}function K0(i,a){Pe=null,A.H=zi,a===jl?(a=ly(),ct=3):a===ay?(a=ly(),ct=4):ct=a===s0?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,kn=a,Ve===null&&(wt=1,td(i,Qn(a,i.current)))}function Y0(){var i=A.H;return A.H=zi,i===null?zi:i}function Q0(){var i=A.A;return A.A=fS,i}function jm(){wt=4,xr||($e&4194176)!==$e&&Jn.current!==null||(So=!0),(ya&134217727)===0&&(Ss&134217727)===0||lt===null||wr(lt,$e,ni,!1)}function Om(i,a,o){var c=gt;gt|=2;var h=Y0(),g=Q0();(lt!==i||$e!==a)&&(cd=null,Ro(i,a)),a=!1;var b=wt;e:do try{if(ct!==0&&Ve!==null){var S=Ve,j=kn;switch(ct){case 8:km(),b=6;break e;case 3:case 2:case 6:Jn.current===null&&(a=!0);var F=ct;if(ct=0,kn=null,No(i,S,j,F),o&&So){b=0;break e}break;default:F=ct,ct=0,kn=null,No(i,S,j,F)}}gS(),b=wt;break}catch(Z){K0(i,Z)}while(!0);return a&&i.shellSuspendCounter++,mr=bs=null,gt=c,A.H=h,A.A=g,Ve===null&&(lt=null,$e=0,Pu()),b}function gS(){for(;Ve!==null;)W0(Ve)}function vS(i,a){var o=gt;gt|=2;var c=Y0(),h=Q0();lt!==i||$e!==a?(cd=null,ld=ue()+500,Ro(i,a)):So=$r(i,a);e:do try{if(ct!==0&&Ve!==null){a=Ve;var g=kn;t:switch(ct){case 1:ct=0,kn=null,No(i,a,g,1);break;case 2:if(sy(g)){ct=0,kn=null,X0(a);break}a=function(){ct===2&&lt===i&&(ct=7),Fi(i)},g.then(a,a);break e;case 3:ct=7;break e;case 4:ct=5;break e;case 7:sy(g)?(ct=0,kn=null,X0(a)):(ct=0,kn=null,No(i,a,g,7));break;case 5:var b=null;switch(Ve.tag){case 26:b=Ve.memoizedState;case 5:case 27:var S=Ve;if(!b||A_(b)){ct=0,kn=null;var j=S.sibling;if(j!==null)Ve=j;else{var F=S.return;F!==null?(Ve=F,hd(F)):Ve=null}break t}}ct=0,kn=null,No(i,a,g,5);break;case 6:ct=0,kn=null,No(i,a,g,6);break;case 8:km(),wt=6;break e;default:throw Error(r(462))}}yS();break}catch(Z){K0(i,Z)}while(!0);return mr=bs=null,A.H=c,A.A=h,gt=o,Ve!==null?0:(lt=null,$e=0,Pu(),wt)}function yS(){for(;Ve!==null&&!dl();)W0(Ve)}function W0(i){var a=y0(i.alternate,i,br);i.memoizedProps=i.pendingProps,a===null?hd(i):Ve=a}function X0(i){var a=i,o=a.alternate;switch(a.tag){case 15:case 0:a=h0(o,a,a.pendingProps,a.type,void 0,$e);break;case 11:a=h0(o,a,a.pendingProps,a.type.render,a.ref,$e);break;case 5:Uf(a);default:q0(o,a),a=Ve=z0(a,br),a=y0(o,a,br)}i.memoizedProps=i.pendingProps,a===null?hd(i):Ve=a}function No(i,a,o,c){mr=bs=null,Uf(a),po=null,Pl=0;var h=a.return;try{if(sS(i,h,a,o,$e)){wt=1,td(i,Qn(o,i.current)),Ve=null;return}}catch(g){if(h!==null)throw Ve=h,g;wt=1,td(i,Qn(o,i.current)),Ve=null;return}a.flags&32768?(We||c===1?i=!0:So||($e&536870912)!==0?i=!1:(xr=i=!0,(c===2||c===3||c===6)&&(c=Jn.current,c!==null&&c.tag===13&&(c.flags|=16384))),J0(a,i)):hd(a)}function hd(i){var a=i;do{if((a.flags&32768)!==0){J0(a,xr);return}i=a.return;var o=dS(a.alternate,a,br);if(o!==null){Ve=o;return}if(a=a.sibling,a!==null){Ve=a;return}Ve=a=i}while(a!==null);wt===0&&(wt=5)}function J0(i,a){do{var o=hS(i.alternate,i);if(o!==null){o.flags&=32767,Ve=o;return}if(o=i.return,o!==null&&(o.flags|=32768,o.subtreeFlags=0,o.deletions=null),!a&&(i=i.sibling,i!==null)){Ve=i;return}Ve=i=o}while(i!==null);wt=6,Ve=null}function Z0(i,a,o,c,h,g,b,S,j,F){var Z=A.T,ae=ce.p;try{ce.p=2,A.T=null,_S(i,a,o,c,ae,h,g,b,S,j,F)}finally{A.T=Z,ce.p=ae}}function _S(i,a,o,c,h,g,b,S){do Io();while(As!==null);if((gt&6)!==0)throw Error(r(327));var j=i.finishedWork;if(c=i.finishedLanes,j===null)return null;if(i.finishedWork=null,i.finishedLanes=0,j===i.current)throw Error(r(177));i.callbackNode=null,i.callbackPriority=0,i.cancelPendingCommit=null;var F=j.lanes|j.childLanes;if(F|=Ef,mu(i,c,F,g,b,S),i===lt&&(Ve=lt=null,$e=0),(j.subtreeFlags&10256)===0&&(j.flags&10256)===0||ud||(ud=!0,Nm=F,Im=o,ES(ft,function(){return Io(),null})),o=(j.flags&15990)!==0,(j.subtreeFlags&15990)!==0||o?(o=A.T,A.T=null,g=ce.p,ce.p=2,b=gt,gt|=4,lS(i,j),j0(j,i),qT($m,i.containerInfo),Td=!!Gm,$m=Gm=null,i.current=j,I0(i,j.alternate,j),Wa(),gt=b,ce.p=g,A.T=o):i.current=j,ud?(ud=!1,As=i,Zl=c):e_(i,F),F=i.pendingLanes,F===0&&(_a=null),Ji(j.stateNode),Fi(i),a!==null)for(h=i.onRecoverableError,j=0;j<a.length;j++)F=a[j],h(F.value,{componentStack:F.stack});return(Zl&3)!==0&&Io(),F=i.pendingLanes,(c&4194218)!==0&&(F&42)!==0?i===Cm?ec++:(ec=0,Cm=i):ec=0,tc(0),null}function e_(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Ll(a)))}function Io(){if(As!==null){var i=As,a=Nm;Nm=0;var o=pu(Zl),c=A.T,h=ce.p;try{if(ce.p=32>o?32:o,A.T=null,As===null)var g=!1;else{o=Im,Im=null;var b=As,S=Zl;if(As=null,Zl=0,(gt&6)!==0)throw Error(r(331));var j=gt;if(gt|=4,U0(b.current),P0(b,b.current,S,o),gt=j,tc(0,!1),St&&typeof St.onPostCommitFiberRoot=="function")try{St.onPostCommitFiberRoot(Bn,b)}catch{}g=!0}return g}finally{ce.p=h,A.T=c,e_(i,a)}}return!1}function t_(i,a,o){a=Qn(o,a),a=Jf(i.stateNode,a,2),i=fa(i,a,2),i!==null&&(At(i,2),Fi(i))}function rt(i,a,o){if(i.tag===3)t_(i,i,o);else for(;a!==null;){if(a.tag===3){t_(a,i,o);break}else if(a.tag===1){var c=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof c.componentDidCatch=="function"&&(_a===null||!_a.has(c))){i=Qn(o,i),o=r0(2),c=fa(a,o,2),c!==null&&(a0(o,c,a,i),At(c,2),Fi(c));break}}a=a.return}}function Pm(i,a,o){var c=i.pingCache;if(c===null){c=i.pingCache=new mS;var h=new Set;c.set(a,h)}else h=c.get(a),h===void 0&&(h=new Set,c.set(a,h));h.has(o)||(Tm=!0,h.add(o),i=xS.bind(null,i,a,o),a.then(i,i))}function xS(i,a,o){var c=i.pingCache;c!==null&&c.delete(a),i.pingedLanes|=i.suspendedLanes&o,i.warmLanes&=~o,lt===i&&($e&o)===o&&(wt===4||wt===3&&($e&62914560)===$e&&300>ue()-Rm?(gt&2)===0&&Ro(i,0):Sm|=o,Ao===$e&&(Ao=0)),Fi(i)}function n_(i,a){a===0&&(a=Kr()),i=aa(i,a),i!==null&&(At(i,a),Fi(i))}function bS(i){var a=i.memoizedState,o=0;a!==null&&(o=a.retryLane),n_(i,o)}function wS(i,a){var o=0;switch(i.tag){case 13:var c=i.stateNode,h=i.memoizedState;h!==null&&(o=h.retryLane);break;case 19:c=i.stateNode;break;case 22:c=i.stateNode._retryCache;break;default:throw Error(r(314))}c!==null&&c.delete(a),n_(i,o)}function ES(i,a){return Vn(i,a)}var fd=null,Co=null,Mm=!1,md=!1,Lm=!1,Rs=0;function Fi(i){i!==Co&&i.next===null&&(Co===null?fd=Co=i:Co=Co.next=i),md=!0,Mm||(Mm=!0,SS(TS))}function tc(i,a){if(!Lm&&md){Lm=!0;do for(var o=!1,c=fd;c!==null;){if(i!==0){var h=c.pendingLanes;if(h===0)var g=0;else{var b=c.suspendedLanes,S=c.pingedLanes;g=(1<<31-Pt(42|i)+1)-1,g&=h&~(b&~S),g=g&201326677?g&201326677|1:g?g|2:0}g!==0&&(o=!0,a_(c,g))}else g=$e,g=Fn(c,c===lt?g:0),(g&3)===0||$r(c,g)||(o=!0,a_(c,g));c=c.next}while(o);Lm=!1}}function TS(){md=Mm=!1;var i=0;Rs!==0&&(jS()&&(i=Rs),Rs=0);for(var a=ue(),o=null,c=fd;c!==null;){var h=c.next,g=i_(c,a);g===0?(c.next=null,o===null?fd=h:o.next=h,h===null&&(Co=o)):(o=c,(i!==0||(g&3)!==0)&&(md=!0)),c=h}tc(i)}function i_(i,a){for(var o=i.suspendedLanes,c=i.pingedLanes,h=i.expirationTimes,g=i.pendingLanes&-62914561;0<g;){var b=31-Pt(g),S=1<<b,j=h[b];j===-1?((S&o)===0||(S&c)!==0)&&(h[b]=Ks(S,a)):j<=a&&(i.expiredLanes|=S),g&=~S}if(a=lt,o=$e,o=Fn(i,i===a?o:0),c=i.callbackNode,o===0||i===a&&ct===2||i.cancelPendingCommit!==null)return c!==null&&c!==null&&Hr(c),i.callbackNode=null,i.callbackPriority=0;if((o&3)===0||$r(i,o)){if(a=o&-o,a===i.callbackPriority)return a;switch(c!==null&&Hr(c),pu(o)){case 2:case 8:o=Ue;break;case 32:o=ft;break;case 268435456:o=zn;break;default:o=ft}return c=r_.bind(null,i),o=Vn(o,c),i.callbackPriority=a,i.callbackNode=o,a}return c!==null&&c!==null&&Hr(c),i.callbackPriority=2,i.callbackNode=null,2}function r_(i,a){var o=i.callbackNode;if(Io()&&i.callbackNode!==o)return null;var c=$e;return c=Fn(i,i===lt?c:0),c===0?null:(G0(i,c,a),i_(i,ue()),i.callbackNode!=null&&i.callbackNode===o?r_.bind(null,i):null)}function a_(i,a){if(Io())return null;G0(i,a,!0)}function SS(i){PS(function(){(gt&6)!==0?Vn(Oe,i):i()})}function Um(){return Rs===0&&(Rs=hl()),Rs}function s_(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Di(""+i)}function o_(i,a){var o=a.ownerDocument.createElement("input");return o.name=a.name,o.value=a.value,i.id&&o.setAttribute("form",i.id),a.parentNode.insertBefore(o,a),i=new FormData(i),o.parentNode.removeChild(o),i}function AS(i,a,o,c,h){if(a==="submit"&&o&&o.stateNode===h){var g=s_((h[Mt]||null).action),b=c.submitter;b&&(a=(a=b[Mt]||null)?s_(a.formAction):b.getAttribute("formAction"),a!==null&&(g=a,b=null));var S=new eo("action","action",null,c,h);i.push({event:S,listeners:[{instance:null,listener:function(){if(c.defaultPrevented){if(Rs!==0){var j=b?o_(h,b):new FormData(h);Kf(o,{pending:!0,data:j,method:h.method,action:g},null,j)}}else typeof g=="function"&&(S.preventDefault(),j=b?o_(h,b):new FormData(h),Kf(o,{pending:!0,data:j,method:h.method,action:g},g,j))},currentTarget:h}]})}}for(var Vm=0;Vm<Zv.length;Vm++){var zm=Zv[Vm],RS=zm.toLowerCase(),NS=zm[0].toUpperCase()+zm.slice(1);fi(RS,"on"+NS)}fi(Yv,"onAnimationEnd"),fi(Qv,"onAnimationIteration"),fi(Wv,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(GT,"onTransitionRun"),fi($T,"onTransitionStart"),fi(KT,"onTransitionCancel"),fi(Xv,"onTransitionEnd"),_n("onMouseEnter",["mouseout","mouseover"]),_n("onMouseLeave",["mouseout","mouseover"]),_n("onPointerEnter",["pointerout","pointerover"]),_n("onPointerLeave",["pointerout","pointerover"]),Rn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Rn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Rn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Rn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Rn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Rn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var nc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(nc));function l_(i,a){a=(a&4)!==0;for(var o=0;o<i.length;o++){var c=i[o],h=c.event;c=c.listeners;e:{var g=void 0;if(a)for(var b=c.length-1;0<=b;b--){var S=c[b],j=S.instance,F=S.currentTarget;if(S=S.listener,j!==g&&h.isPropagationStopped())break e;g=S,h.currentTarget=F;try{g(h)}catch(Z){ed(Z)}h.currentTarget=null,g=j}else for(b=0;b<c.length;b++){if(S=c[b],j=S.instance,F=S.currentTarget,S=S.listener,j!==g&&h.isPropagationStopped())break e;g=S,h.currentTarget=F;try{g(h)}catch(Z){ed(Z)}h.currentTarget=null,g=j}}}}function Fe(i,a){var o=a[Ja];o===void 0&&(o=a[Ja]=new Set);var c=i+"__bubble";o.has(c)||(c_(a,i,2,!1),o.add(c))}function Bm(i,a,o){var c=0;a&&(c|=4),c_(o,i,c,a)}var pd="_reactListening"+Math.random().toString(36).slice(2);function Fm(i){if(!i[pd]){i[pd]=!0,ml.forEach(function(o){o!=="selectionchange"&&(IS.has(o)||Bm(o,!1,i),Bm(o,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[pd]||(a[pd]=!0,Bm("selectionchange",!1,a))}}function c_(i,a,o,c){switch(k_(a)){case 2:var h=tA;break;case 8:h=nA;break;default:h=tp}o=h.bind(null,a,o,i),h=void 0,!$n||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(h=!0),c?h!==void 0?i.addEventListener(a,o,{capture:!0,passive:h}):i.addEventListener(a,o,!0):h!==void 0?i.addEventListener(a,o,{passive:h}):i.addEventListener(a,o,!1)}function qm(i,a,o,c,h){var g=c;if((a&1)===0&&(a&2)===0&&c!==null)e:for(;;){if(c===null)return;var b=c.tag;if(b===3||b===4){var S=c.stateNode.containerInfo;if(S===h||S.nodeType===8&&S.parentNode===h)break;if(b===4)for(b=c.return;b!==null;){var j=b.tag;if((j===3||j===4)&&(j=b.stateNode.containerInfo,j===h||j.nodeType===8&&j.parentNode===h))return;b=b.return}for(;S!==null;){if(b=hi(S),b===null)return;if(j=b.tag,j===5||j===6||j===26||j===27){c=g=b;continue e}S=S.parentNode}}c=c.return}xu(function(){var F=g,Z=Zs(o),ae=[];e:{var K=Jv.get(i);if(K!==void 0){var J=eo,_e=i;switch(i){case"keypress":if(ji(o)===0)break e;case"keydown":case"keyup":J=so;break;case"focusin":_e="focus",J=io;break;case"focusout":_e="blur",J=io;break;case"beforeblur":case"afterblur":J=io;break;case"click":if(o.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=Kn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=pf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=Nu;break;case Yv:case Qv:case Wv:J=ro;break;case Xv:J=Cu;break;case"scroll":case"scrollend":J=bu;break;case"wheel":J=oo;break;case"copy":case"cut":case"paste":J=ao;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=Al;break;case"toggle":case"beforetoggle":J=ku}var De=(a&4)!==0,Et=!De&&(i==="scroll"||i==="scrollend"),q=De?K!==null?K+"Capture":null:K;De=[];for(var z=F,$;z!==null;){var ne=z;if($=ne.stateNode,ne=ne.tag,ne!==5&&ne!==26&&ne!==27||$===null||q===null||(ne=is(z,q),ne!=null&&De.push(ic(z,ne,$))),Et)break;z=z.return}0<De.length&&(K=new J(K,_e,null,o,Z),ae.push({event:K,listeners:De}))}}if((a&7)===0){e:{if(K=i==="mouseover"||i==="pointerover",J=i==="mouseout"||i==="pointerout",K&&o!==Gn&&(_e=o.relatedTarget||o.fromElement)&&(hi(_e)||_e[er]))break e;if((J||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,J?(_e=o.relatedTarget||o.toElement,J=F,_e=_e?hi(_e):null,_e!==null&&(Et=fe(_e),De=_e.tag,_e!==Et||De!==5&&De!==27&&De!==6)&&(_e=null)):(J=null,_e=F),J!==_e)){if(De=Kn,ne="onMouseLeave",q="onMouseEnter",z="mouse",(i==="pointerout"||i==="pointerover")&&(De=Al,ne="onPointerLeave",q="onPointerEnter",z="pointer"),Et=J==null?K:Jr(J),$=_e==null?K:Jr(_e),K=new De(ne,z+"leave",J,o,Z),K.target=Et,K.relatedTarget=$,ne=null,hi(Z)===F&&(De=new De(q,z+"enter",_e,o,Z),De.target=$,De.relatedTarget=Et,ne=De),Et=ne,J&&_e)t:{for(De=J,q=_e,z=0,$=De;$;$=Do($))z++;for($=0,ne=q;ne;ne=Do(ne))$++;for(;0<z-$;)De=Do(De),z--;for(;0<$-z;)q=Do(q),$--;for(;z--;){if(De===q||q!==null&&De===q.alternate)break t;De=Do(De),q=Do(q)}De=null}else De=null;J!==null&&u_(ae,K,J,De,!1),_e!==null&&Et!==null&&u_(ae,Et,_e,De,!0)}}e:{if(K=F?Jr(F):window,J=K.nodeName&&K.nodeName.toLowerCase(),J==="select"||J==="input"&&K.type==="file")var ye=Lv;else if(Ut(K))if(Uv)ye=BT;else{ye=VT;var Le=UT}else J=K.nodeName,!J||J.toLowerCase()!=="input"||K.type!=="checkbox"&&K.type!=="radio"?F&&_l(F.elementType)&&(ye=Lv):ye=zT;if(ye&&(ye=ye(i,F))){lr(ae,ye,o,Z);break e}Le&&Le(i,K,F),i==="focusout"&&F&&K.type==="number"&&F.memoizedProps.value!=null&&Js(K,"number",K.value)}switch(Le=F?Jr(F):window,i){case"focusin":(Ut(Le)||Le.contentEditable==="true")&&(lo=Le,xf=F,Il=null);break;case"focusout":Il=xf=lo=null;break;case"mousedown":bf=!0;break;case"contextmenu":case"mouseup":case"dragend":bf=!1,$v(ae,o,Z);break;case"selectionchange":if(HT)break;case"keydown":case"keyup":$v(ae,o,Z)}var be;if(Mi)e:{switch(i){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else He?W(i,o)&&(Ae="onCompositionEnd"):i==="keydown"&&o.keyCode===229&&(Ae="onCompositionStart");Ae&&(x&&o.locale!=="ko"&&(He||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&He&&(be=bl()):(ki=Z,ra="value"in ki?ki.value:ki.textContent,He=!0)),Le=gd(F,Ae),0<Le.length&&(Ae=new Tl(Ae,i,null,o,Z),ae.push({event:Ae,listeners:Le}),be?Ae.data=be:(be=he(o),be!==null&&(Ae.data=be)))),(be=y?Lt(i,o):Ge(i,o))&&(Ae=gd(F,"onBeforeInput"),0<Ae.length&&(Le=new Tl("onBeforeInput","beforeinput",null,o,Z),ae.push({event:Le,listeners:Ae}),Le.data=be)),AS(ae,i,F,o,Z)}l_(ae,a)})}function ic(i,a,o){return{instance:i,listener:a,currentTarget:o}}function gd(i,a){for(var o=a+"Capture",c=[];i!==null;){var h=i,g=h.stateNode;h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=is(i,o),h!=null&&c.unshift(ic(i,h,g)),h=is(i,a),h!=null&&c.push(ic(i,h,g))),i=i.return}return c}function Do(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function u_(i,a,o,c,h){for(var g=a._reactName,b=[];o!==null&&o!==c;){var S=o,j=S.alternate,F=S.stateNode;if(S=S.tag,j!==null&&j===c)break;S!==5&&S!==26&&S!==27||F===null||(j=F,h?(F=is(o,g),F!=null&&b.unshift(ic(o,F,j))):h||(F=is(o,g),F!=null&&b.push(ic(o,F,j)))),o=o.return}b.length!==0&&i.push({event:a,listeners:b})}var CS=/\r\n?/g,DS=/\u0000|\uFFFD/g;function d_(i){return(typeof i=="string"?i:""+i).replace(CS,`
`).replace(DS,"")}function h_(i,a){return a=d_(a),d_(i)===a}function vd(){}function nt(i,a,o,c,h,g){switch(o){case"children":typeof c=="string"?a==="body"||a==="textarea"&&c===""||Hn(i,c):(typeof c=="number"||typeof c=="bigint")&&a!=="body"&&Hn(i,""+c);break;case"className":ta(i,"class",c);break;case"tabIndex":ta(i,"tabindex",c);break;case"dir":case"role":case"viewBox":case"width":case"height":ta(i,o,c);break;case"style":_u(i,c,g);break;case"data":if(a!=="object"){ta(i,"data",c);break}case"src":case"href":if(c===""&&(a!=="a"||o!=="href")){i.removeAttribute(o);break}if(c==null||typeof c=="function"||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=Di(""+c),i.setAttribute(o,c);break;case"action":case"formAction":if(typeof c=="function"){i.setAttribute(o,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(o==="formAction"?(a!=="input"&&nt(i,a,"name",h.name,h,null),nt(i,a,"formEncType",h.formEncType,h,null),nt(i,a,"formMethod",h.formMethod,h,null),nt(i,a,"formTarget",h.formTarget,h,null)):(nt(i,a,"encType",h.encType,h,null),nt(i,a,"method",h.method,h,null),nt(i,a,"target",h.target,h,null)));if(c==null||typeof c=="symbol"||typeof c=="boolean"){i.removeAttribute(o);break}c=Di(""+c),i.setAttribute(o,c);break;case"onClick":c!=null&&(i.onclick=vd);break;case"onScroll":c!=null&&Fe("scroll",i);break;case"onScrollEnd":c!=null&&Fe("scrollend",i);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"multiple":i.multiple=c&&typeof c!="function"&&typeof c!="symbol";break;case"muted":i.muted=c&&typeof c!="function"&&typeof c!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(c==null||typeof c=="function"||typeof c=="boolean"||typeof c=="symbol"){i.removeAttribute("xlink:href");break}o=Di(""+c),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",o);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""+c):i.removeAttribute(o);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":c&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,""):i.removeAttribute(o);break;case"capture":case"download":c===!0?i.setAttribute(o,""):c!==!1&&c!=null&&typeof c!="function"&&typeof c!="symbol"?i.setAttribute(o,c):i.removeAttribute(o);break;case"cols":case"rows":case"size":case"span":c!=null&&typeof c!="function"&&typeof c!="symbol"&&!isNaN(c)&&1<=c?i.setAttribute(o,c):i.removeAttribute(o);break;case"rowSpan":case"start":c==null||typeof c=="function"||typeof c=="symbol"||isNaN(c)?i.removeAttribute(o):i.setAttribute(o,c);break;case"popover":Fe("beforetoggle",i),Fe("toggle",i),ea(i,"popover",c);break;case"xlinkActuate":qn(i,"http://www.w3.org/1999/xlink","xlink:actuate",c);break;case"xlinkArcrole":qn(i,"http://www.w3.org/1999/xlink","xlink:arcrole",c);break;case"xlinkRole":qn(i,"http://www.w3.org/1999/xlink","xlink:role",c);break;case"xlinkShow":qn(i,"http://www.w3.org/1999/xlink","xlink:show",c);break;case"xlinkTitle":qn(i,"http://www.w3.org/1999/xlink","xlink:title",c);break;case"xlinkType":qn(i,"http://www.w3.org/1999/xlink","xlink:type",c);break;case"xmlBase":qn(i,"http://www.w3.org/XML/1998/namespace","xml:base",c);break;case"xmlLang":qn(i,"http://www.w3.org/XML/1998/namespace","xml:lang",c);break;case"xmlSpace":qn(i,"http://www.w3.org/XML/1998/namespace","xml:space",c);break;case"is":ea(i,"is",c);break;case"innerText":case"textContent":break;default:(!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(o=ff.get(o)||o,ea(i,o,c))}}function Hm(i,a,o,c,h,g){switch(o){case"style":_u(i,c,g);break;case"dangerouslySetInnerHTML":if(c!=null){if(typeof c!="object"||!("__html"in c))throw Error(r(61));if(o=c.__html,o!=null){if(h.children!=null)throw Error(r(60));i.innerHTML=o}}break;case"children":typeof c=="string"?Hn(i,c):(typeof c=="number"||typeof c=="bigint")&&Hn(i,""+c);break;case"onScroll":c!=null&&Fe("scroll",i);break;case"onScrollEnd":c!=null&&Fe("scrollend",i);break;case"onClick":c!=null&&(i.onclick=vd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ws.hasOwnProperty(o))e:{if(o[0]==="o"&&o[1]==="n"&&(h=o.endsWith("Capture"),a=o.slice(2,h?o.length-7:void 0),g=i[Mt]||null,g=g!=null?g[o]:null,typeof g=="function"&&i.removeEventListener(a,g,h),typeof c=="function")){typeof g!="function"&&g!==null&&(o in i?i[o]=null:i.hasAttribute(o)&&i.removeAttribute(o)),i.addEventListener(a,c,h);break e}o in i?i[o]=c:c===!0?i.setAttribute(o,""):ea(i,o,c)}}}function Jt(i,a,o){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fe("error",i),Fe("load",i);var c=!1,h=!1,g;for(g in o)if(o.hasOwnProperty(g)){var b=o[g];if(b!=null)switch(g){case"src":c=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:nt(i,a,g,b,o,null)}}h&&nt(i,a,"srcSet",o.srcSet,o,null),c&&nt(i,a,"src",o.src,o,null);return;case"input":Fe("invalid",i);var S=g=b=h=null,j=null,F=null;for(c in o)if(o.hasOwnProperty(c)){var Z=o[c];if(Z!=null)switch(c){case"name":h=Z;break;case"type":b=Z;break;case"checked":j=Z;break;case"defaultChecked":F=Z;break;case"value":g=Z;break;case"defaultValue":S=Z;break;case"children":case"dangerouslySetInnerHTML":if(Z!=null)throw Error(r(137,a));break;default:nt(i,a,c,Z,o,null)}}ts(i,g,S,j,F,b,h,!1),es(i);return;case"select":Fe("invalid",i),c=b=g=null;for(h in o)if(o.hasOwnProperty(h)&&(S=o[h],S!=null))switch(h){case"value":g=S;break;case"defaultValue":b=S;break;case"multiple":c=S;default:nt(i,a,h,S,o,null)}a=g,o=b,i.multiple=!!c,a!=null?Qe(i,!!c,a,!1):o!=null&&Qe(i,!!c,o,!0);return;case"textarea":Fe("invalid",i),g=h=c=null;for(b in o)if(o.hasOwnProperty(b)&&(S=o[b],S!=null))switch(b){case"value":c=S;break;case"defaultValue":h=S;break;case"children":g=S;break;case"dangerouslySetInnerHTML":if(S!=null)throw Error(r(91));break;default:nt(i,a,b,S,o,null)}ia(i,c,h,g),es(i);return;case"option":for(j in o)if(o.hasOwnProperty(j)&&(c=o[j],c!=null))switch(j){case"selected":i.selected=c&&typeof c!="function"&&typeof c!="symbol";break;default:nt(i,a,j,c,o,null)}return;case"dialog":Fe("cancel",i),Fe("close",i);break;case"iframe":case"object":Fe("load",i);break;case"video":case"audio":for(c=0;c<nc.length;c++)Fe(nc[c],i);break;case"image":Fe("error",i),Fe("load",i);break;case"details":Fe("toggle",i);break;case"embed":case"source":case"link":Fe("error",i),Fe("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(F in o)if(o.hasOwnProperty(F)&&(c=o[F],c!=null))switch(F){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:nt(i,a,F,c,o,null)}return;default:if(_l(a)){for(Z in o)o.hasOwnProperty(Z)&&(c=o[Z],c!==void 0&&Hm(i,a,Z,c,o,void 0));return}}for(S in o)o.hasOwnProperty(S)&&(c=o[S],c!=null&&nt(i,a,S,c,o,null))}function kS(i,a,o,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,b=null,S=null,j=null,F=null,Z=null;for(J in o){var ae=o[J];if(o.hasOwnProperty(J)&&ae!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":j=ae;default:c.hasOwnProperty(J)||nt(i,a,J,null,c,ae)}}for(var K in c){var J=c[K];if(ae=o[K],c.hasOwnProperty(K)&&(J!=null||ae!=null))switch(K){case"type":g=J;break;case"name":h=J;break;case"checked":F=J;break;case"defaultChecked":Z=J;break;case"value":b=J;break;case"defaultValue":S=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,a));break;default:J!==ae&&nt(i,a,K,J,c,ae)}}na(i,b,S,j,F,Z,g,h);return;case"select":J=b=S=K=null;for(g in o)if(j=o[g],o.hasOwnProperty(g)&&j!=null)switch(g){case"value":break;case"multiple":J=j;default:c.hasOwnProperty(g)||nt(i,a,g,null,c,j)}for(h in c)if(g=c[h],j=o[h],c.hasOwnProperty(h)&&(g!=null||j!=null))switch(h){case"value":K=g;break;case"defaultValue":S=g;break;case"multiple":b=g;default:g!==j&&nt(i,a,h,g,c,j)}a=S,o=b,c=J,K!=null?Qe(i,!!o,K,!1):!!c!=!!o&&(a!=null?Qe(i,!!o,a,!0):Qe(i,!!o,o?[]:"",!1));return;case"textarea":J=K=null;for(S in o)if(h=o[S],o.hasOwnProperty(S)&&h!=null&&!c.hasOwnProperty(S))switch(S){case"value":break;case"children":break;default:nt(i,a,S,null,c,h)}for(b in c)if(h=c[b],g=o[b],c.hasOwnProperty(b)&&(h!=null||g!=null))switch(b){case"value":K=h;break;case"defaultValue":J=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(r(91));break;default:h!==g&&nt(i,a,b,h,c,g)}ns(i,K,J);return;case"option":for(var _e in o)if(K=o[_e],o.hasOwnProperty(_e)&&K!=null&&!c.hasOwnProperty(_e))switch(_e){case"selected":i.selected=!1;break;default:nt(i,a,_e,null,c,K)}for(j in c)if(K=c[j],J=o[j],c.hasOwnProperty(j)&&K!==J&&(K!=null||J!=null))switch(j){case"selected":i.selected=K&&typeof K!="function"&&typeof K!="symbol";break;default:nt(i,a,j,K,c,J)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var De in o)K=o[De],o.hasOwnProperty(De)&&K!=null&&!c.hasOwnProperty(De)&&nt(i,a,De,null,c,K);for(F in c)if(K=c[F],J=o[F],c.hasOwnProperty(F)&&K!==J&&(K!=null||J!=null))switch(F){case"children":case"dangerouslySetInnerHTML":if(K!=null)throw Error(r(137,a));break;default:nt(i,a,F,K,c,J)}return;default:if(_l(a)){for(var Et in o)K=o[Et],o.hasOwnProperty(Et)&&K!==void 0&&!c.hasOwnProperty(Et)&&Hm(i,a,Et,void 0,c,K);for(Z in c)K=c[Z],J=o[Z],!c.hasOwnProperty(Z)||K===J||K===void 0&&J===void 0||Hm(i,a,Z,K,c,J);return}}for(var q in o)K=o[q],o.hasOwnProperty(q)&&K!=null&&!c.hasOwnProperty(q)&&nt(i,a,q,null,c,K);for(ae in c)K=c[ae],J=o[ae],!c.hasOwnProperty(ae)||K===J||K==null&&J==null||nt(i,a,ae,K,c,J)}var Gm=null,$m=null;function yd(i){return i.nodeType===9?i:i.ownerDocument}function f_(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function m_(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Km(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Ym=null;function jS(){var i=window.event;return i&&i.type==="popstate"?i===Ym?!1:(Ym=i,!0):(Ym=null,!1)}var p_=typeof setTimeout=="function"?setTimeout:void 0,OS=typeof clearTimeout=="function"?clearTimeout:void 0,g_=typeof Promise=="function"?Promise:void 0,PS=typeof queueMicrotask=="function"?queueMicrotask:typeof g_<"u"?function(i){return g_.resolve(null).then(i).catch(MS)}:p_;function MS(i){setTimeout(function(){throw i})}function Qm(i,a){var o=a,c=0;do{var h=o.nextSibling;if(i.removeChild(o),h&&h.nodeType===8)if(o=h.data,o==="/$"){if(c===0){i.removeChild(h),dc(a);return}c--}else o!=="$"&&o!=="$?"&&o!=="$!"||c++;o=h}while(o);dc(a)}function Wm(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var o=a;switch(a=a.nextSibling,o.nodeName){case"HTML":case"HEAD":case"BODY":Wm(o),Za(o);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(o.rel.toLowerCase()==="stylesheet")continue}i.removeChild(o)}}function LS(i,a,o,c){for(;i.nodeType===1;){var h=o;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!c&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(c){if(!i[Xr])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(g=i.getAttribute("rel"),g==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(g!==h.rel||i.getAttribute("href")!==(h.href==null?null:h.href)||i.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||i.getAttribute("title")!==(h.title==null?null:h.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(g=i.getAttribute("src"),(g!==(h.src==null?null:h.src)||i.getAttribute("type")!==(h.type==null?null:h.type)||i.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&i.getAttribute("name")===g)return i}else return i;if(i=gi(i.nextSibling),i===null)break}return null}function US(i,a,o){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!o||(i=gi(i.nextSibling),i===null))return null;return i}function gi(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="F!"||a==="F")break;if(a==="/$")return null}}return i}function v_(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var o=i.data;if(o==="$"||o==="$!"||o==="$?"){if(a===0)return i;a--}else o==="/$"&&a++}i=i.previousSibling}return null}function y_(i,a,o){switch(a=yd(o),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}var ii=new Map,__=new Set;function _d(i){return typeof i.getRootNode=="function"?i.getRootNode():i.ownerDocument}var Er=ce.d;ce.d={f:VS,r:zS,D:BS,C:FS,L:qS,m:HS,X:$S,S:GS,M:KS};function VS(){var i=Er.f(),a=dd();return i||a}function zS(i){var a=tr(i);a!==null&&a.tag===5&&a.type==="form"?$y(a):Er.r(i)}var ko=typeof document>"u"?null:document;function x_(i,a,o){var c=ko;if(c&&typeof a=="string"&&a){var h=xt(a);h='link[rel="'+i+'"][href="'+h+'"]',typeof o=="string"&&(h+='[crossorigin="'+o+'"]'),__.has(h)||(__.add(h),i={rel:i,crossOrigin:o,href:a},c.querySelector(h)===null&&(a=c.createElement("link"),Jt(a,"link",i),mt(a),c.head.appendChild(a)))}}function BS(i){Er.D(i),x_("dns-prefetch",i,null)}function FS(i,a){Er.C(i,a),x_("preconnect",i,a)}function qS(i,a,o){Er.L(i,a,o);var c=ko;if(c&&i&&a){var h='link[rel="preload"][as="'+xt(a)+'"]';a==="image"&&o&&o.imageSrcSet?(h+='[imagesrcset="'+xt(o.imageSrcSet)+'"]',typeof o.imageSizes=="string"&&(h+='[imagesizes="'+xt(o.imageSizes)+'"]')):h+='[href="'+xt(i)+'"]';var g=h;switch(a){case"style":g=jo(i);break;case"script":g=Oo(i)}ii.has(g)||(i=D({rel:"preload",href:a==="image"&&o&&o.imageSrcSet?void 0:i,as:a},o),ii.set(g,i),c.querySelector(h)!==null||a==="style"&&c.querySelector(rc(g))||a==="script"&&c.querySelector(ac(g))||(a=c.createElement("link"),Jt(a,"link",i),mt(a),c.head.appendChild(a)))}}function HS(i,a){Er.m(i,a);var o=ko;if(o&&i){var c=a&&typeof a.as=="string"?a.as:"script",h='link[rel="modulepreload"][as="'+xt(c)+'"][href="'+xt(i)+'"]',g=h;switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Oo(i)}if(!ii.has(g)&&(i=D({rel:"modulepreload",href:i},a),ii.set(g,i),o.querySelector(h)===null)){switch(c){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(o.querySelector(ac(g)))return}c=o.createElement("link"),Jt(c,"link",i),mt(c),o.head.appendChild(c)}}}function GS(i,a,o){Er.S(i,a,o);var c=ko;if(c&&i){var h=Zr(c).hoistableStyles,g=jo(i);a=a||"default";var b=h.get(g);if(!b){var S={loading:0,preload:null};if(b=c.querySelector(rc(g)))S.loading=5;else{i=D({rel:"stylesheet",href:i,"data-precedence":a},o),(o=ii.get(g))&&Xm(i,o);var j=b=c.createElement("link");mt(j),Jt(j,"link",i),j._p=new Promise(function(F,Z){j.onload=F,j.onerror=Z}),j.addEventListener("load",function(){S.loading|=1}),j.addEventListener("error",function(){S.loading|=2}),S.loading|=4,xd(b,a,c)}b={type:"stylesheet",instance:b,count:1,state:S},h.set(g,b)}}}function $S(i,a){Er.X(i,a);var o=ko;if(o&&i){var c=Zr(o).hoistableScripts,h=Oo(i),g=c.get(h);g||(g=o.querySelector(ac(h)),g||(i=D({src:i,async:!0},a),(a=ii.get(h))&&Jm(i,a),g=o.createElement("script"),mt(g),Jt(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(h,g))}}function KS(i,a){Er.M(i,a);var o=ko;if(o&&i){var c=Zr(o).hoistableScripts,h=Oo(i),g=c.get(h);g||(g=o.querySelector(ac(h)),g||(i=D({src:i,async:!0,type:"module"},a),(a=ii.get(h))&&Jm(i,a),g=o.createElement("script"),mt(g),Jt(g,"link",i),o.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},c.set(h,g))}}function b_(i,a,o,c){var h=(h=dn.current)?_d(h):null;if(!h)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof o.precedence=="string"&&typeof o.href=="string"?(a=jo(o.href),o=Zr(h).hoistableStyles,c=o.get(a),c||(c={type:"style",instance:null,count:0,state:null},o.set(a,c)),c):{type:"void",instance:null,count:0,state:null};case"link":if(o.rel==="stylesheet"&&typeof o.href=="string"&&typeof o.precedence=="string"){i=jo(o.href);var g=Zr(h).hoistableStyles,b=g.get(i);if(b||(h=h.ownerDocument||h,b={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(i,b),(g=h.querySelector(rc(i)))&&!g._p&&(b.instance=g,b.state.loading=5),ii.has(i)||(o={rel:"preload",as:"style",href:o.href,crossOrigin:o.crossOrigin,integrity:o.integrity,media:o.media,hrefLang:o.hrefLang,referrerPolicy:o.referrerPolicy},ii.set(i,o),g||YS(h,i,o,b.state))),a&&c===null)throw Error(r(528,""));return b}if(a&&c!==null)throw Error(r(529,""));return null;case"script":return a=o.async,o=o.src,typeof o=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=Oo(o),o=Zr(h).hoistableScripts,c=o.get(a),c||(c={type:"script",instance:null,count:0,state:null},o.set(a,c)),c):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function jo(i){return'href="'+xt(i)+'"'}function rc(i){return'link[rel="stylesheet"]['+i+"]"}function w_(i){return D({},i,{"data-precedence":i.precedence,precedence:null})}function YS(i,a,o,c){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?c.loading=1:(a=i.createElement("link"),c.preload=a,a.addEventListener("load",function(){return c.loading|=1}),a.addEventListener("error",function(){return c.loading|=2}),Jt(a,"link",o),mt(a),i.head.appendChild(a))}function Oo(i){return'[src="'+xt(i)+'"]'}function ac(i){return"script[async]"+i}function E_(i,a,o){if(a.count++,a.instance===null)switch(a.type){case"style":var c=i.querySelector('style[data-href~="'+xt(o.href)+'"]');if(c)return a.instance=c,mt(c),c;var h=D({},o,{"data-href":o.href,"data-precedence":o.precedence,href:null,precedence:null});return c=(i.ownerDocument||i).createElement("style"),mt(c),Jt(c,"style",h),xd(c,o.precedence,i),a.instance=c;case"stylesheet":h=jo(o.href);var g=i.querySelector(rc(h));if(g)return a.state.loading|=4,a.instance=g,mt(g),g;c=w_(o),(h=ii.get(h))&&Xm(c,h),g=(i.ownerDocument||i).createElement("link"),mt(g);var b=g;return b._p=new Promise(function(S,j){b.onload=S,b.onerror=j}),Jt(g,"link",c),a.state.loading|=4,xd(g,o.precedence,i),a.instance=g;case"script":return g=Oo(o.src),(h=i.querySelector(ac(g)))?(a.instance=h,mt(h),h):(c=o,(h=ii.get(g))&&(c=D({},o),Jm(c,h)),i=i.ownerDocument||i,h=i.createElement("script"),mt(h),Jt(h,"link",c),i.head.appendChild(h),a.instance=h);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(c=a.instance,a.state.loading|=4,xd(c,o.precedence,i));return a.instance}function xd(i,a,o){for(var c=o.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=c.length?c[c.length-1]:null,g=h,b=0;b<c.length;b++){var S=c[b];if(S.dataset.precedence===a)g=S;else if(g!==h)break}g?g.parentNode.insertBefore(i,g.nextSibling):(a=o.nodeType===9?o.head:o,a.insertBefore(i,a.firstChild))}function Xm(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Jm(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var bd=null;function T_(i,a,o){if(bd===null){var c=new Map,h=bd=new Map;h.set(o,c)}else h=bd,c=h.get(o),c||(c=new Map,h.set(o,c));if(c.has(i))return c;for(c.set(i,null),o=o.getElementsByTagName(i),h=0;h<o.length;h++){var g=o[h];if(!(g[Xr]||g[Ft]||i==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var b=g.getAttribute(a)||"";b=i+b;var S=c.get(b);S?S.push(g):c.set(b,[g])}}return c}function S_(i,a,o){i=i.ownerDocument||i,i.head.insertBefore(o,a==="title"?i.querySelector("head > title"):null)}function QS(i,a,o){if(o===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function A_(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}var sc=null;function WS(){}function XS(i,a,o){if(sc===null)throw Error(r(475));var c=sc;if(a.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=jo(o.href),g=i.querySelector(rc(h));if(g){i=g._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(c.count++,c=wd.bind(c),i.then(c,c)),a.state.loading|=4,a.instance=g,mt(g);return}g=i.ownerDocument||i,o=w_(o),(h=ii.get(h))&&Xm(o,h),g=g.createElement("link"),mt(g);var b=g;b._p=new Promise(function(S,j){b.onload=S,b.onerror=j}),Jt(g,"link",o),a.instance=g}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(c.count++,a=wd.bind(c),i.addEventListener("load",a),i.addEventListener("error",a))}}function JS(){if(sc===null)throw Error(r(475));var i=sc;return i.stylesheets&&i.count===0&&Zm(i,i.stylesheets),0<i.count?function(a){var o=setTimeout(function(){if(i.stylesheets&&Zm(i,i.stylesheets),i.unsuspend){var c=i.unsuspend;i.unsuspend=null,c()}},6e4);return i.unsuspend=a,function(){i.unsuspend=null,clearTimeout(o)}}:null}function wd(){if(this.count--,this.count===0){if(this.stylesheets)Zm(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Ed=null;function Zm(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Ed=new Map,a.forEach(ZS,i),Ed=null,wd.call(i))}function ZS(i,a){if(!(a.state.loading&4)){var o=Ed.get(i);if(o)var c=o.get(null);else{o=new Map,Ed.set(i,o);for(var h=i.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var b=h[g];(b.nodeName==="LINK"||b.getAttribute("media")!=="not all")&&(o.set(b.dataset.precedence,b),c=b)}c&&o.set(null,c)}h=a.instance,b=h.getAttribute("data-precedence"),g=o.get(b)||c,g===c&&o.set(null,h),o.set(b,h),this.count++,c=wd.bind(this),h.addEventListener("load",c),h.addEventListener("error",c),g?g.parentNode.insertBefore(h,g.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(h,i.firstChild)),a.state.loading|=4}}var oc={$$typeof:T,Provider:null,Consumer:null,_currentValue:Ne,_currentValue2:Ne,_threadCount:0};function eA(i,a,o,c,h,g,b,S){this.tag=1,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ys(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.finishedLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ys(0),this.hiddenUpdates=Ys(null),this.identifierPrefix=c,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=b,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=S,this.incompleteTransitions=new Map}function R_(i,a,o,c,h,g,b,S,j,F,Z,ae){return i=new eA(i,a,o,b,S,j,F,ae),a=1,g===!0&&(a|=24),g=ti(3,null,null,a),i.current=g,g.stateNode=i,a=Df(),a.refCount++,i.pooledCache=a,a.refCount++,g.memoizedState={element:c,isDehydrated:o,cache:a},dm(g),i}function N_(i){return i?(i=ho,i):ho}function I_(i,a,o,c,h,g){h=N_(h),c.context===null?c.context=h:c.pendingContext=h,c=ha(a),c.payload={element:o},g=g===void 0?null:g,g!==null&&(c.callback=g),o=fa(i,c,a),o!==null&&(pn(o,i,a),Hl(o,i,a))}function C_(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var o=i.retryLane;i.retryLane=o!==0&&o<a?o:a}}function ep(i,a){C_(i,a),(i=i.alternate)&&C_(i,a)}function D_(i){if(i.tag===13){var a=aa(i,67108864);a!==null&&pn(a,i,67108864),ep(i,67108864)}}var Td=!0;function tA(i,a,o,c){var h=A.T;A.T=null;var g=ce.p;try{ce.p=2,tp(i,a,o,c)}finally{ce.p=g,A.T=h}}function nA(i,a,o,c){var h=A.T;A.T=null;var g=ce.p;try{ce.p=8,tp(i,a,o,c)}finally{ce.p=g,A.T=h}}function tp(i,a,o,c){if(Td){var h=np(c);if(h===null)qm(i,a,c,Sd,o),j_(i,c);else if(rA(h,i,a,o,c))c.stopPropagation();else if(j_(i,c),a&4&&-1<iA.indexOf(i)){for(;h!==null;){var g=tr(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var b=di(g.pendingLanes);if(b!==0){var S=g;for(S.pendingLanes|=2,S.entangledLanes|=2;b;){var j=1<<31-Pt(b);S.entanglements[1]|=j,b&=~j}Fi(g),(gt&6)===0&&(ld=ue()+500,tc(0))}}break;case 13:S=aa(g,2),S!==null&&pn(S,g,2),dd(),ep(g,2)}if(g=np(c),g===null&&qm(i,a,c,Sd,o),g===h)break;h=g}h!==null&&c.stopPropagation()}else qm(i,a,c,null,o)}}function np(i){return i=Zs(i),ip(i)}var Sd=null;function ip(i){if(Sd=null,i=hi(i),i!==null){var a=fe(i);if(a===null)i=null;else{var o=a.tag;if(o===13){if(i=re(a),i!==null)return i;i=null}else if(o===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Sd=i,null}function k_(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Se()){case Oe:return 2;case Ue:return 8;case ft:case Ri:return 32;case zn:return 268435456;default:return 32}default:return 32}}var rp=!1,xa=null,ba=null,wa=null,lc=new Map,cc=new Map,Ea=[],iA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function j_(i,a){switch(i){case"focusin":case"focusout":xa=null;break;case"dragenter":case"dragleave":ba=null;break;case"mouseover":case"mouseout":wa=null;break;case"pointerover":case"pointerout":lc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":cc.delete(a.pointerId)}}function uc(i,a,o,c,h,g){return i===null||i.nativeEvent!==g?(i={blockedOn:a,domEventName:o,eventSystemFlags:c,nativeEvent:g,targetContainers:[h]},a!==null&&(a=tr(a),a!==null&&D_(a)),i):(i.eventSystemFlags|=c,a=i.targetContainers,h!==null&&a.indexOf(h)===-1&&a.push(h),i)}function rA(i,a,o,c,h){switch(a){case"focusin":return xa=uc(xa,i,a,o,c,h),!0;case"dragenter":return ba=uc(ba,i,a,o,c,h),!0;case"mouseover":return wa=uc(wa,i,a,o,c,h),!0;case"pointerover":var g=h.pointerId;return lc.set(g,uc(lc.get(g)||null,i,a,o,c,h)),!0;case"gotpointercapture":return g=h.pointerId,cc.set(g,uc(cc.get(g)||null,i,a,o,c,h)),!0}return!1}function O_(i){var a=hi(i.target);if(a!==null){var o=fe(a);if(o!==null){if(a=o.tag,a===13){if(a=re(o),a!==null){i.blockedOn=a,Wr(i.priority,function(){if(o.tag===13){var c=jn(),h=aa(o,c);h!==null&&pn(h,o,c),ep(o,c)}});return}}else if(a===3&&o.stateNode.current.memoizedState.isDehydrated){i.blockedOn=o.tag===3?o.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Ad(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var o=np(i.nativeEvent);if(o===null){o=i.nativeEvent;var c=new o.constructor(o.type,o);Gn=c,o.target.dispatchEvent(c),Gn=null}else return a=tr(o),a!==null&&D_(a),i.blockedOn=o,!1;a.shift()}return!0}function P_(i,a,o){Ad(i)&&o.delete(a)}function aA(){rp=!1,xa!==null&&Ad(xa)&&(xa=null),ba!==null&&Ad(ba)&&(ba=null),wa!==null&&Ad(wa)&&(wa=null),lc.forEach(P_),cc.forEach(P_)}function Rd(i,a){i.blockedOn===a&&(i.blockedOn=null,rp||(rp=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,aA)))}var Nd=null;function M_(i){Nd!==i&&(Nd=i,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Nd===i&&(Nd=null);for(var a=0;a<i.length;a+=3){var o=i[a],c=i[a+1],h=i[a+2];if(typeof c!="function"){if(ip(c||o)===null)continue;break}var g=tr(o);g!==null&&(i.splice(a,3),a-=3,Kf(g,{pending:!0,data:h,method:o.method,action:c},c,h))}}))}function dc(i){function a(j){return Rd(j,i)}xa!==null&&Rd(xa,i),ba!==null&&Rd(ba,i),wa!==null&&Rd(wa,i),lc.forEach(a),cc.forEach(a);for(var o=0;o<Ea.length;o++){var c=Ea[o];c.blockedOn===i&&(c.blockedOn=null)}for(;0<Ea.length&&(o=Ea[0],o.blockedOn===null);)O_(o),o.blockedOn===null&&Ea.shift();if(o=(i.ownerDocument||i).$$reactFormReplay,o!=null)for(c=0;c<o.length;c+=3){var h=o[c],g=o[c+1],b=h[Mt]||null;if(typeof g=="function")b||M_(o);else if(b){var S=null;if(g&&g.hasAttribute("formAction")){if(h=g,b=g[Mt]||null)S=b.formAction;else if(ip(h)!==null)continue}else S=b.action;typeof S=="function"?o[c+1]=S:(o.splice(c,3),c-=3),M_(o)}}}function ap(i){this._internalRoot=i}Id.prototype.render=ap.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var o=a.current,c=jn();I_(o,c,i,a,null,null)},Id.prototype.unmount=ap.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;i.tag===0&&Io(),I_(i.current,2,null,i,null,null),dd(),a[er]=null}};function Id(i){this._internalRoot=i}Id.prototype.unstable_scheduleHydration=function(i){if(i){var a=gu();i={blockedOn:null,target:i,priority:a};for(var o=0;o<Ea.length&&a!==0&&a<Ea[o].priority;o++);Ea.splice(o,0,i),o===0&&O_(i)}};var L_=e.version;if(L_!=="19.0.0")throw Error(r(527,L_,"19.0.0"));ce.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=Q(a),i=i!==null?le(i):null,i=i===null?null:i.stateNode,i};var sA={bundleType:0,version:"19.0.0",rendererPackageName:"react-dom",currentDispatcherRef:A,findFiberByHostInstance:hi,reconcilerVersion:"19.0.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Cd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Cd.isDisabled&&Cd.supportsFiber)try{Bn=Cd.inject(sA),St=Cd}catch{}}return fc.createRoot=function(i,a){if(!s(i))throw Error(r(299));var o=!1,c="",h=e0,g=t0,b=n0,S=null;return a!=null&&(a.unstable_strictMode===!0&&(o=!0),a.identifierPrefix!==void 0&&(c=a.identifierPrefix),a.onUncaughtError!==void 0&&(h=a.onUncaughtError),a.onCaughtError!==void 0&&(g=a.onCaughtError),a.onRecoverableError!==void 0&&(b=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks)),a=R_(i,1,!1,null,null,o,c,h,g,b,S,null),i[er]=a.current,Fm(i.nodeType===8?i.parentNode:i),new ap(a)},fc.hydrateRoot=function(i,a,o){if(!s(i))throw Error(r(299));var c=!1,h="",g=e0,b=t0,S=n0,j=null,F=null;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(h=o.identifierPrefix),o.onUncaughtError!==void 0&&(g=o.onUncaughtError),o.onCaughtError!==void 0&&(b=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError),o.unstable_transitionCallbacks!==void 0&&(j=o.unstable_transitionCallbacks),o.formState!==void 0&&(F=o.formState)),a=R_(i,1,!0,a,o??null,c,h,g,b,S,j,F),a.context=N_(null),o=a.current,c=jn(),h=ha(c),h.callback=null,fa(o,h,c),a.current.lanes=c,At(a,c),Fi(a),i[er]=a.current,Fm(i),new Id(a)},fc.version="19.0.0",fc}var K_;function yA(){if(K_)return lp.exports;K_=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),lp.exports=vA(),lp.exports}var _A=yA(),mc={},Y_;function xA(){if(Y_)return mc;Y_=1,Object.defineProperty(mc,"__esModule",{value:!0}),mc.parse=u,mc.serialize=v;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,l=(()=>{const w=function(){};return w.prototype=Object.create(null),w})();function u(w,T){const I=new l,L=w.length;if(L<2)return I;const P=(T==null?void 0:T.decode)||_;let V=0;do{const Y=w.indexOf("=",V);if(Y===-1)break;const H=w.indexOf(";",V),ee=H===-1?L:H;if(Y>ee){V=w.lastIndexOf(";",Y-1)+1;continue}const X=f(w,V,Y),se=p(w,Y,X),M=w.slice(X,se);if(I[M]===void 0){let N=f(w,Y+1,ee),A=p(w,ee,N);const D=P(w.slice(N,A));I[M]=D}V=ee+1}while(V<L);return I}function f(w,T,I){do{const L=w.charCodeAt(T);if(L!==32&&L!==9)return T}while(++T<I);return I}function p(w,T,I){for(;T>I;){const L=w.charCodeAt(--T);if(L!==32&&L!==9)return T+1}return I}function v(w,T,I){const L=(I==null?void 0:I.encode)||encodeURIComponent;if(!n.test(w))throw new TypeError(`argument name is invalid: ${w}`);const P=L(T);if(!e.test(P))throw new TypeError(`argument val is invalid: ${T}`);let V=w+"="+P;if(!I)return V;if(I.maxAge!==void 0){if(!Number.isInteger(I.maxAge))throw new TypeError(`option maxAge is invalid: ${I.maxAge}`);V+="; Max-Age="+I.maxAge}if(I.domain){if(!t.test(I.domain))throw new TypeError(`option domain is invalid: ${I.domain}`);V+="; Domain="+I.domain}if(I.path){if(!r.test(I.path))throw new TypeError(`option path is invalid: ${I.path}`);V+="; Path="+I.path}if(I.expires){if(!E(I.expires)||!Number.isFinite(I.expires.valueOf()))throw new TypeError(`option expires is invalid: ${I.expires}`);V+="; Expires="+I.expires.toUTCString()}if(I.httpOnly&&(V+="; HttpOnly"),I.secure&&(V+="; Secure"),I.partitioned&&(V+="; Partitioned"),I.priority)switch(typeof I.priority=="string"?I.priority.toLowerCase():void 0){case"low":V+="; Priority=Low";break;case"medium":V+="; Priority=Medium";break;case"high":V+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${I.priority}`)}if(I.sameSite)switch(typeof I.sameSite=="string"?I.sameSite.toLowerCase():I.sameSite){case!0:case"strict":V+="; SameSite=Strict";break;case"lax":V+="; SameSite=Lax";break;case"none":V+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${I.sameSite}`)}return V}function _(w){if(w.indexOf("%")===-1)return w;try{return decodeURIComponent(w)}catch{return w}}function E(w){return s.call(w)==="[object Date]"}return mc}xA();/**
 * react-router v7.4.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Q_="popstate";function bA(n={}){function e(r,s){let{pathname:l,search:u,hash:f}=r.location;return Pp("",{pathname:l,search:u,hash:f},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){return typeof s=="string"?s:kc(s)}return EA(e,t,null,n)}function ht(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function xi(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function wA(){return Math.random().toString(36).substring(2,10)}function W_(n,e){return{usr:n.state,key:n.key,idx:e}}function Pp(n,e,t=null,r){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?tl(e):e,state:t,key:e&&e.key||r||wA()}}function kc({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function tl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let r=n.indexOf("?");r>=0&&(e.search=n.substring(r),n=n.substring(0,r)),n&&(e.pathname=n)}return e}function EA(n,e,t,r={}){let{window:s=document.defaultView,v5Compat:l=!1}=r,u=s.history,f="POP",p=null,v=_();v==null&&(v=0,u.replaceState({...u.state,idx:v},""));function _(){return(u.state||{idx:null}).idx}function E(){f="POP";let P=_(),V=P==null?null:P-v;v=P,p&&p({action:f,location:L.location,delta:V})}function w(P,V){f="PUSH";let Y=Pp(L.location,P,V);v=_()+1;let H=W_(Y,v),ee=L.createHref(Y);try{u.pushState(H,"",ee)}catch(X){if(X instanceof DOMException&&X.name==="DataCloneError")throw X;s.location.assign(ee)}l&&p&&p({action:f,location:L.location,delta:1})}function T(P,V){f="REPLACE";let Y=Pp(L.location,P,V);v=_();let H=W_(Y,v),ee=L.createHref(Y);u.replaceState(H,"",ee),l&&p&&p({action:f,location:L.location,delta:0})}function I(P){let V=s.location.origin!=="null"?s.location.origin:s.location.href,Y=typeof P=="string"?P:kc(P);return Y=Y.replace(/ $/,"%20"),ht(V,`No window.location.(origin|href) available to create URL for href: ${Y}`),new URL(Y,V)}let L={get action(){return f},get location(){return n(s,u)},listen(P){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(Q_,E),p=P,()=>{s.removeEventListener(Q_,E),p=null}},createHref(P){return e(s,P)},createURL:I,encodeLocation(P){let V=I(P);return{pathname:V.pathname,search:V.search,hash:V.hash}},push:w,replace:T,go(P){return u.go(P)}};return L}function cw(n,e,t="/"){return TA(n,e,t,!1)}function TA(n,e,t,r){let s=typeof e=="string"?tl(e):e,l=jr(s.pathname||"/",t);if(l==null)return null;let u=uw(n);SA(u);let f=null;for(let p=0;f==null&&p<u.length;++p){let v=MA(l);f=OA(u[p],v,r)}return f}function uw(n,e=[],t=[],r=""){let s=(l,u,f)=>{let p={relativePath:f===void 0?l.path||"":f,caseSensitive:l.caseSensitive===!0,childrenIndex:u,route:l};p.relativePath.startsWith("/")&&(ht(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length));let v=Ir([r,p.relativePath]),_=t.concat(p);l.children&&l.children.length>0&&(ht(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${v}".`),uw(l.children,e,_,v)),!(l.path==null&&!l.index)&&e.push({path:v,score:kA(v,l.index),routesMeta:_})};return n.forEach((l,u)=>{var f;if(l.path===""||!((f=l.path)!=null&&f.includes("?")))s(l,u);else for(let p of dw(l.path))s(l,u,p)}),e}function dw(n){let e=n.split("/");if(e.length===0)return[];let[t,...r]=e,s=t.endsWith("?"),l=t.replace(/\?$/,"");if(r.length===0)return s?[l,""]:[l];let u=dw(r.join("/")),f=[];return f.push(...u.map(p=>p===""?l:[l,p].join("/"))),s&&f.push(...u),f.map(p=>n.startsWith("/")&&p===""?"/":p)}function SA(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:jA(e.routesMeta.map(r=>r.childrenIndex),t.routesMeta.map(r=>r.childrenIndex)))}var AA=/^:[\w-]+$/,RA=3,NA=2,IA=1,CA=10,DA=-2,X_=n=>n==="*";function kA(n,e){let t=n.split("/"),r=t.length;return t.some(X_)&&(r+=DA),e&&(r+=NA),t.filter(s=>!X_(s)).reduce((s,l)=>s+(AA.test(l)?RA:l===""?IA:CA),r)}function jA(n,e){return n.length===e.length&&n.slice(0,-1).every((r,s)=>r===e[s])?n[n.length-1]-e[e.length-1]:0}function OA(n,e,t=!1){let{routesMeta:r}=n,s={},l="/",u=[];for(let f=0;f<r.length;++f){let p=r[f],v=f===r.length-1,_=l==="/"?e:e.slice(l.length)||"/",E=rh({path:p.relativePath,caseSensitive:p.caseSensitive,end:v},_),w=p.route;if(!E&&v&&t&&!r[r.length-1].route.index&&(E=rh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},_)),!E)return null;Object.assign(s,E.params),u.push({params:s,pathname:Ir([l,E.pathname]),pathnameBase:zA(Ir([l,E.pathnameBase])),route:w}),E.pathnameBase!=="/"&&(l=Ir([l,E.pathnameBase]))}return u}function rh(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,r]=PA(n.path,n.caseSensitive,n.end),s=e.match(t);if(!s)return null;let l=s[0],u=l.replace(/(.)\/+$/,"$1"),f=s.slice(1);return{params:r.reduce((v,{paramName:_,isOptional:E},w)=>{if(_==="*"){let I=f[w]||"";u=l.slice(0,l.length-I.length).replace(/(.)\/+$/,"$1")}const T=f[w];return E&&!T?v[_]=void 0:v[_]=(T||"").replace(/%2F/g,"/"),v},{}),pathname:l,pathnameBase:u,pattern:n}}function PA(n,e=!1,t=!0){xi(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let r=[],s="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,f,p)=>(r.push({paramName:f,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(r.push({paramName:"*"}),s+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?s+="\\/*$":n!==""&&n!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function MA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return xi(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function jr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,r=n.charAt(t);return r&&r!=="/"?null:n.slice(t)||"/"}function LA(n,e="/"){let{pathname:t,search:r="",hash:s=""}=typeof n=="string"?tl(n):n;return{pathname:t?t.startsWith("/")?t:UA(t,e):e,search:BA(r),hash:FA(s)}}function UA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(s=>{s===".."?t.length>1&&t.pop():s!=="."&&t.push(s)}),t.length>1?t.join("/"):"/"}function hp(n,e,t,r){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function VA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function _g(n){let e=VA(n);return e.map((t,r)=>r===e.length-1?t.pathname:t.pathnameBase)}function xg(n,e,t,r=!1){let s;typeof n=="string"?s=tl(n):(s={...n},ht(!s.pathname||!s.pathname.includes("?"),hp("?","pathname","search",s)),ht(!s.pathname||!s.pathname.includes("#"),hp("#","pathname","hash",s)),ht(!s.search||!s.search.includes("#"),hp("#","search","hash",s)));let l=n===""||s.pathname==="",u=l?"/":s.pathname,f;if(u==null)f=t;else{let E=e.length-1;if(!r&&u.startsWith("..")){let w=u.split("/");for(;w[0]==="..";)w.shift(),E-=1;s.pathname=w.join("/")}f=E>=0?e[E]:"/"}let p=LA(s,f),v=u&&u!=="/"&&u.endsWith("/"),_=(l||u===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(v||_)&&(p.pathname+="/"),p}var Ir=n=>n.join("/").replace(/\/\/+/g,"/"),zA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),BA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,FA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function qA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var hw=["POST","PUT","PATCH","DELETE"];new Set(hw);var HA=["GET",...hw];new Set(HA);var nl=C.createContext(null);nl.displayName="DataRouter";var kh=C.createContext(null);kh.displayName="DataRouterState";var fw=C.createContext({isTransitioning:!1});fw.displayName="ViewTransition";var GA=C.createContext(new Map);GA.displayName="Fetchers";var $A=C.createContext(null);$A.displayName="Await";var Ei=C.createContext(null);Ei.displayName="Navigation";var Xc=C.createContext(null);Xc.displayName="Location";var Ti=C.createContext({outlet:null,matches:[],isDataRoute:!1});Ti.displayName="Route";var bg=C.createContext(null);bg.displayName="RouteError";function KA(n,{relative:e}={}){ht(il(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:r}=C.useContext(Ei),{hash:s,pathname:l,search:u}=Jc(n,{relative:e}),f=l;return t!=="/"&&(f=l==="/"?t:Ir([t,l])),r.createHref({pathname:f,search:u,hash:s})}function il(){return C.useContext(Xc)!=null}function Xi(){return ht(il(),"useLocation() may be used only in the context of a <Router> component."),C.useContext(Xc).location}var mw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function pw(n){C.useContext(Ei).static||C.useLayoutEffect(n)}function zr(){let{isDataRoute:n}=C.useContext(Ti);return n?s2():YA()}function YA(){ht(il(),"useNavigate() may be used only in the context of a <Router> component.");let n=C.useContext(nl),{basename:e,navigator:t}=C.useContext(Ei),{matches:r}=C.useContext(Ti),{pathname:s}=Xi(),l=JSON.stringify(_g(r)),u=C.useRef(!1);return pw(()=>{u.current=!0}),C.useCallback((p,v={})=>{if(xi(u.current,mw),!u.current)return;if(typeof p=="number"){t.go(p);return}let _=xg(p,JSON.parse(l),s,v.relative==="path");n==null&&e!=="/"&&(_.pathname=_.pathname==="/"?e:Ir([e,_.pathname])),(v.replace?t.replace:t.push)(_,v.state,v)},[e,t,l,s,n])}C.createContext(null);function gw(){let{matches:n}=C.useContext(Ti),e=n[n.length-1];return e?e.params:{}}function Jc(n,{relative:e}={}){let{matches:t}=C.useContext(Ti),{pathname:r}=Xi(),s=JSON.stringify(_g(t));return C.useMemo(()=>xg(n,JSON.parse(s),r,e==="path"),[n,s,r,e])}function QA(n,e){return vw(n,e)}function vw(n,e,t,r){var Y;ht(il(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s,static:l}=C.useContext(Ei),{matches:u}=C.useContext(Ti),f=u[u.length-1],p=f?f.params:{},v=f?f.pathname:"/",_=f?f.pathnameBase:"/",E=f&&f.route;{let H=E&&E.path||"";yw(v,!E||H.endsWith("*")||H.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${v}" (under <Route path="${H}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${H}"> to <Route path="${H==="/"?"*":`${H}/*`}">.`)}let w=Xi(),T;if(e){let H=typeof e=="string"?tl(e):e;ht(_==="/"||((Y=H.pathname)==null?void 0:Y.startsWith(_)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${_}" but pathname "${H.pathname}" was given in the \`location\` prop.`),T=H}else T=w;let I=T.pathname||"/",L=I;if(_!=="/"){let H=_.replace(/^\//,"").split("/");L="/"+I.replace(/^\//,"").split("/").slice(H.length).join("/")}let P=!l&&t&&t.matches&&t.matches.length>0?t.matches:cw(n,{pathname:L});xi(E||P!=null,`No routes matched location "${T.pathname}${T.search}${T.hash}" `),xi(P==null||P[P.length-1].route.element!==void 0||P[P.length-1].route.Component!==void 0||P[P.length-1].route.lazy!==void 0,`Matched leaf route at location "${T.pathname}${T.search}${T.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let V=e2(P&&P.map(H=>Object.assign({},H,{params:Object.assign({},p,H.params),pathname:Ir([_,s.encodeLocation?s.encodeLocation(H.pathname).pathname:H.pathname]),pathnameBase:H.pathnameBase==="/"?_:Ir([_,s.encodeLocation?s.encodeLocation(H.pathnameBase).pathname:H.pathnameBase])})),u,t,r);return e&&V?C.createElement(Xc.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...T},navigationType:"POP"}},V):V}function WA(){let n=a2(),e=qA(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r},l={padding:"2px 4px",backgroundColor:r},u=null;return console.error("Error handled by React Router default ErrorBoundary:",n),u=C.createElement(C.Fragment,null,C.createElement("p",null," Hey developer "),C.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",C.createElement("code",{style:l},"ErrorBoundary")," or"," ",C.createElement("code",{style:l},"errorElement")," prop on your route.")),C.createElement(C.Fragment,null,C.createElement("h2",null,"Unexpected Application Error!"),C.createElement("h3",{style:{fontStyle:"italic"}},e),t?C.createElement("pre",{style:s},t):null,u)}var XA=C.createElement(WA,null),JA=class extends C.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?C.createElement(Ti.Provider,{value:this.props.routeContext},C.createElement(bg.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZA({routeContext:n,match:e,children:t}){let r=C.useContext(nl);return r&&r.static&&r.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=e.route.id),C.createElement(Ti.Provider,{value:n},t)}function e2(n,e=[],t=null,r=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let s=n,l=t==null?void 0:t.errors;if(l!=null){let p=s.findIndex(v=>v.route.id&&(l==null?void 0:l[v.route.id])!==void 0);ht(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let u=!1,f=-1;if(t)for(let p=0;p<s.length;p++){let v=s[p];if((v.route.HydrateFallback||v.route.hydrateFallbackElement)&&(f=p),v.route.id){let{loaderData:_,errors:E}=t,w=v.route.loader&&!_.hasOwnProperty(v.route.id)&&(!E||E[v.route.id]===void 0);if(v.route.lazy||w){u=!0,f>=0?s=s.slice(0,f+1):s=[s[0]];break}}}return s.reduceRight((p,v,_)=>{let E,w=!1,T=null,I=null;t&&(E=l&&v.route.id?l[v.route.id]:void 0,T=v.route.errorElement||XA,u&&(f<0&&_===0?(yw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),w=!0,I=null):f===_&&(w=!0,I=v.route.hydrateFallbackElement||null)));let L=e.concat(s.slice(0,_+1)),P=()=>{let V;return E?V=T:w?V=I:v.route.Component?V=C.createElement(v.route.Component,null):v.route.element?V=v.route.element:V=p,C.createElement(ZA,{match:v,routeContext:{outlet:p,matches:L,isDataRoute:t!=null},children:V})};return t&&(v.route.ErrorBoundary||v.route.errorElement||_===0)?C.createElement(JA,{location:t.location,revalidation:t.revalidation,component:T,error:E,children:P(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):P()},null)}function wg(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function t2(n){let e=C.useContext(nl);return ht(e,wg(n)),e}function n2(n){let e=C.useContext(kh);return ht(e,wg(n)),e}function i2(n){let e=C.useContext(Ti);return ht(e,wg(n)),e}function Eg(n){let e=i2(n),t=e.matches[e.matches.length-1];return ht(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function r2(){return Eg("useRouteId")}function a2(){var r;let n=C.useContext(bg),e=n2("useRouteError"),t=Eg("useRouteError");return n!==void 0?n:(r=e.errors)==null?void 0:r[t]}function s2(){let{router:n}=t2("useNavigate"),e=Eg("useNavigate"),t=C.useRef(!1);return pw(()=>{t.current=!0}),C.useCallback(async(s,l={})=>{xi(t.current,mw),t.current&&(typeof s=="number"?n.navigate(s):await n.navigate(s,{fromRouteId:e,...l}))},[n,e])}var J_={};function yw(n,e,t){!e&&!J_[n]&&(J_[n]=!0,xi(!1,t))}C.memo(o2);function o2({routes:n,future:e,state:t}){return vw(n,void 0,t,e)}function l2({to:n,replace:e,state:t,relative:r}){ht(il(),"<Navigate> may be used only in the context of a <Router> component.");let{static:s}=C.useContext(Ei);xi(!s,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=C.useContext(Ti),{pathname:u}=Xi(),f=zr(),p=xg(n,_g(l),u,r==="path"),v=JSON.stringify(p);return C.useEffect(()=>{f(JSON.parse(v),{replace:e,state:t,relative:r})},[f,v,r,e,t]),null}function Hi(n){ht(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function c2({basename:n="/",children:e=null,location:t,navigationType:r="POP",navigator:s,static:l=!1}){ht(!il(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=n.replace(/^\/*/,"/"),f=C.useMemo(()=>({basename:u,navigator:s,static:l,future:{}}),[u,s,l]);typeof t=="string"&&(t=tl(t));let{pathname:p="/",search:v="",hash:_="",state:E=null,key:w="default"}=t,T=C.useMemo(()=>{let I=jr(p,u);return I==null?null:{location:{pathname:I,search:v,hash:_,state:E,key:w},navigationType:r}},[u,p,v,_,E,w,r]);return xi(T!=null,`<Router basename="${u}"> is not able to match the URL "${p}${v}${_}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:C.createElement(Ei.Provider,{value:f},C.createElement(Xc.Provider,{children:e,value:T}))}function u2({children:n,location:e}){return QA(Mp(n),e)}function Mp(n,e=[]){let t=[];return C.Children.forEach(n,(r,s)=>{if(!C.isValidElement(r))return;let l=[...e,s];if(r.type===C.Fragment){t.push.apply(t,Mp(r.props.children,l));return}ht(r.type===Hi,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ht(!r.props.index||!r.props.children,"An index route cannot have child routes.");let u={id:r.props.id||l.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(u.children=Mp(r.props.children,l)),t.push(u)}),t}var Hd="get",Gd="application/x-www-form-urlencoded";function jh(n){return n!=null&&typeof n.tagName=="string"}function d2(n){return jh(n)&&n.tagName.toLowerCase()==="button"}function h2(n){return jh(n)&&n.tagName.toLowerCase()==="form"}function f2(n){return jh(n)&&n.tagName.toLowerCase()==="input"}function m2(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function p2(n,e){return n.button===0&&(!e||e==="_self")&&!m2(n)}var Dd=null;function g2(){if(Dd===null)try{new FormData(document.createElement("form"),0),Dd=!1}catch{Dd=!0}return Dd}var v2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function fp(n){return n!=null&&!v2.has(n)?(xi(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Gd}"`),null):n}function y2(n,e){let t,r,s,l,u;if(h2(n)){let f=n.getAttribute("action");r=f?jr(f,e):null,t=n.getAttribute("method")||Hd,s=fp(n.getAttribute("enctype"))||Gd,l=new FormData(n)}else if(d2(n)||f2(n)&&(n.type==="submit"||n.type==="image")){let f=n.form;if(f==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||f.getAttribute("action");if(r=p?jr(p,e):null,t=n.getAttribute("formmethod")||f.getAttribute("method")||Hd,s=fp(n.getAttribute("formenctype"))||fp(f.getAttribute("enctype"))||Gd,l=new FormData(f,n),!g2()){let{name:v,type:_,value:E}=n;if(_==="image"){let w=v?`${v}.`:"";l.append(`${w}x`,"0"),l.append(`${w}y`,"0")}else v&&l.append(v,E)}}else{if(jh(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Hd,r=null,s=Gd,u=n}return l&&s==="text/plain"&&(u=l,l=void 0),{action:r,method:t.toLowerCase(),encType:s,formData:l,body:u}}function Tg(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function _2(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function x2(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function b2(n,e,t){let r=await Promise.all(n.map(async s=>{let l=e.routes[s.route.id];if(l){let u=await _2(l,t);return u.links?u.links():[]}return[]}));return S2(r.flat(1).filter(x2).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function Z_(n,e,t,r,s,l){let u=(p,v)=>t[v]?p.route.id!==t[v].route.id:!0,f=(p,v)=>{var _;return t[v].pathname!==p.pathname||((_=t[v].route.path)==null?void 0:_.endsWith("*"))&&t[v].params["*"]!==p.params["*"]};return l==="assets"?e.filter((p,v)=>u(p,v)||f(p,v)):l==="data"?e.filter((p,v)=>{var E;let _=r.routes[p.route.id];if(!_||!_.hasLoader)return!1;if(u(p,v)||f(p,v))return!0;if(p.route.shouldRevalidate){let w=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((E=t[0])==null?void 0:E.params)||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function w2(n,e,{includeHydrateFallback:t}={}){return E2(n.map(r=>{let s=e.routes[r.route.id];if(!s)return[];let l=[s.module];return s.clientActionModule&&(l=l.concat(s.clientActionModule)),s.clientLoaderModule&&(l=l.concat(s.clientLoaderModule)),t&&s.hydrateFallbackModule&&(l=l.concat(s.hydrateFallbackModule)),s.imports&&(l=l.concat(s.imports)),l}).flat(1))}function E2(n){return[...new Set(n)]}function T2(n){let e={},t=Object.keys(n).sort();for(let r of t)e[r]=n[r];return e}function S2(n,e){let t=new Set;return new Set(e),n.reduce((r,s)=>{let l=JSON.stringify(T2(s));return t.has(l)||(t.add(l),r.push({key:l,link:s})),r},[])}function A2(n,e){let t=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return t.pathname==="/"?t.pathname="_root.data":e&&jr(t.pathname,e)==="/"?t.pathname=`${e.replace(/\/$/,"")}/_root.data`:t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function _w(){let n=C.useContext(nl);return Tg(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function R2(){let n=C.useContext(kh);return Tg(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var Sg=C.createContext(void 0);Sg.displayName="FrameworkContext";function xw(){let n=C.useContext(Sg);return Tg(n,"You must render this element inside a <HydratedRouter> element"),n}function N2(n,e){let t=C.useContext(Sg),[r,s]=C.useState(!1),[l,u]=C.useState(!1),{onFocus:f,onBlur:p,onMouseEnter:v,onMouseLeave:_,onTouchStart:E}=e,w=C.useRef(null);C.useEffect(()=>{if(n==="render"&&u(!0),n==="viewport"){let L=V=>{V.forEach(Y=>{u(Y.isIntersecting)})},P=new IntersectionObserver(L,{threshold:.5});return w.current&&P.observe(w.current),()=>{P.disconnect()}}},[n]),C.useEffect(()=>{if(r){let L=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(L)}}},[r]);let T=()=>{s(!0)},I=()=>{s(!1),u(!1)};return t?n!=="intent"?[l,w,{}]:[l,w,{onFocus:pc(f,T),onBlur:pc(p,I),onMouseEnter:pc(v,T),onMouseLeave:pc(_,I),onTouchStart:pc(E,T)}]:[!1,w,{}]}function pc(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function I2({page:n,...e}){let{router:t}=_w(),r=C.useMemo(()=>cw(t.routes,n,t.basename),[t.routes,n,t.basename]);return r?C.createElement(D2,{page:n,matches:r,...e}):null}function C2(n){let{manifest:e,routeModules:t}=xw(),[r,s]=C.useState([]);return C.useEffect(()=>{let l=!1;return b2(n,e,t).then(u=>{l||s(u)}),()=>{l=!0}},[n,e,t]),r}function D2({page:n,matches:e,...t}){let r=Xi(),{manifest:s,routeModules:l}=xw(),{basename:u}=_w(),{loaderData:f,matches:p}=R2(),v=C.useMemo(()=>Z_(n,e,p,s,r,"data"),[n,e,p,s,r]),_=C.useMemo(()=>Z_(n,e,p,s,r,"assets"),[n,e,p,s,r]),E=C.useMemo(()=>{if(n===r.pathname+r.search+r.hash)return[];let I=new Set,L=!1;if(e.forEach(V=>{var H;let Y=s.routes[V.route.id];!Y||!Y.hasLoader||(!v.some(ee=>ee.route.id===V.route.id)&&V.route.id in f&&((H=l[V.route.id])!=null&&H.shouldRevalidate)||Y.hasClientLoader?L=!0:I.add(V.route.id))}),I.size===0)return[];let P=A2(n,u);return L&&I.size>0&&P.searchParams.set("_routes",e.filter(V=>I.has(V.route.id)).map(V=>V.route.id).join(",")),[P.pathname+P.search]},[u,f,r,s,v,e,n,l]),w=C.useMemo(()=>w2(_,s),[_,s]),T=C2(_);return C.createElement(C.Fragment,null,E.map(I=>C.createElement("link",{key:I,rel:"prefetch",as:"fetch",href:I,...t})),w.map(I=>C.createElement("link",{key:I,rel:"modulepreload",href:I,...t})),T.map(({key:I,link:L})=>C.createElement("link",{key:I,...L})))}function k2(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var bw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{bw&&(window.__reactRouterVersion="7.4.0")}catch{}function j2({basename:n,children:e,window:t}){let r=C.useRef();r.current==null&&(r.current=bA({window:t,v5Compat:!0}));let s=r.current,[l,u]=C.useState({action:s.action,location:s.location}),f=C.useCallback(p=>{C.startTransition(()=>u(p))},[u]);return C.useLayoutEffect(()=>s.listen(f),[s,f]),C.createElement(c2,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:s})}var ww=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ye=C.forwardRef(function({onClick:e,discover:t="render",prefetch:r="none",relative:s,reloadDocument:l,replace:u,state:f,target:p,to:v,preventScrollReset:_,viewTransition:E,...w},T){let{basename:I}=C.useContext(Ei),L=typeof v=="string"&&ww.test(v),P,V=!1;if(typeof v=="string"&&L&&(P=v,bw))try{let A=new URL(window.location.href),D=v.startsWith("//")?new URL(A.protocol+v):new URL(v),U=jr(D.pathname,I);D.origin===A.origin&&U!=null?v=U+D.search+D.hash:V=!0}catch{xi(!1,`<Link to="${v}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Y=KA(v,{relative:s}),[H,ee,X]=N2(r,w),se=L2(v,{replace:u,state:f,target:p,preventScrollReset:_,relative:s,viewTransition:E});function M(A){e&&e(A),A.defaultPrevented||se(A)}let N=C.createElement("a",{...w,...X,href:P||Y,onClick:V||l?e:M,ref:k2(T,ee),target:p,"data-discover":!L&&t==="render"?"true":void 0});return H&&!L?C.createElement(C.Fragment,null,N,C.createElement(I2,{page:Y})):N});Ye.displayName="Link";var O2=C.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:r="",end:s=!1,style:l,to:u,viewTransition:f,children:p,...v},_){let E=Jc(u,{relative:v.relative}),w=Xi(),T=C.useContext(kh),{navigator:I,basename:L}=C.useContext(Ei),P=T!=null&&F2(E)&&f===!0,V=I.encodeLocation?I.encodeLocation(E).pathname:E.pathname,Y=w.pathname,H=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;t||(Y=Y.toLowerCase(),H=H?H.toLowerCase():null,V=V.toLowerCase()),H&&L&&(H=jr(H,L)||H);const ee=V!=="/"&&V.endsWith("/")?V.length-1:V.length;let X=Y===V||!s&&Y.startsWith(V)&&Y.charAt(ee)==="/",se=H!=null&&(H===V||!s&&H.startsWith(V)&&H.charAt(V.length)==="/"),M={isActive:X,isPending:se,isTransitioning:P},N=X?e:void 0,A;typeof r=="function"?A=r(M):A=[r,X?"active":null,se?"pending":null,P?"transitioning":null].filter(Boolean).join(" ");let D=typeof l=="function"?l(M):l;return C.createElement(Ye,{...v,"aria-current":N,className:A,ref:_,style:D,to:u,viewTransition:f},typeof p=="function"?p(M):p)});O2.displayName="NavLink";var P2=C.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:r,replace:s,state:l,method:u=Hd,action:f,onSubmit:p,relative:v,preventScrollReset:_,viewTransition:E,...w},T)=>{let I=z2(),L=B2(f,{relative:v}),P=u.toLowerCase()==="get"?"get":"post",V=typeof f=="string"&&ww.test(f),Y=H=>{if(p&&p(H),H.defaultPrevented)return;H.preventDefault();let ee=H.nativeEvent.submitter,X=(ee==null?void 0:ee.getAttribute("formmethod"))||u;I(ee||H.currentTarget,{fetcherKey:e,method:X,navigate:t,replace:s,state:l,relative:v,preventScrollReset:_,viewTransition:E})};return C.createElement("form",{ref:T,method:P,action:L,onSubmit:r?p:Y,...w,"data-discover":!V&&n==="render"?"true":void 0})});P2.displayName="Form";function M2(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ew(n){let e=C.useContext(nl);return ht(e,M2(n)),e}function L2(n,{target:e,replace:t,state:r,preventScrollReset:s,relative:l,viewTransition:u}={}){let f=zr(),p=Xi(),v=Jc(n,{relative:l});return C.useCallback(_=>{if(p2(_,e)){_.preventDefault();let E=t!==void 0?t:kc(p)===kc(v);f(n,{replace:E,state:r,preventScrollReset:s,relative:l,viewTransition:u})}},[p,f,v,t,r,e,n,s,l,u])}var U2=0,V2=()=>`__${String(++U2)}__`;function z2(){let{router:n}=Ew("useSubmit"),{basename:e}=C.useContext(Ei),t=r2();return C.useCallback(async(r,s={})=>{let{action:l,method:u,encType:f,formData:p,body:v}=y2(r,e);if(s.navigate===!1){let _=s.fetcherKey||V2();await n.fetch(_,t,s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:v,formMethod:s.method||u,formEncType:s.encType||f,flushSync:s.flushSync})}else await n.navigate(s.action||l,{preventScrollReset:s.preventScrollReset,formData:p,body:v,formMethod:s.method||u,formEncType:s.encType||f,replace:s.replace,state:s.state,fromRouteId:t,flushSync:s.flushSync,viewTransition:s.viewTransition})},[n,e,t])}function B2(n,{relative:e}={}){let{basename:t}=C.useContext(Ei),r=C.useContext(Ti);ht(r,"useFormAction must be used inside a RouteContext");let[s]=r.matches.slice(-1),l={...Jc(n||".",{relative:e})},u=Xi();if(n==null){l.search=u.search;let f=new URLSearchParams(l.search),p=f.getAll("index");if(p.some(_=>_==="")){f.delete("index"),p.filter(E=>E).forEach(E=>f.append("index",E));let _=f.toString();l.search=_?`?${_}`:""}}return(!n||n===".")&&s.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Ir([t,l.pathname])),kc(l)}function F2(n,e={}){let t=C.useContext(fw);ht(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ew("useViewTransitionState"),s=Jc(n,{relative:e.relative});if(!t.isTransitioning)return!1;let l=jr(t.currentLocation.pathname,r)||t.currentLocation.pathname,u=jr(t.nextLocation.pathname,r)||t.nextLocation.pathname;return rh(s.pathname,u)!=null||rh(s.pathname,l)!=null}new TextEncoder;const q2=()=>{};var ex={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw=function(n){const e=[];let t=0;for(let r=0;r<n.length;r++){let s=n.charCodeAt(r);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},H2=function(n){const e=[];let t=0,r=0;for(;t<n.length;){const s=n[t++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const l=n[t++];e[r++]=String.fromCharCode((s&31)<<6|l&63)}else if(s>239&&s<365){const l=n[t++],u=n[t++],f=n[t++],p=((s&7)<<18|(l&63)<<12|(u&63)<<6|f&63)-65536;e[r++]=String.fromCharCode(55296+(p>>10)),e[r++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],u=n[t++];e[r++]=String.fromCharCode((s&15)<<12|(l&63)<<6|u&63)}}return e.join("")},Sw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<n.length;s+=3){const l=n[s],u=s+1<n.length,f=u?n[s+1]:0,p=s+2<n.length,v=p?n[s+2]:0,_=l>>2,E=(l&3)<<4|f>>4;let w=(f&15)<<2|v>>6,T=v&63;p||(T=64,u||(w=64)),r.push(t[_],t[E],t[w],t[T])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(Tw(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):H2(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<n.length;){const l=t[n.charAt(s++)],f=s<n.length?t[n.charAt(s)]:0;++s;const v=s<n.length?t[n.charAt(s)]:64;++s;const E=s<n.length?t[n.charAt(s)]:64;if(++s,l==null||f==null||v==null||E==null)throw new G2;const w=l<<2|f>>4;if(r.push(w),v!==64){const T=f<<4&240|v>>2;if(r.push(T),E!==64){const I=v<<6&192|E;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class G2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $2=function(n){const e=Tw(n);return Sw.encodeByteArray(e,!0)},ah=function(n){return $2(n).replace(/\./g,"")},Aw=function(n){try{return Sw.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y2=()=>K2().__FIREBASE_DEFAULTS__,Q2=()=>{if(typeof process>"u"||typeof ex>"u")return;const n=ex.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},W2=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&Aw(n[1]);return e&&JSON.parse(e)},Oh=()=>{try{return q2()||Y2()||Q2()||W2()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Rw=n=>{var e,t;return(t=(e=Oh())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Ag=n=>{const e=Rw(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},Nw=()=>{var n;return(n=Oh())===null||n===void 0?void 0:n.config},Iw=n=>{var e;return(e=Oh())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cw(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},r=e||"demo-project",s=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const u=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}}},n);return[ah(JSON.stringify(t)),ah(JSON.stringify(u)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function J2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(un())}function Z2(){var n;const e=(n=Oh())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function eR(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function tR(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function nR(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function iR(){const n=un();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function rR(){return!Z2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function aR(){try{return typeof indexedDB=="object"}catch{return!1}}function sR(){return new Promise((n,e)=>{try{let t=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var l;e(((l=s.error)===null||l===void 0?void 0:l.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR="FirebaseError";class Si extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=oR,Object.setPrototypeOf(this,Si.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zc.prototype.create)}}class Zc{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},s=`${this.service}/${e}`,l=this.errors[e],u=l?lR(l,r):"Error",f=`${this.serviceName}: ${u} (${s}).`;return new Si(s,f,r)}}function lR(n,e){return n.replace(cR,(t,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const cR=/\{\$([^}]+)}/g;function uR(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Ps(n,e){if(n===e)return!0;const t=Object.keys(n),r=Object.keys(e);for(const s of t){if(!r.includes(s))return!1;const l=n[s],u=e[s];if(tx(l)&&tx(u)){if(!Ps(l,u))return!1}else if(l!==u)return!1}for(const s of r)if(!t.includes(s))return!1;return!0}function tx(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eu(n){const e=[];for(const[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _c(n){const e={};return n.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,l]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(l)}}),e}function xc(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function dR(n,e){const t=new hR(n,e);return t.subscribe.bind(t)}class hR{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let s;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");fR(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:r},s.next===void 0&&(s.next=mp),s.error===void 0&&(s.error=mp),s.complete===void 0&&(s.complete=mp);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fR(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function mp(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(n){return n&&n._delegate?n._delegate:n}class Or{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const r=new X2;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(t=e==null?void 0:e.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(l){if(s)return null;throw l}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(gR(e))try{this.getOrInitializeService({instanceIdentifier:Is})}catch{}for(const[t,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:s});r.resolve(l)}catch{}}}}clearInstance(e=Is){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Is){return this.instances.has(e)}getOptions(e=Is){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:t});for(const[l,u]of this.instancesDeferred.entries()){const f=this.normalizeInstanceIdentifier(l);r===f&&u.resolve(s)}return s}onInit(e,t){var r;const s=this.normalizeInstanceIdentifier(t),l=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;l.add(e),this.onInitCallbacks.set(s,l);const u=this.instances.get(s);return u&&e(u,s),()=>{l.delete(e)}}invokeOnInitCallbacks(e,t){const r=this.onInitCallbacks.get(t);if(r)for(const s of r)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:pR(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Is){return this.component?this.component.multipleInstances?e:Is:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function pR(n){return n===Is?void 0:n}function gR(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new mR(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ze;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(ze||(ze={}));const yR={debug:ze.DEBUG,verbose:ze.VERBOSE,info:ze.INFO,warn:ze.WARN,error:ze.ERROR,silent:ze.SILENT},_R=ze.INFO,xR={[ze.DEBUG]:"log",[ze.VERBOSE]:"log",[ze.INFO]:"info",[ze.WARN]:"warn",[ze.ERROR]:"error"},bR=(n,e,...t)=>{if(e<n.logLevel)return;const r=new Date().toISOString(),s=xR[e];if(s)console[s](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Rg{constructor(e){this.name=e,this._logLevel=_R,this._logHandler=bR,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ze))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ze.DEBUG,...e),this._logHandler(this,ze.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ze.VERBOSE,...e),this._logHandler(this,ze.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ze.INFO,...e),this._logHandler(this,ze.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ze.WARN,...e),this._logHandler(this,ze.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ze.ERROR,...e),this._logHandler(this,ze.ERROR,...e)}}const wR=(n,e)=>e.some(t=>n instanceof t);let nx,ix;function ER(){return nx||(nx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TR(){return ix||(ix=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Dw=new WeakMap,Lp=new WeakMap,kw=new WeakMap,pp=new WeakMap,Ng=new WeakMap;function SR(n){const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("success",l),n.removeEventListener("error",u)},l=()=>{t(ka(n.result)),s()},u=()=>{r(n.error),s()};n.addEventListener("success",l),n.addEventListener("error",u)});return e.then(t=>{t instanceof IDBCursor&&Dw.set(t,n)}).catch(()=>{}),Ng.set(e,n),e}function AR(n){if(Lp.has(n))return;const e=new Promise((t,r)=>{const s=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",u),n.removeEventListener("abort",u)},l=()=>{t(),s()},u=()=>{r(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",l),n.addEventListener("error",u),n.addEventListener("abort",u)});Lp.set(n,e)}let Up={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Lp.get(n);if(e==="objectStoreNames")return n.objectStoreNames||kw.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ka(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function RR(n){Up=n(Up)}function NR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const r=n.call(gp(this),e,...t);return kw.set(r,e.sort?e.sort():[e]),ka(r)}:TR().includes(n)?function(...e){return n.apply(gp(this),e),ka(Dw.get(this))}:function(...e){return ka(n.apply(gp(this),e))}}function IR(n){return typeof n=="function"?NR(n):(n instanceof IDBTransaction&&AR(n),wR(n,ER())?new Proxy(n,Up):n)}function ka(n){if(n instanceof IDBRequest)return SR(n);if(pp.has(n))return pp.get(n);const e=IR(n);return e!==n&&(pp.set(n,e),Ng.set(e,n)),e}const gp=n=>Ng.get(n);function CR(n,e,{blocked:t,upgrade:r,blocking:s,terminated:l}={}){const u=indexedDB.open(n,e),f=ka(u);return r&&u.addEventListener("upgradeneeded",p=>{r(ka(u.result),p.oldVersion,p.newVersion,ka(u.transaction),p)}),t&&u.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),f.then(p=>{l&&p.addEventListener("close",()=>l()),s&&p.addEventListener("versionchange",v=>s(v.oldVersion,v.newVersion,v))}).catch(()=>{}),f}const DR=["get","getKey","getAll","getAllKeys","count"],kR=["put","add","delete","clear"],vp=new Map;function rx(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(vp.get(e))return vp.get(e);const t=e.replace(/FromIndex$/,""),r=e!==t,s=kR.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(s||DR.includes(t)))return;const l=async function(u,...f){const p=this.transaction(u,s?"readwrite":"readonly");let v=p.store;return r&&(v=v.index(f.shift())),(await Promise.all([v[t](...f),s&&p.done]))[0]};return vp.set(e,l),l}RR(n=>({...n,get:(e,t,r)=>rx(e,t)||n.get(e,t,r),has:(e,t)=>!!rx(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(OR(t)){const r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}}function OR(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vp="@firebase/app",ax="0.11.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pr=new Rg("@firebase/app"),PR="@firebase/app-compat",MR="@firebase/analytics-compat",LR="@firebase/analytics",UR="@firebase/app-check-compat",VR="@firebase/app-check",zR="@firebase/auth",BR="@firebase/auth-compat",FR="@firebase/database",qR="@firebase/data-connect",HR="@firebase/database-compat",GR="@firebase/functions",$R="@firebase/functions-compat",KR="@firebase/installations",YR="@firebase/installations-compat",QR="@firebase/messaging",WR="@firebase/messaging-compat",XR="@firebase/performance",JR="@firebase/performance-compat",ZR="@firebase/remote-config",eN="@firebase/remote-config-compat",tN="@firebase/storage",nN="@firebase/storage-compat",iN="@firebase/firestore",rN="@firebase/vertexai",aN="@firebase/firestore-compat",sN="firebase",oN="11.5.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp="[DEFAULT]",lN={[Vp]:"fire-core",[PR]:"fire-core-compat",[LR]:"fire-analytics",[MR]:"fire-analytics-compat",[VR]:"fire-app-check",[UR]:"fire-app-check-compat",[zR]:"fire-auth",[BR]:"fire-auth-compat",[FR]:"fire-rtdb",[qR]:"fire-data-connect",[HR]:"fire-rtdb-compat",[GR]:"fire-fn",[$R]:"fire-fn-compat",[KR]:"fire-iid",[YR]:"fire-iid-compat",[QR]:"fire-fcm",[WR]:"fire-fcm-compat",[XR]:"fire-perf",[JR]:"fire-perf-compat",[ZR]:"fire-rc",[eN]:"fire-rc-compat",[tN]:"fire-gcs",[nN]:"fire-gcs-compat",[iN]:"fire-fst",[aN]:"fire-fst-compat",[rN]:"fire-vertex","fire-js":"fire-js",[sN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sh=new Map,cN=new Map,Bp=new Map;function sx(n,e){try{n.container.addComponent(e)}catch(t){Pr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ua(n){const e=n.name;if(Bp.has(e))return Pr.debug(`There were multiple attempts to register component ${e}.`),!1;Bp.set(e,n);for(const t of sh.values())sx(t,n);for(const t of cN.values())sx(t,n);return!0}function tu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function En(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ja=new Zc("app","Firebase",uN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Or("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ja.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bs=oN;function jw(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const r=Object.assign({name:zp,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw ja.create("bad-app-name",{appName:String(s)});if(t||(t=Nw()),!t)throw ja.create("no-options");const l=sh.get(s);if(l){if(Ps(t,l.options)&&Ps(r,l.config))return l;throw ja.create("duplicate-app",{appName:s})}const u=new vR(s);for(const p of Bp.values())u.addComponent(p);const f=new dN(t,r,u);return sh.set(s,f),f}function Ph(n=zp){const e=sh.get(n);if(!e&&n===zp&&Nw())return jw();if(!e)throw ja.create("no-app",{appName:n});return e}function ai(n,e,t){var r;let s=(r=lN[n])!==null&&r!==void 0?r:n;t&&(s+=`-${t}`);const l=s.match(/\s|\//),u=e.match(/\s|\//);if(l||u){const f=[`Unable to register library "${s}" with version "${e}":`];l&&f.push(`library name "${s}" contains illegal characters (whitespace or "/")`),l&&u&&f.push("and"),u&&f.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Pr.warn(f.join(" "));return}Ua(new Or(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN="firebase-heartbeat-database",fN=1,jc="firebase-heartbeat-store";let yp=null;function Ow(){return yp||(yp=CR(hN,fN,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(jc)}catch(t){console.warn(t)}}}}).catch(n=>{throw ja.create("idb-open",{originalErrorMessage:n.message})})),yp}async function mN(n){try{const t=(await Ow()).transaction(jc),r=await t.objectStore(jc).get(Pw(n));return await t.done,r}catch(e){if(e instanceof Si)Pr.warn(e.message);else{const t=ja.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Pr.warn(t.message)}}}async function ox(n,e){try{const r=(await Ow()).transaction(jc,"readwrite");await r.objectStore(jc).put(e,Pw(n)),await r.done}catch(t){if(t instanceof Si)Pr.warn(t.message);else{const r=ja.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Pr.warn(r.message)}}}function Pw(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pN=1024,gN=30;class vN{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new _N(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),l=lx();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===l||this._heartbeatsCache.heartbeats.some(u=>u.date===l))return;if(this._heartbeatsCache.heartbeats.push({date:l,agent:s}),this._heartbeatsCache.heartbeats.length>gN){const u=xN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(u,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Pr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=lx(),{heartbeatsToSend:r,unsentEntries:s}=yN(this._heartbeatsCache.heartbeats),l=ah(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),l}catch(t){return Pr.warn(t),""}}}function lx(){return new Date().toISOString().substring(0,10)}function yN(n,e=pN){const t=[];let r=n.slice();for(const s of n){const l=t.find(u=>u.agent===s.agent);if(l){if(l.dates.push(s.date),cx(t)>e){l.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),cx(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}class _N{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return aR()?sR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await mN(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return ox(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const s=await this.read();return ox(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function cx(n){return ah(JSON.stringify({version:2,heartbeats:n})).length}function xN(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let r=1;r<n.length;r++)n[r].date<t&&(t=n[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bN(n){Ua(new Or("platform-logger",e=>new jR(e),"PRIVATE")),Ua(new Or("heartbeat",e=>new vN(e),"PRIVATE")),ai(Vp,ax,n),ai(Vp,ax,"esm2017"),ai("fire-js","")}bN("");function Ig(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t}function Fs(n,e,t,r){function s(l){return l instanceof t?l:new t(function(u){u(l)})}return new(t||(t=Promise))(function(l,u){function f(_){try{v(r.next(_))}catch(E){u(E)}}function p(_){try{v(r.throw(_))}catch(E){u(E)}}function v(_){_.done?l(_.value):s(_.value).then(f,p)}v((r=r.apply(n,e||[])).next())})}function Mw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wN=Mw,Lw=new Zc("auth","Firebase",Mw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh=new Rg("@firebase/auth");function EN(n,...e){oh.logLevel<=ze.WARN&&oh.warn(`Auth (${Bs}): ${n}`,...e)}function $d(n,...e){oh.logLevel<=ze.ERROR&&oh.error(`Auth (${Bs}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(n,...e){throw Cg(n,...e)}function $i(n,...e){return Cg(n,...e)}function Uw(n,e,t){const r=Object.assign(Object.assign({},wN()),{[e]:t});return new Zc("auth","Firebase",r).create(e,{appName:n.name})}function Cr(n){return Uw(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Cg(n,...e){if(typeof n!="string"){const t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return Lw.create(n,...e)}function Re(n,e,...t){if(!n)throw Cg(e,...t)}function Ar(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $d(e),new Error(e)}function Mr(n,e){n||Ar(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fp(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function TN(){return ux()==="http:"||ux()==="https:"}function ux(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(TN()||tR()||"connection"in navigator)?navigator.onLine:!0}function AN(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(e,t){this.shortDelay=e,this.longDelay=t,Mr(t>e,"Short delay should be less than long delay!"),this.isMobile=J2()||nR()}get(){return SN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(n,e){Mr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vw{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ar("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ar("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ar("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NN=new nu(3e4,6e4);function Br(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Fr(n,e,t,r,s={}){return zw(n,s,async()=>{let l={},u={};r&&(e==="GET"?u=r:l={body:JSON.stringify(r)});const f=eu(Object.assign({key:n.config.apiKey},u)).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const v=Object.assign({method:e,headers:p},l);return eR()||(v.referrerPolicy="no-referrer"),Vw.fetch()(Bw(n,n.config.apiHost,t,f),v)})}async function zw(n,e,t){n._canInitEmulator=!1;const r=Object.assign(Object.assign({},RN),e);try{const s=new CN(n),l=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const u=await l.json();if("needConfirmation"in u)throw kd(n,"account-exists-with-different-credential",u);if(l.ok&&!("errorMessage"in u))return u;{const f=l.ok?u.errorMessage:u.error.message,[p,v]=f.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw kd(n,"credential-already-in-use",u);if(p==="EMAIL_EXISTS")throw kd(n,"email-already-in-use",u);if(p==="USER_DISABLED")throw kd(n,"user-disabled",u);const _=r[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(v)throw Uw(n,_,v);bi(n,_)}}catch(s){if(s instanceof Si)throw s;bi(n,"network-request-failed",{message:String(s)})}}async function iu(n,e,t,r,s={}){const l=await Fr(n,e,t,r,s);return"mfaPendingCredential"in l&&bi(n,"multi-factor-auth-required",{_serverResponse:l}),l}function Bw(n,e,t,r){const s=`${e}${t}?${r}`;return n.config.emulator?Dg(n.config,s):`${n.config.apiScheme}://${s}`}function IN(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class CN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r($i(this.auth,"network-request-failed")),NN.get())})}}function kd(n,e,t){const r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);const s=$i(n,e,r);return s.customData._tokenResponse=t,s}function dx(n){return n!==void 0&&n.enterprise!==void 0}class DN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return IN(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function kN(n,e){return Fr(n,"GET","/v2/recaptchaConfig",Br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jN(n,e){return Fr(n,"POST","/v1/accounts:delete",e)}async function Fw(n,e){return Fr(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function ON(n,e=!1){const t=it(n),r=await t.getIdToken(e),s=kg(r);Re(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const l=typeof s.firebase=="object"?s.firebase:void 0,u=l==null?void 0:l.sign_in_provider;return{claims:s,token:r,authTime:Ac(_p(s.auth_time)),issuedAtTime:Ac(_p(s.iat)),expirationTime:Ac(_p(s.exp)),signInProvider:u||null,signInSecondFactor:(l==null?void 0:l.sign_in_second_factor)||null}}function _p(n){return Number(n)*1e3}function kg(n){const[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return $d("JWT malformed, contained fewer than 3 sections"),null;try{const s=Aw(t);return s?JSON.parse(s):($d("Failed to decode base64 JWT payload"),null)}catch(s){return $d("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hx(n){const e=kg(n);return Re(e,"internal-error"),Re(typeof e.exp<"u","internal-error"),Re(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(n,e,t=!1){if(t)return e;try{return await e}catch(r){throw r instanceof Si&&PN(r)&&n.auth.currentUser===n&&await n.auth.signOut(),r}}function PN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MN{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lh(n){var e;const t=n.auth,r=await n.getIdToken(),s=await Oc(n,Fw(t,{idToken:r}));Re(s==null?void 0:s.users.length,t,"internal-error");const l=s.users[0];n._notifyReloadListener(l);const u=!((e=l.providerUserInfo)===null||e===void 0)&&e.length?qw(l.providerUserInfo):[],f=UN(n.providerData,u),p=n.isAnonymous,v=!(n.email&&l.passwordHash)&&!(f!=null&&f.length),_=p?v:!1,E={uid:l.localId,displayName:l.displayName||null,photoURL:l.photoUrl||null,email:l.email||null,emailVerified:l.emailVerified||!1,phoneNumber:l.phoneNumber||null,tenantId:l.tenantId||null,providerData:f,metadata:new qp(l.createdAt,l.lastLoginAt),isAnonymous:_};Object.assign(n,E)}async function LN(n){const e=it(n);await lh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function UN(n,e){return[...n.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function qw(n){return n.map(e=>{var{providerId:t}=e,r=Ig(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VN(n,e){const t=await zw(n,{},async()=>{const r=eu({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:l}=n.config,u=Bw(n,s,"/v1/token",`key=${l}`),f=await n._getAdditionalHeaders();return f["Content-Type"]="application/x-www-form-urlencoded",Vw.fetch()(u,{method:"POST",headers:f,body:r})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function zN(n,e){return Fr(n,"POST","/v2/accounts:revokeToken",Br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Re(e.idToken,"internal-error"),Re(typeof e.idToken<"u","internal-error"),Re(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hx(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Re(e.length!==0,"internal-error");const t=hx(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Re(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:r,refreshToken:s,expiresIn:l}=await VN(e,t);this.updateTokensAndExpiration(r,s,Number(l))}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){const{refreshToken:r,accessToken:s,expirationTime:l}=t,u=new Bo;return r&&(Re(typeof r=="string","internal-error",{appName:e}),u.refreshToken=r),s&&(Re(typeof s=="string","internal-error",{appName:e}),u.accessToken=s),l&&(Re(typeof l=="number","internal-error",{appName:e}),u.expirationTime=l),u}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Bo,this.toJSON())}_performRefresh(){return Ar("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(n,e){Re(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Rr{constructor(e){var{uid:t,auth:r,stsTokenManager:s}=e,l=Ig(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new MN(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=l.displayName||null,this.email=l.email||null,this.emailVerified=l.emailVerified||!1,this.phoneNumber=l.phoneNumber||null,this.photoURL=l.photoURL||null,this.isAnonymous=l.isAnonymous||!1,this.tenantId=l.tenantId||null,this.providerData=l.providerData?[...l.providerData]:[],this.metadata=new qp(l.createdAt||void 0,l.lastLoginAt||void 0)}async getIdToken(e){const t=await Oc(this,this.stsTokenManager.getToken(this.auth,e));return Re(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return ON(this,e)}reload(){return LN(this)}_assign(e){this!==e&&(Re(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Rr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&await lh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(En(this.auth.app))return Promise.reject(Cr(this.auth));const e=await this.getIdToken();return await Oc(this,jN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,s,l,u,f,p,v,_;const E=(r=t.displayName)!==null&&r!==void 0?r:void 0,w=(s=t.email)!==null&&s!==void 0?s:void 0,T=(l=t.phoneNumber)!==null&&l!==void 0?l:void 0,I=(u=t.photoURL)!==null&&u!==void 0?u:void 0,L=(f=t.tenantId)!==null&&f!==void 0?f:void 0,P=(p=t._redirectEventId)!==null&&p!==void 0?p:void 0,V=(v=t.createdAt)!==null&&v!==void 0?v:void 0,Y=(_=t.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:H,emailVerified:ee,isAnonymous:X,providerData:se,stsTokenManager:M}=t;Re(H&&M,e,"internal-error");const N=Bo.fromJSON(this.name,M);Re(typeof H=="string",e,"internal-error"),Sa(E,e.name),Sa(w,e.name),Re(typeof ee=="boolean",e,"internal-error"),Re(typeof X=="boolean",e,"internal-error"),Sa(T,e.name),Sa(I,e.name),Sa(L,e.name),Sa(P,e.name),Sa(V,e.name),Sa(Y,e.name);const A=new Rr({uid:H,auth:e,email:w,emailVerified:ee,displayName:E,isAnonymous:X,photoURL:I,phoneNumber:T,tenantId:L,stsTokenManager:N,createdAt:V,lastLoginAt:Y});return se&&Array.isArray(se)&&(A.providerData=se.map(D=>Object.assign({},D))),P&&(A._redirectEventId=P),A}static async _fromIdTokenResponse(e,t,r=!1){const s=new Bo;s.updateFromServerResponse(t);const l=new Rr({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await lh(l),l}static async _fromGetAccountInfoResponse(e,t,r){const s=t.users[0];Re(s.localId!==void 0,"internal-error");const l=s.providerUserInfo!==void 0?qw(s.providerUserInfo):[],u=!(s.email&&s.passwordHash)&&!(l!=null&&l.length),f=new Bo;f.updateFromIdToken(r);const p=new Rr({uid:s.localId,auth:e,stsTokenManager:f,isAnonymous:u}),v={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new qp(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(l!=null&&l.length)};return Object.assign(p,v),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fx=new Map;function Nr(n){Mr(n instanceof Function,"Expected a class definition");let e=fx.get(n);return e?(Mr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fx.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Hw.type="NONE";const mx=Hw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kd(n,e,t){return`firebase:${n}:${e}:${t}`}class Fo{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;const{config:s,name:l}=this.auth;this.fullUserKey=Kd(this.userKey,s.apiKey,l),this.fullPersistenceKey=Kd("persistence",s.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Rr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,r="authUser"){if(!t.length)return new Fo(Nr(mx),e,r);const s=(await Promise.all(t.map(async v=>{if(await v._isAvailable())return v}))).filter(v=>v);let l=s[0]||Nr(mx);const u=Kd(r,e.config.apiKey,e.name);let f=null;for(const v of t)try{const _=await v._get(u);if(_){const E=Rr._fromJSON(e,_);v!==l&&(f=E),l=v;break}}catch{}const p=s.filter(v=>v._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new Fo(l,e,r):(l=p[0],f&&await l._set(u,f.toJSON()),await Promise.all(t.map(async v=>{if(v!==l)try{await v._remove(u)}catch{}})),new Fo(l,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Yw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Gw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ww(e))return"Blackberry";if(Xw(e))return"Webos";if($w(e))return"Safari";if((e.includes("chrome/")||Kw(e))&&!e.includes("edge/"))return"Chrome";if(Qw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Gw(n=un()){return/firefox\//i.test(n)}function $w(n=un()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Kw(n=un()){return/crios\//i.test(n)}function Yw(n=un()){return/iemobile/i.test(n)}function Qw(n=un()){return/android/i.test(n)}function Ww(n=un()){return/blackberry/i.test(n)}function Xw(n=un()){return/webos/i.test(n)}function jg(n=un()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function BN(n=un()){var e;return jg(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function FN(){return iR()&&document.documentMode===10}function Jw(n=un()){return jg(n)||Qw(n)||Xw(n)||Ww(n)||/windows phone/i.test(n)||Yw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zw(n,e=[]){let t;switch(n){case"Browser":t=px(un());break;case"Worker":t=`${px(un())}-${n}`;break;default:t=n}const r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Bs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qN{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const r=l=>new Promise((u,f)=>{try{const p=e(l);u(p)}catch(p){f(p)}});r.onAbort=t,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const r of this.queue)await r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HN(n,e={}){return Fr(n,"GET","/v2/passwordPolicy",Br(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=6;class $N{constructor(e){var t,r,s,l;const u=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=u.minPasswordLength)!==null&&t!==void 0?t:GN,u.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=u.maxPasswordLength),u.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=u.containsLowercaseCharacter),u.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=u.containsUppercaseCharacter),u.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=u.containsNumericCharacter),u.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=u.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(l=e.forceUpgradeOnSignin)!==null&&l!==void 0?l:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,s,l,u,f;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(t=p.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),p.isValid&&(p.isValid=(r=p.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),p.isValid&&(p.isValid=(s=p.containsLowercaseLetter)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(l=p.containsUppercaseLetter)!==null&&l!==void 0?l:!0),p.isValid&&(p.isValid=(u=p.containsNumericCharacter)!==null&&u!==void 0?u:!0),p.isValid&&(p.isValid=(f=p.containsNonAlphanumericCharacter)!==null&&f!==void 0?f:!0),p}validatePasswordLengthOptions(e,t){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,s,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KN{constructor(e,t,r,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new gx(this),this.idTokenSubscription=new gx(this),this.beforeStateQueue=new qN(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Lw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Nr(t)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Fo.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Fw(this,{idToken:e}),r=await Rr._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(En(this.app)){const u=this.app.settings.authIdToken;return u?new Promise(f=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(u).then(f,f))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,l=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const u=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,f=s==null?void 0:s._redirectEventId,p=await this.tryRedirectSignIn(e);(!u||u===f)&&(p!=null&&p.user)&&(s=p.user,l=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(l)try{await this.beforeStateQueue.runMiddleware(s)}catch(u){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(u))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Re(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await lh(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=AN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(En(this.app))return Promise.reject(Cr(this));const t=e?it(e):null;return t&&Re(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Re(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return En(this.app)?Promise.reject(Cr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return En(this.app)?Promise.reject(Cr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await HN(this),t=new $N(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zc("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),await zN(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const r=await this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Nr(e)||this._popupRedirectResolver;Re(t,this,"argument-error"),this.redirectPersistenceManager=await Fo.create(this,[Nr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,r;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,s){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let u=!1;const f=this._isInitialized?Promise.resolve():this._initializationPromise;if(Re(f,this,"internal-error"),f.then(()=>{u||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,r,s);return()=>{u=!0,p()}}else{const p=e.addObserver(t);return()=>{u=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(t["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(t["X-Firebase-AppCheck"]=s),t}async _getAppCheckToken(){var e;if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t!=null&&t.error&&EN(`Error while retrieving App Check token: ${t.error}`),t==null?void 0:t.token}}function Ka(n){return it(n)}class gx{constructor(e){this.auth=e,this.observer=null,this.addObserver=dR(t=>this.observer=t)}get next(){return Re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YN(n){Mh=n}function e1(n){return Mh.loadJS(n)}function QN(){return Mh.recaptchaEnterpriseScript}function WN(){return Mh.gapiScript}function XN(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class JN{constructor(){this.enterprise=new ZN}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class ZN{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const eI="recaptcha-enterprise",t1="NO_RECAPTCHA";class tI{constructor(e){this.type=eI,this.auth=Ka(e)}async verify(e="verify",t=!1){async function r(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(u,f)=>{kN(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)f(new Error("recaptcha Enterprise site key undefined"));else{const v=new DN(p);return l.tenantId==null?l._agentRecaptchaConfig=v:l._tenantRecaptchaConfigs[l.tenantId]=v,u(v.siteKey)}}).catch(p=>{f(p)})})}function s(l,u,f){const p=window.grecaptcha;dx(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(v=>{u(v)}).catch(()=>{u(t1)})}):f(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new JN().execute("siteKey",{action:"verify"}):new Promise((l,u)=>{r(this.auth).then(f=>{if(!t&&dx(window.grecaptcha))s(f,l,u);else{if(typeof window>"u"){u(new Error("RecaptchaVerifier is only supported in browser"));return}let p=QN();p.length!==0&&(p+=f),e1(p).then(()=>{s(f,l,u)}).catch(v=>{u(v)})}}).catch(f=>{u(f)})})}}async function vx(n,e,t,r=!1,s=!1){const l=new tI(n);let u;if(s)u=t1;else try{u=await l.verify(t)}catch{u=await l.verify(t,!0)}const f=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in f){const p=f.phoneEnrollmentInfo.phoneNumber,v=f.phoneEnrollmentInfo.recaptchaToken;Object.assign(f,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:v,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in f){const p=f.phoneSignInInfo.recaptchaToken;Object.assign(f,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:u,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return f}return r?Object.assign(f,{captchaResp:u}):Object.assign(f,{captchaResponse:u}),Object.assign(f,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(f,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),f}async function ch(n,e,t,r,s){var l;if(!((l=n._getRecaptchaConfig())===null||l===void 0)&&l.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const u=await vx(n,e,t,t==="getOobCode");return r(n,u)}else return r(n,e).catch(async u=>{if(u.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const f=await vx(n,e,t,t==="getOobCode");return r(n,f)}else return Promise.reject(u)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nI(n,e){const t=tu(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),l=t.getOptions();if(Ps(l,e??{}))return s;bi(s,"already-initialized")}return t.initialize({options:e})}function iI(n,e){const t=(e==null?void 0:e.persistence)||[],r=(Array.isArray(t)?t:[t]).map(Nr);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function rI(n,e,t){const r=Ka(n);Re(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,l=n1(e),{host:u,port:f}=aI(e),p=f===null?"":`:${f}`,v={url:`${l}//${u}${p}/`},_=Object.freeze({host:u,port:f,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){Re(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),Re(Ps(v,r.config.emulator)&&Ps(_,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=v,r.emulatorConfig=_,r.settings.appVerificationDisabledForTesting=!0,sI()}function n1(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function aI(n){const e=n1(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const r=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const l=s[1];return{host:l,port:yx(r.substr(l.length+1))}}else{const[l,u]=r.split(":");return{host:l,port:yx(u)}}}function yx(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function sI(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Og{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ar("not implemented")}_getIdTokenResponse(e){return Ar("not implemented")}_linkToIdToken(e,t){return Ar("not implemented")}_getReauthenticationResolver(e){return Ar("not implemented")}}async function oI(n,e){return Fr(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lI(n,e){return iu(n,"POST","/v1/accounts:signInWithPassword",Br(n,e))}async function cI(n,e){return Fr(n,"POST","/v1/accounts:sendOobCode",Br(n,e))}async function uI(n,e){return cI(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(n,e){return iu(n,"POST","/v1/accounts:signInWithEmailLink",Br(n,e))}async function hI(n,e){return iu(n,"POST","/v1/accounts:signInWithEmailLink",Br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc extends Og{constructor(e,t,r,s=null){super("password",r),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new Pc(e,t,"password")}static _fromEmailAndCode(e,t,r=null){return new Pc(e,t,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ch(e,t,"signInWithPassword",lI);case"emailLink":return dI(e,{email:this._email,oobCode:this._password});default:bi(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const r={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return ch(e,r,"signUpPassword",oI);case"emailLink":return hI(e,{idToken:t,email:this._email,oobCode:this._password});default:bi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qo(n,e){return iu(n,"POST","/v1/accounts:signInWithIdp",Br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fI="http://localhost";class Ms extends Og{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):bi("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=t,l=Ig(t,["providerId","signInMethod"]);if(!r||!s)return null;const u=new Ms(r,s);return u.idToken=l.idToken||void 0,u.accessToken=l.accessToken||void 0,u.secret=l.secret,u.nonce=l.nonce,u.pendingToken=l.pendingToken||null,u}_getIdTokenResponse(e){const t=this.buildRequest();return qo(e,t)}_linkToIdToken(e,t){const r=this.buildRequest();return r.idToken=t,qo(e,r)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,qo(e,t)}buildRequest(){const e={requestUri:fI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=eu(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mI(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function pI(n){const e=_c(xc(n)).link,t=e?_c(xc(e)).deep_link_id:null,r=_c(xc(n)).deep_link_id;return(r?_c(xc(r)).link:null)||r||t||e||n}class Pg{constructor(e){var t,r,s,l,u,f;const p=_c(xc(e)),v=(t=p.apiKey)!==null&&t!==void 0?t:null,_=(r=p.oobCode)!==null&&r!==void 0?r:null,E=mI((s=p.mode)!==null&&s!==void 0?s:null);Re(v&&_&&E,"argument-error"),this.apiKey=v,this.operation=E,this.code=_,this.continueUrl=(l=p.continueUrl)!==null&&l!==void 0?l:null,this.languageCode=(u=p.languageCode)!==null&&u!==void 0?u:null,this.tenantId=(f=p.tenantId)!==null&&f!==void 0?f:null}static parseLink(e){const t=pI(e);try{return new Pg(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(){this.providerId=rl.PROVIDER_ID}static credential(e,t){return Pc._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const r=Pg.parseLink(t);return Re(r,"argument-error"),Pc._fromEmailAndCode(e,r.code,r.tenantId)}}rl.PROVIDER_ID="password";rl.EMAIL_PASSWORD_SIGN_IN_METHOD="password";rl.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i1{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ru extends i1{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa extends ru{constructor(){super("facebook.com")}static credential(e){return Ms._fromParams({providerId:Aa.PROVIDER_ID,signInMethod:Aa.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Aa.credentialFromTaggedObject(e)}static credentialFromError(e){return Aa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Aa.credential(e.oauthAccessToken)}catch{return null}}}Aa.FACEBOOK_SIGN_IN_METHOD="facebook.com";Aa.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra extends ru{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Ms._fromParams({providerId:Ra.PROVIDER_ID,signInMethod:Ra.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ra.credentialFromTaggedObject(e)}static credentialFromError(e){return Ra.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:r}=e;if(!t&&!r)return null;try{return Ra.credential(t,r)}catch{return null}}}Ra.GOOGLE_SIGN_IN_METHOD="google.com";Ra.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na extends ru{constructor(){super("github.com")}static credential(e){return Ms._fromParams({providerId:Na.PROVIDER_ID,signInMethod:Na.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Na.credentialFromTaggedObject(e)}static credentialFromError(e){return Na.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Na.credential(e.oauthAccessToken)}catch{return null}}}Na.GITHUB_SIGN_IN_METHOD="github.com";Na.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ia extends ru{constructor(){super("twitter.com")}static credential(e,t){return Ms._fromParams({providerId:Ia.PROVIDER_ID,signInMethod:Ia.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Ia.credentialFromTaggedObject(e)}static credentialFromError(e){return Ia.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:r}=e;if(!t||!r)return null;try{return Ia.credential(t,r)}catch{return null}}}Ia.TWITTER_SIGN_IN_METHOD="twitter.com";Ia.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gI(n,e){return iu(n,"POST","/v1/accounts:signUp",Br(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,r,s=!1){const l=await Rr._fromIdTokenResponse(e,r,s),u=_x(r);return new Ls({user:l,providerId:u,_tokenResponse:r,operationType:t})}static async _forOperation(e,t,r){await e._updateTokensIfNecessary(r,!0);const s=_x(r);return new Ls({user:e,providerId:s,_tokenResponse:r,operationType:t})}}function _x(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh extends Si{constructor(e,t,r,s){var l;super(t.code,t.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,uh.prototype),this.customData={appName:e.name,tenantId:(l=e.tenantId)!==null&&l!==void 0?l:void 0,_serverResponse:t.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,t,r,s){return new uh(e,t,r,s)}}function r1(n,e,t,r){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?uh._fromErrorAndOperation(n,l,e,r):l})}async function vI(n,e,t=!1){const r=await Oc(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Ls._forOperation(n,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(n,e,t=!1){const{auth:r}=n;if(En(r.app))return Promise.reject(Cr(r));const s="reauthenticate";try{const l=await Oc(n,r1(r,s,e,n),t);Re(l.idToken,r,"internal-error");const u=kg(l.idToken);Re(u,r,"internal-error");const{sub:f}=u;return Re(n.uid===f,r,"user-mismatch"),Ls._forOperation(n,s,l)}catch(l){throw(l==null?void 0:l.code)==="auth/user-not-found"&&bi(r,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a1(n,e,t=!1){if(En(n.app))return Promise.reject(Cr(n));const r="signIn",s=await r1(n,r,e),l=await Ls._fromIdTokenResponse(n,r,s);return t||await n._updateCurrentUser(l.user),l}async function _I(n,e){return a1(Ka(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s1(n){const e=Ka(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function xI(n,e,t){const r=Ka(n);await ch(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",uI)}async function bI(n,e,t){if(En(n.app))return Promise.reject(Cr(n));const r=Ka(n),u=await ch(r,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gI).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&s1(n),p}),f=await Ls._fromIdTokenResponse(r,"signIn",u);return await r._updateCurrentUser(f.user),f}function wI(n,e,t){return En(n.app)?Promise.reject(Cr(n)):_I(it(n),rl.credential(e,t)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&s1(n),r})}function EI(n,e,t,r){return it(n).onIdTokenChanged(e,t,r)}function TI(n,e,t){return it(n).beforeAuthStateChanged(e,t)}function SI(n,e,t,r){return it(n).onAuthStateChanged(e,t,r)}function AI(n){return it(n).signOut()}const dh="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(dh,"1"),this.storage.removeItem(dh),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=1e3,NI=10;class l1 extends o1{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Jw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const r=this.storage.getItem(t),s=this.localCache[t];r!==s&&e(t,s,r)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((u,f,p)=>{this.notifyListeners(u,p)});return}const r=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const u=this.storage.getItem(r);!t&&this.localCache[r]===u||this.notifyListeners(r,u)},l=this.storage.getItem(r);FN()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,NI):s()}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:r}),!0)})},RI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}l1.type="LOCAL";const II=l1;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c1 extends o1{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}c1.type="SESSION";const u1=c1;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const r=new Lh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:r,eventType:s,data:l}=t.data,u=this.handlersMap[s];if(!(u!=null&&u.size))return;t.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const f=Array.from(u).map(async v=>v(t.origin,l)),p=await CI(f);t.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Lh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(n="",e=10){let t="";for(let r=0;r<e;r++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let l,u;return new Promise((f,p)=>{const v=Mg("",20);s.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},r);u={messageChannel:s,onMessage(E){const w=E;if(w.data.eventId===v)switch(w.data.status){case"ack":clearTimeout(_),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),f(w.data.response);break;default:clearTimeout(_),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(u),s.port1.addEventListener("message",u.onMessage),this.target.postMessage({eventType:e,eventId:v,data:t},[s.port2])}).finally(()=>{u&&this.removeMessageHandler(u)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ki(){return window}function kI(n){Ki().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function d1(){return typeof Ki().WorkerGlobalScope<"u"&&typeof Ki().importScripts=="function"}async function jI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function OI(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function PI(){return d1()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h1="firebaseLocalStorageDb",MI=1,hh="firebaseLocalStorage",f1="fbase_key";class au{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Uh(n,e){return n.transaction([hh],e?"readwrite":"readonly").objectStore(hh)}function LI(){const n=indexedDB.deleteDatabase(h1);return new au(n).toPromise()}function Hp(){const n=indexedDB.open(h1,MI);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const r=n.result;try{r.createObjectStore(hh,{keyPath:f1})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const r=n.result;r.objectStoreNames.contains(hh)?e(r):(r.close(),await LI(),e(await Hp()))})})}async function xx(n,e,t){const r=Uh(n,!0).put({[f1]:e,value:t});return new au(r).toPromise()}async function UI(n,e){const t=Uh(n,!1).get(e),r=await new au(t).toPromise();return r===void 0?null:r.value}function bx(n,e){const t=Uh(n,!0).delete(e);return new au(t).toPromise()}const VI=800,zI=3;class m1{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hp(),this.db)}async _withRetries(e){let t=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(t++>zI)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return d1()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lh._getInstance(PI()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await jI(),!this.activeServiceWorker)return;this.sender=new DI(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((t=r[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||OI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hp();return await xx(e,dh,"1"),await bx(e,dh),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(r=>xx(r,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(r=>UI(r,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>bx(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const l=Uh(s,!1).getAll();return new au(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:l}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(l)&&(this.notifyListeners(s,l),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),VI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}m1.type="LOCAL";const BI=m1;new nu(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FI(n,e){return e?Nr(e):(Re(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lg extends Og{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return qo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return qo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return qo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qI(n){return a1(n.auth,new Lg(n),n.bypassAuthState)}function HI(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),yI(t,new Lg(n),n.bypassAuthState)}async function GI(n){const{auth:e,user:t}=n;return Re(t,e,"internal-error"),vI(t,new Lg(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p1{constructor(e,t,r,s,l=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:r,postBody:s,tenantId:l,error:u,type:f}=e;if(u){this.reject(u);return}const p={auth:this.auth,requestUri:t,sessionId:r,tenantId:l||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(f)(p))}catch(v){this.reject(v)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qI;case"linkViaPopup":case"linkViaRedirect":return GI;case"reauthViaPopup":case"reauthViaRedirect":return HI;default:bi(this.auth,"internal-error")}}resolve(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Mr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=new nu(2e3,1e4);class zo extends p1{constructor(e,t,r,s,l){super(e,t,s,l),this.provider=r,this.authWindow=null,this.pollId=null,zo.currentPopupAction&&zo.currentPopupAction.cancel(),zo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Re(e,this.auth,"internal-error"),e}async onExecution(){Mr(this.filter.length===1,"Popup operations only handle one event");const e=Mg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject($i(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($i(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,zo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,r;if(!((r=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($i(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$I.get())};e()}}zo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="pendingRedirect",Yd=new Map;class YI extends p1{constructor(e,t,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,r),this.eventId=null}async execute(){let e=Yd.get(this.auth._key());if(!e){try{const r=await QI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(t){e=()=>Promise.reject(t)}Yd.set(this.auth._key(),e)}return this.bypassAuthState||Yd.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function QI(n,e){const t=JI(e),r=XI(n);if(!await r._isAvailable())return!1;const s=await r._get(t)==="true";return await r._remove(t),s}function WI(n,e){Yd.set(n._key(),e)}function XI(n){return Nr(n._redirectPersistence)}function JI(n){return Kd(KI,n.config.apiKey,n.name)}async function ZI(n,e,t=!1){if(En(n.app))return Promise.reject(Cr(n));const r=Ka(n),s=FI(r,e),u=await new YI(r,s,t).execute();return u&&!t&&(delete u.user._redirectEventId,await r._persistUserIfCurrent(u.user),await r._setRedirectUser(null,e)),u}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC=10*60*1e3;class tC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(t=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nC(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var r;if(e.error&&!g1(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";t.onError($i(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const r=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=eC&&this.cachedEventUids.clear(),this.cachedEventUids.has(wx(e))}saveEventToCache(e){this.cachedEventUids.add(wx(e)),this.lastProcessedEventTime=Date.now()}}function wx(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function g1({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function nC(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return g1(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iC(n,e={}){return Fr(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aC=/^https?/;async function sC(n){if(n.config.emulator)return;const{authorizedDomains:e}=await iC(n);for(const t of e)try{if(oC(t))return}catch{}bi(n,"unauthorized-domain")}function oC(n){const e=Fp(),{protocol:t,hostname:r}=new URL(e);if(n.startsWith("chrome-extension://")){const u=new URL(n);return u.hostname===""&&r===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&u.hostname===r}if(!aC.test(t))return!1;if(rC.test(n))return r===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=new nu(3e4,6e4);function Ex(){const n=Ki().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function cC(n){return new Promise((e,t)=>{var r,s,l;function u(){Ex(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ex(),t($i(n,"network-request-failed"))},timeout:lC.get()})}if(!((s=(r=Ki().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((l=Ki().gapi)===null||l===void 0)&&l.load)u();else{const f=XN("iframefcb");return Ki()[f]=()=>{gapi.load?u():t($i(n,"network-request-failed"))},e1(`${WN()}?onload=${f}`).catch(p=>t(p))}}).catch(e=>{throw Qd=null,e})}let Qd=null;function uC(n){return Qd=Qd||cC(n),Qd}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC=new nu(5e3,15e3),hC="__/auth/iframe",fC="emulator/auth/iframe",mC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gC(n){const e=n.config;Re(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?Dg(e,fC):`https://${n.config.authDomain}/${hC}`,r={apiKey:e.apiKey,appName:n.name,v:Bs},s=pC.get(n.config.apiHost);s&&(r.eid=s);const l=n._getFrameworks();return l.length&&(r.fw=l.join(",")),`${t}?${eu(r).slice(1)}`}async function vC(n){const e=await uC(n),t=Ki().gapi;return Re(t,n,"internal-error"),e.open({where:document.body,url:gC(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mC,dontclear:!0},r=>new Promise(async(s,l)=>{await r.restyle({setHideOnLeave:!1});const u=$i(n,"network-request-failed"),f=Ki().setTimeout(()=>{l(u)},dC.get());function p(){Ki().clearTimeout(f),s(r)}r.ping(p).then(p,()=>{l(u)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_C=500,xC=600,bC="_blank",wC="http://localhost";class Tx{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function EC(n,e,t,r=_C,s=xC){const l=Math.max((window.screen.availHeight-s)/2,0).toString(),u=Math.max((window.screen.availWidth-r)/2,0).toString();let f="";const p=Object.assign(Object.assign({},yC),{width:r.toString(),height:s.toString(),top:l,left:u}),v=un().toLowerCase();t&&(f=Kw(v)?bC:t),Gw(v)&&(e=e||wC,p.scrollbars="yes");const _=Object.entries(p).reduce((w,[T,I])=>`${w}${T}=${I},`,"");if(BN(v)&&f!=="_self")return TC(e||"",f),new Tx(null);const E=window.open(e||"",f,_);Re(E,n,"popup-blocked");try{E.focus()}catch{}return new Tx(E)}function TC(n,e){const t=document.createElement("a");t.href=n,t.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC="__/auth/handler",AC="emulator/auth/handler",RC=encodeURIComponent("fac");async function Sx(n,e,t,r,s,l){Re(n.config.authDomain,n,"auth-domain-config-required"),Re(n.config.apiKey,n,"invalid-api-key");const u={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:r,v:Bs,eventId:s};if(e instanceof i1){e.setDefaultLanguage(n.languageCode),u.providerId=e.providerId||"",uR(e.getCustomParameters())||(u.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,E]of Object.entries({}))u[_]=E}if(e instanceof ru){const _=e.getScopes().filter(E=>E!=="");_.length>0&&(u.scopes=_.join(","))}n.tenantId&&(u.tid=n.tenantId);const f=u;for(const _ of Object.keys(f))f[_]===void 0&&delete f[_];const p=await n._getAppCheckToken(),v=p?`#${RC}=${encodeURIComponent(p)}`:"";return`${NC(n)}?${eu(f).slice(1)}${v}`}function NC({config:n}){return n.emulator?Dg(n,AC):`https://${n.authDomain}/${SC}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xp="webStorageSupport";class IC{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=u1,this._completeRedirectFn=ZI,this._overrideRedirectResult=WI}async _openPopup(e,t,r,s){var l;Mr((l=this.eventManagers[e._key()])===null||l===void 0?void 0:l.manager,"_initialize() not called before _openPopup()");const u=await Sx(e,t,r,Fp(),s);return EC(e,u,Mg())}async _openRedirect(e,t,r,s){await this._originValidation(e);const l=await Sx(e,t,r,Fp(),s);return kI(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:l}=this.eventManagers[t];return s?Promise.resolve(s):(Mr(l,"If manager is not set, promise should be"),l)}const r=this.initAndGetManager(e);return this.eventManagers[t]={promise:r},r.catch(()=>{delete this.eventManagers[t]}),r}async initAndGetManager(e){const t=await vC(e),r=new tC(e);return t.register("authEvent",s=>(Re(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=t,r}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(xp,{type:xp},s=>{var l;const u=(l=s==null?void 0:s[0])===null||l===void 0?void 0:l[xp];u!==void 0&&t(!!u),bi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=sC(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Jw()||$w()||jg()}}const CC=IC;var Ax="@firebase/auth",Rx="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kC(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function jC(n){Ua(new Or("auth",(e,{options:t})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:u,authDomain:f}=r.options;Re(u&&!u.includes(":"),"invalid-api-key",{appName:r.name});const p={apiKey:u,authDomain:f,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zw(n)},v=new KN(r,s,l,p);return iI(v,t),v},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),Ua(new Or("auth-internal",e=>{const t=Ka(e.getProvider("auth").getImmediate());return(r=>new DC(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),ai(Ax,Rx,kC(n)),ai(Ax,Rx,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OC=5*60,PC=Iw("authIdTokenMaxAge")||OC;let Nx=null;const MC=n=>async e=>{const t=e&&await e.getIdTokenResult(),r=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(r&&r>PC)return;const s=t==null?void 0:t.token;Nx!==s&&(Nx=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function LC(n=Ph()){const e=tu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=nI(n,{popupRedirectResolver:CC,persistence:[BI,II,u1]}),r=Iw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(r,location.origin);if(location.origin===l.origin){const u=MC(l.toString());TI(t,u,()=>u(t.currentUser)),EI(t,f=>u(f))}}const s=Rw("auth");return s&&rI(t,`http://${s}`),t}function UC(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}YN({loadJS(n){return new Promise((e,t)=>{const r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=s=>{const l=$i("internal-error");l.customData=s,t(l)},r.type="text/javascript",r.charset="UTF-8",UC().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});jC("Browser");var VC="firebase",zC="11.5.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ai(VC,zC,"app");var Ix=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Oa,v1;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,N){function A(){}A.prototype=N.prototype,M.D=N.prototype,M.prototype=new A,M.prototype.constructor=M,M.C=function(D,U,B){for(var O=Array(arguments.length-2),me=2;me<arguments.length;me++)O[me-2]=arguments[me];return N.prototype[U].apply(D,O)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(M,N,A){A||(A=0);var D=Array(16);if(typeof N=="string")for(var U=0;16>U;++U)D[U]=N.charCodeAt(A++)|N.charCodeAt(A++)<<8|N.charCodeAt(A++)<<16|N.charCodeAt(A++)<<24;else for(U=0;16>U;++U)D[U]=N[A++]|N[A++]<<8|N[A++]<<16|N[A++]<<24;N=M.g[0],A=M.g[1],U=M.g[2];var B=M.g[3],O=N+(B^A&(U^B))+D[0]+3614090360&4294967295;N=A+(O<<7&4294967295|O>>>25),O=B+(U^N&(A^U))+D[1]+3905402710&4294967295,B=N+(O<<12&4294967295|O>>>20),O=U+(A^B&(N^A))+D[2]+606105819&4294967295,U=B+(O<<17&4294967295|O>>>15),O=A+(N^U&(B^N))+D[3]+3250441966&4294967295,A=U+(O<<22&4294967295|O>>>10),O=N+(B^A&(U^B))+D[4]+4118548399&4294967295,N=A+(O<<7&4294967295|O>>>25),O=B+(U^N&(A^U))+D[5]+1200080426&4294967295,B=N+(O<<12&4294967295|O>>>20),O=U+(A^B&(N^A))+D[6]+2821735955&4294967295,U=B+(O<<17&4294967295|O>>>15),O=A+(N^U&(B^N))+D[7]+4249261313&4294967295,A=U+(O<<22&4294967295|O>>>10),O=N+(B^A&(U^B))+D[8]+1770035416&4294967295,N=A+(O<<7&4294967295|O>>>25),O=B+(U^N&(A^U))+D[9]+2336552879&4294967295,B=N+(O<<12&4294967295|O>>>20),O=U+(A^B&(N^A))+D[10]+4294925233&4294967295,U=B+(O<<17&4294967295|O>>>15),O=A+(N^U&(B^N))+D[11]+2304563134&4294967295,A=U+(O<<22&4294967295|O>>>10),O=N+(B^A&(U^B))+D[12]+1804603682&4294967295,N=A+(O<<7&4294967295|O>>>25),O=B+(U^N&(A^U))+D[13]+4254626195&4294967295,B=N+(O<<12&4294967295|O>>>20),O=U+(A^B&(N^A))+D[14]+2792965006&4294967295,U=B+(O<<17&4294967295|O>>>15),O=A+(N^U&(B^N))+D[15]+1236535329&4294967295,A=U+(O<<22&4294967295|O>>>10),O=N+(U^B&(A^U))+D[1]+4129170786&4294967295,N=A+(O<<5&4294967295|O>>>27),O=B+(A^U&(N^A))+D[6]+3225465664&4294967295,B=N+(O<<9&4294967295|O>>>23),O=U+(N^A&(B^N))+D[11]+643717713&4294967295,U=B+(O<<14&4294967295|O>>>18),O=A+(B^N&(U^B))+D[0]+3921069994&4294967295,A=U+(O<<20&4294967295|O>>>12),O=N+(U^B&(A^U))+D[5]+3593408605&4294967295,N=A+(O<<5&4294967295|O>>>27),O=B+(A^U&(N^A))+D[10]+38016083&4294967295,B=N+(O<<9&4294967295|O>>>23),O=U+(N^A&(B^N))+D[15]+3634488961&4294967295,U=B+(O<<14&4294967295|O>>>18),O=A+(B^N&(U^B))+D[4]+3889429448&4294967295,A=U+(O<<20&4294967295|O>>>12),O=N+(U^B&(A^U))+D[9]+568446438&4294967295,N=A+(O<<5&4294967295|O>>>27),O=B+(A^U&(N^A))+D[14]+3275163606&4294967295,B=N+(O<<9&4294967295|O>>>23),O=U+(N^A&(B^N))+D[3]+4107603335&4294967295,U=B+(O<<14&4294967295|O>>>18),O=A+(B^N&(U^B))+D[8]+1163531501&4294967295,A=U+(O<<20&4294967295|O>>>12),O=N+(U^B&(A^U))+D[13]+2850285829&4294967295,N=A+(O<<5&4294967295|O>>>27),O=B+(A^U&(N^A))+D[2]+4243563512&4294967295,B=N+(O<<9&4294967295|O>>>23),O=U+(N^A&(B^N))+D[7]+1735328473&4294967295,U=B+(O<<14&4294967295|O>>>18),O=A+(B^N&(U^B))+D[12]+2368359562&4294967295,A=U+(O<<20&4294967295|O>>>12),O=N+(A^U^B)+D[5]+4294588738&4294967295,N=A+(O<<4&4294967295|O>>>28),O=B+(N^A^U)+D[8]+2272392833&4294967295,B=N+(O<<11&4294967295|O>>>21),O=U+(B^N^A)+D[11]+1839030562&4294967295,U=B+(O<<16&4294967295|O>>>16),O=A+(U^B^N)+D[14]+4259657740&4294967295,A=U+(O<<23&4294967295|O>>>9),O=N+(A^U^B)+D[1]+2763975236&4294967295,N=A+(O<<4&4294967295|O>>>28),O=B+(N^A^U)+D[4]+1272893353&4294967295,B=N+(O<<11&4294967295|O>>>21),O=U+(B^N^A)+D[7]+4139469664&4294967295,U=B+(O<<16&4294967295|O>>>16),O=A+(U^B^N)+D[10]+3200236656&4294967295,A=U+(O<<23&4294967295|O>>>9),O=N+(A^U^B)+D[13]+681279174&4294967295,N=A+(O<<4&4294967295|O>>>28),O=B+(N^A^U)+D[0]+3936430074&4294967295,B=N+(O<<11&4294967295|O>>>21),O=U+(B^N^A)+D[3]+3572445317&4294967295,U=B+(O<<16&4294967295|O>>>16),O=A+(U^B^N)+D[6]+76029189&4294967295,A=U+(O<<23&4294967295|O>>>9),O=N+(A^U^B)+D[9]+3654602809&4294967295,N=A+(O<<4&4294967295|O>>>28),O=B+(N^A^U)+D[12]+3873151461&4294967295,B=N+(O<<11&4294967295|O>>>21),O=U+(B^N^A)+D[15]+530742520&4294967295,U=B+(O<<16&4294967295|O>>>16),O=A+(U^B^N)+D[2]+3299628645&4294967295,A=U+(O<<23&4294967295|O>>>9),O=N+(U^(A|~B))+D[0]+4096336452&4294967295,N=A+(O<<6&4294967295|O>>>26),O=B+(A^(N|~U))+D[7]+1126891415&4294967295,B=N+(O<<10&4294967295|O>>>22),O=U+(N^(B|~A))+D[14]+2878612391&4294967295,U=B+(O<<15&4294967295|O>>>17),O=A+(B^(U|~N))+D[5]+4237533241&4294967295,A=U+(O<<21&4294967295|O>>>11),O=N+(U^(A|~B))+D[12]+1700485571&4294967295,N=A+(O<<6&4294967295|O>>>26),O=B+(A^(N|~U))+D[3]+2399980690&4294967295,B=N+(O<<10&4294967295|O>>>22),O=U+(N^(B|~A))+D[10]+4293915773&4294967295,U=B+(O<<15&4294967295|O>>>17),O=A+(B^(U|~N))+D[1]+2240044497&4294967295,A=U+(O<<21&4294967295|O>>>11),O=N+(U^(A|~B))+D[8]+1873313359&4294967295,N=A+(O<<6&4294967295|O>>>26),O=B+(A^(N|~U))+D[15]+4264355552&4294967295,B=N+(O<<10&4294967295|O>>>22),O=U+(N^(B|~A))+D[6]+2734768916&4294967295,U=B+(O<<15&4294967295|O>>>17),O=A+(B^(U|~N))+D[13]+1309151649&4294967295,A=U+(O<<21&4294967295|O>>>11),O=N+(U^(A|~B))+D[4]+4149444226&4294967295,N=A+(O<<6&4294967295|O>>>26),O=B+(A^(N|~U))+D[11]+3174756917&4294967295,B=N+(O<<10&4294967295|O>>>22),O=U+(N^(B|~A))+D[2]+718787259&4294967295,U=B+(O<<15&4294967295|O>>>17),O=A+(B^(U|~N))+D[9]+3951481745&4294967295,M.g[0]=M.g[0]+N&4294967295,M.g[1]=M.g[1]+(U+(O<<21&4294967295|O>>>11))&4294967295,M.g[2]=M.g[2]+U&4294967295,M.g[3]=M.g[3]+B&4294967295}r.prototype.u=function(M,N){N===void 0&&(N=M.length);for(var A=N-this.blockSize,D=this.B,U=this.h,B=0;B<N;){if(U==0)for(;B<=A;)s(this,M,B),B+=this.blockSize;if(typeof M=="string"){for(;B<N;)if(D[U++]=M.charCodeAt(B++),U==this.blockSize){s(this,D),U=0;break}}else for(;B<N;)if(D[U++]=M[B++],U==this.blockSize){s(this,D),U=0;break}}this.h=U,this.o+=N},r.prototype.v=function(){var M=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);M[0]=128;for(var N=1;N<M.length-8;++N)M[N]=0;var A=8*this.o;for(N=M.length-8;N<M.length;++N)M[N]=A&255,A/=256;for(this.u(M),M=Array(16),N=A=0;4>N;++N)for(var D=0;32>D;D+=8)M[A++]=this.g[N]>>>D&255;return M};function l(M,N){var A=f;return Object.prototype.hasOwnProperty.call(A,M)?A[M]:A[M]=N(M)}function u(M,N){this.h=N;for(var A=[],D=!0,U=M.length-1;0<=U;U--){var B=M[U]|0;D&&B==N||(A[U]=B,D=!1)}this.g=A}var f={};function p(M){return-128<=M&&128>M?l(M,function(N){return new u([N|0],0>N?-1:0)}):new u([M|0],0>M?-1:0)}function v(M){if(isNaN(M)||!isFinite(M))return E;if(0>M)return P(v(-M));for(var N=[],A=1,D=0;M>=A;D++)N[D]=M/A|0,A*=4294967296;return new u(N,0)}function _(M,N){if(M.length==0)throw Error("number format error: empty string");if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(M.charAt(0)=="-")return P(_(M.substring(1),N));if(0<=M.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=v(Math.pow(N,8)),D=E,U=0;U<M.length;U+=8){var B=Math.min(8,M.length-U),O=parseInt(M.substring(U,U+B),N);8>B?(B=v(Math.pow(N,B)),D=D.j(B).add(v(O))):(D=D.j(A),D=D.add(v(O)))}return D}var E=p(0),w=p(1),T=p(16777216);n=u.prototype,n.m=function(){if(L(this))return-P(this).m();for(var M=0,N=1,A=0;A<this.g.length;A++){var D=this.i(A);M+=(0<=D?D:4294967296+D)*N,N*=4294967296}return M},n.toString=function(M){if(M=M||10,2>M||36<M)throw Error("radix out of range: "+M);if(I(this))return"0";if(L(this))return"-"+P(this).toString(M);for(var N=v(Math.pow(M,6)),A=this,D="";;){var U=ee(A,N).g;A=V(A,U.j(N));var B=((0<A.g.length?A.g[0]:A.h)>>>0).toString(M);if(A=U,I(A))return B+D;for(;6>B.length;)B="0"+B;D=B+D}},n.i=function(M){return 0>M?0:M<this.g.length?this.g[M]:this.h};function I(M){if(M.h!=0)return!1;for(var N=0;N<M.g.length;N++)if(M.g[N]!=0)return!1;return!0}function L(M){return M.h==-1}n.l=function(M){return M=V(this,M),L(M)?-1:I(M)?0:1};function P(M){for(var N=M.g.length,A=[],D=0;D<N;D++)A[D]=~M.g[D];return new u(A,~M.h).add(w)}n.abs=function(){return L(this)?P(this):this},n.add=function(M){for(var N=Math.max(this.g.length,M.g.length),A=[],D=0,U=0;U<=N;U++){var B=D+(this.i(U)&65535)+(M.i(U)&65535),O=(B>>>16)+(this.i(U)>>>16)+(M.i(U)>>>16);D=O>>>16,B&=65535,O&=65535,A[U]=O<<16|B}return new u(A,A[A.length-1]&-2147483648?-1:0)};function V(M,N){return M.add(P(N))}n.j=function(M){if(I(this)||I(M))return E;if(L(this))return L(M)?P(this).j(P(M)):P(P(this).j(M));if(L(M))return P(this.j(P(M)));if(0>this.l(T)&&0>M.l(T))return v(this.m()*M.m());for(var N=this.g.length+M.g.length,A=[],D=0;D<2*N;D++)A[D]=0;for(D=0;D<this.g.length;D++)for(var U=0;U<M.g.length;U++){var B=this.i(D)>>>16,O=this.i(D)&65535,me=M.i(U)>>>16,xe=M.i(U)&65535;A[2*D+2*U]+=O*xe,Y(A,2*D+2*U),A[2*D+2*U+1]+=B*xe,Y(A,2*D+2*U+1),A[2*D+2*U+1]+=O*me,Y(A,2*D+2*U+1),A[2*D+2*U+2]+=B*me,Y(A,2*D+2*U+2)}for(D=0;D<N;D++)A[D]=A[2*D+1]<<16|A[2*D];for(D=N;D<2*N;D++)A[D]=0;return new u(A,0)};function Y(M,N){for(;(M[N]&65535)!=M[N];)M[N+1]+=M[N]>>>16,M[N]&=65535,N++}function H(M,N){this.g=M,this.h=N}function ee(M,N){if(I(N))throw Error("division by zero");if(I(M))return new H(E,E);if(L(M))return N=ee(P(M),N),new H(P(N.g),P(N.h));if(L(N))return N=ee(M,P(N)),new H(P(N.g),N.h);if(30<M.g.length){if(L(M)||L(N))throw Error("slowDivide_ only works with positive integers.");for(var A=w,D=N;0>=D.l(M);)A=X(A),D=X(D);var U=se(A,1),B=se(D,1);for(D=se(D,2),A=se(A,2);!I(D);){var O=B.add(D);0>=O.l(M)&&(U=U.add(A),B=O),D=se(D,1),A=se(A,1)}return N=V(M,U.j(N)),new H(U,N)}for(U=E;0<=M.l(N);){for(A=Math.max(1,Math.floor(M.m()/N.m())),D=Math.ceil(Math.log(A)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),B=v(A),O=B.j(N);L(O)||0<O.l(M);)A-=D,B=v(A),O=B.j(N);I(B)&&(B=w),U=U.add(B),M=V(M,O)}return new H(U,M)}n.A=function(M){return ee(this,M).h},n.and=function(M){for(var N=Math.max(this.g.length,M.g.length),A=[],D=0;D<N;D++)A[D]=this.i(D)&M.i(D);return new u(A,this.h&M.h)},n.or=function(M){for(var N=Math.max(this.g.length,M.g.length),A=[],D=0;D<N;D++)A[D]=this.i(D)|M.i(D);return new u(A,this.h|M.h)},n.xor=function(M){for(var N=Math.max(this.g.length,M.g.length),A=[],D=0;D<N;D++)A[D]=this.i(D)^M.i(D);return new u(A,this.h^M.h)};function X(M){for(var N=M.g.length+1,A=[],D=0;D<N;D++)A[D]=M.i(D)<<1|M.i(D-1)>>>31;return new u(A,M.h)}function se(M,N){var A=N>>5;N%=32;for(var D=M.g.length-A,U=[],B=0;B<D;B++)U[B]=0<N?M.i(B+A)>>>N|M.i(B+A+1)<<32-N:M.i(B+A);return new u(U,M.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,v1=r,u.prototype.add=u.prototype.add,u.prototype.multiply=u.prototype.j,u.prototype.modulo=u.prototype.A,u.prototype.compare=u.prototype.l,u.prototype.toNumber=u.prototype.m,u.prototype.toString=u.prototype.toString,u.prototype.getBits=u.prototype.i,u.fromNumber=v,u.fromString=_,Oa=u}).apply(typeof Ix<"u"?Ix:typeof self<"u"?self:typeof window<"u"?window:{});var jd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var y1,bc,_1,Wd,Gp,x1,b1,w1;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,y,x){return d==Array.prototype||d==Object.prototype||(d[y]=x.value),d};function t(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof jd=="object"&&jd];for(var y=0;y<d.length;++y){var x=d[y];if(x&&x.Math==Math)return x}throw Error("Cannot find global object")}var r=t(this);function s(d,y){if(y)e:{var x=r;d=d.split(".");for(var R=0;R<d.length-1;R++){var G=d[R];if(!(G in x))break e;x=x[G]}d=d[d.length-1],R=x[d],y=y(R),y!=R&&y!=null&&e(x,d,{configurable:!0,writable:!0,value:y})}}function l(d,y){d instanceof String&&(d+="");var x=0,R=!1,G={next:function(){if(!R&&x<d.length){var W=x++;return{value:y(W,d[W]),done:!1}}return R=!0,{done:!0,value:void 0}}};return G[Symbol.iterator]=function(){return G},G}s("Array.prototype.values",function(d){return d||function(){return l(this,function(y,x){return x})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},f=this||self;function p(d){var y=typeof d;return y=y!="object"?y:d?Array.isArray(d)?"array":y:"null",y=="array"||y=="object"&&typeof d.length=="number"}function v(d){var y=typeof d;return y=="object"&&d!=null||y=="function"}function _(d,y,x){return d.call.apply(d.bind,arguments)}function E(d,y,x){if(!d)throw Error();if(2<arguments.length){var R=Array.prototype.slice.call(arguments,2);return function(){var G=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(G,R),d.apply(y,G)}}return function(){return d.apply(y,arguments)}}function w(d,y,x){return w=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?_:E,w.apply(null,arguments)}function T(d,y){var x=Array.prototype.slice.call(arguments,1);return function(){var R=x.slice();return R.push.apply(R,arguments),d.apply(this,R)}}function I(d,y){function x(){}x.prototype=y.prototype,d.aa=y.prototype,d.prototype=new x,d.prototype.constructor=d,d.Qb=function(R,G,W){for(var he=Array(arguments.length-2),He=2;He<arguments.length;He++)he[He-2]=arguments[He];return y.prototype[G].apply(R,he)}}function L(d){const y=d.length;if(0<y){const x=Array(y);for(let R=0;R<y;R++)x[R]=d[R];return x}return[]}function P(d,y){for(let x=1;x<arguments.length;x++){const R=arguments[x];if(p(R)){const G=d.length||0,W=R.length||0;d.length=G+W;for(let he=0;he<W;he++)d[G+he]=R[he]}else d.push(R)}}class V{constructor(y,x){this.i=y,this.j=x,this.h=0,this.g=null}get(){let y;return 0<this.h?(this.h--,y=this.g,this.g=y.next,y.next=null):y=this.i(),y}}function Y(d){return/^[\s\xa0]*$/.test(d)}function H(){var d=f.navigator;return d&&(d=d.userAgent)?d:""}function ee(d){return ee[" "](d),d}ee[" "]=function(){};var X=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function se(d,y,x){for(const R in d)y.call(x,d[R],R,d)}function M(d,y){for(const x in d)y.call(void 0,d[x],x,d)}function N(d){const y={};for(const x in d)y[x]=d[x];return y}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function D(d,y){let x,R;for(let G=1;G<arguments.length;G++){R=arguments[G];for(x in R)d[x]=R[x];for(let W=0;W<A.length;W++)x=A[W],Object.prototype.hasOwnProperty.call(R,x)&&(d[x]=R[x])}}function U(d){var y=1;d=d.split(":");const x=[];for(;0<y&&d.length;)x.push(d.shift()),y--;return d.length&&x.push(d.join(":")),x}function B(d){f.setTimeout(()=>{throw d},0)}function O(){var d=re;let y=null;return d.g&&(y=d.g,d.g=d.g.next,d.g||(d.h=null),y.next=null),y}class me{constructor(){this.h=this.g=null}add(y,x){const R=xe.get();R.set(y,x),this.h?this.h.next=R:this.g=R,this.h=R}}var xe=new V(()=>new oe,d=>d.reset());class oe{constructor(){this.next=this.g=this.h=null}set(y,x){this.h=y,this.g=x,this.next=null}reset(){this.next=this.g=this.h=null}}let ve,fe=!1,re=new me,k=()=>{const d=f.Promise.resolve(void 0);ve=()=>{d.then(Q)}};var Q=()=>{for(var d;d=O();){try{d.h.call(d.g)}catch(x){B(x)}var y=xe;y.j(d),100>y.h&&(y.h++,d.next=y.g,y.g=d)}fe=!1};function le(){this.s=this.s,this.C=this.C}le.prototype.s=!1,le.prototype.ma=function(){this.s||(this.s=!0,this.N())},le.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function de(d,y){this.type=d,this.g=this.target=y,this.defaultPrevented=!1}de.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var d=!1,y=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const x=()=>{};f.addEventListener("test",x,y),f.removeEventListener("test",x,y)}catch{}return d}();function Ne(d,y){if(de.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var x=this.type=d.type,R=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=y,y=d.relatedTarget){if(X){e:{try{ee(y.nodeName);var G=!0;break e}catch{}G=!1}G||(y=null)}}else x=="mouseover"?y=d.fromElement:x=="mouseout"&&(y=d.toElement);this.relatedTarget=y,R?(this.clientX=R.clientX!==void 0?R.clientX:R.pageX,this.clientY=R.clientY!==void 0?R.clientY:R.pageY,this.screenX=R.screenX||0,this.screenY=R.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:we[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&Ne.aa.h.call(this)}}I(Ne,de);var we={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var ot="closure_listenable_"+(1e6*Math.random()|0),Ee=0;function Je(d,y,x,R,G){this.listener=d,this.proxy=null,this.src=y,this.type=x,this.capture=!!R,this.ha=G,this.key=++Ee,this.da=this.fa=!1}function qe(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function It(d){this.src=d,this.g={},this.h=0}It.prototype.add=function(d,y,x,R,G){var W=d.toString();d=this.g[W],d||(d=this.g[W]=[],this.h++);var he=dn(d,y,R,G);return-1<he?(y=d[he],x||(y.fa=!1)):(y=new Je(y,this.src,W,!!R,G),y.fa=x,d.push(y)),y};function nn(d,y){var x=y.type;if(x in d.g){var R=d.g[x],G=Array.prototype.indexOf.call(R,y,void 0),W;(W=0<=G)&&Array.prototype.splice.call(R,G,1),W&&(qe(y),d.g[x].length==0&&(delete d.g[x],d.h--))}}function dn(d,y,x,R){for(var G=0;G<d.length;++G){var W=d[G];if(!W.da&&W.listener==y&&W.capture==!!x&&W.ha==R)return G}return-1}var oi="closure_lm_"+(1e6*Math.random()|0),li={};function Ln(d,y,x,R,G){if(Array.isArray(y)){for(var W=0;W<y.length;W++)Ln(d,y[W],x,R,G);return null}return x=Se(x),d&&d[ot]?d.K(y,x,v(R)?!!R.capture:!1,G):Un(d,y,x,!1,R,G)}function Un(d,y,x,R,G,W){if(!y)throw Error("Invalid event type");var he=v(G)?!!G.capture:!!G,He=Wa(d);if(He||(d[oi]=He=new It(d)),x=He.add(y,x,R,he,W),x.proxy)return x;if(R=Ai(),x.proxy=R,R.src=d,R.listener=x,d.addEventListener)ce||(G=he),G===void 0&&(G=!1),d.addEventListener(y.toString(),R,G);else if(d.attachEvent)d.attachEvent(Hr(y.toString()),R);else if(d.addListener&&d.removeListener)d.addListener(R);else throw Error("addEventListener and attachEvent are unavailable.");return x}function Ai(){function d(x){return y.call(d.src,d.listener,x)}const y=dl;return d}function ci(d,y,x,R,G){if(Array.isArray(y))for(var W=0;W<y.length;W++)ci(d,y[W],x,R,G);else R=v(R)?!!R.capture:!!R,x=Se(x),d&&d[ot]?(d=d.i,y=String(y).toString(),y in d.g&&(W=d.g[y],x=dn(W,x,R,G),-1<x&&(qe(W[x]),Array.prototype.splice.call(W,x,1),W.length==0&&(delete d.g[y],d.h--)))):d&&(d=Wa(d))&&(y=d.g[y.toString()],d=-1,y&&(d=dn(y,x,R,G)),(x=-1<d?y[d]:null)&&Vn(x))}function Vn(d){if(typeof d!="number"&&d&&!d.da){var y=d.src;if(y&&y[ot])nn(y.i,d);else{var x=d.type,R=d.proxy;y.removeEventListener?y.removeEventListener(x,R,d.capture):y.detachEvent?y.detachEvent(Hr(x),R):y.addListener&&y.removeListener&&y.removeListener(R),(x=Wa(y))?(nn(x,d),x.h==0&&(x.src=null,y[oi]=null)):qe(d)}}}function Hr(d){return d in li?li[d]:li[d]="on"+d}function dl(d,y){if(d.da)d=!0;else{y=new Ne(y,this);var x=d.listener,R=d.ha||d.src;d.fa&&Vn(d),d=x.call(R,y)}return d}function Wa(d){return d=d[oi],d instanceof It?d:null}var ue="__closure_events_fn_"+(1e9*Math.random()>>>0);function Se(d){return typeof d=="function"?d:(d[ue]||(d[ue]=function(y){return d.handleEvent(y)}),d[ue])}function Oe(){le.call(this),this.i=new It(this),this.M=this,this.F=null}I(Oe,le),Oe.prototype[ot]=!0,Oe.prototype.removeEventListener=function(d,y,x,R){ci(this,d,y,x,R)};function Ue(d,y){var x,R=d.F;if(R)for(x=[];R;R=R.F)x.push(R);if(d=d.M,R=y.type||y,typeof y=="string")y=new de(y,d);else if(y instanceof de)y.target=y.target||d;else{var G=y;y=new de(R,d),D(y,G)}if(G=!0,x)for(var W=x.length-1;0<=W;W--){var he=y.g=x[W];G=ft(he,R,!0,y)&&G}if(he=y.g=d,G=ft(he,R,!0,y)&&G,G=ft(he,R,!1,y)&&G,x)for(W=0;W<x.length;W++)he=y.g=x[W],G=ft(he,R,!1,y)&&G}Oe.prototype.N=function(){if(Oe.aa.N.call(this),this.i){var d=this.i,y;for(y in d.g){for(var x=d.g[y],R=0;R<x.length;R++)qe(x[R]);delete d.g[y],d.h--}}this.F=null},Oe.prototype.K=function(d,y,x,R){return this.i.add(String(d),y,!1,x,R)},Oe.prototype.L=function(d,y,x,R){return this.i.add(String(d),y,!0,x,R)};function ft(d,y,x,R){if(y=d.i.g[String(y)],!y)return!0;y=y.concat();for(var G=!0,W=0;W<y.length;++W){var he=y[W];if(he&&!he.da&&he.capture==x){var He=he.listener,Lt=he.ha||he.src;he.fa&&nn(d.i,he),G=He.call(Lt,R)!==!1&&G}}return G&&!R.defaultPrevented}function Ri(d,y,x){if(typeof d=="function")x&&(d=w(d,x));else if(d&&typeof d.handleEvent=="function")d=w(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(y)?-1:f.setTimeout(d,y||0)}function zn(d){d.g=Ri(()=>{d.g=null,d.i&&(d.i=!1,zn(d))},d.l);const y=d.h;d.h=null,d.m.apply(null,y)}class Xa extends le{constructor(y,x){super(),this.m=y,this.l=x,this.h=null,this.i=!1,this.g=null}j(y){this.h=arguments,this.g?this.i=!0:zn(this)}N(){super.N(),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ui(d){le.call(this),this.h=d,this.g={}}I(ui,le);var Bn=[];function St(d){se(d.g,function(y,x){this.g.hasOwnProperty(x)&&Vn(y)},d),d.g={}}ui.prototype.N=function(){ui.aa.N.call(this),St(this)},ui.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ji=f.JSON.stringify,yn=f.JSON.parse,Pt=class{stringify(d){return f.JSON.stringify(d,void 0)}parse(d){return f.JSON.parse(d,void 0)}};function Zi(){}Zi.prototype.h=null;function $s(d){return d.h||(d.h=d.i())}function fu(){}var Ni={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Gr(){de.call(this,"d")}I(Gr,de);function di(){de.call(this,"c")}I(di,de);var Fn={},$r=null;function Ks(){return $r=$r||new Oe}Fn.La="serverreachability";function hl(d){de.call(this,Fn.La,d)}I(hl,de);function Kr(d){const y=Ks();Ue(y,new hl(y))}Fn.STAT_EVENT="statevent";function Ys(d,y){de.call(this,Fn.STAT_EVENT,d),this.stat=y}I(Ys,de);function At(d){const y=Ks();Ue(y,new Ys(y,d))}Fn.Ma="timingevent";function mu(d,y){de.call(this,Fn.Ma,d),this.size=y}I(mu,de);function Yr(d,y){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){d()},y)}function Qr(){this.g=!0}Qr.prototype.xa=function(){this.g=!1};function pu(d,y,x,R,G,W){d.info(function(){if(d.g)if(W)for(var he="",He=W.split("&"),Lt=0;Lt<He.length;Lt++){var Ge=He[Lt].split("=");if(1<Ge.length){var Ht=Ge[0];Ge=Ge[1];var Ut=Ht.split("_");he=2<=Ut.length&&Ut[1]=="type"?he+(Ht+"="+Ge+"&"):he+(Ht+"=redacted&")}}else he=null;else he=W;return"XMLHTTP REQ ("+R+") [attempt "+G+"]: "+y+`
`+x+`
`+he})}function gu(d,y,x,R,G,W,he){d.info(function(){return"XMLHTTP RESP ("+R+") [ attempt "+G+"]: "+y+`
`+x+`
`+W+" "+he})}function Wr(d,y,x,R){d.info(function(){return"XMLHTTP TEXT ("+y+"): "+Ft(d,x)+(R?" "+R:"")})}function Ii(d,y){d.info(function(){return"TIMEOUT: "+y})}Qr.prototype.info=function(){};function Ft(d,y){if(!d.g)return y;if(!y)return null;try{var x=JSON.parse(y);if(x){for(d=0;d<x.length;d++)if(Array.isArray(x[d])){var R=x[d];if(!(2>R.length)){var G=R[1];if(Array.isArray(G)&&!(1>G.length)){var W=G[0];if(W!="noop"&&W!="stop"&&W!="close")for(var he=1;he<G.length;he++)G[he]=""}}}}return Ji(x)}catch{return y}}var Mt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},er={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ja;function Qs(){}I(Qs,Zi),Qs.prototype.g=function(){return new XMLHttpRequest},Qs.prototype.i=function(){return{}},Ja=new Qs;function Ci(d,y,x,R){this.j=d,this.i=y,this.l=x,this.R=R||1,this.U=new ui(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new fl}function fl(){this.i=null,this.g="",this.h=!1}var Xr={},Za={};function hi(d,y,x){d.L=1,d.v=ns(xt(y)),d.m=x,d.P=!0,tr(d,null)}function tr(d,y){d.F=Date.now(),mt(d),d.A=xt(d.v);var x=d.A,R=d.R;Array.isArray(R)||(R=[String(R)]),rr(x.i,"t",R),d.C=0,x=d.j.J,d.h=new fl,d.g=Cu(d.j,x?y:null,!d.m),0<d.O&&(d.M=new Xa(w(d.Y,d,d.g),d.O)),y=d.U,x=d.g,R=d.ca;var G="readystatechange";Array.isArray(G)||(G&&(Bn[0]=G.toString()),G=Bn);for(var W=0;W<G.length;W++){var he=Ln(x,G[W],R||y.handleEvent,!1,y.h||y);if(!he)break;y.g[he.key]=he}y=d.H?N(d.H):{},d.m?(d.u||(d.u="POST"),y["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,y)):(d.u="GET",d.g.ea(d.A,d.u,null,y)),Kr(),pu(d.i,d.u,d.A,d.l,d.R,d.m)}Ci.prototype.ca=function(d){d=d.target;const y=this.M;y&&Kn(d)==3?y.j():this.Y(d)},Ci.prototype.Y=function(d){try{if(d==this.g)e:{const Ut=Kn(this.g);var y=this.g.Ba();const lr=this.g.Z();if(!(3>Ut)&&(Ut!=3||this.g&&(this.h.h||this.g.oa()||wu(this.g)))){this.J||Ut!=4||y==7||(y==8||0>=lr?Kr(3):Kr(2)),Ws(this);var x=this.g.Z();this.X=x;t:if(Jr(this)){var R=wu(this.g);d="";var G=R.length,W=Kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){_n(this),Rn(this);var he="";break t}this.h.i=new f.TextDecoder}for(y=0;y<G;y++)this.h.h=!0,d+=this.h.i.decode(R[y],{stream:!(W&&y==G-1)});R.length=0,this.h.g+=d,this.C=0,he=this.h.g}else he=this.g.oa();if(this.o=x==200,gu(this.i,this.u,this.A,this.l,this.R,Ut,x),this.o){if(this.T&&!this.K){t:{if(this.g){var He,Lt=this.g;if((He=Lt.g?Lt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Y(He)){var Ge=He;break t}}Ge=null}if(x=Ge)Wr(this.i,this.l,x,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Nn(this,x);else{this.o=!1,this.s=3,At(12),_n(this),Rn(this);break e}}if(this.P){x=!0;let Qt;for(;!this.J&&this.C<he.length;)if(Qt=Zr(this,he),Qt==Za){Ut==4&&(this.s=4,At(14),x=!1),Wr(this.i,this.l,null,"[Incomplete Response]");break}else if(Qt==Xr){this.s=4,At(15),Wr(this.i,this.l,he,"[Invalid Chunk]"),x=!1;break}else Wr(this.i,this.l,Qt,null),Nn(this,Qt);if(Jr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ut!=4||he.length!=0||this.h.h||(this.s=1,At(16),x=!1),this.o=this.o&&x,!x)Wr(this.i,this.l,he,"[Invalid Chunked Response]"),_n(this),Rn(this);else if(0<he.length&&!this.W){this.W=!0;var Ht=this.j;Ht.g==this&&Ht.ba&&!Ht.M&&(Ht.j.info("Great, no buffering proxy detected. Bytes received: "+he.length),cs(Ht),Ht.M=!0,At(11))}}else Wr(this.i,this.l,he,null),Nn(this,he);Ut==4&&_n(this),this.o&&!this.J&&(Ut==4?Ru(this.j,this):(this.o=!1,mt(this)))}else pf(this.g),x==400&&0<he.indexOf("Unknown SID")?(this.s=3,At(12)):(this.s=0,At(13)),_n(this),Rn(this)}}}catch{}finally{}};function Jr(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Zr(d,y){var x=d.C,R=y.indexOf(`
`,x);return R==-1?Za:(x=Number(y.substring(x,R)),isNaN(x)?Xr:(R+=1,R+x>y.length?Za:(y=y.slice(R,R+x),d.C=R+x,y)))}Ci.prototype.cancel=function(){this.J=!0,_n(this)};function mt(d){d.S=Date.now()+d.I,ml(d,d.I)}function ml(d,y){if(d.B!=null)throw Error("WatchDog timer not null");d.B=Yr(w(d.ba,d),y)}function Ws(d){d.B&&(f.clearTimeout(d.B),d.B=null)}Ci.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(Ii(this.i,this.A),this.L!=2&&(Kr(),At(17)),_n(this),this.s=2,Rn(this)):ml(this,this.S-d)};function Rn(d){d.j.G==0||d.J||Ru(d.j,d)}function _n(d){Ws(d);var y=d.M;y&&typeof y.ma=="function"&&y.ma(),d.M=null,St(d.U),d.g&&(y=d.g,d.g=null,y.abort(),y.ma())}function Nn(d,y){try{var x=d.j;if(x.G!=0&&(x.g==d||ea(x.h,d))){if(!d.K&&ea(x.h,d)&&x.G==3){try{var R=x.Da.g.parse(y)}catch{R=null}if(Array.isArray(R)&&R.length==3){var G=R;if(G[0]==0){e:if(!x.u){if(x.g)if(x.g.F+3e3<d.F)so(x),ro(x);else break e;Sl(x),At(18)}}else x.za=G[1],0<x.za-x.T&&37500>G[2]&&x.F&&x.v==0&&!x.C&&(x.C=Yr(w(x.Za,x),6e3));if(1>=vu(x.h)&&x.ca){try{x.ca()}catch{}x.ca=void 0}}else or(x,11)}else if((d.K||x.g==d)&&so(x),!Y(y))for(G=x.Da.g.parse(y),y=0;y<G.length;y++){let Ge=G[y];if(x.T=Ge[0],Ge=Ge[1],x.G==2)if(Ge[0]=="c"){x.K=Ge[1],x.ia=Ge[2];const Ht=Ge[3];Ht!=null&&(x.la=Ht,x.j.info("VER="+x.la));const Ut=Ge[4];Ut!=null&&(x.Aa=Ut,x.j.info("SVER="+x.Aa));const lr=Ge[5];lr!=null&&typeof lr=="number"&&0<lr&&(R=1.5*lr,x.L=R,x.j.info("backChannelRequestTimeoutMs_="+R)),R=x;const Qt=d.g;if(Qt){const Li=Qt.g?Qt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Li){var W=R.h;W.g||Li.indexOf("spdy")==-1&&Li.indexOf("quic")==-1&&Li.indexOf("h2")==-1||(W.j=W.l,W.g=new Set,W.h&&(ta(W,W.h),W.h=null))}if(R.D){const Rl=Qt.g?Qt.g.getResponseHeader("X-HTTP-Session-Id"):null;Rl&&(R.ya=Rl,Qe(R.I,R.D,Rl))}}x.G=3,x.l&&x.l.ua(),x.ba&&(x.R=Date.now()-d.F,x.j.info("Handshake RTT: "+x.R+"ms")),R=x;var he=d;if(R.qa=Iu(R,R.J?R.ia:null,R.W),he.K){qn(R.h,he);var He=he,Lt=R.L;Lt&&(He.I=Lt),He.B&&(Ws(He),mt(He)),R.g=he}else Su(R);0<x.i.length&&ao(x)}else Ge[0]!="stop"&&Ge[0]!="close"||or(x,7);else x.G==3&&(Ge[0]=="stop"||Ge[0]=="close"?Ge[0]=="stop"?or(x,7):El(x):Ge[0]!="noop"&&x.l&&x.l.ta(Ge),x.v=0)}}Kr(4)}catch{}}var uf=class{constructor(d,y){this.g=d,this.map=y}};function pl(d){this.l=d||10,f.PerformanceNavigationTiming?(d=f.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(f.chrome&&f.chrome.loadTimes&&f.chrome.loadTimes()&&f.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function gl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function vu(d){return d.h?1:d.g?d.g.size:0}function ea(d,y){return d.h?d.h==y:d.g?d.g.has(y):!1}function ta(d,y){d.g?d.g.add(y):d.h=y}function qn(d,y){d.h&&d.h==y?d.h=null:d.g&&d.g.has(y)&&d.g.delete(y)}pl.prototype.cancel=function(){if(this.i=hn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function hn(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let y=d.i;for(const x of d.g.values())y=y.concat(x.D);return y}return L(d.i)}function yu(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(p(d)){for(var y=[],x=d.length,R=0;R<x;R++)y.push(d[R]);return y}y=[],x=0;for(R in d)y[x++]=d[R];return y}function df(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(p(d)||typeof d=="string"){var y=[];d=d.length;for(var x=0;x<d;x++)y.push(x);return y}y=[],x=0;for(const R in d)y[x++]=R;return y}}}function es(d,y){if(d.forEach&&typeof d.forEach=="function")d.forEach(y,void 0);else if(p(d)||typeof d=="string")Array.prototype.forEach.call(d,y,void 0);else for(var x=df(d),R=yu(d),G=R.length,W=0;W<G;W++)y.call(void 0,R[W],x&&x[W],d)}var vl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xs(d,y){if(d){d=d.split("&");for(var x=0;x<d.length;x++){var R=d[x].indexOf("="),G=null;if(0<=R){var W=d[x].substring(0,R);G=d[x].substring(R+1)}else W=d[x];y(W,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function nr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof nr){this.h=d.h,na(this,d.j),this.o=d.o,this.g=d.g,ts(this,d.s),this.l=d.l;var y=d.i,x=new Di;x.i=y.i,y.g&&(x.g=new Map(y.g),x.h=y.h),Js(this,x),this.m=d.m}else d&&(y=String(d).match(vl))?(this.h=!1,na(this,y[1]||"",!0),this.o=ia(y[2]||""),this.g=ia(y[3]||"",!0),ts(this,y[4]),this.l=ia(y[5]||"",!0),Js(this,y[6]||"",!0),this.m=ia(y[7]||"")):(this.h=!1,this.i=new Di(null,this.h))}nr.prototype.toString=function(){var d=[],y=this.j;y&&d.push(Hn(y,yl,!0),":");var x=this.g;return(x||y=="file")&&(d.push("//"),(y=this.o)&&d.push(Hn(y,yl,!0),"@"),d.push(encodeURIComponent(String(x)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x=this.s,x!=null&&d.push(":",String(x))),(x=this.l)&&(this.g&&x.charAt(0)!="/"&&d.push("/"),d.push(Hn(x,x.charAt(0)=="/"?_l:_u,!0))),(x=this.i.toString())&&d.push("?",x),(x=this.m)&&d.push("#",Hn(x,mf)),d.join("")};function xt(d){return new nr(d)}function na(d,y,x){d.j=x?ia(y,!0):y,d.j&&(d.j=d.j.replace(/:$/,""))}function ts(d,y){if(y){if(y=Number(y),isNaN(y)||0>y)throw Error("Bad port number "+y);d.s=y}else d.s=null}function Js(d,y,x){y instanceof Di?(d.i=y,xl(d.i,d.h)):(x||(y=Hn(y,ff)),d.i=new Di(y,d.h))}function Qe(d,y,x){d.i.set(y,x)}function ns(d){return Qe(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function ia(d,y){return d?y?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function Hn(d,y,x){return typeof d=="string"?(d=encodeURI(d).replace(y,hf),x&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function hf(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var yl=/[#\/\?@]/g,_u=/[#\?:]/g,_l=/[#\?]/g,ff=/[#\?@]/g,mf=/#/g;function Di(d,y){this.h=this.g=null,this.i=d||null,this.j=!!y}function Gn(d){d.g||(d.g=new Map,d.h=0,d.i&&Xs(d.i,function(y,x){d.add(decodeURIComponent(y.replace(/\+/g," ")),x)}))}n=Di.prototype,n.add=function(d,y){Gn(this),this.i=null,d=ar(this,d);var x=this.g.get(d);return x||this.g.set(d,x=[]),x.push(y),this.h+=1,this};function Zs(d,y){Gn(d),y=ar(d,y),d.g.has(y)&&(d.i=null,d.h-=d.g.get(y).length,d.g.delete(y))}function ir(d,y){return Gn(d),y=ar(d,y),d.g.has(y)}n.forEach=function(d,y){Gn(this),this.g.forEach(function(x,R){x.forEach(function(G){d.call(y,G,R,this)},this)},this)},n.na=function(){Gn(this);const d=Array.from(this.g.values()),y=Array.from(this.g.keys()),x=[];for(let R=0;R<y.length;R++){const G=d[R];for(let W=0;W<G.length;W++)x.push(y[R])}return x},n.V=function(d){Gn(this);let y=[];if(typeof d=="string")ir(this,d)&&(y=y.concat(this.g.get(ar(this,d))));else{d=Array.from(this.g.values());for(let x=0;x<d.length;x++)y=y.concat(d[x])}return y},n.set=function(d,y){return Gn(this),this.i=null,d=ar(this,d),ir(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[y]),this.h+=1,this},n.get=function(d,y){return d?(d=this.V(d),0<d.length?String(d[0]):y):y};function rr(d,y,x){Zs(d,y),0<x.length&&(d.i=null,d.g.set(ar(d,y),L(x)),d.h+=x.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],y=Array.from(this.g.keys());for(var x=0;x<y.length;x++){var R=y[x];const W=encodeURIComponent(String(R)),he=this.V(R);for(R=0;R<he.length;R++){var G=W;he[R]!==""&&(G+="="+encodeURIComponent(String(he[R]))),d.push(G)}}return this.i=d.join("&")};function ar(d,y){return y=String(y),d.j&&(y=y.toLowerCase()),y}function xl(d,y){y&&!d.j&&(Gn(d),d.i=null,d.g.forEach(function(x,R){var G=R.toLowerCase();R!=G&&(Zs(this,R),rr(this,G,x))},d)),d.j=y}function xu(d,y){const x=new Qr;if(f.Image){const R=new Image;R.onload=T($n,x,"TestLoadImage: loaded",!0,y,R),R.onerror=T($n,x,"TestLoadImage: error",!1,y,R),R.onabort=T($n,x,"TestLoadImage: abort",!1,y,R),R.ontimeout=T($n,x,"TestLoadImage: timeout",!1,y,R),f.setTimeout(function(){R.ontimeout&&R.ontimeout()},1e4),R.src=d}else y(!1)}function is(d,y){const x=new Qr,R=new AbortController,G=setTimeout(()=>{R.abort(),$n(x,"TestPingServer: timeout",!1,y)},1e4);fetch(d,{signal:R.signal}).then(W=>{clearTimeout(G),W.ok?$n(x,"TestPingServer: ok",!0,y):$n(x,"TestPingServer: server error",!1,y)}).catch(()=>{clearTimeout(G),$n(x,"TestPingServer: error",!1,y)})}function $n(d,y,x,R,G){try{G&&(G.onload=null,G.onerror=null,G.onabort=null,G.ontimeout=null),R(x)}catch{}}function rs(){this.g=new Pt}function ki(d,y,x){const R=x||"";try{es(d,function(G,W){let he=G;v(G)&&(he=Ji(G)),y.push(R+W+"="+encodeURIComponent(he))})}catch(G){throw y.push(R+"type="+encodeURIComponent("_badmap")),G}}function ra(d){this.l=d.Ub||null,this.j=d.eb||!1}I(ra,Zi),ra.prototype.g=function(){return new sr(this.l,this.j)},ra.prototype.i=function(d){return function(){return d}}({});function sr(d,y){Oe.call(this),this.D=d,this.o=y,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(sr,Oe),n=sr.prototype,n.open=function(d,y){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=y,this.readyState=1,Oi(this)},n.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const y={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(y.body=d),(this.D||f).fetch(new Request(this.A,y)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ji(this)),this.readyState=0},n.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Oi(this)),this.g&&(this.readyState=3,Oi(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof f.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bl(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function bl(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}n.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var y=d.value?d.value:new Uint8Array(0);(y=this.v.decode(y,{stream:!d.done}))&&(this.response=this.responseText+=y)}d.done?ji(this):Oi(this),this.readyState==3&&bl(this)}},n.Ra=function(d){this.g&&(this.response=this.responseText=d,ji(this))},n.Qa=function(d){this.g&&(this.response=d,ji(this))},n.ga=function(){this.g&&ji(this)};function ji(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Oi(d)}n.setRequestHeader=function(d,y){this.u.append(d,y)},n.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],y=this.h.entries();for(var x=y.next();!x.done;)x=x.value,d.push(x[0]+": "+x[1]),x=y.next();return d.join(`\r
`)};function Oi(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(sr.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function wl(d){let y="";return se(d,function(x,R){y+=R,y+=":",y+=x,y+=`\r
`}),y}function qt(d,y,x){e:{for(R in x){var R=!1;break e}R=!0}R||(x=wl(x),typeof d=="string"?x!=null&&encodeURIComponent(String(x)):Qe(d,y,x))}function Ze(d){Oe.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ze,Oe);var eo=/^https?$/i,as=["POST","PUT"];n=Ze.prototype,n.Ha=function(d){this.J=d},n.ea=function(d,y,x,R){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);y=y?y.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ja.g(),this.v=this.o?$s(this.o):$s(Ja),this.g.onreadystatechange=w(this.Ea,this);try{this.B=!0,this.g.open(y,String(d),!0),this.B=!1}catch(W){bu(this,W);return}if(d=x||"",x=new Map(this.headers),R)if(Object.getPrototypeOf(R)===Object.prototype)for(var G in R)x.set(G,R[G]);else if(typeof R.keys=="function"&&typeof R.get=="function")for(const W of R.keys())x.set(W,R.get(W));else throw Error("Unknown input type for opt_headers: "+String(R));R=Array.from(x.keys()).find(W=>W.toLowerCase()=="content-type"),G=f.FormData&&d instanceof f.FormData,!(0<=Array.prototype.indexOf.call(as,y,void 0))||R||G||x.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[W,he]of x)this.g.setRequestHeader(W,he);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{ss(this),this.u=!0,this.g.send(d),this.u=!1}catch(W){bu(this,W)}};function bu(d,y){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=y,d.m=5,to(d),Pi(d)}function to(d){d.A||(d.A=!0,Ue(d,"complete"),Ue(d,"error"))}n.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,Ue(this,"complete"),Ue(this,"abort"),Pi(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Pi(this,!0)),Ze.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?no(this):this.bb())},n.bb=function(){no(this)};function no(d){if(d.h&&typeof u<"u"&&(!d.v[1]||Kn(d)!=4||d.Z()!=2)){if(d.u&&Kn(d)==4)Ri(d.Ea,0,d);else if(Ue(d,"readystatechange"),Kn(d)==4){d.h=!1;try{const he=d.Z();e:switch(he){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var y=!0;break e;default:y=!1}var x;if(!(x=y)){var R;if(R=he===0){var G=String(d.D).match(vl)[1]||null;!G&&f.self&&f.self.location&&(G=f.self.location.protocol.slice(0,-1)),R=!eo.test(G?G.toLowerCase():"")}x=R}if(x)Ue(d,"complete"),Ue(d,"success");else{d.m=6;try{var W=2<Kn(d)?d.g.statusText:""}catch{W=""}d.l=W+" ["+d.Z()+"]",to(d)}}finally{Pi(d)}}}}function Pi(d,y){if(d.g){ss(d);const x=d.g,R=d.v[0]?()=>{}:null;d.g=null,d.v=null,y||Ue(d,"ready");try{x.onreadystatechange=R}catch{}}}function ss(d){d.I&&(f.clearTimeout(d.I),d.I=null)}n.isActive=function(){return!!this.g};function Kn(d){return d.g?d.g.readyState:0}n.Z=function(){try{return 2<Kn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(d){if(this.g){var y=this.g.responseText;return d&&y.indexOf(d)==0&&(y=y.substring(d.length)),yn(y)}};function wu(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function pf(d){const y={};d=(d.g&&2<=Kn(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let R=0;R<d.length;R++){if(Y(d[R]))continue;var x=U(d[R]);const G=x[0];if(x=x[1],typeof x!="string")continue;x=x.trim();const W=y[G]||[];y[G]=W,W.push(x)}M(y,function(R){return R.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function os(d,y,x){return x&&x.internalChannelParams&&x.internalChannelParams[d]||y}function io(d){this.Aa=0,this.i=[],this.j=new Qr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=os("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=os("baseRetryDelayMs",5e3,d),this.cb=os("retryDelaySeedMs",1e4,d),this.Wa=os("forwardChannelMaxRetries",2,d),this.wa=os("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new pl(d&&d.concurrentRequestLimit),this.Da=new rs,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=io.prototype,n.la=8,n.G=1,n.connect=function(d,y,x,R){At(0),this.W=d,this.H=y||{},x&&R!==void 0&&(this.H.OSID=x,this.H.OAID=R),this.F=this.X,this.I=Iu(this,null,this.W),ao(this)};function El(d){if(Eu(d),d.G==3){var y=d.U++,x=xt(d.I);if(Qe(x,"SID",d.K),Qe(x,"RID",y),Qe(x,"TYPE","terminate"),ls(d,x),y=new Ci(d,d.j,y),y.L=2,y.v=ns(xt(x)),x=!1,f.navigator&&f.navigator.sendBeacon)try{x=f.navigator.sendBeacon(y.v.toString(),"")}catch{}!x&&f.Image&&(new Image().src=y.v,x=!0),x||(y.g=Cu(y.j,null),y.g.ea(y.v)),y.F=Date.now(),mt(y)}Nu(d)}function ro(d){d.g&&(cs(d),d.g.cancel(),d.g=null)}function Eu(d){ro(d),d.u&&(f.clearTimeout(d.u),d.u=null),so(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&f.clearTimeout(d.s),d.s=null)}function ao(d){if(!gl(d.h)&&!d.s){d.s=!0;var y=d.Ga;ve||k(),fe||(ve(),fe=!0),re.add(y,d),d.B=0}}function gf(d,y){return vu(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=y.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=Yr(w(d.Ga,d,y),Al(d,d.B)),d.B++,!0)}n.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const G=new Ci(this,this.j,d);let W=this.o;if(this.S&&(W?(W=N(W),D(W,this.S)):W=this.S),this.m!==null||this.O||(G.H=W,W=null),this.P)e:{for(var y=0,x=0;x<this.i.length;x++){t:{var R=this.i[x];if("__data__"in R.map&&(R=R.map.__data__,typeof R=="string")){R=R.length;break t}R=void 0}if(R===void 0)break;if(y+=R,4096<y){y=x;break e}if(y===4096||x===this.i.length-1){y=x+1;break e}}y=1e3}else y=1e3;y=Tu(this,G,y),x=xt(this.I),Qe(x,"RID",d),Qe(x,"CVER",22),this.D&&Qe(x,"X-HTTP-Session-Id",this.D),ls(this,x),W&&(this.O?y="headers="+encodeURIComponent(String(wl(W)))+"&"+y:this.m&&qt(x,this.m,W)),ta(this.h,G),this.Ua&&Qe(x,"TYPE","init"),this.P?(Qe(x,"$req",y),Qe(x,"SID","null"),G.T=!0,hi(G,x,null)):hi(G,x,y),this.G=2}}else this.G==3&&(d?Tl(this,d):this.i.length==0||gl(this.h)||Tl(this))};function Tl(d,y){var x;y?x=y.l:x=d.U++;const R=xt(d.I);Qe(R,"SID",d.K),Qe(R,"RID",x),Qe(R,"AID",d.T),ls(d,R),d.m&&d.o&&qt(R,d.m,d.o),x=new Ci(d,d.j,x,d.B+1),d.m===null&&(x.H=d.o),y&&(d.i=y.D.concat(d.i)),y=Tu(d,x,1e3),x.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),ta(d.h,x),hi(x,R,y)}function ls(d,y){d.H&&se(d.H,function(x,R){Qe(y,R,x)}),d.l&&es({},function(x,R){Qe(y,R,x)})}function Tu(d,y,x){x=Math.min(d.i.length,x);var R=d.l?w(d.l.Na,d.l,d):null;e:{var G=d.i;let W=-1;for(;;){const he=["count="+x];W==-1?0<x?(W=G[0].g,he.push("ofs="+W)):W=0:he.push("ofs="+W);let He=!0;for(let Lt=0;Lt<x;Lt++){let Ge=G[Lt].g;const Ht=G[Lt].map;if(Ge-=W,0>Ge)W=Math.max(0,G[Lt].g-100),He=!1;else try{ki(Ht,he,"req"+Ge+"_")}catch{R&&R(Ht)}}if(He){R=he.join("&");break e}}}return d=d.i.splice(0,x),y.D=d,R}function Su(d){if(!d.g&&!d.u){d.Y=1;var y=d.Fa;ve||k(),fe||(ve(),fe=!0),re.add(y,d),d.v=0}}function Sl(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=Yr(w(d.Fa,d),Al(d,d.v)),d.v++,!0)}n.Fa=function(){if(this.u=null,Au(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=Yr(w(this.ab,this),d)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,At(10),ro(this),Au(this))};function cs(d){d.A!=null&&(f.clearTimeout(d.A),d.A=null)}function Au(d){d.g=new Ci(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var y=xt(d.qa);Qe(y,"RID","rpc"),Qe(y,"SID",d.K),Qe(y,"AID",d.T),Qe(y,"CI",d.F?"0":"1"),!d.F&&d.ja&&Qe(y,"TO",d.ja),Qe(y,"TYPE","xmlhttp"),ls(d,y),d.m&&d.o&&qt(y,d.m,d.o),d.L&&(d.g.I=d.L);var x=d.g;d=d.ia,x.L=1,x.v=ns(xt(y)),x.m=null,x.P=!0,tr(x,d)}n.Za=function(){this.C!=null&&(this.C=null,ro(this),Sl(this),At(19))};function so(d){d.C!=null&&(f.clearTimeout(d.C),d.C=null)}function Ru(d,y){var x=null;if(d.g==y){so(d),cs(d),d.g=null;var R=2}else if(ea(d.h,y))x=y.D,qn(d.h,y),R=1;else return;if(d.G!=0){if(y.o)if(R==1){x=y.m?y.m.length:0,y=Date.now()-y.F;var G=d.B;R=Ks(),Ue(R,new mu(R,x)),ao(d)}else Su(d);else if(G=y.s,G==3||G==0&&0<y.X||!(R==1&&gf(d,y)||R==2&&Sl(d)))switch(x&&0<x.length&&(y=d.h,y.i=y.i.concat(x)),G){case 1:or(d,5);break;case 4:or(d,10);break;case 3:or(d,6);break;default:or(d,2)}}}function Al(d,y){let x=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(x*=2),x*y}function or(d,y){if(d.j.info("Error code "+y),y==2){var x=w(d.fb,d),R=d.Xa;const G=!R;R=new nr(R||"//www.google.com/images/cleardot.gif"),f.location&&f.location.protocol=="http"||na(R,"https"),ns(R),G?xu(R.toString(),x):is(R.toString(),x)}else At(2);d.G=0,d.l&&d.l.sa(y),Nu(d),Eu(d)}n.fb=function(d){d?(this.j.info("Successfully pinged google.com"),At(2)):(this.j.info("Failed to ping google.com"),At(1))};function Nu(d){if(d.G=0,d.ka=[],d.l){const y=hn(d.h);(y.length!=0||d.i.length!=0)&&(P(d.ka,y),P(d.ka,d.i),d.h.i.length=0,L(d.i),d.i.length=0),d.l.ra()}}function Iu(d,y,x){var R=x instanceof nr?xt(x):new nr(x);if(R.g!="")y&&(R.g=y+"."+R.g),ts(R,R.s);else{var G=f.location;R=G.protocol,y=y?y+"."+G.hostname:G.hostname,G=+G.port;var W=new nr(null);R&&na(W,R),y&&(W.g=y),G&&ts(W,G),x&&(W.l=x),R=W}return x=d.D,y=d.ya,x&&y&&Qe(R,x,y),Qe(R,"VER",d.la),ls(d,R),R}function Cu(d,y,x){if(y&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return y=d.Ca&&!d.pa?new Ze(new ra({eb:x})):new Ze(d.pa),y.Ha(d.J),y}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Du(){}n=Du.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function oo(){}oo.prototype.g=function(d,y){return new fn(d,y)};function fn(d,y){Oe.call(this),this.g=new io(y),this.l=d,this.h=y&&y.messageUrlParams||null,d=y&&y.messageHeaders||null,y&&y.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=y&&y.initMessageHeaders||null,y&&y.messageContentType&&(d?d["X-WebChannel-Content-Type"]=y.messageContentType:d={"X-WebChannel-Content-Type":y.messageContentType}),y&&y.va&&(d?d["X-WebChannel-Client-Profile"]=y.va:d={"X-WebChannel-Client-Profile":y.va}),this.g.S=d,(d=y&&y.Sb)&&!Y(d)&&(this.g.m=d),this.v=y&&y.supportsCrossDomainXhr||!1,this.u=y&&y.sendRawJson||!1,(y=y&&y.httpSessionIdParam)&&!Y(y)&&(this.g.D=y,d=this.h,d!==null&&y in d&&(d=this.h,y in d&&delete d[y])),this.j=new Mi(this)}I(fn,Oe),fn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){El(this.g)},fn.prototype.o=function(d){var y=this.g;if(typeof d=="string"){var x={};x.__data__=d,d=x}else this.u&&(x={},x.__data__=Ji(d),d=x);y.i.push(new uf(y.Ya++,d)),y.G==3&&ao(y)},fn.prototype.N=function(){this.g.l=null,delete this.j,El(this.g),delete this.g,fn.aa.N.call(this)};function ku(d){Gr.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var y=d.__sm__;if(y){e:{for(const x in y){d=x;break e}d=void 0}(this.i=d)&&(d=this.i,y=y!==null&&d in y?y[d]:void 0),this.data=y}else this.data=d}I(ku,Gr);function ju(){di.call(this),this.status=1}I(ju,di);function Mi(d){this.g=d}I(Mi,Du),Mi.prototype.ua=function(){Ue(this.g,"a")},Mi.prototype.ta=function(d){Ue(this.g,new ku(d))},Mi.prototype.sa=function(d){Ue(this.g,new ju)},Mi.prototype.ra=function(){Ue(this.g,"b")},oo.prototype.createWebChannel=oo.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,w1=function(){return new oo},b1=function(){return Ks()},x1=Fn,Gp={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Mt.NO_ERROR=0,Mt.TIMEOUT=8,Mt.HTTP_ERROR=6,Wd=Mt,er.COMPLETE="complete",_1=er,fu.EventType=Ni,Ni.OPEN="a",Ni.CLOSE="b",Ni.ERROR="c",Ni.MESSAGE="d",Oe.prototype.listen=Oe.prototype.K,bc=fu,Ze.prototype.listenOnce=Ze.prototype.L,Ze.prototype.getLastError=Ze.prototype.Ka,Ze.prototype.getLastErrorCode=Ze.prototype.Ba,Ze.prototype.getStatus=Ze.prototype.Z,Ze.prototype.getResponseJson=Ze.prototype.Oa,Ze.prototype.getResponseText=Ze.prototype.oa,Ze.prototype.send=Ze.prototype.ea,Ze.prototype.setWithCredentials=Ze.prototype.Ha,y1=Ze}).apply(typeof jd<"u"?jd:typeof self<"u"?self:typeof window<"u"?window:{});const Cx="@firebase/firestore",Dx="4.7.10";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}on.UNAUTHENTICATED=new on(null),on.GOOGLE_CREDENTIALS=new on("google-credentials-uid"),on.FIRST_PARTY=new on("first-party-uid"),on.MOCK_USER=new on("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let al="11.5.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Us=new Rg("@firebase/firestore");function Mo(){return Us.logLevel}function ge(n,...e){if(Us.logLevel<=ze.DEBUG){const t=e.map(Ug);Us.debug(`Firestore (${al}): ${n}`,...t)}}function Lr(n,...e){if(Us.logLevel<=ze.ERROR){const t=e.map(Ug);Us.error(`Firestore (${al}): ${n}`,...t)}}function Go(n,...e){if(Us.logLevel<=ze.WARN){const t=e.map(Ug);Us.warn(`Firestore (${al}): ${n}`,...t)}}function Ug(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(n="Unexpected state"){const e=`FIRESTORE (${al}) INTERNAL ASSERTION FAILED: `+n;throw Lr(e),new Error(e)}function et(n,e){n||Ie()}function ke(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class pe extends Si{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E1{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class BC{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(on.UNAUTHENTICATED))}shutdown(){}}class FC{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class qC{constructor(e){this.t=e,this.currentUser=on.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){et(this.o===void 0);let r=this.i;const s=p=>this.i!==r?(r=this.i,t(p)):Promise.resolve();let l=new Dr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Dr,e.enqueueRetryable(()=>s(this.currentUser))};const u=()=>{const p=l;e.enqueueRetryable(async()=>{await p.promise,await s(this.currentUser)})},f=p=>{ge("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),u())};this.t.onInit(p=>f(p)),setTimeout(()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?f(p):(ge("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Dr)}},0),u()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ge("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(et(typeof r.accessToken=="string"),new E1(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return et(e===null||typeof e=="string"),new on(e)}}class HC{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=on.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class GC{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new HC(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(on.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class kx{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $C{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,En(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){et(this.o===void 0);const r=l=>{l.error!=null&&ge("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const u=l.token!==this.R;return this.R=l.token,ge("FirebaseAppCheckTokenProvider",`Received ${u?"new":"existing"} token.`),u?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable(()=>r(l))};const s=l=>{ge("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(l=>s(l)),setTimeout(()=>{if(!this.appCheck){const l=this.A.getImmediate({optional:!0});l?s(l):ge("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new kx(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(et(typeof t.token=="string"),this.R=t.token,new kx(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KC(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T1(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S1{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=KC(40);for(let l=0;l<s.length;++l)r.length<20&&s[l]<t&&(r+=e.charAt(s[l]%62))}return r}}function Me(n,e){return n<e?-1:n>e?1:0}function $p(n,e){let t=0;for(;t<n.length&&t<e.length;){const r=n.codePointAt(t),s=e.codePointAt(t);if(r!==s){if(r<128&&s<128)return Me(r,s);{const l=T1(),u=YC(l.encode(jx(n,t)),l.encode(jx(e,t)));return u!==0?u:Me(r,s)}}t+=r>65535?2:1}return Me(n.length,e.length)}function jx(n,e){return n.codePointAt(e)>65535?n.substring(e,e+2):n.substring(e,e+1)}function YC(n,e){for(let t=0;t<n.length&&t<e.length;++t)if(n[t]!==e[t])return Me(n[t],e[t]);return Me(n.length,e.length)}function $o(n,e,t){return n.length===e.length&&n.every((r,s)=>t(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ox=-62135596800,Px=1e6;class Tt{static now(){return Tt.fromMillis(Date.now())}static fromDate(e){return Tt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor((e-1e3*t)*Px);return new Tt(t,r)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new pe(te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<Ox)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new pe(te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Px}_compareTo(e){return this.seconds===e.seconds?Me(this.nanoseconds,e.nanoseconds):Me(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-Ox;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{static fromTimestamp(e){return new Ce(e)}static min(){return new Ce(new Tt(0,0))}static max(){return new Ce(new Tt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx="__name__";class Gi{constructor(e,t,r){t===void 0?t=0:t>e.length&&Ie(),r===void 0?r=e.length-t:r>e.length-t&&Ie(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return Gi.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Gi?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let s=0;s<r;s++){const l=Gi.compareSegments(e.get(s),t.get(s));if(l!==0)return l}return Me(e.length,t.length)}static compareSegments(e,t){const r=Gi.isNumericId(e),s=Gi.isNumericId(t);return r&&!s?-1:!r&&s?1:r&&s?Gi.extractNumericId(e).compare(Gi.extractNumericId(t)):$p(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Oa.fromString(e.substring(4,e.length-2))}}class ut extends Gi{construct(e,t,r){return new ut(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new pe(te.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(s=>s.length>0))}return new ut(t)}static emptyPath(){return new ut([])}}const QC=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class en extends Gi{construct(e,t,r){return new en(e,t,r)}static isValidIdentifier(e){return QC.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),en.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Mx}static keyField(){return new en([Mx])}static fromServerFormat(e){const t=[];let r="",s=0;const l=()=>{if(r.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let u=!1;for(;s<e.length;){const f=e[s];if(f==="\\"){if(s+1===e.length)throw new pe(te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[s+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new pe(te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=p,s+=2}else f==="`"?(u=!u,s++):f!=="."||u?(r+=f,s++):(l(),s++)}if(l(),u)throw new pe(te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new en(t)}static emptyPath(){return new en([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e){this.path=e}static fromPath(e){return new Te(ut.fromString(e))}static fromName(e){return new Te(ut.fromString(e).popFirst(5))}static empty(){return new Te(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ut.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ut.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Te(new ut(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mc=-1;function WC(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,s=Ce.fromTimestamp(r===1e9?new Tt(t+1,0):new Tt(t,r));return new Va(s,Te.empty(),e)}function XC(n){return new Va(n.readTime,n.key,Mc)}class Va{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Va(Ce.min(),Te.empty(),Mc)}static max(){return new Va(Ce.max(),Te.empty(),Mc)}}function JC(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Te.comparator(n.documentKey,e.documentKey),t!==0?t:Me(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class e4{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sl(n){if(n.code!==te.FAILED_PRECONDITION||n.message!==ZC)throw n;ge("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ie(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ie((r,s)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(r,s)},this.catchCallback=l=>{this.wrapFailure(t,l).next(r,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ie?t:ie.resolve(t)}catch(t){return ie.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ie.reject(t)}static resolve(e){return new ie((t,r)=>{t(e)})}static reject(e){return new ie((t,r)=>{r(e)})}static waitFor(e){return new ie((t,r)=>{let s=0,l=0,u=!1;e.forEach(f=>{++s,f.next(()=>{++l,u&&l===s&&t()},p=>r(p))}),u=!0,l===s&&t()})}static or(e){let t=ie.resolve(!1);for(const r of e)t=t.next(s=>s?ie.resolve(s):r());return t}static forEach(e,t){const r=[];return e.forEach((s,l)=>{r.push(t.call(this,s,l))}),this.waitFor(r)}static mapArray(e,t){return new ie((r,s)=>{const l=e.length,u=new Array(l);let f=0;for(let p=0;p<l;p++){const v=p;t(e[v]).next(_=>{u[v]=_,++f,f===l&&r(u)},_=>s(_))}})}static doWhile(e,t){return new ie((r,s)=>{const l=()=>{e()===!0?t().next(()=>{l()},s):r()};l()})}}function t4(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ol(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vh{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.oe(r),this._e=r=>t.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Vh.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg=-1;function zh(n){return n==null}function fh(n){return n===0&&1/n==-1/0}function n4(n){return typeof n=="number"&&Number.isInteger(n)&&!fh(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A1="";function i4(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Lx(e)),e=r4(n.get(t),e);return Lx(e)}function r4(n,e){let t=e;const r=n.length;for(let s=0;s<r;s++){const l=n.charAt(s);switch(l){case"\0":t+="";break;case A1:t+="";break;default:t+=l}}return t}function Lx(n){return n+A1+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ya(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function R1(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yt{constructor(e,t){this.comparator=e,this.root=t||Zt.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Zt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Zt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return t+r.left.size;s<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Od(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Od(this.root,e,this.comparator,!1)}getReverseIterator(){return new Od(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Od(this.root,e,this.comparator,!0)}}class Od{constructor(e,t,r,s){this.isReverse=s,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,t&&s&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Zt{constructor(e,t,r,s,l){this.key=e,this.value=t,this.color=r??Zt.RED,this.left=s??Zt.EMPTY,this.right=l??Zt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,s,l){return new Zt(e??this.key,t??this.value,r??this.color,s??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let s=this;const l=r(e,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(e,t,r),null):l===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Zt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Zt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Zt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Zt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ie();const e=this.left.check();if(e!==this.right.check())throw Ie();return e+(this.isRed()?0:1)}}Zt.EMPTY=null,Zt.RED=!0,Zt.BLACK=!1;Zt.EMPTY=new class{constructor(){this.size=0}get key(){throw Ie()}get value(){throw Ie()}get color(){throw Ie()}get left(){throw Ie()}get right(){throw Ie()}copy(e,t,r,s,l){return this}insert(e,t,r){return new Zt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Vx(this.data.getIterator())}getIteratorFrom(e){return new Vx(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Bt)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(this.comparator(s,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Bt(this.comparator);return t.data=e,t}}class Vx{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On{constructor(e){this.fields=e,e.sort(en.comparator)}static empty(){return new On([])}unionWith(e){let t=new Bt(en.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new On(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $o(this.fields,e.fields,(t,r)=>t.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(s){try{return atob(s)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new N1("Invalid base64 string: "+l):l}}(e);return new tn(t)}static fromUint8Array(e){const t=function(s){let l="";for(let u=0;u<s.length;++u)l+=String.fromCharCode(s[u]);return l}(e);return new tn(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Me(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const a4=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function za(n){if(et(!!n),typeof n=="string"){let e=0;const t=a4.exec(n);if(et(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Nt(n.seconds),nanos:Nt(n.nanos)}}function Nt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ba(n){return typeof n=="string"?tn.fromBase64String(n):tn.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I1="server_timestamp",C1="__type__",D1="__previous_value__",k1="__local_write_time__";function zg(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[C1])===null||t===void 0?void 0:t.stringValue)===I1}function Bh(n){const e=n.mapValue.fields[D1];return zg(e)?Bh(e):e}function Lc(n){const e=za(n.mapValue.fields[k1].timestampValue);return new Tt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(e,t,r,s,l,u,f,p,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=s,this.ssl=l,this.forceLongPolling=u,this.autoDetectLongPolling=f,this.longPollingOptions=p,this.useFetchStreams=v}}const mh="(default)";class Uc{constructor(e,t){this.projectId=e,this.database=t||mh}static empty(){return new Uc("","")}get isDefaultDatabase(){return this.database===mh}isEqual(e){return e instanceof Uc&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j1="__type__",o4="__max__",Pd={mapValue:{}},O1="__vector__",ph="value";function Fa(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?zg(n)?4:c4(n)?9007199254740991:l4(n)?10:11:Ie()}function Wi(n,e){if(n===e)return!0;const t=Fa(n);if(t!==Fa(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lc(n).isEqual(Lc(e));case 3:return function(s,l){if(typeof s.timestampValue=="string"&&typeof l.timestampValue=="string"&&s.timestampValue.length===l.timestampValue.length)return s.timestampValue===l.timestampValue;const u=za(s.timestampValue),f=za(l.timestampValue);return u.seconds===f.seconds&&u.nanos===f.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(s,l){return Ba(s.bytesValue).isEqual(Ba(l.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(s,l){return Nt(s.geoPointValue.latitude)===Nt(l.geoPointValue.latitude)&&Nt(s.geoPointValue.longitude)===Nt(l.geoPointValue.longitude)}(n,e);case 2:return function(s,l){if("integerValue"in s&&"integerValue"in l)return Nt(s.integerValue)===Nt(l.integerValue);if("doubleValue"in s&&"doubleValue"in l){const u=Nt(s.doubleValue),f=Nt(l.doubleValue);return u===f?fh(u)===fh(f):isNaN(u)&&isNaN(f)}return!1}(n,e);case 9:return $o(n.arrayValue.values||[],e.arrayValue.values||[],Wi);case 10:case 11:return function(s,l){const u=s.mapValue.fields||{},f=l.mapValue.fields||{};if(Ux(u)!==Ux(f))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(f[p]===void 0||!Wi(u[p],f[p])))return!1;return!0}(n,e);default:return Ie()}}function Vc(n,e){return(n.values||[]).find(t=>Wi(t,e))!==void 0}function Ko(n,e){if(n===e)return 0;const t=Fa(n),r=Fa(e);if(t!==r)return Me(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Me(n.booleanValue,e.booleanValue);case 2:return function(l,u){const f=Nt(l.integerValue||l.doubleValue),p=Nt(u.integerValue||u.doubleValue);return f<p?-1:f>p?1:f===p?0:isNaN(f)?isNaN(p)?0:-1:1}(n,e);case 3:return zx(n.timestampValue,e.timestampValue);case 4:return zx(Lc(n),Lc(e));case 5:return $p(n.stringValue,e.stringValue);case 6:return function(l,u){const f=Ba(l),p=Ba(u);return f.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(l,u){const f=l.split("/"),p=u.split("/");for(let v=0;v<f.length&&v<p.length;v++){const _=Me(f[v],p[v]);if(_!==0)return _}return Me(f.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(l,u){const f=Me(Nt(l.latitude),Nt(u.latitude));return f!==0?f:Me(Nt(l.longitude),Nt(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return Bx(n.arrayValue,e.arrayValue);case 10:return function(l,u){var f,p,v,_;const E=l.fields||{},w=u.fields||{},T=(f=E[ph])===null||f===void 0?void 0:f.arrayValue,I=(p=w[ph])===null||p===void 0?void 0:p.arrayValue,L=Me(((v=T==null?void 0:T.values)===null||v===void 0?void 0:v.length)||0,((_=I==null?void 0:I.values)===null||_===void 0?void 0:_.length)||0);return L!==0?L:Bx(T,I)}(n.mapValue,e.mapValue);case 11:return function(l,u){if(l===Pd.mapValue&&u===Pd.mapValue)return 0;if(l===Pd.mapValue)return 1;if(u===Pd.mapValue)return-1;const f=l.fields||{},p=Object.keys(f),v=u.fields||{},_=Object.keys(v);p.sort(),_.sort();for(let E=0;E<p.length&&E<_.length;++E){const w=$p(p[E],_[E]);if(w!==0)return w;const T=Ko(f[p[E]],v[_[E]]);if(T!==0)return T}return Me(p.length,_.length)}(n.mapValue,e.mapValue);default:throw Ie()}}function zx(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Me(n,e);const t=za(n),r=za(e),s=Me(t.seconds,r.seconds);return s!==0?s:Me(t.nanos,r.nanos)}function Bx(n,e){const t=n.values||[],r=e.values||[];for(let s=0;s<t.length&&s<r.length;++s){const l=Ko(t[s],r[s]);if(l)return l}return Me(t.length,r.length)}function Yo(n){return Kp(n)}function Kp(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const r=za(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ba(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Te.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",s=!0;for(const l of t.values||[])s?s=!1:r+=",",r+=Kp(l);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){const r=Object.keys(t.fields||{}).sort();let s="{",l=!0;for(const u of r)l?l=!1:s+=",",s+=`${u}:${Kp(t.fields[u])}`;return s+"}"}(n.mapValue):Ie()}function Xd(n){switch(Fa(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Bh(n);return e?16+Xd(e):16;case 5:return 2*n.stringValue.length;case 6:return Ba(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,l)=>s+Xd(l),0)}(n.arrayValue);case 10:case 11:return function(r){let s=0;return Ya(r.fields,(l,u)=>{s+=l.length+Xd(u)}),s}(n.mapValue);default:throw Ie()}}function Fx(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Yp(n){return!!n&&"integerValue"in n}function Bg(n){return!!n&&"arrayValue"in n}function qx(n){return!!n&&"nullValue"in n}function Hx(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Jd(n){return!!n&&"mapValue"in n}function l4(n){var e,t;return((t=(((e=n==null?void 0:n.mapValue)===null||e===void 0?void 0:e.fields)||{})[j1])===null||t===void 0?void 0:t.stringValue)===O1}function Rc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ya(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Rc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Rc(n.arrayValue.values[t]);return e}return Object.assign({},n)}function c4(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===o4}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.value=e}static empty(){return new Tn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Jd(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Rc(t)}setAll(e){let t=en.emptyPath(),r={},s=[];e.forEach((u,f)=>{if(!t.isImmediateParentOf(f)){const p=this.getFieldsMap(t);this.applyChanges(p,r,s),r={},s=[],t=f.popLast()}u?r[f.lastSegment()]=Rc(u):s.push(f.lastSegment())});const l=this.getFieldsMap(t);this.applyChanges(l,r,s)}delete(e){const t=this.field(e.popLast());Jd(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Wi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=t.mapValue.fields[e.get(r)];Jd(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,r){Ya(t,(s,l)=>e[s]=l);for(const s of r)delete e[s]}clone(){return new Tn(Rc(this.value))}}function P1(n){const e=[];return Ya(n.fields,(t,r)=>{const s=new en([t]);if(Jd(r)){const l=P1(r.mapValue).fields;if(l.length===0)e.push(s);else for(const u of l)e.push(s.child(u))}else e.push(s)}),new On(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,t,r,s,l,u,f){this.key=e,this.documentType=t,this.version=r,this.readTime=s,this.createTime=l,this.data=u,this.documentState=f}static newInvalidDocument(e){return new ln(e,0,Ce.min(),Ce.min(),Ce.min(),Tn.empty(),0)}static newFoundDocument(e,t,r,s){return new ln(e,1,t,Ce.min(),r,s,0)}static newNoDocument(e,t){return new ln(e,2,t,Ce.min(),Ce.min(),Tn.empty(),0)}static newUnknownDocument(e,t){return new ln(e,3,t,Ce.min(),Ce.min(),Tn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ce.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Tn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Tn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ce.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ln&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ln(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gh{constructor(e,t){this.position=e,this.inclusive=t}}function Gx(n,e,t){let r=0;for(let s=0;s<n.position.length;s++){const l=e[s],u=n.position[s];if(l.field.isKeyField()?r=Te.comparator(Te.fromName(u.referenceValue),t.key):r=Ko(u,t.data.field(l.field)),l.dir==="desc"&&(r*=-1),r!==0)break}return r}function $x(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Wi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,t="asc"){this.field=e,this.dir=t}}function u4(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M1{}class Ot extends M1{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new h4(e,t,r):t==="array-contains"?new p4(e,r):t==="in"?new g4(e,r):t==="not-in"?new v4(e,r):t==="array-contains-any"?new y4(e,r):new Ot(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new f4(e,r):new m4(e,r)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Ko(t,this.value)):t!==null&&Fa(this.value)===Fa(t)&&this.matchesComparison(Ko(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ie()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class wi extends M1{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new wi(e,t)}matches(e){return L1(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function L1(n){return n.op==="and"}function U1(n){return d4(n)&&L1(n)}function d4(n){for(const e of n.filters)if(e instanceof wi)return!1;return!0}function Qp(n){if(n instanceof Ot)return n.field.canonicalString()+n.op.toString()+Yo(n.value);if(U1(n))return n.filters.map(e=>Qp(e)).join(",");{const e=n.filters.map(t=>Qp(t)).join(",");return`${n.op}(${e})`}}function V1(n,e){return n instanceof Ot?function(r,s){return s instanceof Ot&&r.op===s.op&&r.field.isEqual(s.field)&&Wi(r.value,s.value)}(n,e):n instanceof wi?function(r,s){return s instanceof wi&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((l,u,f)=>l&&V1(u,s.filters[f]),!0):!1}(n,e):void Ie()}function z1(n){return n instanceof Ot?function(t){return`${t.field.canonicalString()} ${t.op} ${Yo(t.value)}`}(n):n instanceof wi?function(t){return t.op.toString()+" {"+t.getFilters().map(z1).join(" ,")+"}"}(n):"Filter"}class h4 extends Ot{constructor(e,t,r){super(e,t,r),this.key=Te.fromName(r.referenceValue)}matches(e){const t=Te.comparator(e.key,this.key);return this.matchesComparison(t)}}class f4 extends Ot{constructor(e,t){super(e,"in",t),this.keys=B1("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class m4 extends Ot{constructor(e,t){super(e,"not-in",t),this.keys=B1("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function B1(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>Te.fromName(r.referenceValue))}class p4 extends Ot{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Bg(t)&&Vc(t.arrayValue,this.value)}}class g4 extends Ot{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Vc(this.value.arrayValue,t)}}class v4 extends Ot{constructor(e,t){super(e,"not-in",t)}matches(e){if(Vc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Vc(this.value.arrayValue,t)}}class y4 extends Ot{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Bg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>Vc(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(e,t=null,r=[],s=[],l=null,u=null,f=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=s,this.limit=l,this.startAt=u,this.endAt=f,this.le=null}}function Kx(n,e=null,t=[],r=[],s=null,l=null,u=null){return new _4(n,e,t,r,s,l,u)}function Fg(n){const e=ke(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Qp(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(l){return l.field.canonicalString()+l.dir}(r)).join(","),zh(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Yo(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Yo(r)).join(",")),e.le=t}return e.le}function qg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!u4(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!V1(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!$x(n.startAt,e.startAt)&&$x(n.endAt,e.endAt)}function Wp(n){return Te.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t=null,r=[],s=[],l=null,u="F",f=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=s,this.limit=l,this.limitType=u,this.startAt=f,this.endAt=p,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function x4(n,e,t,r,s,l,u,f){return new ll(n,e,t,r,s,l,u,f)}function Fh(n){return new ll(n)}function Yx(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function F1(n){return n.collectionGroup!==null}function Nc(n){const e=ke(n);if(e.he===null){e.he=[];const t=new Set;for(const l of e.explicitOrderBy)e.he.push(l),t.add(l.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(u){let f=new Bt(en.comparator);return u.filters.forEach(p=>{p.getFlattenedFilters().forEach(v=>{v.isInequality()&&(f=f.add(v.field))})}),f})(e).forEach(l=>{t.has(l.canonicalString())||l.isKeyField()||e.he.push(new zc(l,r))}),t.has(en.keyField().canonicalString())||e.he.push(new zc(en.keyField(),r))}return e.he}function Yi(n){const e=ke(n);return e.Pe||(e.Pe=b4(e,Nc(n))),e.Pe}function b4(n,e){if(n.limitType==="F")return Kx(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(s=>{const l=s.dir==="desc"?"asc":"desc";return new zc(s.field,l)});const t=n.endAt?new gh(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new gh(n.startAt.position,n.startAt.inclusive):null;return Kx(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function Xp(n,e){const t=n.filters.concat([e]);return new ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function vh(n,e,t){return new ll(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qh(n,e){return qg(Yi(n),Yi(e))&&n.limitType===e.limitType}function q1(n){return`${Fg(Yi(n))}|lt:${n.limitType}`}function Lo(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(s=>z1(s)).join(", ")}]`),zh(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(s=>function(u){return`${u.field.canonicalString()} (${u.dir})`}(s)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(s=>Yo(s)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(s=>Yo(s)).join(",")),`Target(${r})`}(Yi(n))}; limitType=${n.limitType})`}function Hh(n,e){return e.isFoundDocument()&&function(r,s){const l=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(l):Te.isDocumentKey(r.path)?r.path.isEqual(l):r.path.isImmediateParentOf(l)}(n,e)&&function(r,s){for(const l of Nc(r))if(!l.field.isKeyField()&&s.data.field(l.field)===null)return!1;return!0}(n,e)&&function(r,s){for(const l of r.filters)if(!l.matches(s))return!1;return!0}(n,e)&&function(r,s){return!(r.startAt&&!function(u,f,p){const v=Gx(u,f,p);return u.inclusive?v<=0:v<0}(r.startAt,Nc(r),s)||r.endAt&&!function(u,f,p){const v=Gx(u,f,p);return u.inclusive?v>=0:v>0}(r.endAt,Nc(r),s))}(n,e)}function w4(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function H1(n){return(e,t)=>{let r=!1;for(const s of Nc(n)){const l=E4(s,e,t);if(l!==0)return l;r=r||s.field.isKeyField()}return 0}}function E4(n,e,t){const r=n.field.isKeyField()?Te.comparator(e.key,t.key):function(l,u,f){const p=u.data.field(l),v=f.data.field(l);return p!==null&&v!==null?Ko(p,v):Ie()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Ie()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(const[s,l]of r)if(this.equalsFn(s,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let l=0;l<s.length;l++)if(this.equalsFn(s[l][0],e))return void(s[l]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[t]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ya(this.inner,(t,r)=>{for(const[s,l]of r)e(s,l)})}isEmpty(){return R1(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T4=new yt(Te.comparator);function Ur(){return T4}const G1=new yt(Te.comparator);function wc(...n){let e=G1;for(const t of n)e=e.insert(t.key,t);return e}function $1(n){let e=G1;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function js(){return Ic()}function K1(){return Ic()}function Ic(){return new qs(n=>n.toString(),(n,e)=>n.isEqual(e))}const S4=new yt(Te.comparator),A4=new Bt(Te.comparator);function Be(...n){let e=A4;for(const t of n)e=e.add(t);return e}const R4=new Bt(Me);function N4(){return R4}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:fh(e)?"-0":e}}function Y1(n){return{integerValue:""+n}}function Q1(n,e){return n4(e)?Y1(e):Hg(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gh{constructor(){this._=void 0}}function I4(n,e,t){return n instanceof Bc?function(s,l){const u={fields:{[C1]:{stringValue:I1},[k1]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return l&&zg(l)&&(l=Bh(l)),l&&(u.fields[D1]=l),{mapValue:u}}(t,e):n instanceof Fc?X1(n,e):n instanceof qc?J1(n,e):function(s,l){const u=W1(s,l),f=Qx(u)+Qx(s.Ie);return Yp(u)&&Yp(s.Ie)?Y1(f):Hg(s.serializer,f)}(n,e)}function C4(n,e,t){return n instanceof Fc?X1(n,e):n instanceof qc?J1(n,e):t}function W1(n,e){return n instanceof Hc?function(r){return Yp(r)||function(l){return!!l&&"doubleValue"in l}(r)}(e)?e:{integerValue:0}:null}class Bc extends Gh{}class Fc extends Gh{constructor(e){super(),this.elements=e}}function X1(n,e){const t=Z1(e);for(const r of n.elements)t.some(s=>Wi(s,r))||t.push(r);return{arrayValue:{values:t}}}class qc extends Gh{constructor(e){super(),this.elements=e}}function J1(n,e){let t=Z1(e);for(const r of n.elements)t=t.filter(s=>!Wi(s,r));return{arrayValue:{values:t}}}class Hc extends Gh{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function Qx(n){return Nt(n.integerValue||n.doubleValue)}function Z1(n){return Bg(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eE{constructor(e,t){this.field=e,this.transform=t}}function D4(n,e){return n.field.isEqual(e.field)&&function(r,s){return r instanceof Fc&&s instanceof Fc||r instanceof qc&&s instanceof qc?$o(r.elements,s.elements,Wi):r instanceof Hc&&s instanceof Hc?Wi(r.Ie,s.Ie):r instanceof Bc&&s instanceof Bc}(n.transform,e.transform)}class k4{constructor(e,t){this.version=e,this.transformResults=t}}class si{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new si}static exists(e){return new si(void 0,e)}static updateTime(e){return new si(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Zd(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class $h{}function tE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Gg(n.key,si.none()):new su(n.key,n.data,si.none());{const t=n.data,r=Tn.empty();let s=new Bt(en.comparator);for(let l of e.fields)if(!s.has(l)){let u=t.field(l);u===null&&l.length>1&&(l=l.popLast(),u=t.field(l)),u===null?r.delete(l):r.set(l,u),s=s.add(l)}return new Qa(n.key,r,new On(s.toArray()),si.none())}}function j4(n,e,t){n instanceof su?function(s,l,u){const f=s.value.clone(),p=Xx(s.fieldTransforms,l,u.transformResults);f.setAll(p),l.convertToFoundDocument(u.version,f).setHasCommittedMutations()}(n,e,t):n instanceof Qa?function(s,l,u){if(!Zd(s.precondition,l))return void l.convertToUnknownDocument(u.version);const f=Xx(s.fieldTransforms,l,u.transformResults),p=l.data;p.setAll(nE(s)),p.setAll(f),l.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):function(s,l,u){l.convertToNoDocument(u.version).setHasCommittedMutations()}(0,e,t)}function Cc(n,e,t,r){return n instanceof su?function(l,u,f,p){if(!Zd(l.precondition,u))return f;const v=l.value.clone(),_=Jx(l.fieldTransforms,p,u);return v.setAll(_),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Qa?function(l,u,f,p){if(!Zd(l.precondition,u))return f;const v=Jx(l.fieldTransforms,p,u),_=u.data;return _.setAll(nE(l)),_.setAll(v),u.convertToFoundDocument(u.version,_).setHasLocalMutations(),f===null?null:f.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map(E=>E.field))}(n,e,t,r):function(l,u,f){return Zd(l.precondition,u)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):f}(n,e,t)}function O4(n,e){let t=null;for(const r of n.fieldTransforms){const s=e.data.field(r.field),l=W1(r.transform,s||null);l!=null&&(t===null&&(t=Tn.empty()),t.set(r.field,l))}return t||null}function Wx(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&$o(r,s,(l,u)=>D4(l,u))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class su extends $h{constructor(e,t,r,s=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Qa extends $h{constructor(e,t,r,s,l=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=s,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function nE(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Xx(n,e,t){const r=new Map;et(n.length===t.length);for(let s=0;s<t.length;s++){const l=n[s],u=l.transform,f=e.data.field(l.field);r.set(l.field,C4(u,f,t[s]))}return r}function Jx(n,e,t){const r=new Map;for(const s of n){const l=s.transform,u=t.data.field(s.field);r.set(s.field,I4(l,u,e))}return r}class Gg extends $h{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class P4 extends $h{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M4{constructor(e,t,r,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const l=this.mutations[s];l.key.isEqual(e.key)&&j4(l,e,r[s])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Cc(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Cc(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=K1();return this.mutations.forEach(s=>{const l=e.get(s.key),u=l.overlayedDocument;let f=this.applyToLocalView(u,l.mutatedFields);f=t.has(s.key)?null:f;const p=tE(u,f);p!==null&&r.set(s.key,p),u.isValidDocument()||u.convertToNoDocument(Ce.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Be())}isEqual(e){return this.batchId===e.batchId&&$o(this.mutations,e.mutations,(t,r)=>Wx(t,r))&&$o(this.baseMutations,e.baseMutations,(t,r)=>Wx(t,r))}}class $g{constructor(e,t,r,s){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=s}static from(e,t,r){et(e.mutations.length===r.length);let s=function(){return S4}();const l=e.mutations;for(let u=0;u<l.length;u++)s=s.insert(l[u].key,r[u].version);return new $g(e,t,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L4{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U4{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Ke;function V4(n){switch(n){case te.OK:return Ie();case te.CANCELLED:case te.UNKNOWN:case te.DEADLINE_EXCEEDED:case te.RESOURCE_EXHAUSTED:case te.INTERNAL:case te.UNAVAILABLE:case te.UNAUTHENTICATED:return!1;case te.INVALID_ARGUMENT:case te.NOT_FOUND:case te.ALREADY_EXISTS:case te.PERMISSION_DENIED:case te.FAILED_PRECONDITION:case te.ABORTED:case te.OUT_OF_RANGE:case te.UNIMPLEMENTED:case te.DATA_LOSS:return!0;default:return Ie()}}function iE(n){if(n===void 0)return Lr("GRPC error has no .code"),te.UNKNOWN;switch(n){case jt.OK:return te.OK;case jt.CANCELLED:return te.CANCELLED;case jt.UNKNOWN:return te.UNKNOWN;case jt.DEADLINE_EXCEEDED:return te.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return te.RESOURCE_EXHAUSTED;case jt.INTERNAL:return te.INTERNAL;case jt.UNAVAILABLE:return te.UNAVAILABLE;case jt.UNAUTHENTICATED:return te.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return te.INVALID_ARGUMENT;case jt.NOT_FOUND:return te.NOT_FOUND;case jt.ALREADY_EXISTS:return te.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return te.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return te.FAILED_PRECONDITION;case jt.ABORTED:return te.ABORTED;case jt.OUT_OF_RANGE:return te.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return te.UNIMPLEMENTED;case jt.DATA_LOSS:return te.DATA_LOSS;default:return Ie()}}(Ke=jt||(jt={}))[Ke.OK=0]="OK",Ke[Ke.CANCELLED=1]="CANCELLED",Ke[Ke.UNKNOWN=2]="UNKNOWN",Ke[Ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ke[Ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ke[Ke.NOT_FOUND=5]="NOT_FOUND",Ke[Ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ke[Ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ke[Ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ke[Ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ke[Ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ke[Ke.ABORTED=10]="ABORTED",Ke[Ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ke[Ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ke[Ke.INTERNAL=13]="INTERNAL",Ke[Ke.UNAVAILABLE=14]="UNAVAILABLE",Ke[Ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z4=new Oa([4294967295,4294967295],0);function Zx(n){const e=T1().encode(n),t=new v1;return t.update(e),new Uint8Array(t.digest())}function eb(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Oa([t,r],0),new Oa([s,l],0)]}class Kg{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Ec(`Invalid padding: ${t}`);if(r<0)throw new Ec(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Ec(`Invalid hash count: ${r}`);if(e.length===0&&t!==0)throw new Ec(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Oa.fromNumber(this.Ee)}Ae(e,t,r){let s=e.add(t.multiply(Oa.fromNumber(r)));return s.compare(z4)===1&&(s=new Oa([s.getBits(0),s.getBits(1)],0)),s.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=Zx(e),[r,s]=eb(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(r,s,l);if(!this.Re(u))return!1}return!0}static create(e,t,r){const s=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),u=new Kg(l,s,t);return r.forEach(f=>u.insert(f)),u}insert(e){if(this.Ee===0)return;const t=Zx(e),[r,s]=eb(t);for(let l=0;l<this.hashCount;l++){const u=this.Ae(r,s,l);this.Ve(u)}}Ve(e){const t=Math.floor(e/8),r=e%8;this.bitmap[t]|=1<<r}}class Ec extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{constructor(e,t,r,s,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const s=new Map;return s.set(e,ou.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Kh(Ce.min(),s,new yt(Me),Ur(),Be())}}class ou{constructor(e,t,r,s,l){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new ou(r,t,Be(),Be(),Be())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(e,t,r,s){this.me=e,this.removedTargetIds=t,this.key=r,this.fe=s}}class rE{constructor(e,t){this.targetId=e,this.ge=t}}class aE{constructor(e,t,r=tn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=s}}class tb{constructor(){this.pe=0,this.ye=nb(),this.we=tn.EMPTY_BYTE_STRING,this.Se=!1,this.be=!0}get current(){return this.Se}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.be}Ce(e){e.approximateByteSize()>0&&(this.be=!0,this.we=e)}Fe(){let e=Be(),t=Be(),r=Be();return this.ye.forEach((s,l)=>{switch(l){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:r=r.add(s);break;default:Ie()}}),new ou(this.we,this.Se,e,t,r)}Me(){this.be=!1,this.ye=nb()}xe(e,t){this.be=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.be=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,et(this.pe>=0)}Le(){this.be=!0,this.Se=!0}}class B4{constructor(e){this.ke=e,this.qe=new Map,this.Qe=Ur(),this.$e=Md(),this.Ue=Md(),this.Ke=new yt(Me)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const r=this.He(t);switch(e.state){case 0:this.Je(t)&&r.Ce(e.resumeToken);break;case 1:r.Be(),r.De||r.Me(),r.Ce(e.resumeToken);break;case 2:r.Be(),r.De||this.removeTarget(t);break;case 3:this.Je(t)&&(r.Le(),r.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),r.Ce(e.resumeToken));break;default:Ie()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((r,s)=>{this.Je(s)&&t(s)})}Ze(e){const t=e.targetId,r=e.ge.count,s=this.Xe(t);if(s){const l=s.target;if(Wp(l))if(r===0){const u=new Te(l.path);this.ze(t,u,ln.newNoDocument(u,Ce.min()))}else et(r===1);else{const u=this.et(t);if(u!==r){const f=this.tt(e),p=f?this.nt(f,e,u):1;if(p!==0){this.Ye(t);const v=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,v)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:l=0}=t;let u,f;try{u=Ba(r).toUint8Array()}catch(p){if(p instanceof N1)return Go("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{f=new Kg(u,s,l)}catch(p){return Go(p instanceof Ec?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return f.Ee===0?null:f}nt(e,t,r){return t.ge.count===r-this.st(e,t.targetId)?0:2}st(e,t){const r=this.ke.getRemoteKeysForTarget(t);let s=0;return r.forEach(l=>{const u=this.ke.it(),f=`projects/${u.projectId}/databases/${u.database}/documents/${l.path.canonicalString()}`;e.mightContain(f)||(this.ze(t,l,null),s++)}),s}ot(e){const t=new Map;this.qe.forEach((l,u)=>{const f=this.Xe(u);if(f){if(l.current&&Wp(f.target)){const p=new Te(f.target.path);this._t(p).has(u)||this.ut(u,p)||this.ze(u,p,ln.newNoDocument(p,e))}l.ve&&(t.set(u,l.Fe()),l.Me())}});let r=Be();this.Ue.forEach((l,u)=>{let f=!0;u.forEachWhile(p=>{const v=this.Xe(p);return!v||v.purpose==="TargetPurposeLimboResolution"||(f=!1,!1)}),f&&(r=r.add(l))}),this.Qe.forEach((l,u)=>u.setReadTime(e));const s=new Kh(e,t,this.Ke,this.Qe,r);return this.Qe=Ur(),this.$e=Md(),this.Ue=Md(),this.Ke=new yt(Me),s}Ge(e,t){if(!this.Je(e))return;const r=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,r),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ue=this.Ue.insert(t.key,this.ct(t.key).add(e))}ze(e,t,r){if(!this.Je(e))return;const s=this.He(e);this.ut(e,t)?s.xe(t,1):s.Oe(t),this.Ue=this.Ue.insert(t,this.ct(t).delete(e)),this.Ue=this.Ue.insert(t,this.ct(t).add(e)),r&&(this.Qe=this.Qe.insert(t,r))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new tb,this.qe.set(e,t)),t}ct(e){let t=this.Ue.get(e);return t||(t=new Bt(Me),this.Ue=this.Ue.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Bt(Me),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||ge("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new tb),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function Md(){return new yt(Te.comparator)}function nb(){return new yt(Te.comparator)}const F4={asc:"ASCENDING",desc:"DESCENDING"},q4={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H4={and:"AND",or:"OR"};class G4{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jp(n,e){return n.useProto3Json||zh(e)?e:{value:e}}function yh(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function sE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function $4(n,e){return yh(n,e.toTimestamp())}function Qi(n){return et(!!n),Ce.fromTimestamp(function(t){const r=za(t);return new Tt(r.seconds,r.nanos)}(n))}function Yg(n,e){return Zp(n,e).canonicalString()}function Zp(n,e){const t=function(s){return new ut(["projects",s.projectId,"databases",s.database])}(n).child("documents");return e===void 0?t:t.child(e)}function oE(n){const e=ut.fromString(n);return et(hE(e)),e}function eg(n,e){return Yg(n.databaseId,e.path)}function bp(n,e){const t=oE(e);if(t.get(1)!==n.databaseId.projectId)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new pe(te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Te(cE(t))}function lE(n,e){return Yg(n.databaseId,e)}function K4(n){const e=oE(n);return e.length===4?ut.emptyPath():cE(e)}function tg(n){return new ut(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cE(n){return et(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function ib(n,e,t){return{name:eg(n,e),fields:t.value.mapValue.fields}}function Y4(n,e){let t;if("targetChange"in e){e.targetChange;const r=function(v){return v==="NO_CHANGE"?0:v==="ADD"?1:v==="REMOVE"?2:v==="CURRENT"?3:v==="RESET"?4:Ie()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],l=function(v,_){return v.useProto3Json?(et(_===void 0||typeof _=="string"),tn.fromBase64String(_||"")):(et(_===void 0||_ instanceof Buffer||_ instanceof Uint8Array),tn.fromUint8Array(_||new Uint8Array))}(n,e.targetChange.resumeToken),u=e.targetChange.cause,f=u&&function(v){const _=v.code===void 0?te.UNKNOWN:iE(v.code);return new pe(_,v.message||"")}(u);t=new aE(r,s,l,f||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=bp(n,r.document.name),l=Qi(r.document.updateTime),u=r.document.createTime?Qi(r.document.createTime):Ce.min(),f=new Tn({mapValue:{fields:r.document.fields}}),p=ln.newFoundDocument(s,l,u,f),v=r.targetIds||[],_=r.removedTargetIds||[];t=new eh(v,_,p.key,p)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=bp(n,r.document),l=r.readTime?Qi(r.readTime):Ce.min(),u=ln.newNoDocument(s,l),f=r.removedTargetIds||[];t=new eh([],f,u.key,u)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=bp(n,r.document),l=r.removedTargetIds||[];t=new eh([],l,s,null)}else{if(!("filter"in e))return Ie();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:l}=r,u=new U4(s,l),f=r.targetId;t=new rE(f,u)}}return t}function Q4(n,e){let t;if(e instanceof su)t={update:ib(n,e.key,e.value)};else if(e instanceof Gg)t={delete:eg(n,e.key)};else if(e instanceof Qa)t={update:ib(n,e.key,e.data),updateMask:rD(e.fieldMask)};else{if(!(e instanceof P4))return Ie();t={verify:eg(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(l,u){const f=u.transform;if(f instanceof Bc)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(f instanceof Fc)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:f.elements}};if(f instanceof qc)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:f.elements}};if(f instanceof Hc)return{fieldPath:u.field.canonicalString(),increment:f.Ie};throw Ie()}(0,r))),e.precondition.isNone||(t.currentDocument=function(s,l){return l.updateTime!==void 0?{updateTime:$4(s,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ie()}(n,e.precondition)),t}function W4(n,e){return n&&n.length>0?(et(e!==void 0),n.map(t=>function(s,l){let u=s.updateTime?Qi(s.updateTime):Qi(l);return u.isEqual(Ce.min())&&(u=Qi(l)),new k4(u,s.transformResults||[])}(t,e))):[]}function X4(n,e){return{documents:[lE(n,e.path)]}}function J4(n,e){const t={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),t.structuredQuery.from=[{collectionId:r.lastSegment()}]),t.parent=lE(n,s);const l=function(v){if(v.length!==0)return dE(wi.create(v,"and"))}(e.filters);l&&(t.structuredQuery.where=l);const u=function(v){if(v.length!==0)return v.map(_=>function(w){return{field:Uo(w.field),direction:tD(w.dir)}}(_))}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const f=Jp(n,e.limit);return f!==null&&(t.structuredQuery.limit=f),e.startAt&&(t.structuredQuery.startAt=function(v){return{before:v.inclusive,values:v.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(v){return{before:!v.inclusive,values:v.position}}(e.endAt)),{ht:t,parent:s}}function Z4(n){let e=K4(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let s=null;if(r>0){et(r===1);const _=t.from[0];_.allDescendants?s=_.collectionId:e=e.child(_.collectionId)}let l=[];t.where&&(l=function(E){const w=uE(E);return w instanceof wi&&U1(w)?w.getFilters():[w]}(t.where));let u=[];t.orderBy&&(u=function(E){return E.map(w=>function(I){return new zc(Vo(I.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(w))}(t.orderBy));let f=null;t.limit&&(f=function(E){let w;return w=typeof E=="object"?E.value:E,zh(w)?null:w}(t.limit));let p=null;t.startAt&&(p=function(E){const w=!!E.before,T=E.values||[];return new gh(T,w)}(t.startAt));let v=null;return t.endAt&&(v=function(E){const w=!E.before,T=E.values||[];return new gh(T,w)}(t.endAt)),x4(e,s,u,l,f,"F",p,v)}function eD(n,e){const t=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ie()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function uE(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const r=Vo(t.unaryFilter.field);return Ot.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Vo(t.unaryFilter.field);return Ot.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Vo(t.unaryFilter.field);return Ot.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Vo(t.unaryFilter.field);return Ot.create(u,"!=",{nullValue:"NULL_VALUE"});default:return Ie()}}(n):n.fieldFilter!==void 0?function(t){return Ot.create(Vo(t.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ie()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return wi.create(t.compositeFilter.filters.map(r=>uE(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Ie()}}(t.compositeFilter.op))}(n):Ie()}function tD(n){return F4[n]}function nD(n){return q4[n]}function iD(n){return H4[n]}function Uo(n){return{fieldPath:n.canonicalString()}}function Vo(n){return en.fromServerFormat(n.fieldPath)}function dE(n){return n instanceof Ot?function(t){if(t.op==="=="){if(Hx(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NAN"}};if(qx(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Hx(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NAN"}};if(qx(t.value))return{unaryFilter:{field:Uo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uo(t.field),op:nD(t.op),value:t.value}}}(n):n instanceof wi?function(t){const r=t.getFilters().map(s=>dE(s));return r.length===1?r[0]:{compositeFilter:{op:iD(t.op),filters:r}}}(n):Ie()}function rD(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function hE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da{constructor(e,t,r,s,l=Ce.min(),u=Ce.min(),f=tn.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=u,this.resumeToken=f,this.expectedCount=p}withSequenceNumber(e){return new Da(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Da(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Da(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aD{constructor(e){this.Tt=e}}function sD(n){const e=Z4({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(){this.Tn=new lD}addToCollectionParentIndex(e,t){return this.Tn.add(t),ie.resolve()}getCollectionParents(e,t){return ie.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return ie.resolve()}deleteFieldIndex(e,t){return ie.resolve()}deleteAllFieldIndexes(e){return ie.resolve()}createTargetIndexes(e,t){return ie.resolve()}getDocumentsMatchingTarget(e,t){return ie.resolve(null)}getIndexType(e,t){return ie.resolve(0)}getFieldIndexes(e,t){return ie.resolve([])}getNextCollectionGroupToUpdate(e){return ie.resolve(null)}getMinOffset(e,t){return ie.resolve(Va.min())}getMinOffsetFromCollectionGroup(e,t){return ie.resolve(Va.min())}updateCollectionGroup(e,t,r){return ie.resolve()}updateIndexEntries(e,t){return ie.resolve()}}class lD{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t]||new Bt(ut.comparator),l=!s.has(r);return this.index[t]=s.add(r),l}has(e){const t=e.lastSegment(),r=e.popLast(),s=this.index[t];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Bt(ut.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rb={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},fE=41943040;class bn{static withCacheSize(e){return new bn(e,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bn.DEFAULT_COLLECTION_PERCENTILE=10,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bn.DEFAULT=new bn(fE,bn.DEFAULT_COLLECTION_PERCENTILE,bn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bn.DISABLED=new bn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Un(){return new Qo(0)}static Kn(){return new Qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab="LruGarbageCollector",cD=1048576;function sb([n,e],[t,r]){const s=Me(n,t);return s===0?Me(e,r):s}class uD{constructor(e){this.Hn=e,this.buffer=new Bt(sb),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();sb(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class dD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){ge(ab,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ol(t)?ge(ab,"Ignoring IndexedDB error during garbage collection: ",t):await sl(t)}await this.er(3e5)})}}class hD{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(t===0)return ie.resolve(Vh.ae);const r=new uD(t);return this.tr.forEachTarget(e,s=>r.Zn(s.sequenceNumber)).next(()=>this.tr.rr(e,s=>r.Zn(s))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.tr.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ge("LruGarbageCollector","Garbage collection skipped; disabled"),ie.resolve(rb)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ge("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),rb):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let r,s,l,u,f,p,v;const _=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(E=>(E>this.params.maximumSequenceNumbersToCollect?(ge("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),s=this.params.maximumSequenceNumbersToCollect):s=E,u=Date.now(),this.nthSequenceNumber(e,s))).next(E=>(r=E,f=Date.now(),this.removeTargets(e,r,t))).next(E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,r))).next(E=>(v=Date.now(),Mo()<=ze.DEBUG&&ge("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${u-_}ms
	Determined least recently used ${s} in `+(f-u)+`ms
	Removed ${l} targets in `+(p-f)+`ms
	Removed ${E} documents in `+(v-p)+`ms
Total Duration: ${v-_}ms`),ie.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:l,documentsRemoved:E})))}}function fD(n,e){return new hD(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(){this.changes=new qs(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,ln.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return r!==void 0?ie.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gD{constructor(e,t,r,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,t))).next(s=>(r!==null&&Cc(r.mutation,s,On.empty(),Tt.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Be()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Be()){const s=js();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,r).next(l=>{let u=wc();return l.forEach((f,p)=>{u=u.insert(f,p.overlayedDocument)}),u}))}getOverlayedDocuments(e,t){const r=js();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Be()))}populateOverlays(e,t,r){const s=[];return r.forEach(l=>{t.has(l)||s.push(l)}),this.documentOverlayCache.getOverlays(e,s).next(l=>{l.forEach((u,f)=>{t.set(u,f)})})}computeViews(e,t,r,s){let l=Ur();const u=Ic(),f=function(){return Ic()}();return t.forEach((p,v)=>{const _=r.get(v.key);s.has(v.key)&&(_===void 0||_.mutation instanceof Qa)?l=l.insert(v.key,v):_!==void 0?(u.set(v.key,_.mutation.getFieldMask()),Cc(_.mutation,v,_.mutation.getFieldMask(),Tt.now())):u.set(v.key,On.empty())}),this.recalculateAndSaveOverlays(e,l).next(p=>(p.forEach((v,_)=>u.set(v,_)),t.forEach((v,_)=>{var E;return f.set(v,new pD(_,(E=u.get(v))!==null&&E!==void 0?E:null))}),f))}recalculateAndSaveOverlays(e,t){const r=Ic();let s=new yt((u,f)=>u-f),l=Be();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(u=>{for(const f of u)f.keys().forEach(p=>{const v=t.get(p);if(v===null)return;let _=r.get(p)||On.empty();_=f.applyToLocalView(v,_),r.set(p,_);const E=(s.get(f.batchId)||Be()).add(p);s=s.insert(f.batchId,E)})}).next(()=>{const u=[],f=s.getReverseIterator();for(;f.hasNext();){const p=f.getNext(),v=p.key,_=p.value,E=K1();_.forEach(w=>{if(!l.has(w)){const T=tE(t.get(w),r.get(w));T!==null&&E.set(w,T),l=l.add(w)}}),u.push(this.documentOverlayCache.saveOverlays(e,v,E))}return ie.waitFor(u)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,s){return function(u){return Te.isDocumentKey(u.path)&&u.collectionGroup===null&&u.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):F1(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,s):this.getDocumentsMatchingCollectionQuery(e,t,r,s)}getNextDocuments(e,t,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,s).next(l=>{const u=s-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,s-l.size):ie.resolve(js());let f=Mc,p=l;return u.next(v=>ie.forEach(v,(_,E)=>(f<E.largestBatchId&&(f=E.largestBatchId),l.get(_)?ie.resolve():this.remoteDocumentCache.getEntry(e,_).next(w=>{p=p.insert(_,w)}))).next(()=>this.populateOverlays(e,v,l)).next(()=>this.computeViews(e,p,v,Be())).next(_=>({batchId:f,changes:$1(_)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Te(t)).next(r=>{let s=wc();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,r,s){const l=t.collectionGroup;let u=wc();return this.indexManager.getCollectionParents(e,l).next(f=>ie.forEach(f,p=>{const v=function(E,w){return new ll(w,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,v,r,s).next(_=>{_.forEach((E,w)=>{u=u.insert(E,w)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r,s){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(l=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,l,s))).next(u=>{l.forEach((p,v)=>{const _=v.getKey();u.get(_)===null&&(u=u.insert(_,ln.newInvalidDocument(_)))});let f=wc();return u.forEach((p,v)=>{const _=l.get(p);_!==void 0&&Cc(_.mutation,v,On.empty(),Tt.now()),Hh(t,v)&&(f=f.insert(p,v))}),f})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return ie.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(s){return{id:s.id,version:s.version,createTime:Qi(s.createTime)}}(t)),ie.resolve()}getNamedQuery(e,t){return ie.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(s){return{name:s.name,query:sD(s.bundledQuery),readTime:Qi(s.readTime)}}(t)),ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yD{constructor(){this.overlays=new yt(Te.comparator),this.Rr=new Map}getOverlay(e,t){return ie.resolve(this.overlays.get(t))}getOverlays(e,t){const r=js();return ie.forEach(t,s=>this.getOverlay(e,s).next(l=>{l!==null&&r.set(s,l)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((s,l)=>{this.Et(e,t,l)}),ie.resolve()}removeOverlaysForBatchId(e,t,r){const s=this.Rr.get(r);return s!==void 0&&(s.forEach(l=>this.overlays=this.overlays.remove(l)),this.Rr.delete(r)),ie.resolve()}getOverlaysForCollection(e,t,r){const s=js(),l=t.length+1,u=new Te(t.child("")),f=this.overlays.getIteratorFrom(u);for(;f.hasNext();){const p=f.getNext().value,v=p.getKey();if(!t.isPrefixOf(v.path))break;v.path.length===l&&p.largestBatchId>r&&s.set(p.getKey(),p)}return ie.resolve(s)}getOverlaysForCollectionGroup(e,t,r,s){let l=new yt((v,_)=>v-_);const u=this.overlays.getIterator();for(;u.hasNext();){const v=u.getNext().value;if(v.getKey().getCollectionGroup()===t&&v.largestBatchId>r){let _=l.get(v.largestBatchId);_===null&&(_=js(),l=l.insert(v.largestBatchId,_)),_.set(v.getKey(),v)}}const f=js(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach((v,_)=>f.set(v,_)),!(f.size()>=s)););return ie.resolve(f)}Et(e,t,r){const s=this.overlays.get(r.key);if(s!==null){const u=this.Rr.get(s.largestBatchId).delete(r.key);this.Rr.set(s.largestBatchId,u)}this.overlays=this.overlays.insert(r.key,new L4(t,r));let l=this.Rr.get(t);l===void 0&&(l=Be(),this.Rr.set(t,l)),this.Rr.set(t,l.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(){this.sessionToken=tn.EMPTY_BYTE_STRING}getSessionToken(e){return ie.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(){this.Vr=new Bt(Yt.mr),this.gr=new Bt(Yt.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const r=new Yt(e,t);this.Vr=this.Vr.add(r),this.gr=this.gr.add(r)}yr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.wr(new Yt(e,t))}Sr(e,t){e.forEach(r=>this.removeReference(r,t))}br(e){const t=new Te(new ut([])),r=new Yt(t,e),s=new Yt(t,e+1),l=[];return this.gr.forEachInRange([r,s],u=>{this.wr(u),l.push(u.key)}),l}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Te(new ut([])),r=new Yt(t,e),s=new Yt(t,e+1);let l=Be();return this.gr.forEachInRange([r,s],u=>{l=l.add(u.key)}),l}containsKey(e){const t=new Yt(e,0),r=this.Vr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}}class Yt{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Te.comparator(e.key,t.key)||Me(e.Cr,t.Cr)}static pr(e,t){return Me(e.Cr,t.Cr)||Te.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Bt(Yt.mr)}checkEmpty(e){return ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,s){const l=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const u=new M4(l,t,r,s);this.mutationQueue.push(u);for(const f of s)this.Mr=this.Mr.add(new Yt(f.key,l)),this.indexManager.addToCollectionParentIndex(e,f.key.path.popLast());return ie.resolve(u)}lookupMutationBatch(e,t){return ie.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const r=t+1,s=this.Nr(r),l=s<0?0:s;return ie.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return ie.resolve(this.mutationQueue.length===0?Vg:this.Fr-1)}getAllMutationBatches(e){return ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Yt(t,0),s=new Yt(t,Number.POSITIVE_INFINITY),l=[];return this.Mr.forEachInRange([r,s],u=>{const f=this.Or(u.Cr);l.push(f)}),ie.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Bt(Me);return t.forEach(s=>{const l=new Yt(s,0),u=new Yt(s,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([l,u],f=>{r=r.add(f.Cr)})}),ie.resolve(this.Br(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,s=r.length+1;let l=r;Te.isDocumentKey(l)||(l=l.child(""));const u=new Yt(new Te(l),0);let f=new Bt(Me);return this.Mr.forEachWhile(p=>{const v=p.key.path;return!!r.isPrefixOf(v)&&(v.length===s&&(f=f.add(p.Cr)),!0)},u),ie.resolve(this.Br(f))}Br(e){const t=[];return e.forEach(r=>{const s=this.Or(r);s!==null&&t.push(s)}),t}removeMutationBatch(e,t){et(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.Mr;return ie.forEach(t.mutations,s=>{const l=new Yt(s.key,t.batchId);return r=r.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.Mr=r})}qn(e){}containsKey(e,t){const r=new Yt(t,0),s=this.Mr.firstAfterOrEqual(r);return ie.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,ie.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bD{constructor(e){this.kr=e,this.docs=function(){return new yt(Te.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,s=this.docs.get(r),l=s?s.size:0,u=this.kr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:u}),this.size+=u-l,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ie.resolve(r?r.document.mutableCopy():ln.newInvalidDocument(t))}getEntries(e,t){let r=Ur();return t.forEach(s=>{const l=this.docs.get(s);r=r.insert(s,l?l.document.mutableCopy():ln.newInvalidDocument(s))}),ie.resolve(r)}getDocumentsMatchingQuery(e,t,r,s){let l=Ur();const u=t.path,f=new Te(u.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(f);for(;p.hasNext();){const{key:v,value:{document:_}}=p.getNext();if(!u.isPrefixOf(v.path))break;v.path.length>u.length+1||JC(XC(_),r)<=0||(s.has(_.key)||Hh(t,_))&&(l=l.insert(_.key,_.mutableCopy()))}return ie.resolve(l)}getAllFromCollectionGroup(e,t,r,s){Ie()}qr(e,t){return ie.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new wD(this)}getSize(e){return ie.resolve(this.size)}}class wD extends mD{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?t.push(this.Ir.addEntry(e,s)):this.Ir.removeEntry(r)}),ie.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.persistence=e,this.Qr=new qs(t=>Fg(t),qg),this.lastRemoteSnapshotVersion=Ce.min(),this.highestTargetId=0,this.$r=0,this.Ur=new Qg,this.targetCount=0,this.Kr=Qo.Un()}forEachTarget(e,t){return this.Qr.forEach((r,s)=>t(s)),ie.resolve()}getLastRemoteSnapshotVersion(e){return ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ie.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Kr.next(),ie.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.$r&&(this.$r=t),ie.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Kr=new Qo(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,ie.resolve()}updateTargetData(e,t){return this.zn(t),ie.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Ur.br(t.targetId),this.targetCount-=1,ie.resolve()}removeTargets(e,t,r){let s=0;const l=[];return this.Qr.forEach((u,f)=>{f.sequenceNumber<=t&&r.get(f.targetId)===null&&(this.Qr.delete(u),l.push(this.removeMatchingKeysForTargetId(e,f.targetId)),s++)}),ie.waitFor(l).next(()=>s)}getTargetCount(e){return ie.resolve(this.targetCount)}getTargetData(e,t){const r=this.Qr.get(t)||null;return ie.resolve(r)}addMatchingKeys(e,t,r){return this.Ur.yr(t,r),ie.resolve()}removeMatchingKeys(e,t,r){this.Ur.Sr(t,r);const s=this.persistence.referenceDelegate,l=[];return s&&t.forEach(u=>{l.push(s.markPotentiallyOrphaned(e,u))}),ie.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this.Ur.br(t),ie.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ur.vr(t);return ie.resolve(r)}containsKey(e,t){return ie.resolve(this.Ur.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new Vh(0),this.zr=!1,this.zr=!0,this.jr=new _D,this.referenceDelegate=e(this),this.Hr=new ED(this),this.indexManager=new oD,this.remoteDocumentCache=function(s){return new bD(s)}(r=>this.referenceDelegate.Jr(r)),this.serializer=new aD(t),this.Yr=new vD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yD,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Wr[e.toKey()];return r||(r=new xD(t,this.referenceDelegate),this.Wr[e.toKey()]=r),r}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,r){ge("MemoryPersistence","Starting transaction:",e);const s=new TD(this.Gr.next());return this.referenceDelegate.Zr(),r(s).next(l=>this.referenceDelegate.Xr(s).next(()=>l)).toPromise().then(l=>(s.raiseOnCommittedEvent(),l))}ei(e,t){return ie.or(Object.values(this.Wr).map(r=>()=>r.containsKey(e,t)))}}class TD extends e4{constructor(e){super(),this.currentSequenceNumber=e}}class Wg{constructor(e){this.persistence=e,this.ti=new Qg,this.ni=null}static ri(e){return new Wg(e)}get ii(){if(this.ni)return this.ni;throw Ie()}addReference(e,t,r){return this.ti.addReference(r,t),this.ii.delete(r.toString()),ie.resolve()}removeReference(e,t,r){return this.ti.removeReference(r,t),this.ii.add(r.toString()),ie.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),ie.resolve()}removeTarget(e,t){this.ti.br(t.targetId).forEach(s=>this.ii.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(l=>this.ii.add(l.toString()))}).next(()=>r.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ie.forEach(this.ii,r=>{const s=Te.fromPath(r);return this.si(e,s).next(l=>{l||t.removeEntry(s,Ce.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(r=>{r?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return ie.or([()=>ie.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class _h{constructor(e,t){this.persistence=e,this.oi=new qs(r=>i4(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=fD(this,t)}static ri(e,t){return new _h(e,t)}Zr(){}Xr(e){return ie.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>t.next(s=>r+s))}sr(e){let t=0;return this.rr(e,r=>{t++}).next(()=>t)}rr(e,t){return ie.forEach(this.oi,(r,s)=>this.ar(e,r,s).next(l=>l?ie.resolve():t(s)))}removeTargets(e,t,r){return this.persistence.getTargetCache().removeTargets(e,t,r)}removeOrphanedDocuments(e,t){let r=0;const s=this.persistence.getRemoteDocumentCache(),l=s.newChangeBuffer();return s.qr(e,u=>this.ar(e,u,t).next(f=>{f||(r++,l.removeEntry(u,Ce.min()))})).next(()=>l.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),ie.resolve()}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ie.resolve()}removeReference(e,t,r){return this.oi.set(r,e.currentSequenceNumber),ie.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),ie.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Xd(e.data.value)),t}ar(e,t,r){return ie.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.oi.get(t);return ie.resolve(s!==void 0&&s>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xg{constructor(e,t,r,s){this.targetId=e,this.fromCache=t,this.Hi=r,this.Ji=s}static Yi(e,t){let r=Be(),s=Be();for(const l of t.docChanges)switch(l.type){case 0:r=r.add(l.doc.key);break;case 1:s=s.add(l.doc.key)}return new Xg(e,t.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return rR()?8:t4(un())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,r,s){const l={result:null};return this.rs(e,t).next(u=>{l.result=u}).next(()=>{if(!l.result)return this.ss(e,t,s,r).next(u=>{l.result=u})}).next(()=>{if(l.result)return;const u=new SD;return this._s(e,t,u).next(f=>{if(l.result=f,this.Xi)return this.us(e,t,u,f.size)})}).next(()=>l.result)}us(e,t,r,s){return r.documentReadCount<this.es?(Mo()<=ze.DEBUG&&ge("QueryEngine","SDK will not create cache indexes for query:",Lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),ie.resolve()):(Mo()<=ze.DEBUG&&ge("QueryEngine","Query:",Lo(t),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ts*s?(Mo()<=ze.DEBUG&&ge("QueryEngine","The SDK decides to create cache indexes for query:",Lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yi(t))):ie.resolve())}rs(e,t){if(Yx(t))return ie.resolve(null);let r=Yi(t);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(t.limit!==null&&s===1&&(t=vh(t,null,"F"),r=Yi(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(l=>{const u=Be(...l);return this.ns.getDocuments(e,u).next(f=>this.indexManager.getMinOffset(e,r).next(p=>{const v=this.cs(t,f);return this.ls(t,v,u,p.readTime)?this.rs(e,vh(t,null,"F")):this.hs(e,v,t,p)}))})))}ss(e,t,r,s){return Yx(t)||s.isEqual(Ce.min())?ie.resolve(null):this.ns.getDocuments(e,r).next(l=>{const u=this.cs(t,l);return this.ls(t,u,r,s)?ie.resolve(null):(Mo()<=ze.DEBUG&&ge("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Lo(t)),this.hs(e,u,t,WC(s,Mc)).next(f=>f))})}cs(e,t){let r=new Bt(H1(e));return t.forEach((s,l)=>{Hh(e,l)&&(r=r.add(l))}),r}ls(e,t,r,s){if(e.limit===null)return!1;if(r.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(s)>0)}_s(e,t,r){return Mo()<=ze.DEBUG&&ge("QueryEngine","Using full collection scan to execute query:",Lo(t)),this.ns.getDocumentsMatchingQuery(e,t,Va.min(),r)}hs(e,t,r,s){return this.ns.getDocumentsMatchingQuery(e,r,s).next(l=>(t.forEach(u=>{l=l.insert(u.key,u)}),l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jg="LocalStore",RD=3e8;class ND{constructor(e,t,r,s){this.persistence=e,this.Ps=t,this.serializer=s,this.Ts=new yt(Me),this.Is=new qs(l=>Fg(l),qg),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(r)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new gD(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function ID(n,e,t,r){return new ND(n,e,t,r)}async function pE(n,e){const t=ke(n);return await t.persistence.runTransaction("Handle user change","readonly",r=>{let s;return t.mutationQueue.getAllMutationBatches(r).next(l=>(s=l,t.As(e),t.mutationQueue.getAllMutationBatches(r))).next(l=>{const u=[],f=[];let p=Be();for(const v of s){u.push(v.batchId);for(const _ of v.mutations)p=p.add(_.key)}for(const v of l){f.push(v.batchId);for(const _ of v.mutations)p=p.add(_.key)}return t.localDocuments.getDocuments(r,p).next(v=>({Rs:v,removedBatchIds:u,addedBatchIds:f}))})})}function CD(n,e){const t=ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),l=t.ds.newChangeBuffer({trackRemovals:!0});return function(f,p,v,_){const E=v.batch,w=E.keys();let T=ie.resolve();return w.forEach(I=>{T=T.next(()=>_.getEntry(p,I)).next(L=>{const P=v.docVersions.get(I);et(P!==null),L.version.compareTo(P)<0&&(E.applyToRemoteDocument(L,v),L.isValidDocument()&&(L.setReadTime(v.commitVersion),_.addEntry(L)))})}),T.next(()=>f.mutationQueue.removeMutationBatch(p,E))}(t,r,e,l).next(()=>l.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(f){let p=Be();for(let v=0;v<f.mutationResults.length;++v)f.mutationResults[v].transformResults.length>0&&(p=p.add(f.batch.mutations[v].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,s))})}function gE(n){const e=ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function DD(n,e){const t=ke(n),r=e.snapshotVersion;let s=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",l=>{const u=t.ds.newChangeBuffer({trackRemovals:!0});s=t.Ts;const f=[];e.targetChanges.forEach((_,E)=>{const w=s.get(E);if(!w)return;f.push(t.Hr.removeMatchingKeys(l,_.removedDocuments,E).next(()=>t.Hr.addMatchingKeys(l,_.addedDocuments,E)));let T=w.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?T=T.withResumeToken(tn.EMPTY_BYTE_STRING,Ce.min()).withLastLimboFreeSnapshotVersion(Ce.min()):_.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(_.resumeToken,r)),s=s.insert(E,T),function(L,P,V){return L.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-L.snapshotVersion.toMicroseconds()>=RD?!0:V.addedDocuments.size+V.modifiedDocuments.size+V.removedDocuments.size>0}(w,T,_)&&f.push(t.Hr.updateTargetData(l,T))});let p=Ur(),v=Be();if(e.documentUpdates.forEach(_=>{e.resolvedLimboDocuments.has(_)&&f.push(t.persistence.referenceDelegate.updateLimboDocument(l,_))}),f.push(kD(l,u,e.documentUpdates).next(_=>{p=_.Vs,v=_.fs})),!r.isEqual(Ce.min())){const _=t.Hr.getLastRemoteSnapshotVersion(l).next(E=>t.Hr.setTargetsMetadata(l,l.currentSequenceNumber,r));f.push(_)}return ie.waitFor(f).next(()=>u.apply(l)).next(()=>t.localDocuments.getLocalViewOfDocuments(l,p,v)).next(()=>p)}).then(l=>(t.Ts=s,l))}function kD(n,e,t){let r=Be(),s=Be();return t.forEach(l=>r=r.add(l)),e.getEntries(n,r).next(l=>{let u=Ur();return t.forEach((f,p)=>{const v=l.get(f);p.isFoundDocument()!==v.isFoundDocument()&&(s=s.add(f)),p.isNoDocument()&&p.version.isEqual(Ce.min())?(e.removeEntry(f,p.readTime),u=u.insert(f,p)):!v.isValidDocument()||p.version.compareTo(v.version)>0||p.version.compareTo(v.version)===0&&v.hasPendingWrites?(e.addEntry(p),u=u.insert(f,p)):ge(Jg,"Ignoring outdated watch update for ",f,". Current version:",v.version," Watch version:",p.version)}),{Vs:u,fs:s}})}function jD(n,e){const t=ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Vg),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function OD(n,e){const t=ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return t.Hr.getTargetData(r,e).next(l=>l?(s=l,ie.resolve(s)):t.Hr.allocateTargetId(r).next(u=>(s=new Da(e,u,"TargetPurposeListen",r.currentSequenceNumber),t.Hr.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=t.Ts.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(r.targetId,r),t.Is.set(e,r.targetId)),r})}async function ng(n,e,t){const r=ke(n),s=r.Ts.get(e),l=t?"readwrite":"readwrite-primary";try{t||await r.persistence.runTransaction("Release target",l,u=>r.persistence.referenceDelegate.removeTarget(u,s))}catch(u){if(!ol(u))throw u;ge(Jg,`Failed to update sequence numbers for target ${e}: ${u}`)}r.Ts=r.Ts.remove(e),r.Is.delete(s.target)}function ob(n,e,t){const r=ke(n);let s=Ce.min(),l=Be();return r.persistence.runTransaction("Execute query","readwrite",u=>function(p,v,_){const E=ke(p),w=E.Is.get(_);return w!==void 0?ie.resolve(E.Ts.get(w)):E.Hr.getTargetData(v,_)}(r,u,Yi(e)).next(f=>{if(f)return s=f.lastLimboFreeSnapshotVersion,r.Hr.getMatchingKeysForTargetId(u,f.targetId).next(p=>{l=p})}).next(()=>r.Ps.getDocumentsMatchingQuery(u,e,t?s:Ce.min(),t?l:Be())).next(f=>(PD(r,w4(e),f),{documents:f,gs:l})))}function PD(n,e,t){let r=n.Es.get(e)||Ce.min();t.forEach((s,l)=>{l.readTime.compareTo(r)>0&&(r=l.readTime)}),n.Es.set(e,r)}class lb{constructor(){this.activeTargetIds=N4()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}bs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class MD{constructor(){this.ho=new lb,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,r){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new lb,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cb="ConnectivityMonitor";class ub{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){ge(cb,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){ge(cb,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ld=null;function ig(){return Ld===null?Ld=function(){return 268435456+Math.round(2147483648*Math.random())}():Ld++,"0x"+Ld.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wp="RestConnection",UD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class VD{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${r}/databases/${s}`,this.wo=this.databaseId.database===mh?`project_id=${r}`:`project_id=${r}&database_id=${s}`}So(e,t,r,s,l){const u=ig(),f=this.bo(e,t.toUriEncodedString());ge(wp,`Sending RPC '${e}' ${u}:`,f,r);const p={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(p,s,l),this.vo(e,f,p,r).then(v=>(ge(wp,`Received RPC '${e}' ${u}: `,v),v),v=>{throw Go(wp,`RPC '${e}' ${u} failed with error: `,v,"url: ",f,"request:",r),v})}Co(e,t,r,s,l,u){return this.So(e,t,r,s,l)}Do(e,t,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+al}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,l)=>e[l]=s),r&&r.headers.forEach((s,l)=>e[l]=s)}bo(e,t){const r=UD[e];return`${this.po}/v1/${t}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Uo(e){this.ko(e)}Ko(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sn="WebChannelConnection";class BD extends VD{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,r,s){const l=ig();return new Promise((u,f)=>{const p=new y1;p.setWithCredentials(!0),p.listenOnce(_1.COMPLETE,()=>{try{switch(p.getLastErrorCode()){case Wd.NO_ERROR:const _=p.getResponseJson();ge(sn,`XHR for RPC '${e}' ${l} received:`,JSON.stringify(_)),u(_);break;case Wd.TIMEOUT:ge(sn,`RPC '${e}' ${l} timed out`),f(new pe(te.DEADLINE_EXCEEDED,"Request time out"));break;case Wd.HTTP_ERROR:const E=p.getStatus();if(ge(sn,`RPC '${e}' ${l} failed with status:`,E,"response text:",p.getResponseText()),E>0){let w=p.getResponseJson();Array.isArray(w)&&(w=w[0]);const T=w==null?void 0:w.error;if(T&&T.status&&T.message){const I=function(P){const V=P.toLowerCase().replace(/_/g,"-");return Object.values(te).indexOf(V)>=0?V:te.UNKNOWN}(T.status);f(new pe(I,T.message))}else f(new pe(te.UNKNOWN,"Server responded with status "+p.getStatus()))}else f(new pe(te.UNAVAILABLE,"Connection failed."));break;default:Ie()}}finally{ge(sn,`RPC '${e}' ${l} completed.`)}});const v=JSON.stringify(s);ge(sn,`RPC '${e}' ${l} sending request:`,s),p.send(t,"POST",v,r,15)})}Wo(e,t,r){const s=ig(),l=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=w1(),f=b1(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},v=this.longPollingOptions.timeoutSeconds;v!==void 0&&(p.longPollingTimeout=Math.round(1e3*v)),this.useFetchStreams&&(p.useFetchStreams=!0),this.Do(p.initMessageHeaders,t,r),p.encodeInitMessageHeaders=!0;const _=l.join("");ge(sn,`Creating RPC '${e}' stream ${s}: ${_}`,p);const E=u.createWebChannel(_,p);let w=!1,T=!1;const I=new zD({Fo:P=>{T?ge(sn,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(w||(ge(sn,`Opening RPC '${e}' stream ${s} transport.`),E.open(),w=!0),ge(sn,`RPC '${e}' stream ${s} sending:`,P),E.send(P))},Mo:()=>E.close()}),L=(P,V,Y)=>{P.listen(V,H=>{try{Y(H)}catch(ee){setTimeout(()=>{throw ee},0)}})};return L(E,bc.EventType.OPEN,()=>{T||(ge(sn,`RPC '${e}' stream ${s} transport opened.`),I.Qo())}),L(E,bc.EventType.CLOSE,()=>{T||(T=!0,ge(sn,`RPC '${e}' stream ${s} transport closed`),I.Uo())}),L(E,bc.EventType.ERROR,P=>{T||(T=!0,Go(sn,`RPC '${e}' stream ${s} transport errored:`,P),I.Uo(new pe(te.UNAVAILABLE,"The operation could not be completed")))}),L(E,bc.EventType.MESSAGE,P=>{var V;if(!T){const Y=P.data[0];et(!!Y);const H=Y,ee=(H==null?void 0:H.error)||((V=H[0])===null||V===void 0?void 0:V.error);if(ee){ge(sn,`RPC '${e}' stream ${s} received error:`,ee);const X=ee.status;let se=function(A){const D=jt[A];if(D!==void 0)return iE(D)}(X),M=ee.message;se===void 0&&(se=te.INTERNAL,M="Unknown error status: "+X+" with message "+ee.message),T=!0,I.Uo(new pe(se,M)),E.close()}else ge(sn,`RPC '${e}' stream ${s} received:`,Y),I.Ko(Y)}}),L(f,x1.STAT_EVENT,P=>{P.stat===Gp.PROXY?ge(sn,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Gp.NOPROXY&&ge(sn,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.$o()},0),I}}function Ep(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yh(n){return new G4(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,t,r=1e3,s=1.5,l=6e4){this.Ti=e,this.timerId=t,this.Go=r,this.zo=s,this.jo=l,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),r=Math.max(0,Date.now()-this.Yo),s=Math.max(0,t-r);s>0&&ge("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,s,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const db="PersistentStream";class yE{constructor(e,t,r,s,l,u,f,p){this.Ti=e,this.n_=r,this.r_=s,this.connection=l,this.authCredentialsProvider=u,this.appCheckCredentialsProvider=f,this.listener=p,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new vE(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===te.RESOURCE_EXHAUSTED?(Lr(t.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.i_===t&&this.V_(r,s)},r=>{e(()=>{const s=new pe(te.UNKNOWN,"Fetching auth token failed: "+r.message);return this.m_(s)})})}V_(e,t){const r=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{r(()=>this.listener.xo())}),this.stream.No(()=>{r(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(s=>{r(()=>this.m_(s))}),this.stream.onMessage(s=>{r(()=>++this.__==1?this.g_(s):this.onNext(s))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return ge(db,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(ge(db,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FD extends yE{constructor(e,t,r,s,l,u){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,s,u),this.serializer=l}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=Y4(this.serializer,e),r=function(l){if(!("targetChange"in l))return Ce.min();const u=l.targetChange;return u.targetIds&&u.targetIds.length?Ce.min():u.readTime?Qi(u.readTime):Ce.min()}(e);return this.listener.p_(t,r)}y_(e){const t={};t.database=tg(this.serializer),t.addTarget=function(l,u){let f;const p=u.target;if(f=Wp(p)?{documents:X4(l,p)}:{query:J4(l,p).ht},f.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){f.resumeToken=sE(l,u.resumeToken);const v=Jp(l,u.expectedCount);v!==null&&(f.expectedCount=v)}else if(u.snapshotVersion.compareTo(Ce.min())>0){f.readTime=yh(l,u.snapshotVersion.toTimestamp());const v=Jp(l,u.expectedCount);v!==null&&(f.expectedCount=v)}return f}(this.serializer,e);const r=eD(this.serializer,e);r&&(t.labels=r),this.I_(t)}w_(e){const t={};t.database=tg(this.serializer),t.removeTarget=e,this.I_(t)}}class qD extends yE{constructor(e,t,r,s,l,u){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,s,u),this.serializer=l}get S_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.S_&&this.b_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return et(!!e.streamToken),this.lastStreamToken=e.streamToken,et(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){et(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=W4(e.writeResults,e.commitTime),r=Qi(e.commitTime);return this.listener.v_(r,t)}C_(){const e={};e.database=tg(this.serializer),this.I_(e)}b_(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Q4(this.serializer,r))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HD{}class GD extends HD{constructor(e,t,r,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=s,this.F_=!1}M_(){if(this.F_)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([l,u])=>this.connection.So(e,Zp(t,r),s,l,u)).catch(l=>{throw l.name==="FirebaseError"?(l.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new pe(te.UNKNOWN,l.toString())})}Co(e,t,r,s,l){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,f])=>this.connection.Co(e,Zp(t,r),s,u,f,l)).catch(u=>{throw u.name==="FirebaseError"?(u.code===te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new pe(te.UNKNOWN,u.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class $D{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(Lr(t),this.N_=!1):ge("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="RemoteStore";class KD{constructor(e,t,r,s,l){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.U_=[],this.K_=new Map,this.W_=new Set,this.G_=[],this.z_=l,this.z_.To(u=>{r.enqueueAndForget(async()=>{Hs(this)&&(ge(Vs,"Restarting streams for network reachability change."),await async function(p){const v=ke(p);v.W_.add(4),await lu(v),v.j_.set("Unknown"),v.W_.delete(4),await Qh(v)}(this))})}),this.j_=new $D(r,s)}}async function Qh(n){if(Hs(n))for(const e of n.G_)await e(!0)}async function lu(n){for(const e of n.G_)await e(!1)}function _E(n,e){const t=ke(n);t.K_.has(e.targetId)||(t.K_.set(e.targetId,e),nv(t)?tv(t):cl(t).c_()&&ev(t,e))}function Zg(n,e){const t=ke(n),r=cl(t);t.K_.delete(e),r.c_()&&xE(t,e),t.K_.size===0&&(r.c_()?r.P_():Hs(t)&&t.j_.set("Unknown"))}function ev(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ce.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}cl(n).y_(e)}function xE(n,e){n.H_.Ne(e),cl(n).w_(e)}function tv(n){n.H_=new B4({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.K_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),cl(n).start(),n.j_.B_()}function nv(n){return Hs(n)&&!cl(n).u_()&&n.K_.size>0}function Hs(n){return ke(n).W_.size===0}function bE(n){n.H_=void 0}async function YD(n){n.j_.set("Online")}async function QD(n){n.K_.forEach((e,t)=>{ev(n,e)})}async function WD(n,e){bE(n),nv(n)?(n.j_.q_(e),tv(n)):n.j_.set("Unknown")}async function XD(n,e,t){if(n.j_.set("Online"),e instanceof aE&&e.state===2&&e.cause)try{await async function(s,l){const u=l.cause;for(const f of l.targetIds)s.K_.has(f)&&(await s.remoteSyncer.rejectListen(f,u),s.K_.delete(f),s.H_.removeTarget(f))}(n,e)}catch(r){ge(Vs,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xh(n,r)}else if(e instanceof eh?n.H_.We(e):e instanceof rE?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Ce.min()))try{const r=await gE(n.localStore);t.compareTo(r)>=0&&await function(l,u){const f=l.H_.ot(u);return f.targetChanges.forEach((p,v)=>{if(p.resumeToken.approximateByteSize()>0){const _=l.K_.get(v);_&&l.K_.set(v,_.withResumeToken(p.resumeToken,u))}}),f.targetMismatches.forEach((p,v)=>{const _=l.K_.get(p);if(!_)return;l.K_.set(p,_.withResumeToken(tn.EMPTY_BYTE_STRING,_.snapshotVersion)),xE(l,p);const E=new Da(_.target,p,v,_.sequenceNumber);ev(l,E)}),l.remoteSyncer.applyRemoteEvent(f)}(n,t)}catch(r){ge(Vs,"Failed to raise snapshot:",r),await xh(n,r)}}async function xh(n,e,t){if(!ol(e))throw e;n.W_.add(1),await lu(n),n.j_.set("Offline"),t||(t=()=>gE(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{ge(Vs,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await Qh(n)})}function wE(n,e){return e().catch(t=>xh(n,t,e))}async function Wh(n){const e=ke(n),t=qa(e);let r=e.U_.length>0?e.U_[e.U_.length-1].batchId:Vg;for(;JD(e);)try{const s=await jD(e.localStore,r);if(s===null){e.U_.length===0&&t.P_();break}r=s.batchId,ZD(e,s)}catch(s){await xh(e,s)}EE(e)&&TE(e)}function JD(n){return Hs(n)&&n.U_.length<10}function ZD(n,e){n.U_.push(e);const t=qa(n);t.c_()&&t.S_&&t.b_(e.mutations)}function EE(n){return Hs(n)&&!qa(n).u_()&&n.U_.length>0}function TE(n){qa(n).start()}async function ek(n){qa(n).C_()}async function tk(n){const e=qa(n);for(const t of n.U_)e.b_(t.mutations)}async function nk(n,e,t){const r=n.U_.shift(),s=$g.from(r,e,t);await wE(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),await Wh(n)}async function ik(n,e){e&&qa(n).S_&&await async function(r,s){if(function(u){return V4(u)&&u!==te.ABORTED}(s.code)){const l=r.U_.shift();qa(r).h_(),await wE(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,s)),await Wh(r)}}(n,e),EE(n)&&TE(n)}async function hb(n,e){const t=ke(n);t.asyncQueue.verifyOperationInProgress(),ge(Vs,"RemoteStore received new credentials");const r=Hs(t);t.W_.add(3),await lu(t),r&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await Qh(t)}async function rk(n,e){const t=ke(n);e?(t.W_.delete(2),await Qh(t)):e||(t.W_.add(2),await lu(t),t.j_.set("Unknown"))}function cl(n){return n.J_||(n.J_=function(t,r,s){const l=ke(t);return l.M_(),new FD(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(n.datastore,n.asyncQueue,{xo:YD.bind(null,n),No:QD.bind(null,n),Lo:WD.bind(null,n),p_:XD.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),nv(n)?tv(n):n.j_.set("Unknown")):(await n.J_.stop(),bE(n))})),n.J_}function qa(n){return n.Y_||(n.Y_=function(t,r,s){const l=ke(t);return l.M_(),new qD(r,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,s)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:ek.bind(null,n),Lo:ik.bind(null,n),D_:tk.bind(null,n),v_:nk.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await Wh(n)):(await n.Y_.stop(),n.U_.length>0&&(ge(Vs,`Stopping write stream with ${n.U_.length} pending writes`),n.U_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iv{constructor(e,t,r,s,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=s,this.removalCallback=l,this.deferred=new Dr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(u=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,s,l){const u=Date.now()+r,f=new iv(e,t,u,s,l);return f.start(r),f}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new pe(te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rv(n,e){if(Lr("AsyncQueue",`${e}: ${n}`),ol(n))return new pe(te.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{static emptySet(e){return new Ho(e.comparator)}constructor(e){this.comparator=e?(t,r)=>e(t,r)||Te.comparator(t.key,r.key):(t,r)=>Te.comparator(t.key,r.key),this.keyedMap=wc(),this.sortedSet=new yt(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Ho)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,l=r.getNext().key;if(!s.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const r=new Ho;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fb{constructor(){this.Z_=new yt(Te.comparator)}track(e){const t=e.doc.key,r=this.Z_.get(t);r?e.type!==0&&r.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&r.type!==1?this.Z_=this.Z_.insert(t,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.Z_=this.Z_.remove(t):e.type===1&&r.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ie():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,r)=>{e.push(r)}),e}}class Wo{constructor(e,t,r,s,l,u,f,p,v){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=l,this.fromCache=u,this.syncStateChanged=f,this.excludesMetadataChanges=p,this.hasCachedResults=v}static fromInitialDocuments(e,t,r,s,l){const u=[];return t.forEach(f=>{u.push({type:0,doc:f})}),new Wo(e,t,Ho.emptySet(t),u,r,s,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==r[s].type||!t[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class sk{constructor(){this.queries=mb(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,r){const s=ke(t),l=s.queries;s.queries=mb(),l.forEach((u,f)=>{for(const p of f.ta)p.onError(r)})})(this,new pe(te.ABORTED,"Firestore shutting down"))}}function mb(){return new qs(n=>q1(n),qh)}async function av(n,e){const t=ke(n);let r=3;const s=e.query;let l=t.queries.get(s);l?!l.na()&&e.ra()&&(r=2):(l=new ak,r=e.ra()?0:1);try{switch(r){case 0:l.ea=await t.onListen(s,!0);break;case 1:l.ea=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(u){const f=rv(u,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(f)}t.queries.set(s,l),l.ta.push(e),e.sa(t.onlineState),l.ea&&e.oa(l.ea)&&ov(t)}async function sv(n,e){const t=ke(n),r=e.query;let s=3;const l=t.queries.get(r);if(l){const u=l.ta.indexOf(e);u>=0&&(l.ta.splice(u,1),l.ta.length===0?s=e.ra()?0:1:!l.na()&&e.ra()&&(s=2))}switch(s){case 0:return t.queries.delete(r),t.onUnlisten(r,!0);case 1:return t.queries.delete(r),t.onUnlisten(r,!1);case 2:return t.onLastRemoteStoreUnlisten(r);default:return}}function ok(n,e){const t=ke(n);let r=!1;for(const s of e){const l=s.query,u=t.queries.get(l);if(u){for(const f of u.ta)f.oa(s)&&(r=!0);u.ea=s}}r&&ov(t)}function lk(n,e,t){const r=ke(n),s=r.queries.get(e);if(s)for(const l of s.ta)l.onError(t);r.queries.delete(e)}function ov(n){n.ia.forEach(e=>{e.next()})}var rg,pb;(pb=rg||(rg={}))._a="default",pb.Cache="cache";class lv{constructor(e,t,r){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=r||{}}oa(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Wo(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const r=t!=="Offline";return(!this.options.Ta||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=Wo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==rg.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e){this.key=e}}class AE{constructor(e){this.key=e}}class ck{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=Be(),this.mutatedKeys=Be(),this.ya=H1(e),this.wa=new Ho(this.ya)}get Sa(){return this.fa}ba(e,t){const r=t?t.Da:new fb,s=t?t.wa:this.wa;let l=t?t.mutatedKeys:this.mutatedKeys,u=s,f=!1;const p=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,v=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((_,E)=>{const w=s.get(_),T=Hh(this.query,E)?E:null,I=!!w&&this.mutatedKeys.has(w.key),L=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let P=!1;w&&T?w.data.isEqual(T.data)?I!==L&&(r.track({type:3,doc:T}),P=!0):this.va(w,T)||(r.track({type:2,doc:T}),P=!0,(p&&this.ya(T,p)>0||v&&this.ya(T,v)<0)&&(f=!0)):!w&&T?(r.track({type:0,doc:T}),P=!0):w&&!T&&(r.track({type:1,doc:w}),P=!0,(p||v)&&(f=!0)),P&&(T?(u=u.add(T),l=L?l.add(_):l.delete(_)):(u=u.delete(_),l=l.delete(_)))}),this.query.limit!==null)for(;u.size>this.query.limit;){const _=this.query.limitType==="F"?u.last():u.first();u=u.delete(_.key),l=l.delete(_.key),r.track({type:1,doc:_})}return{wa:u,Da:r,ls:f,mutatedKeys:l}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r,s){const l=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const u=e.Da.X_();u.sort((_,E)=>function(T,I){const L=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ie()}};return L(T)-L(I)}(_.type,E.type)||this.ya(_.doc,E.doc)),this.Ca(r),s=s!=null&&s;const f=t&&!s?this.Fa():[],p=this.pa.size===0&&this.current&&!s?1:0,v=p!==this.ga;return this.ga=p,u.length!==0||v?{snapshot:new Wo(this.query,e.wa,l,u,e.mutatedKeys,p===0,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ma:f}:{Ma:f}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new fb,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=Be(),this.wa.forEach(r=>{this.xa(r.key)&&(this.pa=this.pa.add(r.key))});const t=[];return e.forEach(r=>{this.pa.has(r)||t.push(new AE(r))}),this.pa.forEach(r=>{e.has(r)||t.push(new SE(r))}),t}Oa(e){this.fa=e.gs,this.pa=Be();const t=this.ba(e.documents);return this.applyChanges(t,!0)}Na(){return Wo.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const cv="SyncEngine";class uk{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class dk{constructor(e){this.key=e,this.Ba=!1}}class hk{constructor(e,t,r,s,l,u){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=s,this.currentUser=l,this.maxConcurrentLimboResolutions=u,this.La={},this.ka=new qs(f=>q1(f),qh),this.qa=new Map,this.Qa=new Set,this.$a=new yt(Te.comparator),this.Ua=new Map,this.Ka=new Qg,this.Wa={},this.Ga=new Map,this.za=Qo.Kn(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function fk(n,e,t=!0){const r=kE(n);let s;const l=r.ka.get(e);return l?(r.sharedClientState.addLocalQueryTarget(l.targetId),s=l.view.Na()):s=await RE(r,e,t,!0),s}async function mk(n,e){const t=kE(n);await RE(t,e,!0,!1)}async function RE(n,e,t,r){const s=await OD(n.localStore,Yi(e)),l=s.targetId,u=n.sharedClientState.addLocalQueryTarget(l,t);let f;return r&&(f=await pk(n,e,l,u==="current",s.resumeToken)),n.isPrimaryClient&&t&&_E(n.remoteStore,s),f}async function pk(n,e,t,r,s){n.Ha=(E,w,T)=>async function(L,P,V,Y){let H=P.view.ba(V);H.ls&&(H=await ob(L.localStore,P.query,!1).then(({documents:M})=>P.view.ba(M,H)));const ee=Y&&Y.targetChanges.get(P.targetId),X=Y&&Y.targetMismatches.get(P.targetId)!=null,se=P.view.applyChanges(H,L.isPrimaryClient,ee,X);return vb(L,P.targetId,se.Ma),se.snapshot}(n,E,w,T);const l=await ob(n.localStore,e,!0),u=new ck(e,l.gs),f=u.ba(l.documents),p=ou.createSynthesizedTargetChangeForCurrentChange(t,r&&n.onlineState!=="Offline",s),v=u.applyChanges(f,n.isPrimaryClient,p);vb(n,t,v.Ma);const _=new uk(e,t,u);return n.ka.set(e,_),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),v.snapshot}async function gk(n,e,t){const r=ke(n),s=r.ka.get(e),l=r.qa.get(s.targetId);if(l.length>1)return r.qa.set(s.targetId,l.filter(u=>!qh(u,e))),void r.ka.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await ng(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),t&&Zg(r.remoteStore,s.targetId),ag(r,s.targetId)}).catch(sl)):(ag(r,s.targetId),await ng(r.localStore,s.targetId,!0))}async function vk(n,e){const t=ke(n),r=t.ka.get(e),s=t.qa.get(r.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(r.targetId),Zg(t.remoteStore,r.targetId))}async function yk(n,e,t){const r=Sk(n);try{const s=await function(u,f){const p=ke(u),v=Tt.now(),_=f.reduce((T,I)=>T.add(I.key),Be());let E,w;return p.persistence.runTransaction("Locally write mutations","readwrite",T=>{let I=Ur(),L=Be();return p.ds.getEntries(T,_).next(P=>{I=P,I.forEach((V,Y)=>{Y.isValidDocument()||(L=L.add(V))})}).next(()=>p.localDocuments.getOverlayedDocuments(T,I)).next(P=>{E=P;const V=[];for(const Y of f){const H=O4(Y,E.get(Y.key).overlayedDocument);H!=null&&V.push(new Qa(Y.key,H,P1(H.value.mapValue),si.exists(!0)))}return p.mutationQueue.addMutationBatch(T,v,V,f)}).next(P=>{w=P;const V=P.applyToLocalDocumentSet(E,L);return p.documentOverlayCache.saveOverlays(T,P.batchId,V)})}).then(()=>({batchId:w.batchId,changes:$1(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(u,f,p){let v=u.Wa[u.currentUser.toKey()];v||(v=new yt(Me)),v=v.insert(f,p),u.Wa[u.currentUser.toKey()]=v}(r,s.batchId,t),await cu(r,s.changes),await Wh(r.remoteStore)}catch(s){const l=rv(s,"Failed to persist write");t.reject(l)}}async function NE(n,e){const t=ke(n);try{const r=await DD(t.localStore,e);e.targetChanges.forEach((s,l)=>{const u=t.Ua.get(l);u&&(et(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?u.Ba=!0:s.modifiedDocuments.size>0?et(u.Ba):s.removedDocuments.size>0&&(et(u.Ba),u.Ba=!1))}),await cu(t,r,e)}catch(r){await sl(r)}}function gb(n,e,t){const r=ke(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){const s=[];r.ka.forEach((l,u)=>{const f=u.view.sa(e);f.snapshot&&s.push(f.snapshot)}),function(u,f){const p=ke(u);p.onlineState=f;let v=!1;p.queries.forEach((_,E)=>{for(const w of E.ta)w.sa(f)&&(v=!0)}),v&&ov(p)}(r.eventManager,e),s.length&&r.La.p_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function _k(n,e,t){const r=ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const s=r.Ua.get(e),l=s&&s.key;if(l){let u=new yt(Te.comparator);u=u.insert(l,ln.newNoDocument(l,Ce.min()));const f=Be().add(l),p=new Kh(Ce.min(),new Map,new yt(Me),u,f);await NE(r,p),r.$a=r.$a.remove(l),r.Ua.delete(e),uv(r)}else await ng(r.localStore,e,!1).then(()=>ag(r,e,t)).catch(sl)}async function xk(n,e){const t=ke(n),r=e.batch.batchId;try{const s=await CD(t.localStore,e);CE(t,r,null),IE(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),await cu(t,s)}catch(s){await sl(s)}}async function bk(n,e,t){const r=ke(n);try{const s=await function(u,f){const p=ke(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let _;return p.mutationQueue.lookupMutationBatch(v,f).next(E=>(et(E!==null),_=E.keys(),p.mutationQueue.removeMutationBatch(v,E))).next(()=>p.mutationQueue.performConsistencyCheck(v)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(v,_,f)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,_)).next(()=>p.localDocuments.getDocuments(v,_))})}(r.localStore,e);CE(r,e,t),IE(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),await cu(r,s)}catch(s){await sl(s)}}function IE(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function CE(n,e,t){const r=ke(n);let s=r.Wa[r.currentUser.toKey()];if(s){const l=s.get(e);l&&(t?l.reject(t):l.resolve(),s=s.remove(e)),r.Wa[r.currentUser.toKey()]=s}}function ag(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.qa.get(e))n.ka.delete(r),t&&n.La.Ja(r,t);n.qa.delete(e),n.isPrimaryClient&&n.Ka.br(e).forEach(r=>{n.Ka.containsKey(r)||DE(n,r)})}function DE(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(Zg(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ua.delete(t),uv(n))}function vb(n,e,t){for(const r of t)r instanceof SE?(n.Ka.addReference(r.key,e),wk(n,r)):r instanceof AE?(ge(cv,"Document no longer in limbo: "+r.key),n.Ka.removeReference(r.key,e),n.Ka.containsKey(r.key)||DE(n,r.key)):Ie()}function wk(n,e){const t=e.key,r=t.path.canonicalString();n.$a.get(t)||n.Qa.has(r)||(ge(cv,"New document in limbo: "+t),n.Qa.add(r),uv(n))}function uv(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Te(ut.fromString(e)),r=n.za.next();n.Ua.set(r,new dk(t)),n.$a=n.$a.insert(t,r),_E(n.remoteStore,new Da(Yi(Fh(t.path)),r,"TargetPurposeLimboResolution",Vh.ae))}}async function cu(n,e,t){const r=ke(n),s=[],l=[],u=[];r.ka.isEmpty()||(r.ka.forEach((f,p)=>{u.push(r.Ha(p,e,t).then(v=>{var _;if((v||t)&&r.isPrimaryClient){const E=v?!v.fromCache:(_=t==null?void 0:t.targetChanges.get(p.targetId))===null||_===void 0?void 0:_.current;r.sharedClientState.updateQueryState(p.targetId,E?"current":"not-current")}if(v){s.push(v);const E=Xg.Yi(p.targetId,v);l.push(E)}}))}),await Promise.all(u),r.La.p_(s),await async function(p,v){const _=ke(p);try{await _.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>ie.forEach(v,w=>ie.forEach(w.Hi,T=>_.persistence.referenceDelegate.addReference(E,w.targetId,T)).next(()=>ie.forEach(w.Ji,T=>_.persistence.referenceDelegate.removeReference(E,w.targetId,T)))))}catch(E){if(!ol(E))throw E;ge(Jg,"Failed to update sequence numbers: "+E)}for(const E of v){const w=E.targetId;if(!E.fromCache){const T=_.Ts.get(w),I=T.snapshotVersion,L=T.withLastLimboFreeSnapshotVersion(I);_.Ts=_.Ts.insert(w,L)}}}(r.localStore,l))}async function Ek(n,e){const t=ke(n);if(!t.currentUser.isEqual(e)){ge(cv,"User change. New user:",e.toKey());const r=await pE(t.localStore,e);t.currentUser=e,function(l,u){l.Ga.forEach(f=>{f.forEach(p=>{p.reject(new pe(te.CANCELLED,u))})}),l.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await cu(t,r.Rs)}}function Tk(n,e){const t=ke(n),r=t.Ua.get(e);if(r&&r.Ba)return Be().add(r.key);{let s=Be();const l=t.qa.get(e);if(!l)return s;for(const u of l){const f=t.ka.get(u);s=s.unionWith(f.view.Sa)}return s}}function kE(n){const e=ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=NE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Tk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_k.bind(null,e),e.La.p_=ok.bind(null,e.eventManager),e.La.Ja=lk.bind(null,e.eventManager),e}function Sk(n){const e=ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bk.bind(null,e),e}class bh{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yh(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return ID(this.persistence,new AD,e.initialUser,this.serializer)}Xa(e){return new mE(Wg.ri,this.serializer)}Za(e){return new MD}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}bh.provider={build:()=>new bh};class Ak extends bh{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){et(this.persistence.referenceDelegate instanceof _h);const r=this.persistence.referenceDelegate.garbageCollector;return new dD(r,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?bn.withCacheSize(this.cacheSizeBytes):bn.DEFAULT;return new mE(r=>_h.ri(r,t),this.serializer)}}class sg{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gb(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ek.bind(null,this.syncEngine),await rk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new sk}()}createDatastore(e){const t=Yh(e.databaseInfo.databaseId),r=function(l){return new BD(l)}(e.databaseInfo);return function(l,u,f,p){return new GD(l,u,f,p)}(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return function(r,s,l,u,f){return new KD(r,s,l,u,f)}(this.localStore,this.datastore,e.asyncQueue,t=>gb(this.syncEngine,t,0),function(){return ub.D()?new ub:new LD}())}createSyncEngine(e,t){return function(s,l,u,f,p,v,_){const E=new hk(s,l,u,f,p,v);return _&&(E.ja=!0),E}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(s){const l=ke(s);ge(Vs,"RemoteStore shutting down."),l.W_.add(5),await lu(l),l.z_.shutdown(),l.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}sg.provider={build:()=>new sg};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):Lr("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ha="FirestoreClient";class Rk{constructor(e,t,r,s,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=s,this.user=on.UNAUTHENTICATED,this.clientId=S1.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(r,async u=>{ge(Ha,"Received user=",u.uid),await this.authCredentialListener(u),this.user=u}),this.appCheckCredentials.start(r,u=>(ge(Ha,"Received new app check token=",u),this.appCheckCredentialListener(u,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Dr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const r=rv(t,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Tp(n,e){n.asyncQueue.verifyOperationInProgress(),ge(Ha,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(async s=>{r.isEqual(s)||(await pE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function yb(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Nk(n);ge(Ha,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>hb(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,s)=>hb(e.remoteStore,s)),n._onlineComponents=e}async function Nk(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ge(Ha,"Using user provided OfflineComponentProvider");try{await Tp(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(s){return s.name==="FirebaseError"?s.code===te.FAILED_PRECONDITION||s.code===te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(t))throw t;Go("Error using user provided cache. Falling back to memory cache: "+t),await Tp(n,new bh)}}else ge(Ha,"Using default OfflineComponentProvider"),await Tp(n,new Ak(void 0));return n._offlineComponents}async function jE(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ge(Ha,"Using user provided OnlineComponentProvider"),await yb(n,n._uninitializedComponentsProvider._online)):(ge(Ha,"Using default OnlineComponentProvider"),await yb(n,new sg))),n._onlineComponents}function Ik(n){return jE(n).then(e=>e.syncEngine)}async function wh(n){const e=await jE(n),t=e.eventManager;return t.onListen=fk.bind(null,e.syncEngine),t.onUnlisten=gk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=mk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=vk.bind(null,e.syncEngine),t}function Ck(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,f,p,v){const _=new dv({next:w=>{_.su(),u.enqueueAndForget(()=>sv(l,E));const T=w.docs.has(f);!T&&w.fromCache?v.reject(new pe(te.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&w.fromCache&&p&&p.source==="server"?v.reject(new pe(te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(w)},error:w=>v.reject(w)}),E=new lv(Fh(f.path),_,{includeMetadataChanges:!0,Ta:!0});return av(l,E)}(await wh(n),n.asyncQueue,e,t,r)),r.promise}function Dk(n,e,t={}){const r=new Dr;return n.asyncQueue.enqueueAndForget(async()=>function(l,u,f,p,v){const _=new dv({next:w=>{_.su(),u.enqueueAndForget(()=>sv(l,E)),w.fromCache&&p.source==="server"?v.reject(new pe(te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(w)},error:w=>v.reject(w)}),E=new lv(f,_,{includeMetadataChanges:!0,Ta:!0});return av(l,E)}(await wh(n),n.asyncQueue,e,t,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PE(n,e,t){if(!t)throw new pe(te.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function kk(n,e,t,r){if(e===!0&&r===!0)throw new pe(te.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function xb(n){if(!Te.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function bb(n){if(Te.isDocumentKey(n))throw new pe(te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Xh(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ie()}function An(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new pe(te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Xh(n);throw new pe(te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function jk(n,e){if(e<=0)throw new pe(te.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="firestore.googleapis.com",wb=!0;class Eb{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new pe(te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=ME,this.ssl=wb}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:wb;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=fE;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<cD)throw new pe(te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}kk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(l){if(l.timeoutSeconds!==void 0){if(isNaN(l.timeoutSeconds))throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (must not be NaN)`);if(l.timeoutSeconds<5)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (minimum allowed value is 5)`);if(l.timeoutSeconds>30)throw new pe(te.INVALID_ARGUMENT,`invalid long polling timeout: ${l.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Jh{constructor(e,t,r,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Eb({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new pe(te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new pe(te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Eb(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new BC;switch(r.type){case"firstParty":return new GC(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new pe(te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const r=_b.get(t);r&&(ge("ComponentProvider","Removing Datastore"),_b.delete(t),r.terminate())}(this),Promise.resolve()}}function Ok(n,e,t,r={}){var s;const l=(n=An(n,Jh))._getSettings(),u=Object.assign(Object.assign({},l),{emulatorOptions:n._getEmulatorOptions()}),f=`${e}:${t}`;l.host!==ME&&l.host!==f&&Go("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p=Object.assign(Object.assign({},l),{host:f,ssl:!1,emulatorOptions:r});if(!Ps(p,u)&&(n._setSettings(p),r.mockUserToken)){let v,_;if(typeof r.mockUserToken=="string")v=r.mockUserToken,_=on.MOCK_USER;else{v=Cw(r.mockUserToken,(s=n._app)===null||s===void 0?void 0:s.options.projectId);const E=r.mockUserToken.sub||r.mockUserToken.user_id;if(!E)throw new pe(te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new on(E)}n._authCredentials=new FC(new E1(v,_))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qr{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new qr(this.firestore,e,this._query)}}class cn{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Pa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cn(this.firestore,e,this._key)}}class Pa extends qr{constructor(e,t,r){super(e,t,Fh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cn(this.firestore,null,new Te(e))}withConverter(e){return new Pa(this.firestore,e,this._path)}}function _i(n,e,...t){if(n=it(n),PE("collection","path",e),n instanceof Jh){const r=ut.fromString(e,...t);return bb(r),new Pa(n,null,r)}{if(!(n instanceof cn||n instanceof Pa))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return bb(r),new Pa(n.firestore,null,r)}}function Mn(n,e,...t){if(n=it(n),arguments.length===1&&(e=S1.newId()),PE("doc","path",e),n instanceof Jh){const r=ut.fromString(e,...t);return xb(r),new cn(n,null,new Te(r))}{if(!(n instanceof cn||n instanceof Pa))throw new pe(te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(ut.fromString(e,...t));return xb(r),new cn(n.firestore,n instanceof Pa?n.converter:null,new Te(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tb="AsyncQueue";class Sb{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new vE(this,"async_queue_retry"),this.Su=()=>{const r=Ep();r&&ge(Tb,"Visibility state changed to "+r.visibilityState),this.a_.t_()},this.bu=e;const t=Ep();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Su)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=Ep();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Su)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Dr;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!ol(e))throw e;ge(Tb,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.bu.then(()=>(this.pu=!0,e().catch(r=>{this.gu=r,this.pu=!1;const s=function(u){let f=u.message||"";return u.stack&&(f=u.stack.includes(u.message)?u.stack:u.message+`
`+u.stack),f}(r);throw Lr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.pu=!1,r))));return this.bu=t,t}enqueueAfterDelay(e,t,r){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const s=iv.createAndSchedule(this,e,t,r,l=>this.Fu(l));return this.fu.push(s),s}Du(){this.gu&&Ie()}verifyOperationInProgress(){}async Mu(){let e;do e=this.bu,await e;while(e!==this.bu)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function Ab(n){return function(t,r){if(typeof t!="object"||t===null)return!1;const s=t;for(const l of r)if(l in s&&typeof s[l]=="function")return!0;return!1}(n,["next","error","complete"])}class Vr extends Jh{constructor(e,t,r,s){super(e,t,r,s),this.type="firestore",this._queue=new Sb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Sb(e),this._firestoreClient=void 0,await e}}}function Pk(n,e){const t=typeof n=="object"?n:Ph(),r=typeof n=="string"?n:mh,s=tu(t,"firestore").getImmediate({identifier:r});if(!s._initialized){const l=Ag("firestore");l&&Ok(s,...l)}return s}function Zh(n){if(n._terminated)throw new pe(te.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Mk(n),n._firestoreClient}function Mk(n){var e,t,r;const s=n._freezeSettings(),l=function(f,p,v,_){return new s4(f,p,v,_.host,_.ssl,_.experimentalForceLongPolling,_.experimentalAutoDetectLongPolling,OE(_.experimentalLongPollingOptions),_.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,s);n._componentsProvider||!((t=s.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),n._firestoreClient=new Rk(n._authCredentials,n._appCheckCredentials,n._queue,l,n._componentsProvider&&function(f){const p=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(p),_online:p}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Xo(tn.fromBase64String(e))}catch(t){throw new pe(te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Xo(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new pe(te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new en(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new pe(te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new pe(te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Me(this._lat,e._lat)||Me(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fv{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let l=0;l<r.length;++l)if(r[l]!==s[l])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=/^__.*__$/;class Uk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new Qa(e,this.data,this.fieldMask,t,this.fieldTransforms):new su(e,this.data,t,this.fieldTransforms)}}class LE{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Qa(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function UE(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ie()}}class mv{constructor(e,t,r,s,l,u){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=s,l===void 0&&this.Bu(),this.fieldTransforms=l||[],this.fieldMask=u||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new mv(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.$u(e),s}Uu(e){var t;const r=(t=this.path)===null||t===void 0?void 0:t.child(e),s=this.ku({path:r,Qu:!1});return s.Bu(),s}Ku(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return Eh(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(UE(this.Lu)&&Lk.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Vk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Yh(e)}ju(e,t,r,s=!1){return new mv({Lu:e,methodName:t,zu:r,path:en.emptyPath(),Qu:!1,Gu:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function tf(n){const e=n._freezeSettings(),t=Yh(n._databaseId);return new Vk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function VE(n,e,t,r,s,l={}){const u=n.ju(l.merge||l.mergeFields?2:0,e,t,s);vv("Data must be an object, but it was:",u,r);const f=zE(r,u);let p,v;if(l.merge)p=new On(u.fieldMask),v=u.fieldTransforms;else if(l.mergeFields){const _=[];for(const E of l.mergeFields){const w=og(e,E,t);if(!u.contains(w))throw new pe(te.INVALID_ARGUMENT,`Field '${w}' is specified in your field mask but missing from your input data.`);FE(_,w)||_.push(w)}p=new On(_),v=u.fieldTransforms.filter(E=>p.covers(E.field))}else p=null,v=u.fieldTransforms;return new Uk(new Tn(f),p,v)}class nf extends uu{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof nf}}class pv extends uu{_toFieldTransform(e){return new eE(e.path,new Bc)}isEqual(e){return e instanceof pv}}class gv extends uu{constructor(e,t){super(e),this.Ju=t}_toFieldTransform(e){const t=new Hc(e.serializer,Q1(e.serializer,this.Ju));return new eE(e.path,t)}isEqual(e){return e instanceof gv&&this.Ju===e.Ju}}function zk(n,e,t,r){const s=n.ju(1,e,t);vv("Data must be an object, but it was:",s,r);const l=[],u=Tn.empty();Ya(r,(p,v)=>{const _=yv(e,p,t);v=it(v);const E=s.Uu(_);if(v instanceof nf)l.push(_);else{const w=du(v,E);w!=null&&(l.push(_),u.set(_,w))}});const f=new On(l);return new LE(u,f,s.fieldTransforms)}function Bk(n,e,t,r,s,l){const u=n.ju(1,e,t),f=[og(e,r,t)],p=[s];if(l.length%2!=0)throw new pe(te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let w=0;w<l.length;w+=2)f.push(og(e,l[w])),p.push(l[w+1]);const v=[],_=Tn.empty();for(let w=f.length-1;w>=0;--w)if(!FE(v,f[w])){const T=f[w];let I=p[w];I=it(I);const L=u.Uu(T);if(I instanceof nf)v.push(T);else{const P=du(I,L);P!=null&&(v.push(T),_.set(T,P))}}const E=new On(v);return new LE(_,E,u.fieldTransforms)}function Fk(n,e,t,r=!1){return du(t,n.ju(r?4:3,e))}function du(n,e){if(BE(n=it(n)))return vv("Unsupported field value:",e,n),zE(n,e);if(n instanceof uu)return function(r,s){if(!UE(s.Lu))throw s.Wu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Wu(`${r._methodName}() is not currently supported inside arrays`);const l=r._toFieldTransform(s);l&&s.fieldTransforms.push(l)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(r,s){const l=[];let u=0;for(const f of r){let p=du(f,s.Ku(u));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),u++}return{arrayValue:{values:l}}}(n,e)}return function(r,s){if((r=it(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Q1(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const l=Tt.fromDate(r);return{timestampValue:yh(s.serializer,l)}}if(r instanceof Tt){const l=new Tt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:yh(s.serializer,l)}}if(r instanceof hv)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Xo)return{bytesValue:sE(s.serializer,r._byteString)};if(r instanceof cn){const l=s.databaseId,u=r.firestore._databaseId;if(!u.isEqual(l))throw s.Wu(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:Yg(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof fv)return function(u,f){return{mapValue:{fields:{[j1]:{stringValue:O1},[ph]:{arrayValue:{values:u.toArray().map(v=>{if(typeof v!="number")throw f.Wu("VectorValues must only contain numeric values.");return Hg(f.serializer,v)})}}}}}}(r,s);throw s.Wu(`Unsupported field value: ${Xh(r)}`)}(n,e)}function zE(n,e){const t={};return R1(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ya(n,(r,s)=>{const l=du(s,e.qu(r));l!=null&&(t[r]=l)}),{mapValue:{fields:t}}}function BE(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Tt||n instanceof hv||n instanceof Xo||n instanceof cn||n instanceof uu||n instanceof fv)}function vv(n,e,t){if(!BE(t)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(t)){const r=Xh(t);throw r==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+r)}}function og(n,e,t){if((e=it(e))instanceof ef)return e._internalPath;if(typeof e=="string")return yv(n,e);throw Eh("Field path arguments must be of type string or ",n,!1,void 0,t)}const qk=new RegExp("[~\\*/\\[\\]]");function yv(n,e,t){if(e.search(qk)>=0)throw Eh(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ef(...e.split("."))._internalPath}catch{throw Eh(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Eh(n,e,t,r,s){const l=r&&!r.isEmpty(),u=s!==void 0;let f=`Function ${e}() called with invalid data`;t&&(f+=" (via `toFirestore()`)"),f+=". ";let p="";return(l||u)&&(p+=" (found",l&&(p+=` in field ${r}`),u&&(p+=` in document ${s}`),p+=")"),new pe(te.INVALID_ARGUMENT,f+n+p)}function FE(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t,r,s,l){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=s,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new cn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Hk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rf("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Hk extends qE{data(){return super.data()}}function rf(n,e){return typeof e=="string"?yv(n,e):e instanceof ef?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new pe(te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class _v{}class xv extends _v{}function Ma(n,e,...t){let r=[];e instanceof _v&&r.push(e),r=r.concat(t),function(l){const u=l.filter(p=>p instanceof bv).length,f=l.filter(p=>p instanceof af).length;if(u>1||u>0&&f>0)throw new pe(te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)n=s._apply(n);return n}class af extends xv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new af(e,t,r)}_apply(e){const t=this._parse(e);return GE(e._query,t),new qr(e.firestore,e.converter,Xp(e._query,t))}_parse(e){const t=tf(e.firestore);return function(l,u,f,p,v,_,E){let w;if(v.isKeyField()){if(_==="array-contains"||_==="array-contains-any")throw new pe(te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${_}' queries on documentId().`);if(_==="in"||_==="not-in"){Nb(E,_);const I=[];for(const L of E)I.push(Rb(p,l,L));w={arrayValue:{values:I}}}else w=Rb(p,l,E)}else _!=="in"&&_!=="not-in"&&_!=="array-contains-any"||Nb(E,_),w=Fk(f,u,E,_==="in"||_==="not-in");return Ot.create(v,_,w)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function vi(n,e,t){const r=e,s=rf("where",n);return af._create(s,r,t)}class bv extends _v{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new bv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return t.length===1?t[0]:wi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(s,l){let u=s;const f=l.getFlattenedFilters();for(const p of f)GE(u,p),u=Xp(u,p)}(e._query,t),new qr(e.firestore,e.converter,Xp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class wv extends xv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new wv(e,t)}_apply(e){const t=function(s,l,u){if(s.startAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new pe(te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zc(l,u)}(e._query,this._field,this._direction);return new qr(e.firestore,e.converter,function(s,l){const u=s.explicitOrderBy.concat([l]);return new ll(s.path,s.collectionGroup,u,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,t))}}function Gc(n,e="asc"){const t=e,r=rf("orderBy",n);return wv._create(r,t)}class Ev extends xv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new Ev(e,t,r)}_apply(e){return new qr(e.firestore,e.converter,vh(e._query,this._limit,this._limitType))}}function lg(n){return jk("limit",n),Ev._create("limit",n,"F")}function Rb(n,e,t){if(typeof(t=it(t))=="string"){if(t==="")throw new pe(te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!F1(e)&&t.indexOf("/")!==-1)throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(ut.fromString(t));if(!Te.isDocumentKey(r))throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fx(n,new Te(r))}if(t instanceof cn)return Fx(n,t._key);throw new pe(te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Xh(t)}.`)}function Nb(n,e){if(!Array.isArray(n)||n.length===0)throw new pe(te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function GE(n,e){const t=function(s,l){for(const u of s)for(const f of u.getFlattenedFilters())if(l.indexOf(f.op)>=0)return f.op;return null}(n.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new pe(te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Gk{convertValue(e,t="none"){switch(Fa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Nt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ba(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ie()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ya(e,(s,l)=>{r[s]=this.convertValue(l,t)}),r}convertVectorValue(e){var t,r,s;const l=(s=(r=(t=e.fields)===null||t===void 0?void 0:t[ph].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(u=>Nt(u.doubleValue));return new fv(l)}convertGeoPoint(e){return new hv(Nt(e.latitude),Nt(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Bh(e);return r==null?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Lc(e));default:return null}}convertTimestamp(e){const t=za(e);return new Tt(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=ut.fromString(e);et(hE(r));const s=new Uc(r.get(1),r.get(3)),l=new Te(r.popFirst(5));return s.isEqual(t)||Lr(`Document ${l} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class KE extends qE{constructor(e,t,r,s,l,u){super(e,t,r,s,u),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new th(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(rf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class th extends KE{data(e={}){return super.data(e)}}class YE{constructor(e,t,r,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Tc(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new th(this._firestore,this._userDataWriter,r.key,r,new Tc(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new pe(te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(s,l){if(s._snapshot.oldDocs.isEmpty()){let u=0;return s._snapshot.docChanges.map(f=>{const p=new th(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Tc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);return f.doc,{type:"added",doc:p,oldIndex:-1,newIndex:u++}})}{let u=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(f=>l||f.type!==3).map(f=>{const p=new th(s._firestore,s._userDataWriter,f.doc.key,f.doc,new Tc(s._snapshot.mutatedKeys.has(f.doc.key),s._snapshot.fromCache),s.query.converter);let v=-1,_=-1;return f.type!==0&&(v=u.indexOf(f.doc.key),u=u.delete(f.doc.key)),f.type!==1&&(u=u.add(f.doc),_=u.indexOf(f.doc.key)),{type:$k(f.type),doc:p,oldIndex:v,newIndex:_}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function $k(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ie()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(n){n=An(n,cn);const e=An(n.firestore,Vr);return Ck(Zh(e),n._key).then(t=>XE(e,n,t))}class Tv extends Gk{constructor(e){super(),this.firestore=e}convertBytes(e){return new Xo(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cn(this.firestore,null,t)}}function La(n){n=An(n,qr);const e=An(n.firestore,Vr),t=Zh(e),r=new Tv(e);return HE(n._query),Dk(t,n._query).then(s=>new YE(e,r,n,s))}function Th(n,e,t){n=An(n,cn);const r=An(n.firestore,Vr),s=$E(n.converter,e,t);return sf(r,[VE(tf(r),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,si.none())])}function Kc(n,e,t,...r){n=An(n,cn);const s=An(n.firestore,Vr),l=tf(s);let u;return u=typeof(e=it(e))=="string"||e instanceof ef?Bk(l,"updateDoc",n._key,e,t,r):zk(l,"updateDoc",n._key,e),sf(s,[u.toMutation(n._key,si.exists(!0))])}function Ib(n){return sf(An(n.firestore,Vr),[new Gg(n._key,si.none())])}function QE(n,e){const t=An(n.firestore,Vr),r=Mn(n),s=$E(n.converter,e);return sf(t,[VE(tf(n.firestore),"addDoc",r._key,s,n.converter!==null,{}).toMutation(r._key,si.exists(!1))]).then(()=>r)}function WE(n,...e){var t,r,s;n=it(n);let l={includeMetadataChanges:!1,source:"default"},u=0;typeof e[u]!="object"||Ab(e[u])||(l=e[u],u++);const f={includeMetadataChanges:l.includeMetadataChanges,source:l.source};if(Ab(e[u])){const E=e[u];e[u]=(t=E.next)===null||t===void 0?void 0:t.bind(E),e[u+1]=(r=E.error)===null||r===void 0?void 0:r.bind(E),e[u+2]=(s=E.complete)===null||s===void 0?void 0:s.bind(E)}let p,v,_;if(n instanceof cn)v=An(n.firestore,Vr),_=Fh(n._key.path),p={next:E=>{e[u]&&e[u](XE(v,n,E))},error:e[u+1],complete:e[u+2]};else{const E=An(n,qr);v=An(E.firestore,Vr),_=E._query;const w=new Tv(v);p={next:T=>{e[u]&&e[u](new YE(v,w,E,T))},error:e[u+1],complete:e[u+2]},HE(n._query)}return function(w,T,I,L){const P=new dv(L),V=new lv(T,P,I);return w.asyncQueue.enqueueAndForget(async()=>av(await wh(w),V)),()=>{P.su(),w.asyncQueue.enqueueAndForget(async()=>sv(await wh(w),V))}}(Zh(v),_,f,p)}function sf(n,e){return function(r,s){const l=new Dr;return r.asyncQueue.enqueueAndForget(async()=>yk(await Ik(r),s,l)),l.promise}(Zh(n),e)}function XE(n,e,t){const r=t.docs.get(e._key),s=new Tv(n);return new KE(n,s,e._key,r,new Tc(t.hasPendingWrites,t.fromCache),e.converter)}function Yc(){return new pv("serverTimestamp")}function Kk(n){return new gv("increment",n)}(function(e,t=!0){(function(s){al=s})(Bs),Ua(new Or("firestore",(r,{instanceIdentifier:s,options:l})=>{const u=r.getProvider("app").getImmediate(),f=new Vr(new qC(r.getProvider("auth-internal")),new $C(u,r.getProvider("app-check-internal")),function(v,_){if(!Object.prototype.hasOwnProperty.apply(v.options,["projectId"]))throw new pe(te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Uc(v.options.projectId,_)}(u,s),u);return l=Object.assign({useFetchStreams:t},l),f._setSettings(l),f},"PUBLIC").setMultipleInstances(!0)),ai(Cx,Dx,e),ai(Cx,Dx,"esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JE="firebasestorage.googleapis.com",ZE="storageBucket",Yk=2*60*1e3,Qk=10*60*1e3,Wk=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t extends Si{constructor(e,t,r=0){super(Sp(e),`Firebase Storage: ${t} (${Sp(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_t.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Sp(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var dt;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(dt||(dt={}));function Sp(n){return"storage/"+n}function Sv(){const n="An unknown error occurred, please check the error payload for server response.";return new _t(dt.UNKNOWN,n)}function Xk(n){return new _t(dt.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}function Jk(n){return new _t(dt.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Zk(){const n="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new _t(dt.UNAUTHENTICATED,n)}function ej(){return new _t(dt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function tj(n){return new _t(dt.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}function eT(){return new _t(dt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function tT(){return new _t(dt.CANCELED,"User canceled the upload/download.")}function nj(n){return new _t(dt.INVALID_URL,"Invalid URL '"+n+"'.")}function ij(n){return new _t(dt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function rj(){return new _t(dt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ZE+"' property when initializing the app?")}function nT(){return new _t(dt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function aj(){return new _t(dt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function sj(){return new _t(dt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oj(n){return new _t(dt.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function cg(n){return new _t(dt.INVALID_ARGUMENT,n)}function iT(){return new _t(dt.APP_DELETED,"The Firebase app was deleted.")}function lj(n){return new _t(dt.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Dc(n,e){return new _t(dt.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function gc(n){throw new _t(dt.INTERNAL_ERROR,"Internal error: "+n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Pn.makeFromUrl(e,t)}catch{return new Pn(e,"")}if(r.path==="")return r;throw ij(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function l(ee){ee.path.charAt(ee.path.length-1)==="/"&&(ee.path_=ee.path_.slice(0,-1))}const u="(/(.*))?$",f=new RegExp("^gs://"+s+u,"i"),p={bucket:1,path:3};function v(ee){ee.path_=decodeURIComponent(ee.path)}const _="v[A-Za-z0-9_]+",E=t.replace(/[.]/g,"\\."),w="(/([^?#]*).*)?$",T=new RegExp(`^https?://${E}/${_}/b/${s}/o${w}`,"i"),I={bucket:1,path:3},L=t===JE?"(?:storage.googleapis.com|storage.cloud.google.com)":t,P="([^?#]*)",V=new RegExp(`^https?://${L}/${s}/${P}`,"i"),H=[{regex:f,indices:p,postModify:l},{regex:T,indices:I,postModify:v},{regex:V,indices:{bucket:1,path:2},postModify:v}];for(let ee=0;ee<H.length;ee++){const X=H[ee],se=X.regex.exec(e);if(se){const M=se[X.indices.bucket];let N=se[X.indices.path];N||(N=""),r=new Pn(M,N),X.postModify(r);break}}if(r==null)throw nj(e);return r}}class cj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uj(n,e,t){let r=1,s=null,l=null,u=!1,f=0;function p(){return f===2}let v=!1;function _(...P){v||(v=!0,e.apply(null,P))}function E(P){s=setTimeout(()=>{s=null,n(T,p())},P)}function w(){l&&clearTimeout(l)}function T(P,...V){if(v){w();return}if(P){w(),_.call(null,P,...V);return}if(p()||u){w(),_.call(null,P,...V);return}r<64&&(r*=2);let H;f===1?(f=2,H=0):H=(r+Math.random())*1e3,E(H)}let I=!1;function L(P){I||(I=!0,w(),!v&&(s!==null?(P||(f=2),clearTimeout(s),E(0)):P||(f=1)))}return E(0),l=setTimeout(()=>{u=!0,L(!0)},t),L}function dj(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hj(n){return n!==void 0}function fj(n){return typeof n=="function"}function mj(n){return typeof n=="object"&&!Array.isArray(n)}function of(n){return typeof n=="string"||n instanceof String}function Cb(n){return Av()&&n instanceof Blob}function Av(){return typeof Blob<"u"}function Db(n,e,t,r){if(r<e)throw cg(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw cg(`Invalid value for '${n}'. Expected ${t} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(n,e,t){let r=e;return t==null&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function rT(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var Os;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Os||(Os={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aT(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,l=e.indexOf(n)!==-1;return t||s||l}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,t,r,s,l,u,f,p,v,_,E,w=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=l,this.additionalRetryCodes_=u,this.callback_=f,this.errorCallback_=p,this.timeout_=v,this.progressCallback_=_,this.connectionFactory_=E,this.retry=w,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,I)=>{this.resolve_=T,this.reject_=I,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ud(!1,null,!0));return}const l=this.connectionFactory_();this.pendingConnection_=l;const u=f=>{const p=f.loaded,v=f.lengthComputable?f.total:-1;this.progressCallback_!==null&&this.progressCallback_(p,v)};this.progressCallback_!==null&&l.addUploadProgressListener(u),l.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&l.removeUploadProgressListener(u),this.pendingConnection_=null;const f=l.getErrorCode()===Os.NO_ERROR,p=l.getStatus();if(!f||aT(p,this.additionalRetryCodes_)&&this.retry){const _=l.getErrorCode()===Os.ABORT;r(!1,new Ud(!1,null,_));return}const v=this.successCodes_.indexOf(p)!==-1;r(!0,new Ud(v,l))})},t=(r,s)=>{const l=this.resolve_,u=this.reject_,f=s.connection;if(s.wasSuccessCode)try{const p=this.callback_(f,f.getResponse());hj(p)?l(p):l()}catch(p){u(p)}else if(f!==null){const p=Sv();p.serverResponse=f.getErrorText(),this.errorCallback_?u(this.errorCallback_(f,p)):u(p)}else if(s.canceled){const p=this.appDelete_?iT():tT();u(p)}else{const p=eT();u(p)}};this.canceled_?t(!1,new Ud(!1,null,!0)):this.backoffId_=uj(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&dj(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ud{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function gj(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function vj(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function yj(n,e){e&&(n["X-Firebase-GMPID"]=e)}function _j(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function xj(n,e,t,r,s,l,u=!0){const f=rT(n.urlParams),p=n.url+f,v=Object.assign({},n.headers);return yj(v,e),gj(v,t),vj(v,l),_j(v,r),new pj(p,n.method,v,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,u)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wj(...n){const e=bj();if(e!==void 0){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}else{if(Av())return new Blob(n);throw new _t(dt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function Ej(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(n){if(typeof atob>"u")throw oj("base-64");return atob(n)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yi={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Ap{constructor(e,t){this.data=e,this.contentType=t||null}}function sT(n,e){switch(n){case yi.RAW:return new Ap(oT(e));case yi.BASE64:case yi.BASE64URL:return new Ap(lT(n,e));case yi.DATA_URL:return new Ap(Aj(e),Rj(e))}throw Sv()}function oT(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(t<n.length-1&&(n.charCodeAt(t+1)&64512)===56320))e.push(239,191,189);else{const l=r,u=n.charCodeAt(++t);r=65536|(l&1023)<<10|u&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Sj(n){let e;try{e=decodeURIComponent(n)}catch{throw Dc(yi.DATA_URL,"Malformed data URL.")}return oT(e)}function lT(n,e){switch(n){case yi.BASE64:{const s=e.indexOf("-")!==-1,l=e.indexOf("_")!==-1;if(s||l)throw Dc(n,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case yi.BASE64URL:{const s=e.indexOf("+")!==-1,l=e.indexOf("/")!==-1;if(s||l)throw Dc(n,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=Tj(e)}catch(s){throw s.message.includes("polyfill")?s:Dc(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let s=0;s<t.length;s++)r[s]=t.charCodeAt(s);return r}class cT{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(t===null)throw Dc(yi.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;r!=null&&(this.base64=Nj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Aj(n){const e=new cT(n);return e.base64?lT(yi.BASE64,e.rest):Sj(e.rest)}function Rj(n){return new cT(n).contentType}function Nj(n,e){return n.length>=e.length?n.substring(n.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,t){let r=0,s="";Cb(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,t){if(Cb(this.data_)){const r=this.data_,s=Ej(r,e,t);return s===null?null:new Sr(s)}else{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Sr(r,!0)}}static getBlob(...e){if(Av()){const t=e.map(r=>r instanceof Sr?r.data_:r);return new Sr(wj.apply(null,t))}else{const t=e.map(u=>of(u)?sT(yi.RAW,u).data:u.data_);let r=0;t.forEach(u=>{r+=u.byteLength});const s=new Uint8Array(r);let l=0;return t.forEach(u=>{for(let f=0;f<u.length;f++)s[l++]=u[f]}),new Sr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uT(n){let e;try{e=JSON.parse(n)}catch{return null}return mj(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ij(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Cj(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return n.length===0?t:n+"/"+t}function dT(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dj(n,e){return e}class gn{constructor(e,t,r,s){this.server=e,this.local=t||e,this.writable=!!r,this.xform=s||Dj}}let Vd=null;function kj(n){return!of(n)||n.length<2?n:dT(n)}function Rv(){if(Vd)return Vd;const n=[];n.push(new gn("bucket")),n.push(new gn("generation")),n.push(new gn("metageneration")),n.push(new gn("name","fullPath",!0));function e(l,u){return kj(u)}const t=new gn("name");t.xform=e,n.push(t);function r(l,u){return u!==void 0?Number(u):u}const s=new gn("size");return s.xform=r,n.push(s),n.push(new gn("timeCreated")),n.push(new gn("updated")),n.push(new gn("md5Hash",null,!0)),n.push(new gn("cacheControl",null,!0)),n.push(new gn("contentDisposition",null,!0)),n.push(new gn("contentEncoding",null,!0)),n.push(new gn("contentLanguage",null,!0)),n.push(new gn("contentType",null,!0)),n.push(new gn("metadata","customMetadata",!0)),Vd=n,Vd}function jj(n,e){function t(){const r=n.bucket,s=n.fullPath,l=new Pn(r,s);return e._makeStorageReference(l)}Object.defineProperty(n,"ref",{get:t})}function Oj(n,e,t){const r={};r.type="file";const s=t.length;for(let l=0;l<s;l++){const u=t[l];r[u.local]=u.xform(r,e[u.server])}return jj(r,n),r}function hT(n,e,t){const r=uT(e);return r===null?null:Oj(n,r,t)}function Pj(n,e,t,r){const s=uT(e);if(s===null||!of(s.downloadTokens))return null;const l=s.downloadTokens;if(l.length===0)return null;const u=encodeURIComponent;return l.split(",").map(v=>{const _=n.bucket,E=n.fullPath,w="/b/"+u(_)+"/o/"+u(E),T=ul(w,t,r),I=rT({alt:"media",token:v});return T+I})[0]}function fT(n,e){const t={},r=e.length;for(let s=0;s<r;s++){const l=e[s];l.writable&&(t[l.server]=n[l.local])}return JSON.stringify(t)}class Gs{constructor(e,t,r,s){this.url=e,this.method=t,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kr(n){if(!n)throw Sv()}function Nv(n,e){function t(r,s){const l=hT(n,s,e);return kr(l!==null),l}return t}function Mj(n,e){function t(r,s){const l=hT(n,s,e);return kr(l!==null),Pj(l,s,n.host,n._protocol)}return t}function hu(n){function e(t,r){let s;return t.getStatus()===401?t.getErrorText().includes("Firebase App Check token is invalid")?s=ej():s=Zk():t.getStatus()===402?s=Jk(n.bucket):t.getStatus()===403?s=tj(n.path):s=r,s.status=t.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Iv(n){const e=hu(n);function t(r,s){let l=e(r,s);return r.getStatus()===404&&(l=Xk(n.path)),l.serverResponse=s.serverResponse,l}return t}function Lj(n,e,t){const r=e.fullServerUrl(),s=ul(r,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,f=new Gs(s,l,Nv(n,t),u);return f.errorHandler=Iv(e),f}function Uj(n,e,t){const r=e.fullServerUrl(),s=ul(r,n.host,n._protocol),l="GET",u=n.maxOperationRetryTime,f=new Gs(s,l,Mj(n,t),u);return f.errorHandler=Iv(e),f}function Vj(n,e){const t=e.fullServerUrl(),r=ul(t,n.host,n._protocol),s="DELETE",l=n.maxOperationRetryTime;function u(p,v){}const f=new Gs(r,s,u,l);return f.successCodes=[200,204],f.errorHandler=Iv(e),f}function zj(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}function mT(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=zj(null,e)),r}function pT(n,e,t,r,s){const l=e.bucketOnlyServerUrl(),u={"X-Goog-Upload-Protocol":"multipart"};function f(){let H="";for(let ee=0;ee<2;ee++)H=H+Math.random().toString().slice(2);return H}const p=f();u["Content-Type"]="multipart/related; boundary="+p;const v=mT(e,r,s),_=fT(v,t),E="--"+p+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+_+`\r
--`+p+`\r
Content-Type: `+v.contentType+`\r
\r
`,w=`\r
--`+p+"--",T=Sr.getBlob(E,r,w);if(T===null)throw nT();const I={name:v.fullPath},L=ul(l,n.host,n._protocol),P="POST",V=n.maxUploadRetryTime,Y=new Gs(L,P,Nv(n,t),V);return Y.urlParams=I,Y.headers=u,Y.body=T.uploadData(),Y.errorHandler=hu(e),Y}class Sh{constructor(e,t,r,s){this.current=e,this.total=t,this.finalized=!!r,this.metadata=s||null}}function Cv(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{kr(!1)}return kr(!!t&&(e||["active"]).indexOf(t)!==-1),t}function Bj(n,e,t,r,s){const l=e.bucketOnlyServerUrl(),u=mT(e,r,s),f={name:u.fullPath},p=ul(l,n.host,n._protocol),v="POST",_={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":u.contentType,"Content-Type":"application/json; charset=utf-8"},E=fT(u,t),w=n.maxUploadRetryTime;function T(L){Cv(L);let P;try{P=L.getResponseHeader("X-Goog-Upload-URL")}catch{kr(!1)}return kr(of(P)),P}const I=new Gs(p,v,T,w);return I.urlParams=f,I.headers=_,I.body=E,I.errorHandler=hu(e),I}function Fj(n,e,t,r){const s={"X-Goog-Upload-Command":"query"};function l(v){const _=Cv(v,["active","final"]);let E=null;try{E=v.getResponseHeader("X-Goog-Upload-Size-Received")}catch{kr(!1)}E||kr(!1);const w=Number(E);return kr(!isNaN(w)),new Sh(w,r.size(),_==="final")}const u="POST",f=n.maxUploadRetryTime,p=new Gs(t,u,l,f);return p.headers=s,p.errorHandler=hu(e),p}const kb=256*1024;function qj(n,e,t,r,s,l,u,f){const p=new Sh(0,0);if(u?(p.current=u.current,p.total=u.total):(p.current=0,p.total=r.size()),r.size()!==p.total)throw aj();const v=p.total-p.current;let _=v;s>0&&(_=Math.min(_,s));const E=p.current,w=E+_;let T="";_===0?T="finalize":v===_?T="upload, finalize":T="upload";const I={"X-Goog-Upload-Command":T,"X-Goog-Upload-Offset":`${p.current}`},L=r.slice(E,w);if(L===null)throw nT();function P(ee,X){const se=Cv(ee,["active","final"]),M=p.current+_,N=r.size();let A;return se==="final"?A=Nv(e,l)(ee,X):A=null,new Sh(M,N,se==="final",A)}const V="POST",Y=e.maxUploadRetryTime,H=new Gs(t,V,P,Y);return H.headers=I,H.body=L.uploadData(),H.progressCallback=f||null,H.errorHandler=hu(n),H}const wn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Rp(n){switch(n){case"running":case"pausing":case"canceling":return wn.RUNNING;case"paused":return wn.PAUSED;case"success":return wn.SUCCESS;case"canceled":return wn.CANCELED;case"error":return wn.ERROR;default:return wn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hj{constructor(e,t,r){if(fj(e)||t!=null||r!=null)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const l=e;this.next=l.next,this.error=l.error,this.complete=l.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Po(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class Gj{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Os.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Os.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Os.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,s){if(this.sent_)throw gc("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),s!==void 0)for(const l in s)s.hasOwnProperty(l)&&this.xhr_.setRequestHeader(l,s[l].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw gc("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw gc("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw gc("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw gc("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class $j extends Gj{initXhr(){this.xhr_.responseType="text"}}function Ca(){return new $j}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Rv(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=s=>{if(this._request=void 0,this._chunkMultiplier=1,s._codeEquals(dt.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const l=this.isExponentialBackoffExpired();if(aT(s.status,[]))if(l)s=eT();else{this.sleepTime=Math.max(this.sleepTime*2,Wk),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=s,this._transition("error")}},this._metadataErrorHandler=s=>{this._request=void 0,s._codeEquals(dt.CANCELED)?this.completeTransitions_():(this._error=s,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((s,l)=>{this._resolve=s,this._reject=l,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,t)=>{const r=Bj(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ca,e,t);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._uploadUrl=l,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const s=Fj(this._ref.storage,this._ref._location,e,this._blob),l=this._ref.storage._makeRequest(s,Ca,t,r);this._request=l,l.getPromise().then(u=>{u=u,this._request=void 0,this._updateProgress(u.current),this._needToFetchStatus=!1,u.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=kb*this._chunkMultiplier,t=new Sh(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((s,l)=>{let u;try{u=qj(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(p){this._error=p,this._transition("error");return}const f=this._ref.storage._makeRequest(u,Ca,s,l,!1);this._request=f,f.getPromise().then(p=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(p.current),p.finalized?(this._metadata=p.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){kb*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=Lj(this._ref.storage,this._ref._location,this._mappings),s=this._ref.storage._makeRequest(r,Ca,e,t);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=pT(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),s=this._ref.storage._makeRequest(r,Ca,e,t);this._request=s,s.getPromise().then(l=>{this._request=void 0,this._metadata=l,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t=this._state==="paused";this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=tT(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Rp(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,s){const l=new Hj(t||void 0,r||void 0,s||void 0);return this._addObserver(l),()=>{this._removeObserver(l)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);t!==-1&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Rp(this._state)){case wn.SUCCESS:Po(this._resolve.bind(null,this.snapshot))();break;case wn.CANCELED:case wn.ERROR:const t=this._reject;Po(t.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Rp(this._state)){case wn.RUNNING:case wn.PAUSED:e.next&&Po(e.next.bind(e,this.snapshot))();break;case wn.SUCCESS:e.complete&&Po(e.complete.bind(e))();break;case wn.CANCELED:case wn.ERROR:e.error&&Po(e.error.bind(e,this._error))();break;default:e.error&&Po(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs{constructor(e,t){this._service=e,t instanceof Pn?this._location=t:this._location=Pn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new zs(e,t)}get root(){const e=new Pn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return dT(this._location.path)}get storage(){return this._service}get parent(){const e=Ij(this._location.path);if(e===null)return null;const t=new Pn(this._location.bucket,e);return new zs(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw lj(e)}}function Yj(n,e,t){n._throwIfRoot("uploadBytes");const r=pT(n.storage,n._location,Rv(),new Sr(e,!0),t);return n.storage.makeRequestWithTokens(r,Ca).then(s=>({metadata:s,ref:n}))}function Qj(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Kj(n,new Sr(e),t)}function Wj(n,e,t=yi.RAW,r){n._throwIfRoot("uploadString");const s=sT(t,e),l=Object.assign({},r);return l.contentType==null&&s.contentType!=null&&(l.contentType=s.contentType),Yj(n,s.data,l)}function Xj(n){n._throwIfRoot("getDownloadURL");const e=Uj(n.storage,n._location,Rv());return n.storage.makeRequestWithTokens(e,Ca).then(t=>{if(t===null)throw sj();return t})}function Jj(n){n._throwIfRoot("deleteObject");const e=Vj(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Ca)}function Zj(n,e){const t=Cj(n._location.path,e),r=new Pn(n._location.bucket,t);return new zs(n.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eO(n){return/^[A-Za-z]+:\/\//.test(n)}function tO(n,e){return new zs(n,e)}function gT(n,e){if(n instanceof Dv){const t=n;if(t._bucket==null)throw rj();const r=new zs(t,t._bucket);return e!=null?gT(r,e):r}else return e!==void 0?Zj(n,e):n}function nO(n,e){if(e&&eO(e)){if(n instanceof Dv)return tO(n,e);throw cg("To use ref(service, url), the first argument must be a Storage instance.")}else return gT(n,e)}function jb(n,e){const t=e==null?void 0:e[ZE];return t==null?null:Pn.makeFromBucketSpec(t,n)}function iO(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:Cw(s,n.app.options.projectId))}class Dv{constructor(e,t,r,s,l){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=l,this._bucket=null,this._host=JE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Yk,this._maxUploadRetryTime=Qk,this._requests=new Set,s!=null?this._bucket=Pn.makeFromBucketSpec(s,this._host):this._bucket=jb(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Pn.makeFromBucketSpec(this._url,e):this._bucket=jb(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Db("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Db("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(En(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new zs(this,e)}_makeRequest(e,t,r,s,l=!0){if(this._deleted)return new cj(iT());{const u=xj(e,this._appId,r,s,t,this._firebaseVersion,l);return this._requests.add(u),u.getPromise().then(()=>this._requests.delete(u),()=>this._requests.delete(u)),u}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const Ob="@firebase/storage",Pb="0.13.7";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vT="storage";function rO(n,e,t,r){return n=it(n),Wj(n,e,t,r)}function aO(n,e,t){return n=it(n),Qj(n,e,t)}function yT(n){return n=it(n),Xj(n)}function Mb(n){return n=it(n),Jj(n)}function _T(n,e){return n=it(n),nO(n,e)}function sO(n=Ph(),e){n=it(n);const r=tu(n,vT).getImmediate({identifier:e}),s=Ag("storage");return s&&oO(r,...s),r}function oO(n,e,t,r={}){iO(n,e,t,r)}function lO(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Dv(t,r,s,e,Bs)}function cO(){Ua(new Or(vT,lO,"PUBLIC").setMultipleInstances(!0)),ai(Ob,Pb,""),ai(Ob,Pb,"esm2017")}cO();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="type.googleapis.com/google.protobuf.Int64Value",dO="type.googleapis.com/google.protobuf.UInt64Value";function xT(n,e){const t={};for(const r in n)n.hasOwnProperty(r)&&(t[r]=e(n[r]));return t}function Ah(n){if(n==null)return null;if(n instanceof Number&&(n=n.valueOf()),typeof n=="number"&&isFinite(n)||n===!0||n===!1||Object.prototype.toString.call(n)==="[object String]")return n;if(n instanceof Date)return n.toISOString();if(Array.isArray(n))return n.map(e=>Ah(e));if(typeof n=="function"||typeof n=="object")return xT(n,e=>Ah(e));throw new Error("Data cannot be encoded in JSON: "+n)}function Jo(n){if(n==null)return n;if(n["@type"])switch(n["@type"]){case uO:case dO:{const e=Number(n.value);if(isNaN(e))throw new Error("Data cannot be decoded from JSON: "+n);return e}default:throw new Error("Data cannot be decoded from JSON: "+n)}return Array.isArray(n)?n.map(e=>Jo(e)):typeof n=="function"||typeof n=="object"?xT(n,e=>Jo(e)):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kv="functions";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lb={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Sn extends Si{constructor(e,t,r){super(`${kv}/${e}`,t||""),this.details=r,Object.setPrototypeOf(this,Sn.prototype)}}function hO(n){if(n>=200&&n<300)return"ok";switch(n){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}function Rh(n,e){let t=hO(n),r=t,s;try{const l=e&&e.error;if(l){const u=l.status;if(typeof u=="string"){if(!Lb[u])return new Sn("internal","internal");t=Lb[u],r=u}const f=l.message;typeof f=="string"&&(r=f),s=l.details,s!==void 0&&(s=Jo(s))}}catch{}return t==="ok"?null:new Sn(t,r,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,t,r,s){this.app=e,this.auth=null,this.messaging=null,this.appCheck=null,this.serverAppAppCheckToken=null,En(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.auth=t.getImmediate({optional:!0}),this.messaging=r.getImmediate({optional:!0}),this.auth||t.get().then(l=>this.auth=l,()=>{}),this.messaging||r.get().then(l=>this.messaging=l,()=>{}),this.appCheck||s==null||s.get().then(l=>this.appCheck=l,()=>{})}async getAuthToken(){if(this.auth)try{const e=await this.auth.getToken();return e==null?void 0:e.accessToken}catch{return}}async getMessagingToken(){if(!(!this.messaging||!("Notification"in self)||Notification.permission!=="granted"))try{return await this.messaging.getToken()}catch{return}}async getAppCheckToken(e){if(this.serverAppAppCheckToken)return this.serverAppAppCheckToken;if(this.appCheck){const t=e?await this.appCheck.getLimitedUseToken():await this.appCheck.getToken();return t.error?null:t.token}return null}async getContext(e){const t=await this.getAuthToken(),r=await this.getMessagingToken(),s=await this.getAppCheckToken(e);return{authToken:t,messagingToken:r,appCheckToken:s}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ug="us-central1",mO=/^data: (.*?)(?:\n|$)/;function pO(n){let e=null;return{promise:new Promise((t,r)=>{e=setTimeout(()=>{r(new Sn("deadline-exceeded","deadline-exceeded"))},n)}),cancel:()=>{e&&clearTimeout(e)}}}class gO{constructor(e,t,r,s,l=ug,u=(...f)=>fetch(...f)){this.app=e,this.fetchImpl=u,this.emulatorOrigin=null,this.contextProvider=new fO(e,t,r,s),this.cancelAllRequests=new Promise(f=>{this.deleteService=()=>Promise.resolve(f())});try{const f=new URL(l);this.customDomain=f.origin+(f.pathname==="/"?"":f.pathname),this.region=ug}catch{this.customDomain=null,this.region=l}}_delete(){return this.deleteService()}_url(e){const t=this.app.options.projectId;return this.emulatorOrigin!==null?`${this.emulatorOrigin}/${t}/${this.region}/${e}`:this.customDomain!==null?`${this.customDomain}/${e}`:`https://${this.region}-${t}.cloudfunctions.net/${e}`}}function vO(n,e,t){n.emulatorOrigin=`http://${e}:${t}`}function yO(n,e,t){const r=s=>xO(n,e,s,{});return r.stream=(s,l)=>wO(n,e,s,l),r}async function _O(n,e,t,r){t["Content-Type"]="application/json";let s;try{s=await r(n,{method:"POST",body:JSON.stringify(e),headers:t})}catch{return{status:0,json:null}}let l=null;try{l=await s.json()}catch{}return{status:s.status,json:l}}async function bT(n,e){const t={},r=await n.contextProvider.getContext(e.limitedUseAppCheckTokens);return r.authToken&&(t.Authorization="Bearer "+r.authToken),r.messagingToken&&(t["Firebase-Instance-ID-Token"]=r.messagingToken),r.appCheckToken!==null&&(t["X-Firebase-AppCheck"]=r.appCheckToken),t}function xO(n,e,t,r){const s=n._url(e);return bO(n,s,t,r)}async function bO(n,e,t,r){t=Ah(t);const s={data:t},l=await bT(n,r),u=r.timeout||7e4,f=pO(u),p=await Promise.race([_O(e,s,l,n.fetchImpl),f.promise,n.cancelAllRequests]);if(f.cancel(),!p)throw new Sn("cancelled","Firebase Functions instance was deleted.");const v=Rh(p.status,p.json);if(v)throw v;if(!p.json)throw new Sn("internal","Response is not valid JSON object.");let _=p.json.data;if(typeof _>"u"&&(_=p.json.result),typeof _>"u")throw new Sn("internal","Response is missing data field.");return{data:Jo(_)}}function wO(n,e,t,r){const s=n._url(e);return EO(n,s,t,r||{})}async function EO(n,e,t,r){var s;t=Ah(t);const l={data:t},u=await bT(n,r);u["Content-Type"]="application/json",u.Accept="text/event-stream";let f;try{f=await n.fetchImpl(e,{method:"POST",body:JSON.stringify(l),headers:u,signal:r==null?void 0:r.signal})}catch(T){if(T instanceof Error&&T.name==="AbortError"){const L=new Sn("cancelled","Request was cancelled.");return{data:Promise.reject(L),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(L)}}}}}}const I=Rh(0,null);return{data:Promise.reject(I),stream:{[Symbol.asyncIterator](){return{next(){return Promise.reject(I)}}}}}}let p,v;const _=new Promise((T,I)=>{p=T,v=I});(s=r==null?void 0:r.signal)===null||s===void 0||s.addEventListener("abort",()=>{const T=new Sn("cancelled","Request was cancelled.");v(T)});const E=f.body.getReader(),w=TO(E,p,v,r==null?void 0:r.signal);return{stream:{[Symbol.asyncIterator](){const T=w.getReader();return{async next(){const{value:I,done:L}=await T.read();return{value:I,done:L}},async return(){return await T.cancel(),{done:!0,value:void 0}}}}},data:_}}function TO(n,e,t,r){const s=(u,f)=>{const p=u.match(mO);if(!p)return;const v=p[1];try{const _=JSON.parse(v);if("result"in _){e(Jo(_.result));return}if("message"in _){f.enqueue(Jo(_.message));return}if("error"in _){const E=Rh(0,_);f.error(E),t(E);return}}catch(_){if(_ instanceof Sn){f.error(_),t(_);return}}},l=new TextDecoder;return new ReadableStream({start(u){let f="";return p();async function p(){if(r!=null&&r.aborted){const v=new Sn("cancelled","Request was cancelled");return u.error(v),t(v),Promise.resolve()}try{const{value:v,done:_}=await n.read();if(_){f.trim()&&s(f.trim(),u),u.close();return}if(r!=null&&r.aborted){const w=new Sn("cancelled","Request was cancelled");u.error(w),t(w),await n.cancel();return}f+=l.decode(v,{stream:!0});const E=f.split(`
`);f=E.pop()||"";for(const w of E)w.trim()&&s(w.trim(),u);return p()}catch(v){const _=v instanceof Sn?v:Rh(0,null);u.error(_),t(_)}}},cancel(){return n.cancel()}})}const Ub="@firebase/functions",Vb="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SO="auth-internal",AO="app-check-internal",RO="messaging-internal";function NO(n){const e=(t,{instanceIdentifier:r})=>{const s=t.getProvider("app").getImmediate(),l=t.getProvider(SO),u=t.getProvider(RO),f=t.getProvider(AO);return new gO(s,l,u,f,r)};Ua(new Or(kv,e,"PUBLIC").setMultipleInstances(!0)),ai(Ub,Vb,n),ai(Ub,Vb,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IO(n=Ph(),e=ug){const r=tu(it(n),kv).getImmediate({identifier:e}),s=Ag("functions");return s&&CO(r,...s),r}function CO(n,e,t){vO(it(n),e,t)}function wT(n,e,t){return yO(it(n),e)}NO();const DO={apiKey:"placeholder-api-key",authDomain:"placeholder-auth-domain",projectId:"placeholder-project-id",storageBucket:"placeholder-storage-bucket",messagingSenderId:"placeholder-sender-id",appId:"placeholder-app-id",measurementId:"placeholder-measurement-id"};console.log("Initializing Firebase with placeholder config for GitHub Pages");let Sc;try{Sc=jw(DO),console.log("Firebase app initialized with placeholder config")}catch(n){console.error("Error initializing Firebase app:",n)}let Cs,st,lf,jv,nh;try{console.log("Initializing Firebase services..."),Cs=LC(Sc),console.log("Auth service initialized"),st=Pk(Sc),console.log("Firestore service initialized"),nh=st,lf=sO(Sc),console.log("Storage service initialized"),jv=IO(Sc),console.log("Functions service initialized"),console.log("All Firebase services initialized successfully")}catch(n){console.error("Error initializing Firebase services:",n)}const kO=5,jO=15,ET=C.createContext(null);function vn(){const n=C.useContext(ET);if(!n)throw new Error("useAuth must be used within an AuthProvider");return n}function OO({children:n}){const[e,t]=C.useState(null),[r,s]=C.useState(!0);C.useEffect(()=>SI(Cs,I=>{t(I),s(!1)}),[]);async function l(T){var I;try{const P=T.toLowerCase().replace(/\./g,","),V=Mn(nh,"account_lockouts",P),Y=await $c(V);if(Y.exists()){const H=Y.data();if(H.failedAttempts>=kO){const ee=((I=H.lastFailedAttempt)==null?void 0:I.toDate())||new Date,X=new Date(ee.getTime()+jO*60*1e3),se=new Date;return se<X?{locked:!0,remainingTime:Math.ceil((X.getTime()-se.getTime())/6e4)}:(await Kc(V,{failedAttempts:0,lastFailedAttempt:null}),{locked:!1})}}return{locked:!1}}catch(L){return console.error("Error checking account lockout:",L),{locked:!1}}}async function u(T){try{const L=T.toLowerCase().replace(/\./g,","),P=Mn(nh,"account_lockouts",L);(await $c(P)).exists()?await Kc(P,{failedAttempts:Kk(1),lastFailedAttempt:Yc()}):await Th(P,{email:T.toLowerCase(),failedAttempts:1,lastFailedAttempt:Yc()})}catch(I){console.error("Error recording failed attempt:",I)}}async function f(T){try{const L=T.toLowerCase().replace(/\./g,","),P=Mn(nh,"account_lockouts",L);await Th(P,{email:T.toLowerCase(),failedAttempts:0,lastFailedAttempt:null},{merge:!0})}catch(I){console.error("Error resetting failed attempts:",I)}}function p(T,I){return bI(Cs,T,I).then(L=>L.user)}async function v(T,I){console.log("SignIn attempt:",{email:T,isDevelopment:!1});const P=await l(T);if(P.locked)throw new Error(`Account temporarily locked due to too many failed login attempts. Please try again in ${P.remainingTime} minutes.`);try{const V=await wI(Cs,T,I);return await f(T),V.user}catch(V){await u(T);const Y=await l(T);throw Y.locked?new Error(`Account temporarily locked due to too many failed login attempts. Please try again in ${Y.remainingTime} minutes.`):V}}function _(){return AI(Cs)}function E(T){return xI(Cs,T)}const w={currentUser:e,loading:r,signUp:p,signIn:v,logOut:_,resetPassword:E,isAccountLocked:l,resetFailedAttempts:f};return m.jsx(ET.Provider,{value:w,children:!r&&n})}function zd({children:n}){const{currentUser:e}=vn();return e?m.jsx(m.Fragment,{children:n}):(console.log("Protected route - redirecting to login"),m.jsx(l2,{to:"/login"}))}function PO(){const{currentUser:n}=vn();return m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx("header",{className:"bg-white shadow",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-primary-600",children:"AI Actor Generator"}),m.jsx("nav",{children:n?m.jsx(Ye,{to:"/dashboard",className:"touch-target ml-4 bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Dashboard"}):m.jsxs("div",{className:"space-x-4",children:[m.jsx(Ye,{to:"/login",className:"touch-target text-gray-700 hover:text-primary-600 px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Login"}),m.jsx(Ye,{to:"/register",className:"touch-target bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors",children:"Sign Up"})]})})]})}),m.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[m.jsx("section",{className:"py-12 md:py-20",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Create AI-Generated Images of Yourself"}),m.jsx("p",{className:"text-lg text-gray-600 mb-8 max-w-3xl mx-auto",children:"Upload your photos and generate amazing new images of yourself in different styles, settings, and scenarios using advanced AI technology."}),m.jsx(Ye,{to:n?"/dashboard":"/register",className:"touch-target inline-block bg-primary-600 hover:bg-primary-700 text-white py-3 px-8 rounded-md text-lg font-medium transition-colors",children:n?"Go to Dashboard":"Get Started"})]})}),m.jsxs("section",{className:"py-12 md:py-16",children:[m.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-8 text-center",children:"How It Works"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[m.jsx("div",{className:"text-primary-600 text-xl font-bold mb-2",children:"1. Upload Photos"}),m.jsx("p",{className:"text-gray-600",children:"Upload 10-20 photos of yourself from different angles and in different settings."})]}),m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[m.jsx("div",{className:"text-primary-600 text-xl font-bold mb-2",children:"2. Train Your AI Actor"}),m.jsx("p",{className:"text-gray-600",children:"Our system automatically trains an AI model that learns your facial features and expressions."})]}),m.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[m.jsx("div",{className:"text-primary-600 text-xl font-bold mb-2",children:"3. Generate Images"}),m.jsx("p",{className:"text-gray-600",children:"Use text prompts to create brand new images of yourself in any style or scenario you can imagine."})]})]})]})]}),m.jsx("footer",{className:"bg-white border-t border-gray-200 py-8",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500 text-sm",children:[m.jsxs("p",{children:[" ",new Date().getFullYear()," AI Actor Generator. All rights reserved."]}),m.jsx("p",{className:"mt-2",children:"Powered by React, Firebase, and Hugging Face AI."})]})})]})}function MO(){const[n,e]=C.useState(""),[t,r]=C.useState(""),[s,l]=C.useState(""),[u,f]=C.useState(!1),p=zr(),{signIn:v}=vn();async function _(E){if(E.preventDefault(),!n||!t)return l("Please fill in all fields");console.log("Login attempt:",{email:n,isDevelopment:!1});try{l(""),f(!0),await v(n,t),p("/dashboard")}catch(T){console.error("Login error:",T),l("Failed to log in. Please check your email and password.")}finally{f(!1)}}return m.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Sign in to your account"}),m.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",m.jsx(Ye,{to:"/register",className:"font-medium text-primary-600 hover:text-primary-500",children:"create a free account"})]})]}),m.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:m.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[s&&m.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:m.jsx("div",{className:"flex",children:m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-red-700",children:s})})})}),m.jsxs("form",{className:"space-y-6",onSubmit:_,children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:E=>e(E.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-base"})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"current-password",required:!0,value:t,onChange:E=>r(E.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-base"})})]}),m.jsx("div",{className:"flex items-center justify-between",children:m.jsx("div",{className:"text-sm",children:m.jsx(Ye,{to:"/forgot-password",className:"font-medium text-primary-600 hover:text-primary-500",children:"Forgot your password?"})})}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:u,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 touch-target disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Signing in...":"Sign in"})})]})]})}),m.jsx("div",{className:"mt-8 text-center",children:m.jsx(Ye,{to:"/",className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:" Back to home"})})]})}function LO(){const[n,e]=C.useState(""),[t,r]=C.useState(""),[s,l]=C.useState(""),[u,f]=C.useState(""),[p,v]=C.useState(!1),_=zr(),{signUp:E}=vn();async function w(T){if(T.preventDefault(),!n||!t||!s)return f("Please fill in all fields");if(t!==s)return f("Passwords do not match");if(t.length<6)return f("Password must be at least 6 characters");try{f(""),v(!0);const I=await E(n,t);await new Promise(L=>setTimeout(L,1e3));try{await Th(Mn(st,"users",I.uid),{email:I.email,createdAt:new Date().toISOString(),usageStats:{actorsCreated:0,imagesGenerated:0}}),_("/dashboard")}catch(L){console.error("Firestore error:",L),_("/dashboard")}}catch(I){console.error("Registration error:",I),f("Failed to create an account. The email may be already in use.")}finally{v(!1)}}return m.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Create your account"}),m.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",m.jsx(Ye,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"sign in to your existing account"})]})]}),m.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:m.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[u&&m.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:m.jsx("div",{className:"flex",children:m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-red-700",children:u})})})}),m.jsxs("form",{className:"space-y-6",onSubmit:w,children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:T=>e(T.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-base"})})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,value:t,onChange:T=>r(T.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-base"})}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Must be at least 6 characters"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"confirmPassword",name:"confirmPassword",type:"password",autoComplete:"new-password",required:!0,value:s,onChange:T=>l(T.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-base"})})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:p,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 touch-target disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:p?"Creating account...":"Create account"})})]})]})}),m.jsx("div",{className:"mt-8 text-center",children:m.jsx(Ye,{to:"/",className:"text-sm font-medium text-primary-600 hover:text-primary-500",children:" Back to home"})})]})}function UO(){const[n,e]=C.useState(""),[t,r]=C.useState(""),[s,l]=C.useState(""),[u,f]=C.useState(!1),[p,v]=C.useState(navigator.onLine),{resetPassword:_}=vn(),E=zr();C.useEffect(()=>{const T=()=>v(!0),I=()=>v(!1);return window.addEventListener("online",T),window.addEventListener("offline",I),()=>{window.removeEventListener("online",T),window.removeEventListener("offline",I)}},[]);async function w(T){if(T.preventDefault(),!n)return l("Please enter your email address");if(!p)return l("You are currently offline. Please connect to the internet to reset your password.");try{r(""),l(""),f(!0),await _(n),r("Check your email for password reset instructions"),e(""),setTimeout(()=>{E("/login")},5e3)}catch(I){console.error(I),l("Failed to reset password. Please check if the email is correct.")}finally{f(!1)}}return m.jsxs("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[m.jsxs("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:[m.jsx("h2",{className:"mt-6 text-center text-3xl font-bold text-gray-900",children:"Reset your password"}),m.jsxs("p",{className:"mt-2 text-center text-sm text-gray-600",children:["Or"," ",m.jsx(Ye,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"sign in to your account"})]})]}),m.jsx("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:m.jsxs("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[!p&&m.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:m.jsx("div",{className:"flex",children:m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-yellow-700",children:"You are currently offline. Connect to the internet to reset your password."})})})}),s&&m.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:m.jsx("div",{className:"flex",children:m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-red-700",children:s})})})}),t&&m.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 mb-6",children:m.jsx("div",{className:"flex",children:m.jsxs("div",{className:"ml-3",children:[m.jsx("p",{className:"text-sm text-green-700",children:t}),m.jsx("p",{className:"text-sm text-green-700 mt-2",children:"Redirecting to login page in 5 seconds..."})]})})}),m.jsxs("form",{className:"space-y-6",onSubmit:w,children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email address"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:n,onChange:T=>e(T.target.value),className:"appearance-none block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-base",inputMode:"email",placeholder:"Enter your email address"})}),m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"We'll send a password reset link to this email"})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:u||!p,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 touch-target min-h-[44px] disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:u?"Sending reset email...":"Reset password"})})]}),m.jsx("div",{className:"mt-6",children:m.jsxs("p",{className:"text-center text-sm text-gray-600",children:["Remember your password?"," ",m.jsx(Ye,{to:"/login",className:"font-medium text-primary-600 hover:text-primary-500",children:"Sign in"})]})})]})}),m.jsx("div",{className:"mt-8 text-center",children:m.jsx(Ye,{to:"/",className:"text-sm font-medium text-primary-600 hover:text-primary-500 touch-target min-h-[44px] inline-flex items-center",children:" Back to home"})})]})}const TT=({onRefresh:n,children:e,pullDownThreshold:t=80,maxPullDownDistance:r=120,backgroundColor:s="white",spinnerColor:l="#4f46e5",refreshingText:u="Refreshing...",pullingText:f="Pull down to refresh",releaseText:p="Release to refresh",className:v=""})=>{const[_,E]=C.useState(0),[w,T]=C.useState(!1),[I,L]=C.useState(!1),P=C.useRef(null),V=C.useRef(null),Y=C.useRef(null);C.useEffect(()=>{if(!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent))return;const se=P.current;if(!se)return;const M=D=>{se.scrollTop<=0&&(V.current=D.touches[0].clientY,Y.current=D.touches[0].clientY,L(!1))},N=D=>{if(!V.current)return;Y.current=D.touches[0].clientY;const U=Y.current-V.current;if(U>0&&se.scrollTop<=0){const B=Math.min(r,U/2);E(B),L(!0),D.preventDefault()}},A=()=>{!V.current||!Y.current||(_>=t&&!w?H():E(0),V.current=null,Y.current=null)};return se.addEventListener("touchstart",M,{passive:!0}),se.addEventListener("touchmove",N,{passive:!1}),se.addEventListener("touchend",A,{passive:!0}),()=>{se.removeEventListener("touchstart",M),se.removeEventListener("touchmove",N),se.removeEventListener("touchend",A)}},[r,_,t,w]);const H=async()=>{T(!0);try{await n()}catch(X){console.error("Error during refresh:",X)}finally{setTimeout(()=>{T(!1),E(0)},500)}},ee=Math.min(100,_/t*100);return m.jsxs("div",{ref:P,className:`relative overflow-auto ${v}`,style:{WebkitOverflowScrolling:"touch"},children:[m.jsx("div",{className:"absolute left-0 right-0 flex items-center justify-center overflow-hidden z-10 transition-transform pointer-events-none",style:{height:`${Math.max(_,w?t:0)}px`,transform:`translateY(-${w?0:_}px)`,backgroundColor:s,top:0},children:m.jsx("div",{className:"flex flex-col items-center justify-center h-full",children:w?m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-t-transparent border-solid rounded-full mb-2",style:{borderColor:l,borderTopColor:"transparent"}}),m.jsx("div",{className:"text-sm",style:{color:l},children:u})]}):m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"relative w-6 h-6 mb-2",children:m.jsxs("svg",{className:"absolute inset-0 transform transition-transform duration-200",style:{transform:ee>=100?"rotate(180deg)":"rotate(0deg)"},viewBox:"0 0 24 24",fill:"none",stroke:l,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[m.jsx("polyline",{points:"7 13 12 18 17 13"}),m.jsx("polyline",{points:"7 6 12 11 17 6"})]})}),m.jsx("div",{className:"text-sm",style:{color:l},children:ee>=100?p:f})]})})}),m.jsx("div",{className:"relative transition-transform duration-200",style:{transform:`translateY(${w?t:_}px)`},children:e})]})},VO=(n=100,e=100,t="#f1f5f9")=>{try{const r=document.createElement("canvas");r.width=n,r.height=e;const s=r.getContext("2d");if(!s)return"";s.fillStyle=t,s.fillRect(0,0,n,e),s.fillStyle="#9ca3af",s.beginPath();const l=Math.min(n,e)*.5,u=n/2-l/2,f=e/2-l/2;return s.rect(u,f,l,l*.8),s.arc(u+l*.25,f+l*.25,l*.1,0,Math.PI*2),s.fill(),r.toDataURL("image/png",.5)}catch(r){return console.error("Error creating placeholder image",r),"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}};var Tr=(n=>(n.HIGH="high",n.MEDIUM="medium",n.LOW="low",n.NONE="none",n))(Tr||{});const ks=class ks{constructor(){Ns(this,"batteryStatus",null);Ns(this,"batterySupported",!1);Ns(this,"optimizationLevel","medium");Ns(this,"batteryLowThreshold",.2);Ns(this,"listeners",[]);this.initBattery()}static getInstance(){return ks.instance||(ks.instance=new ks),ks.instance}async initBattery(){try{if("getBattery"in navigator){const e=await navigator.getBattery();this.batterySupported=!0,this.updateBatteryStatus(e),e.addEventListener("chargingchange",()=>this.updateBatteryStatus(e)),e.addEventListener("levelchange",()=>this.updateBatteryStatus(e)),e.addEventListener("chargingtimechange",()=>this.updateBatteryStatus(e)),e.addEventListener("dischargingtimechange",()=>this.updateBatteryStatus(e))}else console.log("Battery API not supported"),this.batterySupported=!1}catch(e){console.error("Error initializing battery monitoring:",e),this.batterySupported=!1}}updateBatteryStatus(e){this.batteryStatus={charging:e.charging,level:e.level,chargingTime:e.chargingTime,dischargingTime:e.dischargingTime},this.adjustOptimizationLevel(),this.notifyListeners()}adjustOptimizationLevel(){this.batteryStatus&&(this.batteryStatus.charging?this.optimizationLevel="low":this.batteryStatus.level<=this.batteryLowThreshold?this.optimizationLevel="high":this.batteryStatus.level<=.5?this.optimizationLevel="medium":this.optimizationLevel="low")}notifyListeners(){for(const e of this.listeners)e(this.batteryStatus)}addStatusListener(e){this.listeners.push(e),e(this.batteryStatus)}removeStatusListener(e){this.listeners=this.listeners.filter(t=>t!==e)}getBatteryStatus(){return this.batteryStatus}getBatteryLevel(){return this.batteryStatus?this.batteryStatus.level:null}isCharging(){return this.batteryStatus?this.batteryStatus.charging:!1}isBatterySupported(){return this.batterySupported}getOptimizationLevel(){return this.optimizationLevel}setOptimizationLevel(e){this.optimizationLevel=e}isBatteryLow(){return this.batteryStatus?!this.batteryStatus.charging&&this.batteryStatus.level<=this.batteryLowThreshold:!1}getImageUploadSettings(){const e={maxConcurrentUploads:2,compressImages:!0,maxImageSize:1048576,useWebP:!0};if(!this.batterySupported)return e;switch(this.optimizationLevel){case"high":return{maxConcurrentUploads:1,compressImages:!0,maxImageSize:512*1024,useWebP:!0};case"medium":return{maxConcurrentUploads:2,compressImages:!0,maxImageSize:1024*1024,useWebP:!0};case"low":return{maxConcurrentUploads:3,compressImages:!0,maxImageSize:2*1024*1024,useWebP:!0};case"none":return{maxConcurrentUploads:5,compressImages:!1,maxImageSize:5*1024*1024,useWebP:!1};default:return e}}getImageGenerationSettings(){const e={maxConcurrentGenerations:1,inferenceSteps:30,useLowMemoryMode:!1};if(!this.batterySupported)return e;switch(this.optimizationLevel){case"high":return{maxConcurrentGenerations:1,inferenceSteps:20,useLowMemoryMode:!0};case"medium":return{maxConcurrentGenerations:1,inferenceSteps:30,useLowMemoryMode:!1};case"low":return{maxConcurrentGenerations:2,inferenceSteps:40,useLowMemoryMode:!1};case"none":return{maxConcurrentGenerations:3,inferenceSteps:50,useLowMemoryMode:!1};default:return e}}shouldShowBatteryWarning(){return this.batterySupported&&this.isBatteryLow()}getBatteryWarningMessage(){if(!this.batteryStatus)return"Battery status unavailable. Consider connecting to a power source for intensive operations.";const e=Math.round(this.batteryStatus.level*100);return this.batteryStatus.charging?`Device is charging (${e}%). Performance optimizations reduced.`:this.isBatteryLow()?`Battery is low (${e}%). To conserve power, performance optimizations have been increased.`:`Battery level: ${e}%. Consider connecting to a power source for intensive operations.`}};Ns(ks,"instance");let dg=ks;const ri=dg.getInstance();function cf(){const[n,e]=C.useState(null),[t,r]=C.useState(ri.getOptimizationLevel());C.useEffect(()=>{const u=f=>{e(f),r(ri.getOptimizationLevel())};return ri.addStatusListener(u),e(ri.getBatteryStatus()),()=>{ri.removeStatusListener(u)}},[]);const s=u=>{ri.setOptimizationLevel(u),r(u)},l=(n==null?void 0:n.level)!=null?Math.round(n.level*100):null;return{batteryStatus:n,isSupported:ri.isBatterySupported(),isCharging:(n==null?void 0:n.charging)??null,batteryLevel:(n==null?void 0:n.level)??null,batteryLevelPercentage:l,isBatteryLow:ri.isBatteryLow(),optimizationLevel:t,warningMessage:ri.getBatteryWarningMessage(),shouldShowWarning:ri.shouldShowBatteryWarning(),imageUploadSettings:ri.getImageUploadSettings(),imageGenerationSettings:ri.getImageGenerationSettings(),setOptimizationLevel:s}}const Np=n=>{if(!n||!n.includes("firebasestorage.googleapis.com"))return n;let e=n;return e.includes("alt=media")||(e=e.includes("?")?`${e}&alt=media`:`${e}?alt=media`),e.includes("token=")||(e=`${e}&token=cors-fix`),e=`${e}&_cb=${Date.now()}`,e},ST=({src:n,alt:e,className:t="",width:r,height:s,sizes:l="100vw",priority:u=!1,placeholder:f="empty",placeholderSrc:p,onLoad:v,onError:_,onClick:E,fallbackSrc:w="/assets/placeholder.png"})=>{const[T,I]=C.useState(!1),[L,P]=C.useState(null),[V,Y]=C.useState(p||null),{imageUploadSettings:H}=cf(),ee=n.includes("firebasestorage.googleapis.com")?Np(n):n,[X,se]=C.useState(ee);C.useEffect(()=>{I(!1),P(null);const re=n.includes("firebasestorage.googleapis.com")?Np(n):n;se(re)},[n]),C.useEffect(()=>{if(L&&X.includes("firebasestorage.googleapis.com")){console.warn("Firebase Storage CORS error detected, trying with crossOrigin");const re=`${Np(X)}&_nocache=${Date.now()}`;se(re),P(null)}},[L,X]);const M=re=>{const k=[640,750,828,1080,1200,1920],Q=new URL(re);return k.map(le=>`${`${Q.origin}${Q.pathname}?width=${le}`} ${le}w`).join(", ")},N=re=>{const k=new URL(re);return`${k.origin}${k.pathname}.webp`},[A,D]=C.useState(!1);C.useEffect(()=>{(async()=>{try{const k=document.createElement("canvas");if(k.getContext&&k.getContext("2d")){const Q=k.toDataURL("image/webp").indexOf("data:image/webp")===0;D(Q)}}catch{D(!1)}})()},[]),C.useEffect(()=>{if(f==="blur"&&!V){const re=new Image;re.src=n,re.crossOrigin="anonymous",re.onload=async()=>{try{const k=document.createElement("canvas");k.width=20,k.height=20;const Q=k.getContext("2d");if(Q){Q.drawImage(re,0,0,20,20);const le=await new Promise(Ne=>{k.toBlob(we=>{we&&Ne(we)},"image/jpeg",.1)}),de=new File([le],"temp.jpg",{type:"image/jpeg"}),ce=await VO(de);Y(ce)}}catch{console.error("Failed to generate blur placeholder")}}}},[n,f,V]);const U=()=>{I(!0),v&&v()},B=()=>{const re=new Error(`Failed to load image: ${X}`);P(re),_&&_(re),X!==w&&se(w)},O=M(n),me=A?M(N(n)):void 0,xe=u?"eager":H.compressImages?"lazy":"auto",oe={"aria-busy":!T&&!L,"aria-hidden":L?!0:void 0},ve=E?re=>{re.preventDefault(),E()}:void 0,fe=E?{role:"button",tabIndex:0,onKeyDown:re=>{(re.key==="Enter"||re.key===" ")&&(re.preventDefault(),E())}}:{};return m.jsxs("div",{className:`relative overflow-hidden ${t}`,style:{width:r?`${r}px`:"auto",height:s?`${s}px`:"auto"},children:[f==="blur"&&V&&!T&&m.jsx("div",{"aria-hidden":"true",className:"absolute inset-0 bg-cover bg-center blur-sm scale-110",style:{backgroundImage:`url(${V})`,filter:"blur(20px)",transform:"scale(1.1)"}}),m.jsxs("picture",{children:[A&&me&&m.jsx("source",{type:"image/webp",srcSet:me,sizes:l}),m.jsx("img",{src:X,alt:e,loading:xe,srcSet:O,sizes:l,onLoad:U,onError:B,onClick:ve,crossOrigin:"anonymous",className:`w-full h-full object-cover transition-opacity duration-500 ${T?"opacity-100":"opacity-0"} ${E?"cursor-pointer":""}`,...oe,...fe})]}),L&&m.jsx("div",{className:"absolute inset-0 bg-gray-100 flex items-center justify-center",children:m.jsxs("div",{className:"text-center p-4",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mx-auto mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),m.jsx("p",{className:"text-sm text-gray-500",children:"Failed to load image"})]})})]})},Bd=43200,zb=1440,Bb=Symbol.for("constructDateFrom");function Ov(n,e){return typeof n=="function"?n(e):n&&typeof n=="object"&&Bb in n?n[Bb](e):n instanceof Date?new n.constructor(e):new Date(e)}function Ga(n,e){return Ov(n,n)}let zO={};function BO(){return zO}function Fb(n){const e=Ga(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Pv(n,...e){const t=Ov.bind(null,n||e.find(r=>typeof r=="object"));return e.map(t)}function ih(n,e){const t=+Ga(n)-+Ga(e);return t<0?-1:t>0?1:t}function FO(n){return Ov(n,Date.now())}function qO(n,e,t){const[r,s]=Pv(t==null?void 0:t.in,n,e),l=r.getFullYear()-s.getFullYear(),u=r.getMonth()-s.getMonth();return l*12+u}function HO(n){return e=>{const r=(n?Math[n]:Math.trunc)(e);return r===0?0:r}}function GO(n,e){return+Ga(n)-+Ga(e)}function $O(n,e){const t=Ga(n);return t.setHours(23,59,59,999),t}function KO(n,e){const t=Ga(n),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function YO(n,e){const t=Ga(n);return+$O(t)==+KO(t)}function QO(n,e,t){const[r,s,l]=Pv(t==null?void 0:t.in,n,n,e),u=ih(s,l),f=Math.abs(qO(s,l));if(f<1)return 0;s.getMonth()===1&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-u*f);let p=ih(s,l)===-u;YO(r)&&f===1&&ih(r,l)===1&&(p=!1);const v=u*(f-+p);return v===0?0:v}function WO(n,e,t){const r=GO(n,e)/1e3;return HO(t==null?void 0:t.roundingMethod)(r)}const XO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},JO=(n,e,t)=>{let r;const s=XO[n];return typeof s=="string"?r=s:e===1?r=s.one:r=s.other.replace("{{count}}",e.toString()),t!=null&&t.addSuffix?t.comparison&&t.comparison>0?"in "+r:r+" ago":r};function Ip(n){return(e={})=>{const t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}const ZO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},eP={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},tP={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nP={date:Ip({formats:ZO,defaultWidth:"full"}),time:Ip({formats:eP,defaultWidth:"full"}),dateTime:Ip({formats:tP,defaultWidth:"full"})},iP={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},rP=(n,e,t,r)=>iP[n];function vc(n){return(e,t)=>{const r=t!=null&&t.context?String(t.context):"standalone";let s;if(r==="formatting"&&n.formattingValues){const u=n.defaultFormattingWidth||n.defaultWidth,f=t!=null&&t.width?String(t.width):u;s=n.formattingValues[f]||n.formattingValues[u]}else{const u=n.defaultWidth,f=t!=null&&t.width?String(t.width):n.defaultWidth;s=n.values[f]||n.values[u]}const l=n.argumentCallback?n.argumentCallback(e):e;return s[l]}}const aP={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},sP={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},oP={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lP={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},cP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uP={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dP=(n,e)=>{const t=Number(n),r=t%100;if(r>20||r<10)switch(r%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},hP={ordinalNumber:dP,era:vc({values:aP,defaultWidth:"wide"}),quarter:vc({values:sP,defaultWidth:"wide",argumentCallback:n=>n-1}),month:vc({values:oP,defaultWidth:"wide"}),day:vc({values:lP,defaultWidth:"wide"}),dayPeriod:vc({values:cP,defaultWidth:"wide",formattingValues:uP,defaultFormattingWidth:"wide"})};function yc(n){return(e,t={})=>{const r=t.width,s=r&&n.matchPatterns[r]||n.matchPatterns[n.defaultMatchWidth],l=e.match(s);if(!l)return null;const u=l[0],f=r&&n.parsePatterns[r]||n.parsePatterns[n.defaultParseWidth],p=Array.isArray(f)?mP(f,E=>E.test(u)):fP(f,E=>E.test(u));let v;v=n.valueCallback?n.valueCallback(p):p,v=t.valueCallback?t.valueCallback(v):v;const _=e.slice(u.length);return{value:v,rest:_}}}function fP(n,e){for(const t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function mP(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function pP(n){return(e,t={})=>{const r=e.match(n.matchPattern);if(!r)return null;const s=r[0],l=e.match(n.parsePattern);if(!l)return null;let u=n.valueCallback?n.valueCallback(l[0]):l[0];u=t.valueCallback?t.valueCallback(u):u;const f=e.slice(s.length);return{value:u,rest:f}}}const gP=/^(\d+)(th|st|nd|rd)?/i,vP=/\d+/i,yP={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},_P={any:[/^b/i,/^(a|c)/i]},xP={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},bP={any:[/1/i,/2/i,/3/i,/4/i]},wP={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},EP={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},TP={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},SP={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},AP={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},RP={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},NP={ordinalNumber:pP({matchPattern:gP,parsePattern:vP,valueCallback:n=>parseInt(n,10)}),era:yc({matchPatterns:yP,defaultMatchWidth:"wide",parsePatterns:_P,defaultParseWidth:"any"}),quarter:yc({matchPatterns:xP,defaultMatchWidth:"wide",parsePatterns:bP,defaultParseWidth:"any",valueCallback:n=>n+1}),month:yc({matchPatterns:wP,defaultMatchWidth:"wide",parsePatterns:EP,defaultParseWidth:"any"}),day:yc({matchPatterns:TP,defaultMatchWidth:"wide",parsePatterns:SP,defaultParseWidth:"any"}),dayPeriod:yc({matchPatterns:AP,defaultMatchWidth:"any",parsePatterns:RP,defaultParseWidth:"any"})},IP={code:"en-US",formatDistance:JO,formatLong:nP,formatRelative:rP,localize:hP,match:NP,options:{weekStartsOn:0,firstWeekContainsDate:1}};function CP(n,e,t){const r=BO(),s=(t==null?void 0:t.locale)??r.locale??IP,l=2520,u=ih(n,e);if(isNaN(u))throw new RangeError("Invalid time value");const f=Object.assign({},t,{addSuffix:t==null?void 0:t.addSuffix,comparison:u}),[p,v]=Pv(t==null?void 0:t.in,...u>0?[e,n]:[n,e]),_=WO(v,p),E=(Fb(v)-Fb(p))/1e3,w=Math.round((_-E)/60);let T;if(w<2)return t!=null&&t.includeSeconds?_<5?s.formatDistance("lessThanXSeconds",5,f):_<10?s.formatDistance("lessThanXSeconds",10,f):_<20?s.formatDistance("lessThanXSeconds",20,f):_<40?s.formatDistance("halfAMinute",0,f):_<60?s.formatDistance("lessThanXMinutes",1,f):s.formatDistance("xMinutes",1,f):w===0?s.formatDistance("lessThanXMinutes",1,f):s.formatDistance("xMinutes",w,f);if(w<45)return s.formatDistance("xMinutes",w,f);if(w<90)return s.formatDistance("aboutXHours",1,f);if(w<zb){const I=Math.round(w/60);return s.formatDistance("aboutXHours",I,f)}else{if(w<l)return s.formatDistance("xDays",1,f);if(w<Bd){const I=Math.round(w/zb);return s.formatDistance("xDays",I,f)}else if(w<Bd*2)return T=Math.round(w/Bd),s.formatDistance("aboutXMonths",T,f)}if(T=QO(v,p),T<12){const I=Math.round(w/Bd);return s.formatDistance("xMonths",I,f)}else{const I=T%12,L=Math.trunc(T/12);return I<3?s.formatDistance("aboutXYears",L,f):I<9?s.formatDistance("overXYears",L,f):s.formatDistance("almostXYears",L+1,f)}}function DP(n,e){return CP(n,FO(n),e)}const $a=n=>{if(!n)return!1;const e=String(n),t=n instanceof Error?n.message:e;return[/permission[ _]denied/i,/insufficient[ _]permissions/i,/missing or insufficient permissions/i,/not authorized/i,/PERMISSION_DENIED/i,/FirebaseError: [a-z-]+ permission_denied/i].some(s=>s.test(t))},kP=n=>{if(!n)return!1;const e=String(n),t=n instanceof Error?n.message:e;return[/cors/i,/cross[- ]origin/i,/same[- ]origin policy/i,/access[- ]control[- ]allow[- ]origin/i,/origin is not allowed/i].some(s=>s.test(t))},Qc=n=>n?kP(n)?"Cannot load resources from Firebase Storage. Please set up Firebase Storage for this project.":$a(n)?"You don't have permission to access this data. Please check your account permissions.":n instanceof Error&&(n.message.includes("network")||n.message.includes("connection"))?"Network error. Please check your internet connection and try again.":n instanceof Error?n.message||"An error occurred":"An unexpected error occurred":"An unknown error occurred",jP=(n,e="Error",t={})=>{console.error(`[${e}]`,{error:n,...n instanceof Error?{message:n.message,stack:n.stack}:{},...t})},Zo=(n,e,t)=>{jP(n,"Permission Error",{collection:e,operation:t,isPermissionError:$a(n),timestamp:new Date().toISOString()}),console.warn(`[Permission Error] ${t==="read"?"Reading from":"Writing to"} the ${e} collection failed due to insufficient permissions. Check your Firestore security rules and authentication state.`)},OP=({limit:n=5,className:e=""})=>{const[t,r]=C.useState([]),[s,l]=C.useState(!0),[u,f]=C.useState(null),{currentUser:p}=vn();return C.useEffect(()=>{if(!p)return;l(!0),f(null);const v=[{id:"1",type:"creation",timestamp:new Date(Date.now()-2*60*60*1e3),actorId:"demo-actor-1",actorName:"John Doe"},{id:"2",type:"training",timestamp:new Date(Date.now()-1*60*60*1e3),actorId:"demo-actor-1",actorName:"John Doe",status:"Completed"},{id:"3",type:"generation",timestamp:new Date(Date.now()-30*60*1e3),actorId:"demo-actor-1",actorName:"John Doe",prompt:"A photo of John Doe in a sci-fi environment"}];(async()=>{try{if(!p.uid){console.log("User is not fully authenticated yet"),r([]),l(!1);return}try{const E=Ma(_i(st,"user_activity"),vi("userId","==",p.uid),Gc("timestamp","desc"),lg(n));return WE(E,T=>{const I=[];T.forEach(L=>{const P=L.data();I.push({id:L.id,type:P.type,timestamp:P.timestamp.toDate(),actorId:P.actorId,actorName:P.actorName,imageUrl:P.imageUrl,prompt:P.prompt,status:P.status})}),r(I),l(!1)},T=>{$a(T)?(Zo(T,"user_activity","read"),console.log("Using dummy activity data due to permissions issue"),r(v),f("This is a demo version. Using sample activity data."),l(!1)):(console.error("Error in activity snapshot listener:",T),f(Qc(T)),l(!1))})}catch(E){if($a(E))Zo(E,"user_activity","read"),console.log("Using dummy activity data due to setup error"),r(v),f("This is a demo version. Using sample activity data.");else throw E;l(!1)}}catch(E){console.error("General error in activity feed:",E),f(Qc(E)),l(!1)}})()},[p,n]),s?m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${e}`,children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activity"}),m.jsx("div",{className:"space-y-4",children:Array.from({length:3}).map((v,_)=>m.jsxs("div",{className:"flex items-center animate-pulse",children:[m.jsx("div",{className:"h-10 w-10 bg-gray-200 rounded-full"}),m.jsxs("div",{className:"ml-3 flex-1",children:[m.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),m.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]})]},_))})]}):u&&t.length===0?m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${e}`,children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Recent Activity"}),m.jsx("p",{className:"text-red-500 text-sm",children:u})]}):t.length===0?m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${e}`,children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Recent Activity"}),m.jsx("p",{className:"text-gray-500 text-sm",children:"No recent activity found. Create an actor or generate images to see your activity here."})]}):m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${e}`,children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Recent Activity"}),u&&m.jsx("div",{className:"mb-3 bg-yellow-50 rounded-md p-2 text-sm text-yellow-700",children:u}),m.jsx("div",{className:"space-y-4",children:t.map(v=>{var _;return m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex-shrink-0 mr-3",children:v.imageUrl?m.jsx("div",{className:"h-10 w-10 rounded-full overflow-hidden",children:m.jsx(ST,{src:v.imageUrl,alt:v.actorName,className:"h-full w-full object-cover"})}):m.jsxs("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:[v.type==="creation"&&m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),v.type==="training"&&m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"})}),v.type==="generation"&&m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[v.type==="creation"&&`Created new actor: ${v.actorName}`,v.type==="training"&&`${v.actorName}'s training ${(_=v.status)==null?void 0:_.toLowerCase()}`,v.type==="generation"&&`Generated image for ${v.actorName}`]}),v.prompt&&m.jsxs("p",{className:"text-xs text-gray-500 truncate mt-1",children:['Prompt: "',v.prompt,'"']}),m.jsx("p",{className:"text-xs text-gray-400 mt-1",children:DP(v.timestamp,{addSuffix:!0})})]}),m.jsx("a",{href:`/${v.type==="generation"?"generate":"actors"}/${v.actorId}`,className:"ml-2 text-xs text-primary-600 hover:text-primary-800 touch-target min-h-[44px] min-w-[44px] flex items-center justify-center",children:"View"})]},v.id)})})]})},PP=({limit:n=5,className:e=""})=>{const[t,r]=C.useState([]),[s,l]=C.useState(!0),[u,f]=C.useState(null),{currentUser:p}=vn();C.useEffect(()=>{if(!p)return;const _=[{id:"sample-1",name:"John Doe",modelStatus:"completed",lastUsed:new Date(Date.now()-1*60*60*1e3),isFavorite:!0},{id:"sample-2",name:"Jane Smith",modelStatus:"training",lastUsed:new Date(Date.now()-3*60*60*1e3),isFavorite:!0},{id:"sample-3",name:"Alice Johnson",modelStatus:"pending",lastUsed:new Date(Date.now()-5*60*60*1e3),isFavorite:!1}];(async()=>{l(!0),f(null);try{if(!p.uid){console.log("User is not fully authenticated yet"),r([]),l(!1);return}try{const w=Ma(_i(st,"actors"),vi("userId","==",p.uid),vi("isFavorite","==",!0),Gc("lastUsed","desc"),lg(n)),T=await La(w),I=[];T.forEach(P=>{var Y,H,ee;const V=P.data();I.push({id:P.id,name:V.name,imageUrl:(H=(Y=V.imageRefs)==null?void 0:Y[0])==null?void 0:H.url,modelStatus:V.modelStatus,lastUsed:(ee=V.lastUsed)==null?void 0:ee.toDate(),isFavorite:!0})});const L=[];if(I.length<n){const P=n-I.length,V=Ma(_i(st,"actors"),vi("userId","==",p.uid),vi("isFavorite","==",!1),Gc("lastUsed","desc"),lg(P));(await La(V)).forEach(H=>{var X,se,M;const ee=H.data();L.push({id:H.id,name:ee.name,imageUrl:(se=(X=ee.imageRefs)==null?void 0:X[0])==null?void 0:se.url,modelStatus:ee.modelStatus,lastUsed:(M=ee.lastUsed)==null?void 0:M.toDate(),isFavorite:!1})})}r([...I,...L]),l(!1)}catch(w){if(console.error("Error in favorite actors query:",w),w instanceof Error&&w.message&&(w.message.includes("index")||w.message.includes("building"))){console.log("Index is building, using simple query as fallback");const T=Ma(_i(st,"actors"),vi("userId","==",p.uid)),I=await La(T),L=[];I.forEach(P=>{var Y,H,ee;const V=P.data();L.push({id:P.id,name:V.name,imageUrl:(H=(Y=V.imageRefs)==null?void 0:Y[0])==null?void 0:H.url,modelStatus:V.modelStatus,lastUsed:(ee=V.lastUsed)==null?void 0:ee.toDate(),isFavorite:!!V.isFavorite})}),L.sort((P,V)=>{if(P.isFavorite&&!V.isFavorite)return-1;if(!P.isFavorite&&V.isFavorite)return 1;const Y=P.lastUsed||new Date(0);return(V.lastUsed||new Date(0)).getTime()-Y.getTime()}),r(L.slice(0,n)),f("Some features are temporarily limited while database indexes are being built. This may take a few minutes.")}else if($a(w))Zo(w,"actors","read"),console.log("Using dummy actor data due to permissions error"),r(_),f("This is a demo version. Using sample actor data.");else throw w}}catch(w){console.error("Error fetching favorite actors:",w),f(Qc(w))}finally{l(!1)}})()},[p,n]);const v=async(_,E)=>{if(p)try{const w=Mn(st,"actors",_);await Kc(w,{isFavorite:!E,lastUpdated:new Date}),r(t.map(T=>T.id===_?{...T,isFavorite:!E}:T))}catch(w){$a(w)?Zo(w,"actors","write"):console.error("Error toggling favorite status:",w),_.startsWith("sample-")&&r(t.map(T=>T.id===_?{...T,isFavorite:!E}:T))}};return s?m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${e}`,children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Access"}),m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:Array.from({length:5}).map((_,E)=>m.jsxs("div",{className:"animate-pulse",children:[m.jsx("div",{className:"bg-gray-200 rounded-lg aspect-square mb-2"}),m.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mx-auto"})]},E))})]}):u&&t.length===0?m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${e}`,children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Quick Access"}),m.jsx("p",{className:"text-red-500 text-sm",children:u})]}):t.length===0?m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${e}`,children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Quick Access"}),m.jsx("p",{className:"text-gray-500 text-sm",children:"Create actors and mark them as favorites for quick access."})]}):m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${e}`,children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Access"}),u&&m.jsx("div",{className:"mb-3 bg-yellow-50 rounded-md p-2 text-sm text-yellow-700",children:u}),m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-5 gap-4",children:t.map(_=>m.jsxs("div",{className:"text-center",children:[m.jsxs("div",{className:"relative mb-2",children:[m.jsx(Ye,{to:`/actors/${_.id}`,children:m.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100",children:_.imageUrl?m.jsx(ST,{src:_.imageUrl,alt:_.name,className:"w-full h-full object-cover"}):m.jsx("div",{className:"w-full h-full flex items-center justify-center text-gray-400",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})})}),m.jsx("div",{className:`absolute bottom-2 right-2 h-3 w-3 rounded-full ${_.modelStatus==="completed"?"bg-green-500":_.modelStatus==="training"?"bg-blue-500":_.modelStatus==="failed"?"bg-red-500":"bg-yellow-500"} border border-white`}),m.jsx("button",{onClick:()=>v(_.id,!!_.isFavorite),className:"absolute top-2 right-2 touch-target min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":_.isFavorite?"Remove from favorites":"Add to favorites",children:_.isFavorite?m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-500",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}):m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})]}),m.jsx(Ye,{to:`/actors/${_.id}`,className:"text-sm font-medium text-gray-800 truncate block",children:_.name}),_.modelStatus==="completed"&&m.jsx(Ye,{to:`/generate/${_.id}`,className:"text-xs text-primary-600 hover:text-primary-800",children:"Generate"})]},_.id))})]})},MP=({className:n=""})=>{const[e,t]=C.useState(null),[r,s]=C.useState(!0),[l,u]=C.useState(null),{currentUser:f}=vn();if(C.useEffect(()=>{if(!f)return;const w={actorsCreated:2,actorsLimit:5,imagesGenerated:15,imagesLimit:50,storageUsed:125*1024*1024,storageLimit:500*1024*1024,lastUpdated:new Date};(async()=>{var I;s(!0),u(null);try{if(!f.uid){console.log("User is not fully authenticated yet"),t(w),s(!1);return}try{const L=Mn(st,"user_stats",f.uid),P=await $c(L);if(P.exists()){const V=P.data();t({actorsCreated:V.actorsCreated||0,actorsLimit:V.actorsLimit||5,imagesGenerated:V.imagesGenerated||0,imagesLimit:V.imagesLimit||50,storageUsed:V.storageUsed||0,storageLimit:V.storageLimit||500*1024*1024,lastUpdated:((I=V.lastUpdated)==null?void 0:I.toDate())||new Date})}else t({actorsCreated:0,actorsLimit:5,imagesGenerated:0,imagesLimit:50,storageUsed:0,storageLimit:500*1024*1024,lastUpdated:new Date});s(!1)}catch(L){if($a(L))Zo(L,"user_stats","read"),console.log("Using demo stats data due to permissions issue"),t(w),u("This is a demo version. Using sample statistics data.");else throw L}}catch(L){console.error("Error fetching usage stats:",L),u(Qc(L))}finally{s(!1)}})()},[f]),r)return m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${n}`,children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Usage Statistics"}),m.jsxs("div",{className:"space-y-4 animate-pulse",children:[m.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),m.jsx("div",{className:"h-3 bg-gray-200 rounded"}),m.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/2"})]})]});if(l&&!e)return m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${n}`,children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Usage Statistics"}),m.jsx("p",{className:"text-red-500 text-sm",children:l})]});if(!e)return m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${n}`,children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"Usage Statistics"}),m.jsx("p",{className:"text-gray-500 text-sm",children:"No usage data available."})]});const p=w=>w<1024?`${w} B`:w<1024*1024?`${(w/1024).toFixed(1)} KB`:w<1024*1024*1024?`${(w/(1024*1024)).toFixed(1)} MB`:`${(w/(1024*1024*1024)).toFixed(1)} GB`,v=Math.min(100,Math.round(e.actorsCreated/e.actorsLimit*100)),_=Math.min(100,Math.round(e.imagesGenerated/e.imagesLimit*100)),E=Math.min(100,Math.round(e.storageUsed/e.storageLimit*100));return m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${n}`,children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Usage Statistics"}),l&&m.jsx("div",{className:"mb-3 bg-yellow-50 rounded-md p-2 text-sm text-yellow-700",children:l}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between mb-1",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700",children:"AI Actors"}),m.jsxs("span",{className:"text-sm text-gray-600",children:[e.actorsCreated," of ",e.actorsLimit]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:m.jsx("div",{className:`h-2.5 rounded-full ${v>90?"bg-red-600":v>70?"bg-yellow-500":"bg-primary-600"}`,style:{width:`${v}%`}})})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between mb-1",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Images Generated"}),m.jsxs("span",{className:"text-sm text-gray-600",children:[e.imagesGenerated," of ",e.imagesLimit]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:m.jsx("div",{className:`h-2.5 rounded-full ${_>90?"bg-red-600":_>70?"bg-yellow-500":"bg-primary-600"}`,style:{width:`${_}%`}})})]}),m.jsxs("div",{children:[m.jsxs("div",{className:"flex justify-between mb-1",children:[m.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Storage"}),m.jsxs("span",{className:"text-sm text-gray-600",children:[p(e.storageUsed)," of ",p(e.storageLimit)]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5",children:m.jsx("div",{className:`h-2.5 rounded-full ${E>90?"bg-red-600":E>70?"bg-yellow-500":"bg-primary-600"}`,style:{width:`${E}%`}})})]})]}),m.jsxs("div",{className:"mt-4 text-xs text-gray-500",children:["Last updated: ",e.lastUpdated.toLocaleString()]})]})},LP={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_ENV:"production",VITE_FIREBASE_API_KEY:"AIzaSyBlY7fENvFHUgUPJ9QyDq7groSOx1VHsaI",VITE_FIREBASE_APP_ID:"1:608536180155:web:b3a08b10ad5a603f21009e",VITE_FIREBASE_AUTH_DOMAIN:"ai-based-actors-backup.firebaseapp.com",VITE_FIREBASE_MEASUREMENT_ID:"G-W28JDC8H1B",VITE_FIREBASE_MESSAGING_SENDER_ID:"608536180155",VITE_FIREBASE_PROJECT_ID:"ai-based-actors-backup",VITE_FIREBASE_STORAGE_BUCKET:"ai-based-actors-backup.firebasestorage.app",VITE_HUGGINGFACE_TOKEN:"dummy-token-for-github-pages"};var qb={};const UP=async(n,e)=>{try{if(e){const t=Ma(_i(st,n),vi("userId","==",e));await La(t)}else await La(_i(st,n));return{success:!0,collection:n,operation:"read"}}catch(t){const r=t;return{success:!1,collection:n,operation:"read",errorMessage:r.message,details:r}}},Hb=async(n,e,t="permission_test_doc")=>{const r=Mn(st,n,t);try{return await Th(r,{userId:e,testField:"test_value",createdAt:new Date}),await Ib(r),{success:!0,collection:n,operation:"write"}}catch(s){const l=s;try{await Ib(r)}catch(u){console.warn("Failed to clean up test document",u)}return{success:!1,collection:n,operation:"write",errorMessage:l.message,details:l}}},VP=async(n,e=`test/${n}/test-file.txt`)=>{const t=_T(lf,e);try{return await rO(t,"Test content for permission check"),await yT(t),await Mb(t),{success:!0,collection:"storage",operation:"read/write"}}catch(r){const s=r;try{await Mb(t)}catch(l){console.warn("Failed to clean up test file",l)}return{success:!1,collection:"storage",operation:"read/write",errorMessage:s.message,details:s}}},zP=async n=>{if(!n)return{results:[],passed:!1,summary:"Cannot run permission tests - no authenticated user"};const e=n.uid,t=[],r=["users","actors","user_activity","user_stats"];for(const f of r)t.push(await UP(f,e));t.push(await Hb("users",e)),t.push(await Hb("actors",e)),t.push(await VP(e));const s=t.every(f=>f.success),l=t.filter(f=>!f.success);let u=s?"All permission tests passed successfully!":`${l.length} permission tests failed:`;return s||l.forEach(f=>{u+=`
- ${f.collection} (${f.operation}): ${f.errorMessage}`}),{results:t,passed:s,summary:u}},BP=()=>{const n=[],e=[{vite:"VITE_FIREBASE_API_KEY",react:"REACT_APP_FIREBASE_API_KEY"},{vite:"VITE_FIREBASE_AUTH_DOMAIN",react:"REACT_APP_FIREBASE_AUTH_DOMAIN"},{vite:"VITE_FIREBASE_PROJECT_ID",react:"REACT_APP_FIREBASE_PROJECT_ID"},{vite:"VITE_FIREBASE_STORAGE_BUCKET",react:"REACT_APP_FIREBASE_STORAGE_BUCKET"},{vite:"VITE_FIREBASE_MESSAGING_SENDER_ID",react:"REACT_APP_FIREBASE_MESSAGING_SENDER_ID"},{vite:"VITE_FIREBASE_APP_ID",react:"REACT_APP_FIREBASE_APP_ID"}];for(const t of e){const r=!!LP[t.vite],s=!!(qb&&qb[t.react]);!r&&!s&&n.push(`Missing environment variable: ${t.vite} or ${t.react}`)}return(!Cs||!st||!lf)&&n.push("Firebase services are not properly initialized"),{valid:n.length===0,issues:n}},FP=({className:n=""})=>{const[e,t]=C.useState(!1),[r,s]=C.useState([]),[l,u]=C.useState({valid:!0,issues:[]}),[f,p]=C.useState(null),{currentUser:v}=vn(),_=async()=>{if(!v){p("You must be logged in to run permission tests");return}t(!0),p(null);try{const w=BP();if(u(w),!w.valid){p("Firebase environment configuration issues detected"),t(!1);return}const{results:T}=await zP(v);s(T)}catch(w){const T=w;p(`Error running tests: ${T.message}`),console.error("Test error:",T)}finally{t(!1)}},E=async()=>{t(!0),p(null);try{l.issues.some(T=>T.includes("REACT_APP_")&&!T.includes("VITE_"))&&p(`
          Environment variable format mismatch detected. Your .env file may be using REACT_APP_ 
          prefix but the application is expecting VITE_ prefix. Check your .env file and the 
          firebase.ts configuration.
        `)}catch(w){p(`Error fixing issues: ${w.message}`)}finally{t(!1)}};return m.jsxs("div",{className:`bg-white rounded-lg shadow p-4 ${n}`,children:[m.jsxs("div",{className:"flex justify-between items-center mb-4",children:[m.jsx("h2",{className:"text-lg font-medium text-gray-900",children:"Firebase Permission Tests"}),m.jsxs("div",{className:"space-x-2",children:[m.jsx("button",{onClick:_,disabled:e||!v,className:"px-3 py-1.5 text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 rounded-md disabled:bg-gray-300 disabled:cursor-not-allowed",children:e?"Running...":"Run Tests"}),r.length>0&&m.jsx("button",{onClick:E,disabled:e,className:"px-3 py-1.5 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md disabled:bg-gray-300 disabled:cursor-not-allowed",children:"Fix Issues"})]})]}),f&&m.jsx("div",{className:"mb-4 p-3 bg-red-50 border-l-4 border-red-400 text-red-700 text-sm",children:f}),!l.valid&&m.jsxs("div",{className:"mb-4 p-3 bg-yellow-50 border-l-4 border-yellow-400",children:[m.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Environment Issues:"}),m.jsx("ul",{className:"mt-2 text-sm text-yellow-700 list-disc list-inside",children:l.issues.map((w,T)=>m.jsx("li",{children:w},T))})]}),r.length>0&&m.jsxs("div",{className:"mt-4",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Test Results:"}),m.jsx("div",{className:"border rounded-md overflow-hidden",children:m.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[m.jsx("thead",{className:"bg-gray-50",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),m.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Collection"}),m.jsx("th",{className:"px-3 py-2 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Operation"})]})}),m.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map((w,T)=>m.jsxs(lw.Fragment,{children:[m.jsxs("tr",{children:[m.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm",children:m.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${w.success?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:w.success?"PASS":"FAIL"})}),m.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:w.collection}),m.jsx("td",{className:"px-3 py-2 whitespace-nowrap text-sm text-gray-900",children:w.operation})]}),!w.success&&w.errorMessage&&m.jsx("tr",{className:"bg-red-50",children:m.jsxs("td",{colSpan:3,className:"px-3 py-2 text-xs text-red-700",children:["Error: ",w.errorMessage]})})]},T))})]})}),m.jsx("div",{className:"mt-4 text-sm text-gray-600",children:m.jsxs("p",{children:[r.filter(w=>w.success).length," passed, ",r.filter(w=>!w.success).length," failed"]})})]}),e&&m.jsxs("div",{className:"flex justify-center items-center py-4",children:[m.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary-600"}),m.jsx("span",{className:"ml-2 text-sm text-gray-600",children:"Running tests..."})]}),!v&&!f&&m.jsx("div",{className:"text-sm text-gray-600",children:"You must be logged in to run permission tests."}),r.length===0&&!e&&v&&!f&&m.jsx("div",{className:"text-sm text-gray-600",children:'Click "Run Tests" to check Firebase permissions.'}),m.jsx("div",{className:"mt-4 text-xs text-gray-500",children:m.jsx("p",{children:"These tests check if your Firebase permissions are correctly set up for each collection. If tests fail, check your Firestore security rules and Firebase configuration."})})]})};function qP(){const[n,e]=C.useState([]),[t,r]=C.useState(!0),[s,l]=C.useState(null),[u,f]=C.useState(null),[p,v]=C.useState(navigator.onLine),[_,E]=C.useState(!1),{currentUser:w,logOut:T}=vn(),I=Xi(),L=zr(),P=C.useCallback(async()=>{if(console.log("Fetching actors, development mode:",!1),!w){console.log("No authenticated user, skipping fetch");return}if(!p){console.log("Device is offline, skipping fetch");return}r(!0),l(null);try{const se=(w==null?void 0:w.uid)||null;try{const M=(w==null?void 0:w.uid)||localStorage.getItem("devUserId")||"test-user";console.log("Using effective user ID for query:",M);const N=Ma(_i(st,"actors"),vi("userId","==",M),Gc("createdAt","desc"));console.log("Executing Firestore query...");const A=await La(N);console.log("Query returned documents:",A.size);const D=[];A.forEach(U=>{D.push({id:U.id,name:U.data().name,gender:U.data().gender||"",createdAt:U.data().createdAt,modelStatus:U.data().modelStatus,imageRefs:U.data().imageRefs||[]})}),e(D)}catch(M){console.error("Error in initial query:",M);const N=!1;if(M instanceof Error&&M.message&&M.message.includes("index")&&M.message.includes("building")){console.log("Index is building, using simple query as fallback");const A=Ma(_i(st,"actors"),vi("userId","==",w.uid)),D=await La(A),U=[];D.forEach(B=>{U.push({id:B.id,name:B.data().name,gender:B.data().gender||"",createdAt:B.data().createdAt,modelStatus:B.data().modelStatus,imageRefs:B.data().imageRefs||[]})}),U.sort((B,O)=>{const me=B.createdAt instanceof Tt?B.createdAt.toDate():B.createdAt;return(O.createdAt instanceof Tt?O.createdAt.toDate():O.createdAt).getTime()-me.getTime()}),e(U),l("Some features are temporarily limited while database indexes are being built. This may take a few minutes.")}else throw $a(M)&&Zo(M,"actors","read"),M}}catch(se){console.error("Error fetching actors:",se),l(Qc(se))}finally{r(!1)}},[w,p]);C.useEffect(()=>{console.log("Dashboard mounted or location changed, fetching actors..."),P()},[P,I.pathname]),C.useEffect(()=>{const X=()=>{v(!0),P()},se=()=>v(!1);return window.addEventListener("online",X),window.addEventListener("offline",se),()=>{window.removeEventListener("online",X),window.removeEventListener("offline",se)}},[P]),C.useEffect(()=>{const X=I.state;X!=null&&X.message&&(f(X.message),L(I.pathname,{replace:!0}))},[I,L]),C.useEffect(()=>{if(u){const X=setTimeout(()=>{f(null)},5e3);return()=>clearTimeout(X)}},[u]);const V=async()=>{try{await T(),L("/login")}catch(X){console.error("Failed to log out",X)}},Y=async()=>{await P(),f("Content refreshed")},H=X=>X?(X instanceof Tt?X.toDate():new Date(X)).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"Unknown date",ee=()=>{E(X=>!X)};return m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx("header",{className:"bg-white shadow",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[m.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-primary-600",children:"AI Actor Generator"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"hidden sm:inline mr-4 text-sm text-gray-600",children:w==null?void 0:w.email}),m.jsx("button",{onClick:V,className:"touch-target min-h-[44px] flex items-center justify-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-primary-600 transition-colors",children:"Log out"})]})]})}),m.jsx(TT,{onRefresh:Y,className:"h-full",refreshingText:"Refreshing actors...",pullingText:"Pull down to refresh",releaseText:"Release to refresh",children:m.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[!p&&m.jsx("div",{className:"mb-6 bg-yellow-50 border-l-4 border-yellow-400 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-yellow-700",children:"You're currently offline. Some features may be unavailable until you reconnect."})})]})}),u&&m.jsx("div",{className:"mb-6 bg-green-50 border-l-4 border-green-400 p-4 transition-opacity duration-500 ease-in-out",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3 flex-grow",children:m.jsx("p",{className:"text-sm text-green-700",children:u})}),m.jsx("div",{className:"pl-3",children:m.jsxs("button",{type:"button",onClick:()=>f(null),className:"inline-flex rounded-full p-1.5 text-green-500 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-600 focus:ring-offset-2 focus:ring-offset-green-50 touch-target",children:[m.jsx("span",{className:"sr-only",children:"Dismiss"}),m.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})]})})]})}),s&&m.jsx("div",{className:"mb-6 bg-red-50 border-l-4 border-red-400 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3 flex-grow",children:m.jsx("p",{className:"text-sm text-red-700",children:s})}),m.jsx("div",{className:"pl-3",children:m.jsxs("button",{type:"button",onClick:()=>l(null),className:"inline-flex rounded-full p-1.5 text-red-500 hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-red-600 focus:ring-offset-2 focus:ring-offset-red-50 touch-target",children:[m.jsx("span",{className:"sr-only",children:"Dismiss"}),m.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})]})})]})}),m.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-6 gap-4 sm:gap-0",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Your AI Actors"}),m.jsxs(Ye,{to:"/create-actor",className:"touch-target bg-primary-600 hover:bg-primary-700 text-white px-4 py-2 rounded-md text-sm font-medium transition-colors flex items-center min-h-[44px]","aria-label":"Create a new AI actor",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Create New Actor"]})]}),m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-6",children:[m.jsx(PP,{className:"lg:col-span-2"}),m.jsx(MP,{})]}),m.jsx(OP,{className:"mb-6"}),t?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"inline-block animate-spin h-8 w-8 border-4 border-gray-200 rounded-full border-t-primary-600 mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Loading your actors..."})]}):n.length===0?m.jsx("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"You don't have any AI actors yet"}),m.jsx("p",{className:"text-gray-600 mb-4 max-w-md",children:"Create your first AI actor by uploading photos of yourself or someone else. Our AI will learn to generate new images of this person."}),m.jsxs(Ye,{to:"/create-actor",className:"touch-target inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors min-h-[44px]",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Create Your First AI Actor"]})]})}):m.jsx("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3",children:n.map(X=>m.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden border border-gray-200",children:[X.imageRefs&&X.imageRefs.length>0&&m.jsxs("div",{className:"relative bg-gray-200 aspect-[4/3] overflow-hidden",children:[m.jsx("img",{src:X.imageRefs[0].url,alt:`Preview of ${X.name}`,className:"w-full h-full object-cover",loading:"lazy"}),m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-25 flex items-center justify-center",children:m.jsxs("span",{className:"text-white font-medium px-3 py-1 bg-black bg-opacity-50 rounded-md text-sm",children:[X.imageRefs.length," photos"]})})]}),m.jsxs("div",{className:"p-5",children:[m.jsxs("div",{className:"flex justify-between items-start mb-2",children:[m.jsx("h3",{className:"text-lg font-medium text-gray-900",children:X.name}),m.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${X.modelStatus==="completed"?"bg-green-100 text-green-800":X.modelStatus==="training"?"bg-blue-100 text-blue-800":X.modelStatus==="failed"?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:X.modelStatus==="completed"?"Ready":X.modelStatus==="training"?"Training":X.modelStatus==="failed"?"Failed":"Pending"})]}),m.jsxs("p",{className:"text-sm text-gray-500 mb-3",children:["Created on ",H(X.createdAt)]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsxs(Ye,{to:`/actors/${X.id}`,className:"flex-1 touch-target inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors min-h-[44px]",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),m.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),"Details"]}),X.modelStatus==="completed"&&m.jsxs(Ye,{to:`/generate/${X.id}`,className:"flex-1 touch-target inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors min-h-[44px]",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z",clipRule:"evenodd"})}),"Generate"]})]})]})]},X.id))}),!t&&n.length>0&&m.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500 sm:hidden",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline-block mr-1 animate-bounce",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Pull down to refresh"]}),n.length>0&&m.jsxs("div",{className:"mt-8 p-4 bg-blue-50 rounded-md border border-blue-100",children:[m.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Training Process"}),m.jsx("p",{className:"mt-2 text-sm text-blue-700",children:`After creating an actor, our AI system begins training on your uploaded images. This process typically takes 15-30 minutes. You'll see the status change from "Pending" to "Training" to "Ready" when complete. Once ready, you can generate new images of your AI actor!`})]}),m.jsx("div",{className:"mt-8 text-center",children:m.jsx("button",{onClick:ee,className:"text-xs font-medium text-gray-600 hover:text-primary-600 py-2 px-4 rounded-md border border-gray-300 hover:border-primary-300 transition-colors",children:_?"Hide Firebase Tests":"Show Firebase Tests"})}),_&&m.jsx("div",{className:"mt-4 mb-8",children:m.jsx(FP,{})}),m.jsxs("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 py-2 px-4 flex justify-around items-center",children:[m.jsxs(Ye,{to:"/dashboard",className:"flex flex-col items-center justify-center min-w-[64px] min-h-[44px] touch-target text-primary-600",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),m.jsx("span",{className:"text-xs mt-1",children:"Home"})]}),m.jsxs(Ye,{to:"/create-actor",className:"flex flex-col items-center justify-center min-w-[64px] min-h-[44px] touch-target text-gray-600",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),m.jsx("span",{className:"text-xs mt-1",children:"Create"})]}),m.jsxs("button",{onClick:V,className:"flex flex-col items-center justify-center min-w-[64px] min-h-[44px] touch-target text-gray-600",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V7.414l-5-5H3zM2 4a2 2 0 012-2h5.586a1 1 0 01.707.293l6 6a1 1 0 01.293.707V16a2 2 0 01-2 2H4a2 2 0 01-2-2V4z",clipRule:"evenodd"}),m.jsx("path",{d:"M10 9V6m0 0v3m0-3h3m-3 0H7"})]}),m.jsx("span",{className:"text-xs mt-1",children:"Account"})]})]}),m.jsx("div",{className:"sm:hidden h-16"})]})})]})}var Cp={exports:{}},Dp,Gb;function HP(){if(Gb)return Dp;Gb=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Dp=n,Dp}var kp,$b;function GP(){if($b)return kp;$b=1;var n=HP();function e(){}function t(){}return t.resetWarningCache=e,kp=function(){function r(u,f,p,v,_,E){if(E!==n){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}r.isRequired=r;function s(){return r}var l={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:t,resetWarningCache:e};return l.PropTypes=l,l},kp}var Kb;function $P(){return Kb||(Kb=1,Cp.exports=GP()()),Cp.exports}var KP=$P();const at=vg(KP),YP=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function el(n,e,t){const r=QP(n),{webkitRelativePath:s}=n,l=typeof e=="string"?e:typeof s=="string"&&s.length>0?s:`./${n.name}`;return typeof r.path!="string"&&Yb(r,"path",l),Yb(r,"relativePath",l),r}function QP(n){const{name:e}=n;if(e&&e.lastIndexOf(".")!==-1&&!n.type){const r=e.split(".").pop().toLowerCase(),s=YP.get(r);s&&Object.defineProperty(n,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return n}function Yb(n,e,t){Object.defineProperty(n,e,{value:t,writable:!1,configurable:!1,enumerable:!0})}const WP=[".DS_Store","Thumbs.db"];function XP(n){return Fs(this,void 0,void 0,function*(){return Nh(n)&&JP(n.dataTransfer)?nM(n.dataTransfer,n.type):ZP(n)?eM(n):Array.isArray(n)&&n.every(e=>"getFile"in e&&typeof e.getFile=="function")?tM(n):[]})}function JP(n){return Nh(n)}function ZP(n){return Nh(n)&&Nh(n.target)}function Nh(n){return typeof n=="object"&&n!==null}function eM(n){return hg(n.target.files).map(e=>el(e))}function tM(n){return Fs(this,void 0,void 0,function*(){return(yield Promise.all(n.map(t=>t.getFile()))).map(t=>el(t))})}function nM(n,e){return Fs(this,void 0,void 0,function*(){if(n.items){const t=hg(n.items).filter(s=>s.kind==="file");if(e!=="drop")return t;const r=yield Promise.all(t.map(iM));return Qb(AT(r))}return Qb(hg(n.files).map(t=>el(t)))})}function Qb(n){return n.filter(e=>WP.indexOf(e.name)===-1)}function hg(n){if(n===null)return[];const e=[];for(let t=0;t<n.length;t++){const r=n[t];e.push(r)}return e}function iM(n){if(typeof n.webkitGetAsEntry!="function")return Wb(n);const e=n.webkitGetAsEntry();return e&&e.isDirectory?RT(e):Wb(n,e)}function AT(n){return n.reduce((e,t)=>[...e,...Array.isArray(t)?AT(t):[t]],[])}function Wb(n,e){return Fs(this,void 0,void 0,function*(){var t;if(globalThis.isSecureContext&&typeof n.getAsFileSystemHandle=="function"){const l=yield n.getAsFileSystemHandle();if(l===null)throw new Error(`${n} is not a File`);if(l!==void 0){const u=yield l.getFile();return u.handle=l,el(u)}}const r=n.getAsFile();if(!r)throw new Error(`${n} is not a File`);return el(r,(t=e==null?void 0:e.fullPath)!==null&&t!==void 0?t:void 0)})}function rM(n){return Fs(this,void 0,void 0,function*(){return n.isDirectory?RT(n):aM(n)})}function RT(n){const e=n.createReader();return new Promise((t,r)=>{const s=[];function l(){e.readEntries(u=>Fs(this,void 0,void 0,function*(){if(u.length){const f=Promise.all(u.map(rM));s.push(f),l()}else try{const f=yield Promise.all(s);t(f)}catch(f){r(f)}}),u=>{r(u)})}l()})}function aM(n){return Fs(this,void 0,void 0,function*(){return new Promise((e,t)=>{n.file(r=>{const s=el(r,n.fullPath);e(s)},r=>{t(r)})})})}var Fd={},Xb;function sM(){return Xb||(Xb=1,Fd.__esModule=!0,Fd.default=function(n,e){if(n&&e){var t=Array.isArray(e)?e:e.split(",");if(t.length===0)return!0;var r=n.name||"",s=(n.type||"").toLowerCase(),l=s.replace(/\/.*$/,"");return t.some(function(u){var f=u.trim().toLowerCase();return f.charAt(0)==="."?r.toLowerCase().endsWith(f):f.endsWith("/*")?l===f.replace(/\/.*$/,""):s===f})}return!0}),Fd}var oM=sM();const jp=vg(oM);function Jb(n){return uM(n)||cM(n)||IT(n)||lM()}function lM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cM(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function uM(n){if(Array.isArray(n))return fg(n)}function Zb(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function ew(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Zb(Object(t),!0).forEach(function(r){NT(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Zb(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function NT(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wc(n,e){return fM(n)||hM(n,e)||IT(n,e)||dM()}function dM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function IT(n,e){if(n){if(typeof n=="string")return fg(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return fg(n,e)}}function fg(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function hM(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],s=!0,l=!1,u,f;try{for(t=t.call(n);!(s=(u=t.next()).done)&&(r.push(u.value),!(e&&r.length===e));s=!0);}catch(p){l=!0,f=p}finally{try{!s&&t.return!=null&&t.return()}finally{if(l)throw f}}return r}}function fM(n){if(Array.isArray(n))return n}var mM=typeof jp=="function"?jp:jp.default,pM="file-invalid-type",gM="file-too-large",vM="file-too-small",yM="too-many-files",_M=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",t=e.split(","),r=t.length>1?"one of ".concat(t.join(", ")):t[0];return{code:pM,message:"File type must be ".concat(r)}},tw=function(e){return{code:gM,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},nw=function(e){return{code:vM,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},xM={code:yM,message:"Too many files"};function CT(n,e){var t=n.type==="application/x-moz-file"||mM(n,e);return[t,t?null:_M(e)]}function DT(n,e,t){if(Ds(n.size))if(Ds(e)&&Ds(t)){if(n.size>t)return[!1,tw(t)];if(n.size<e)return[!1,nw(e)]}else{if(Ds(e)&&n.size<e)return[!1,nw(e)];if(Ds(t)&&n.size>t)return[!1,tw(t)]}return[!0,null]}function Ds(n){return n!=null}function bM(n){var e=n.files,t=n.accept,r=n.minSize,s=n.maxSize,l=n.multiple,u=n.maxFiles,f=n.validator;return!l&&e.length>1||l&&u>=1&&e.length>u?!1:e.every(function(p){var v=CT(p,t),_=Wc(v,1),E=_[0],w=DT(p,r,s),T=Wc(w,1),I=T[0],L=f?f(p):null;return E&&I&&!L})}function Ih(n){return typeof n.isPropagationStopped=="function"?n.isPropagationStopped():typeof n.cancelBubble<"u"?n.cancelBubble:!1}function qd(n){return n.dataTransfer?Array.prototype.some.call(n.dataTransfer.types,function(e){return e==="Files"||e==="application/x-moz-file"}):!!n.target&&!!n.target.files}function iw(n){n.preventDefault()}function wM(n){return n.indexOf("MSIE")!==-1||n.indexOf("Trident/")!==-1}function EM(n){return n.indexOf("Edge/")!==-1}function TM(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return wM(n)||EM(n)}function qi(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){for(var s=arguments.length,l=new Array(s>1?s-1:0),u=1;u<s;u++)l[u-1]=arguments[u];return e.some(function(f){return!Ih(r)&&f&&f.apply(void 0,[r].concat(l)),Ih(r)})}}function SM(){return"showOpenFilePicker"in window}function AM(n){if(Ds(n)){var e=Object.entries(n).filter(function(t){var r=Wc(t,2),s=r[0],l=r[1],u=!0;return kT(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),u=!1),(!Array.isArray(l)||!l.every(jT))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),u=!1),u}).reduce(function(t,r){var s=Wc(r,2),l=s[0],u=s[1];return ew(ew({},t),{},NT({},l,u))},{});return[{description:"Files",accept:e}]}return n}function RM(n){if(Ds(n))return Object.entries(n).reduce(function(e,t){var r=Wc(t,2),s=r[0],l=r[1];return[].concat(Jb(e),[s],Jb(l))},[]).filter(function(e){return kT(e)||jT(e)}).join(",")}function NM(n){return n instanceof DOMException&&(n.name==="AbortError"||n.code===n.ABORT_ERR)}function IM(n){return n instanceof DOMException&&(n.name==="SecurityError"||n.code===n.SECURITY_ERR)}function kT(n){return n==="audio/*"||n==="video/*"||n==="image/*"||n==="text/*"||n==="application/*"||/\w+\/[-+.\w]+/g.test(n)}function jT(n){return/^.*\.[\w]+$/.test(n)}var CM=["children"],DM=["open"],kM=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],jM=["refKey","onChange","onClick"];function OM(n){return LM(n)||MM(n)||OT(n)||PM()}function PM(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MM(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function LM(n){if(Array.isArray(n))return mg(n)}function Op(n,e){return zM(n)||VM(n,e)||OT(n,e)||UM()}function UM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OT(n,e){if(n){if(typeof n=="string")return mg(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return mg(n,e)}}function mg(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function VM(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],s=!0,l=!1,u,f;try{for(t=t.call(n);!(s=(u=t.next()).done)&&(r.push(u.value),!(e&&r.length===e));s=!0);}catch(p){l=!0,f=p}finally{try{!s&&t.return!=null&&t.return()}finally{if(l)throw f}}return r}}function zM(n){if(Array.isArray(n))return n}function rw(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function vt(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?rw(Object(t),!0).forEach(function(r){pg(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):rw(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function pg(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Ch(n,e){if(n==null)return{};var t=BM(n,e),r,s;if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(s=0;s<l.length;s++)r=l[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(n,r)&&(t[r]=n[r])}return t}function BM(n,e){if(n==null)return{};var t={},r=Object.keys(n),s,l;for(l=0;l<r.length;l++)s=r[l],!(e.indexOf(s)>=0)&&(t[s]=n[s]);return t}var Mv=C.forwardRef(function(n,e){var t=n.children,r=Ch(n,CM),s=MT(r),l=s.open,u=Ch(s,DM);return C.useImperativeHandle(e,function(){return{open:l}},[l]),lw.createElement(C.Fragment,null,t(vt(vt({},u),{},{open:l})))});Mv.displayName="Dropzone";var PT={disabled:!1,getFilesFromEvent:XP,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Mv.defaultProps=PT;Mv.propTypes={children:at.func,accept:at.objectOf(at.arrayOf(at.string)),multiple:at.bool,preventDropOnDocument:at.bool,noClick:at.bool,noKeyboard:at.bool,noDrag:at.bool,noDragEventsBubbling:at.bool,minSize:at.number,maxSize:at.number,maxFiles:at.number,disabled:at.bool,getFilesFromEvent:at.func,onFileDialogCancel:at.func,onFileDialogOpen:at.func,useFsAccessApi:at.bool,autoFocus:at.bool,onDragEnter:at.func,onDragLeave:at.func,onDragOver:at.func,onDrop:at.func,onDropAccepted:at.func,onDropRejected:at.func,onError:at.func,validator:at.func};var gg={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function MT(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=vt(vt({},PT),n),t=e.accept,r=e.disabled,s=e.getFilesFromEvent,l=e.maxSize,u=e.minSize,f=e.multiple,p=e.maxFiles,v=e.onDragEnter,_=e.onDragLeave,E=e.onDragOver,w=e.onDrop,T=e.onDropAccepted,I=e.onDropRejected,L=e.onFileDialogCancel,P=e.onFileDialogOpen,V=e.useFsAccessApi,Y=e.autoFocus,H=e.preventDropOnDocument,ee=e.noClick,X=e.noKeyboard,se=e.noDrag,M=e.noDragEventsBubbling,N=e.onError,A=e.validator,D=C.useMemo(function(){return RM(t)},[t]),U=C.useMemo(function(){return AM(t)},[t]),B=C.useMemo(function(){return typeof P=="function"?P:aw},[P]),O=C.useMemo(function(){return typeof L=="function"?L:aw},[L]),me=C.useRef(null),xe=C.useRef(null),oe=C.useReducer(FM,gg),ve=Op(oe,2),fe=ve[0],re=ve[1],k=fe.isFocused,Q=fe.isFileDialogActive,le=C.useRef(typeof window<"u"&&window.isSecureContext&&V&&SM()),de=function(){!le.current&&Q&&setTimeout(function(){if(xe.current){var Se=xe.current.files;Se.length||(re({type:"closeDialog"}),O())}},300)};C.useEffect(function(){return window.addEventListener("focus",de,!1),function(){window.removeEventListener("focus",de,!1)}},[xe,Q,O,le]);var ce=C.useRef([]),Ne=function(Se){me.current&&me.current.contains(Se.target)||(Se.preventDefault(),ce.current=[])};C.useEffect(function(){return H&&(document.addEventListener("dragover",iw,!1),document.addEventListener("drop",Ne,!1)),function(){H&&(document.removeEventListener("dragover",iw),document.removeEventListener("drop",Ne))}},[me,H]),C.useEffect(function(){return!r&&Y&&me.current&&me.current.focus(),function(){}},[me,Y,r]);var we=C.useCallback(function(ue){N?N(ue):console.error(ue)},[N]),ot=C.useCallback(function(ue){ue.preventDefault(),ue.persist(),Vn(ue),ce.current=[].concat(OM(ce.current),[ue.target]),qd(ue)&&Promise.resolve(s(ue)).then(function(Se){if(!(Ih(ue)&&!M)){var Oe=Se.length,Ue=Oe>0&&bM({files:Se,accept:D,minSize:u,maxSize:l,multiple:f,maxFiles:p,validator:A}),ft=Oe>0&&!Ue;re({isDragAccept:Ue,isDragReject:ft,isDragActive:!0,type:"setDraggedFiles"}),v&&v(ue)}}).catch(function(Se){return we(Se)})},[s,v,we,M,D,u,l,f,p,A]),Ee=C.useCallback(function(ue){ue.preventDefault(),ue.persist(),Vn(ue);var Se=qd(ue);if(Se&&ue.dataTransfer)try{ue.dataTransfer.dropEffect="copy"}catch{}return Se&&E&&E(ue),!1},[E,M]),Je=C.useCallback(function(ue){ue.preventDefault(),ue.persist(),Vn(ue);var Se=ce.current.filter(function(Ue){return me.current&&me.current.contains(Ue)}),Oe=Se.indexOf(ue.target);Oe!==-1&&Se.splice(Oe,1),ce.current=Se,!(Se.length>0)&&(re({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),qd(ue)&&_&&_(ue))},[me,_,M]),qe=C.useCallback(function(ue,Se){var Oe=[],Ue=[];ue.forEach(function(ft){var Ri=CT(ft,D),zn=Op(Ri,2),Xa=zn[0],ui=zn[1],Bn=DT(ft,u,l),St=Op(Bn,2),Ji=St[0],yn=St[1],Pt=A?A(ft):null;if(Xa&&Ji&&!Pt)Oe.push(ft);else{var Zi=[ui,yn];Pt&&(Zi=Zi.concat(Pt)),Ue.push({file:ft,errors:Zi.filter(function($s){return $s})})}}),(!f&&Oe.length>1||f&&p>=1&&Oe.length>p)&&(Oe.forEach(function(ft){Ue.push({file:ft,errors:[xM]})}),Oe.splice(0)),re({acceptedFiles:Oe,fileRejections:Ue,isDragReject:Ue.length>0,type:"setFiles"}),w&&w(Oe,Ue,Se),Ue.length>0&&I&&I(Ue,Se),Oe.length>0&&T&&T(Oe,Se)},[re,f,D,u,l,p,w,T,I,A]),It=C.useCallback(function(ue){ue.preventDefault(),ue.persist(),Vn(ue),ce.current=[],qd(ue)&&Promise.resolve(s(ue)).then(function(Se){Ih(ue)&&!M||qe(Se,ue)}).catch(function(Se){return we(Se)}),re({type:"reset"})},[s,qe,we,M]),nn=C.useCallback(function(){if(le.current){re({type:"openDialog"}),B();var ue={multiple:f,types:U};window.showOpenFilePicker(ue).then(function(Se){return s(Se)}).then(function(Se){qe(Se,null),re({type:"closeDialog"})}).catch(function(Se){NM(Se)?(O(Se),re({type:"closeDialog"})):IM(Se)?(le.current=!1,xe.current?(xe.current.value=null,xe.current.click()):we(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):we(Se)});return}xe.current&&(re({type:"openDialog"}),B(),xe.current.value=null,xe.current.click())},[re,B,O,V,qe,we,U,f]),dn=C.useCallback(function(ue){!me.current||!me.current.isEqualNode(ue.target)||(ue.key===" "||ue.key==="Enter"||ue.keyCode===32||ue.keyCode===13)&&(ue.preventDefault(),nn())},[me,nn]),oi=C.useCallback(function(){re({type:"focus"})},[]),li=C.useCallback(function(){re({type:"blur"})},[]),Ln=C.useCallback(function(){ee||(TM()?setTimeout(nn,0):nn())},[ee,nn]),Un=function(Se){return r?null:Se},Ai=function(Se){return X?null:Un(Se)},ci=function(Se){return se?null:Un(Se)},Vn=function(Se){M&&Se.stopPropagation()},Hr=C.useMemo(function(){return function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Se=ue.refKey,Oe=Se===void 0?"ref":Se,Ue=ue.role,ft=ue.onKeyDown,Ri=ue.onFocus,zn=ue.onBlur,Xa=ue.onClick,ui=ue.onDragEnter,Bn=ue.onDragOver,St=ue.onDragLeave,Ji=ue.onDrop,yn=Ch(ue,kM);return vt(vt(pg({onKeyDown:Ai(qi(ft,dn)),onFocus:Ai(qi(Ri,oi)),onBlur:Ai(qi(zn,li)),onClick:Un(qi(Xa,Ln)),onDragEnter:ci(qi(ui,ot)),onDragOver:ci(qi(Bn,Ee)),onDragLeave:ci(qi(St,Je)),onDrop:ci(qi(Ji,It)),role:typeof Ue=="string"&&Ue!==""?Ue:"presentation"},Oe,me),!r&&!X?{tabIndex:0}:{}),yn)}},[me,dn,oi,li,Ln,ot,Ee,Je,It,X,se,r]),dl=C.useCallback(function(ue){ue.stopPropagation()},[]),Wa=C.useMemo(function(){return function(){var ue=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Se=ue.refKey,Oe=Se===void 0?"ref":Se,Ue=ue.onChange,ft=ue.onClick,Ri=Ch(ue,jM),zn=pg({accept:D,multiple:f,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Un(qi(Ue,It)),onClick:Un(qi(ft,dl)),tabIndex:-1},Oe,xe);return vt(vt({},zn),Ri)}},[xe,t,f,It,r]);return vt(vt({},fe),{},{isFocused:k&&!r,getRootProps:Hr,getInputProps:Wa,rootRef:me,inputRef:xe,open:Un(nn)})}function FM(n,e){switch(e.type){case"focus":return vt(vt({},n),{},{isFocused:!0});case"blur":return vt(vt({},n),{},{isFocused:!1});case"openDialog":return vt(vt({},gg),{},{isFileDialogActive:!0});case"closeDialog":return vt(vt({},n),{},{isFileDialogActive:!1});case"setDraggedFiles":return vt(vt({},n),{},{isDragActive:e.isDragActive,isDragAccept:e.isDragAccept,isDragReject:e.isDragReject});case"setFiles":return vt(vt({},n),{},{acceptedFiles:e.acceptedFiles,fileRejections:e.fileRejections,isDragReject:e.isDragReject});case"reset":return vt({},gg);default:return n}}function aw(){}function qM({onImagesUploaded:n,maxImages:e=20}){const[t,r]=C.useState([]),[s,l]=C.useState(!1),[u,f]=C.useState({}),[p,v]=C.useState({}),[_,E]=C.useState(navigator.onLine),[w,T]=C.useState(!1),[I,L]=C.useState(!1),[P,V]=C.useState(!1),Y=C.useRef(null),H=C.useRef(null),{currentUser:ee}=vn();C.useEffect(()=>{const me=()=>{const oe=navigator.userAgent||navigator.vendor;T(/android|iphone|ipad|ipod|blackberry|windows phone/i.test(oe))},xe=()=>{V(!!navigator.mediaDevices&&!!navigator.mediaDevices.getUserMedia)};me(),xe()},[]),C.useEffect(()=>{const me=()=>E(!0),xe=()=>E(!1);return window.addEventListener("online",me),window.addEventListener("offline",xe),()=>{window.removeEventListener("online",me),window.removeEventListener("offline",xe)}},[]);const X=()=>{H.current&&(H.current.setAttribute("capture","environment"),H.current.click(),L(!1))},se=()=>{H.current&&(H.current.setAttribute("capture","user"),H.current.click(),L(!1))},M=()=>{Y.current&&(Y.current.removeAttribute("capture"),Y.current.click(),L(!1))},N=()=>{L(me=>!me)},A=C.useCallback(async me=>{if(console.log("Development mode:",!1,"Current user:",ee),!ee){console.log("No current user and not in development mode");return}if(!_){alert("You are currently offline. Please connect to the internet to upload images.");return}if(t.length+me.length>e){alert(`You can only upload a maximum of ${e} images. Please remove some images.`);return}l(!0);const ve={...u},fe={...p},re=me.map(async k=>{if(k.size>5*1024*1024){const ce=Date.now()+"_"+k.name;return fe[ce]=`File ${k.name} exceeds 5MB size limit`,v({...fe}),Promise.reject(new Error(`File ${k.name} exceeds 5MB size limit`))}const Q=Date.now()+"_"+k.name,le=`users/${ee.uid}/actor-images/${Q}`,de=_T(lf,le);ve[Q]=0,f({...ve});try{console.log("Attempting to upload to Firebase Storage path:",le);const ce={contentType:k.type,customMetadata:{"uploaded-by":"ai-actor-generator"}},Ne=aO(de,k,ce);return new Promise((we,ot)=>{Ne.on("state_changed",Ee=>{const Je=Ee.bytesTransferred/Ee.totalBytes*100;ve[Q]=Je,f({...ve}),console.log(`Upload progress for ${k.name}: ${Je.toFixed(1)}%`)},Ee=>{console.error(`Upload error for ${k.name}:`,Ee),console.error("Error code:",Ee.code),console.error("Error message:",Ee.message),Ee.code==="storage/unauthorized"||Ee.code==="storage/cors-error"?fe[Q]="CORS or authorization error. Firebase Storage isn't properly configured for this domain.":Ee.code==="storage/server-file-wrong-size"?fe[Q]="Network issue during upload. Please try again.":fe[Q]=`Error: ${Ee.message}`,v({...fe}),ot(Ee)},async()=>{try{const Ee=await yT(Ne.snapshot.ref),Je={id:Q,url:Ee,path:le,name:k.name};we(Je)}catch(Ee){console.error("Error getting download URL:",Ee),Ee instanceof Error&&(fe[Q]=Ee.message,v({...fe})),ot(Ee)}})})}catch(ce){throw console.error("Error starting upload:",ce),ce instanceof Error&&(fe[Q]=ce.message,v({...fe})),ce}});try{const Q=(await Promise.allSettled(re)).filter(de=>de.status==="fulfilled").map(de=>de.value),le=[...t,...Q];r(le),n(le)}catch(k){console.error("Error uploading images:",k)}finally{l(!1)}},[ee,e,n,p,u,t,_]),D=me=>{const xe=t.filter(fe=>fe.id!==me);r(xe),n(xe);const oe={...u},ve={...p};delete oe[me],delete ve[me],f(oe),v(ve)},{getRootProps:U,getInputProps:B,isDragActive:O}=MT({onDrop:A,accept:{"image/jpeg":[],"image/png":[],"image/webp":[]},maxSize:5*1024*1024,disabled:s||!_});return m.jsxs("div",{className:"space-y-6",children:[m.jsx("input",{ref:Y,type:"file",accept:"image/jpeg,image/png,image/webp",multiple:!0,className:"hidden",onChange:me=>{var xe;if((xe=me.target.files)!=null&&xe.length){const oe=Array.from(me.target.files);A(oe),me.target.value=""}}}),m.jsx("input",{ref:H,type:"file",accept:"image/jpeg,image/png,image/webp",className:"hidden",onChange:me=>{var xe;if((xe=me.target.files)!=null&&xe.length){const oe=Array.from(me.target.files);A(oe),me.target.value=""}}}),!_&&m.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-4",children:m.jsx("div",{className:"flex",children:m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-yellow-700",children:"You are currently offline. Connect to the internet to upload images."})})})}),w?m.jsxs("div",{className:"space-y-4",children:[m.jsx("p",{className:"text-sm text-gray-600 text-center",children:"Upload photos of your subject from different angles"}),I?m.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[P&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onClick:X,disabled:s||!_,className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg bg-white hover:border-primary-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed min-h-[100px] touch-target",children:[m.jsx("div",{className:"text-3xl mb-2",children:""}),m.jsx("span",{className:"text-sm font-medium",children:"Use Rear Camera"})]}),m.jsxs("button",{type:"button",onClick:se,disabled:s||!_,className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg bg-white hover:border-primary-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed min-h-[100px] touch-target",children:[m.jsx("div",{className:"text-3xl mb-2",children:""}),m.jsx("span",{className:"text-sm font-medium",children:"Use Front Camera (Selfie)"})]})]}),m.jsxs("button",{type:"button",onClick:M,disabled:s||!_,className:"flex flex-col items-center justify-center p-4 border-2 border-dashed border-gray-300 rounded-lg bg-white hover:border-primary-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed min-h-[100px] touch-target",children:[m.jsx("div",{className:"text-3xl mb-2",children:""}),m.jsx("span",{className:"text-sm font-medium",children:"Photo Gallery"})]}),m.jsx("button",{type:"button",onClick:N,className:"mt-2 flex items-center justify-center p-2 text-gray-500 text-sm touch-target",children:"Cancel"})]}):m.jsxs("button",{type:"button",onClick:N,disabled:s||!_,className:"w-full flex flex-col items-center justify-center p-6 border-2 border-dashed border-gray-300 rounded-lg bg-white hover:border-primary-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed min-h-[150px] touch-target",children:[m.jsx("div",{className:"text-4xl mb-3",children:""}),m.jsx("span",{className:"text-base font-medium",children:"Take Photo or Upload Image"}),m.jsx("span",{className:"text-xs text-gray-500 mt-1",children:"Tap to choose camera or gallery"})]})]}):m.jsxs("div",{...U(),className:`border-2 border-dashed p-6 rounded-lg text-center cursor-pointer touch-target min-h-[120px] flex flex-col items-center justify-center ${O?"border-primary-500 bg-primary-50":"border-gray-300 hover:border-primary-500"} ${s||!_?"opacity-50 cursor-not-allowed":""}`,children:[m.jsx("input",{...B()}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("div",{className:"text-4xl text-gray-300",children:""}),O?m.jsx("p",{className:"text-primary-600",children:"Drop the images here..."}):m.jsxs(m.Fragment,{children:[m.jsx("p",{className:"text-gray-600",children:"Drag and drop images here, or click to select files"}),m.jsxs("p",{className:"text-sm text-gray-500",children:["JPG, PNG, WebP  Up to 5MB each  Max ",e," images"]})]})]})]}),t.length>0&&m.jsxs("div",{className:"mt-6",children:[m.jsxs("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:["Uploaded Images (",t.length,"/",e,")"]}),m.jsx("div",{className:"grid grid-cols-2 gap-4 sm:grid-cols-3 md:grid-cols-4",children:t.map(me=>m.jsxs("div",{className:"relative group rounded-lg overflow-hidden border border-gray-200",children:[m.jsx("img",{src:me.url,alt:me.name,className:"w-full h-32 object-cover",loading:"lazy"}),!w&&m.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:m.jsx("button",{onClick:()=>D(me.id),className:"bg-red-500 text-white rounded-full p-2",type:"button","aria-label":"Remove image",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})}),w&&m.jsx("button",{onClick:()=>D(me.id),className:"absolute top-1 right-1 bg-red-500 text-white rounded-full p-1 min-w-[32px] min-h-[32px] flex items-center justify-center shadow",type:"button","aria-label":"Remove image",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},me.id))})]}),Object.keys(u).length>0&&s&&m.jsxs("div",{className:"space-y-2 mt-4",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-700",children:"Uploading..."}),Object.entries(u).map(([me,xe])=>m.jsxs("div",{className:"space-y-1",children:[m.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[m.jsx("span",{children:"Uploading image..."}),m.jsxs("span",{children:[Math.round(xe),"%"]})]}),m.jsx("div",{className:"bg-gray-100 rounded-full overflow-hidden h-2",children:m.jsx("div",{className:"bg-primary-500 h-full rounded-full transition-all duration-300 ease-in-out",style:{width:`${xe}%`}})})]},me))]}),Object.keys(p).length>0&&m.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mt-4",children:m.jsx("div",{className:"flex",children:m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Upload errors:"}),m.jsx("div",{className:"mt-2 text-sm text-red-700",children:m.jsx("ul",{className:"list-disc pl-5 space-y-1",children:Object.entries(p).map(([me,xe])=>m.jsx("li",{children:xe},me))})})]})})}),m.jsxs("div",{className:"bg-blue-50 p-4 rounded-md mt-2",children:[m.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-1",children:"Tips for best results:"}),m.jsxs("ul",{className:"text-xs text-blue-700 space-y-1 list-disc pl-5",children:[m.jsx("li",{children:"Upload clear, well-lit photos of the subject"}),m.jsx("li",{children:"Include different angles and expressions"}),m.jsx("li",{children:"Avoid photos with multiple people"}),m.jsx("li",{children:"Upload at least 5 different photos for best results"})]})]})]})}function HM(){const[n,e]=C.useState(""),[t,r]=C.useState(""),[s,l]=C.useState([]),[u,f]=C.useState(!1),[p,v]=C.useState(""),[_,E]=C.useState(navigator.onLine),[w,T]=C.useState(!1),[I,L]=C.useState({}),P=zr(),{currentUser:V}=vn();C.useEffect(()=>{const ee=()=>E(!0),X=()=>E(!1);return window.addEventListener("online",ee),window.addEventListener("offline",X),()=>{window.removeEventListener("online",ee),window.removeEventListener("offline",X)}},[]),C.useEffect(()=>{if(!w)return;const ee={};n.trim()?n.length>50&&(ee.name="Actor name must be less than 50 characters"):ee.name="Actor name is required",t||(ee.gender="Please select a gender"),s.length<5&&(ee.images="Please upload at least 5 images"),L(ee)},[n,t,s,w]);const Y=ee=>{l(ee),T(!0)},H=async ee=>{ee.preventDefault(),T(!0),console.log("Submitting form, currentUser:",V);const X=!1;if(!V){v("You must be logged in to create an actor");return}const se=V||{uid:"test-user-"+Date.now(),email:"test@example.com"};if(!_){v("You are currently offline. Please connect to the internet to create an actor.");return}if(!n.trim()||!t||s.length<5){console.log("Validation failed:",{name:n,gender:t,imagesLength:s.length}),console.log("Validation errors:",I),console.log("Is development mode:",X),s.length<5?v("Please upload at least 5 images"):v("Please fix the form errors before submitting");return}try{if(f(!0),v(""),console.log("Attempting to create actor document in Firestore..."),!st)throw console.error("Firestore is not initialized"),new Error("Database connection is not available. Please try again later.");console.log("Firestore instance:",st),console.log("Starting Firestore operation...");const M=_i(st,"actors");console.log("Actors collection reference created:",M);const N={userId:se.uid,name:n,gender:t,createdAt:Yc(),modelStatus:"pending",imageRefs:s.map(D=>({id:D.id,path:D.path,url:D.url}))};console.log("Actor data prepared:",N),console.log("Submit data:",{name:n,gender:t,images:s.length}),console.log("Effective user:",se);const A=await QE(M,{userId:se.uid,name:n,gender:t,createdAt:Yc(),modelStatus:"pending",imageRefs:s.map(D=>({id:D.id,path:D.path,url:D.url}))});console.log("Actor document created successfully with ID:",A.id),P("/dashboard",{state:{message:`Actor "${n}" created successfully! Training will begin shortly.`}})}catch(M){console.error("Error creating actor:",M),M instanceof Error?v(`Failed to create actor: ${M.message}`):v("Failed to create actor. Please try again.")}finally{f(!1)}};return m.jsxs("div",{className:"max-w-2xl mx-auto bg-white p-4 sm:p-6 rounded-lg shadow-md",children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Create Your AI Actor"}),!_&&m.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6",children:m.jsx("div",{className:"flex",children:m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-yellow-700",children:"You are currently offline. Connect to the internet to create your AI actor."})})})}),p&&m.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:m.jsx("div",{className:"flex",children:m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-red-700",children:p})})})}),m.jsxs("form",{onSubmit:H,className:"space-y-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Actor Name*"}),m.jsx("div",{className:"mt-1",children:m.jsx("input",{id:"name",name:"name",type:"text",value:n,onChange:ee=>{e(ee.target.value),T(!0)},required:!0,className:`appearance-none block w-full px-3 py-2 border ${I.name?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none text-base`,placeholder:"e.g. My Digital Twin"})}),I.name?m.jsx("p",{className:"mt-1 text-sm text-red-600",children:I.name}):m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This name will help you identify this actor in your dashboard"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Actor Gender*"}),m.jsx("div",{className:"mt-1",children:m.jsxs("select",{id:"gender",name:"gender",value:t,onChange:ee=>{r(ee.target.value),T(!0)},required:!0,className:`appearance-none block w-full px-3 py-2 border ${I.gender?"border-red-300 focus:ring-red-500 focus:border-red-500":"border-gray-300 focus:ring-primary-500 focus:border-primary-500"} rounded-md shadow-sm placeholder-gray-400 focus:outline-none text-base`,children:[m.jsx("option",{value:"",children:"Select gender"}),m.jsx("option",{value:"male",children:"Male"}),m.jsx("option",{value:"female",children:"Female"}),m.jsx("option",{value:"other",children:"Other"})]})}),I.gender?m.jsx("p",{className:"mt-1 text-sm text-red-600",children:I.gender}):m.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"This helps the AI better understand the subject of your images"})]}),m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Upload Photos* (minimum 5)"}),m.jsx(qM,{onImagesUploaded:Y}),I.images&&m.jsx("p",{className:"mt-2 text-sm text-red-600",children:I.images})]}),m.jsx("button",{type:"submit",disabled:u||!_||Object.keys(I).length>0,className:"w-full touch-target flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors min-h-[44px]",children:u?"Creating Actor...":"Create AI Actor"})]}),m.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-md border border-blue-100",children:[m.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"What happens next?"}),m.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"After uploading your photos, our AI will begin training to learn the features and characteristics of your subject. This process typically takes 15-30 minutes. You'll be notified when your AI actor is ready for generating new images!"})]})]})}function GM(){const{currentUser:n,logOut:e}=vn(),t=async()=>{try{await e()}catch(r){console.error("Failed to log out",r)}};return m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx("header",{className:"bg-white shadow",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[m.jsx("h1",{className:"text-2xl font-bold text-primary-600",children:"AI Actor Generator"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"mr-4 text-sm text-gray-600",children:n==null?void 0:n.email}),m.jsx("button",{onClick:t,className:"touch-target text-sm font-medium text-gray-700 hover:text-primary-600 transition-colors",children:"Log out"})]})]})}),m.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[m.jsx("div",{className:"mb-6",children:m.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:m.jsxs("ol",{className:"flex items-center space-x-4",children:[m.jsx("li",{children:m.jsx("div",{children:m.jsx(Ye,{to:"/dashboard",className:"text-gray-500 hover:text-gray-700 text-sm",children:"Dashboard"})})}),m.jsx("li",{children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:m.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})}),m.jsx("span",{className:"ml-4 text-sm font-medium text-gray-500",children:"Create Actor"})]})})]})})}),m.jsx(HM,{})]})]})}function $M({actorId:n,trainingJobId:e,initialStatus:t="pending",onComplete:r}){const[s,l]=C.useState(null),[u,f]=C.useState(null),[p,v]=C.useState(navigator.onLine),_=!1;C.useEffect(()=>{const L=()=>v(!0),P=()=>v(!1);return window.addEventListener("online",L),window.addEventListener("offline",P),()=>{window.removeEventListener("online",L),window.removeEventListener("offline",P)}},[]),C.useEffect(()=>{if(console.log("TrainingStatus component initialized:",{actorId:n,trainingJobId:e,initialStatus:t,isDevelopment:_}),l({status:t==="training"?"processing":t,progress:t==="completed"?100:0,createdAt:new Date,estimatedTimeRemaining:t==="processing"||t==="training"?900:0}),!p){console.log("Device is offline, skipping subscription");return}try{console.log(`Setting up Firestore listener for trainingJob: ${e}`);const L=WE(Mn(st,"trainingJobs",e),P=>{if(P.exists()){const V=P.data();console.log("Received training job update:",V),l(V),V.status==="completed"&&r&&(console.log("Training completed, calling onComplete callback"),r())}else console.warn("Training job document does not exist"),f("Training job not found")},P=>{console.error("Error in Firestore listener:",P),f("Failed to get training status updates")});return()=>{console.log("Cleaning up Firestore listener"),L()}}catch(L){console.error("Exception setting up Firestore listener:",L),f("Failed to monitor training progress");return}},[n,e,t,p,r,_]);const E=L=>{if(!L)return"";const P=Math.floor(L/60),V=L%60;return P>0?`${P}m ${V}s`:`${V}s`};if(u)return m.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-md",children:m.jsx("div",{className:"flex",children:m.jsxs("div",{className:"ml-3",children:[m.jsx("p",{className:"text-sm text-red-700",children:u}),!p&&m.jsx("p",{className:"text-sm text-red-700 mt-2",children:"You are currently offline. Reconnect to see the latest status."}),_]})})});if(!s)return m.jsxs("div",{className:"animate-pulse p-4 rounded-md bg-gray-50",children:[m.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),m.jsx("div",{className:"h-2 bg-gray-200 rounded w-full mb-3"}),m.jsx("div",{className:"h-2 bg-gray-200 rounded-full w-full"})]});const w=()=>{switch(s.status){case"completed":return"bg-green-100 text-green-800 border-green-400";case"processing":return"bg-blue-100 text-blue-800 border-blue-400";case"failed":return"bg-red-100 text-red-800 border-red-400";default:return"bg-yellow-100 text-yellow-800 border-yellow-400"}},T=()=>{switch(s.status){case"completed":return"Training completed successfully";case"processing":return"Training in progress";case"failed":return"Training failed";default:return"Training pending - waiting to start"}},I=()=>{switch(s.status){case"completed":return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-600",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})});case"processing":return m.jsxs("svg",{className:"animate-spin h-5 w-5 text-blue-600",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]});case"failed":return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-600",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})});default:return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-yellow-600",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})}};return m.jsxs("div",{className:`rounded-lg border-l-4 ${w()} p-4 space-y-3`,children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("div",{className:"flex-shrink-0",children:I()}),m.jsxs("div",{className:"ml-3",children:[m.jsx("h3",{className:"text-sm font-medium",children:T()}),_]})]}),s.status==="processing"&&m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[m.jsx("span",{children:"Progress"}),m.jsxs("span",{children:[s.progress,"%"]})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2.5 overflow-hidden",children:m.jsx("div",{className:"h-2.5 rounded-full bg-blue-600 transition-all duration-300",style:{width:`${s.progress}%`}})}),s.estimatedTimeRemaining&&m.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[m.jsx("span",{children:"Estimated time remaining:"}),m.jsx("span",{children:E(s.estimatedTimeRemaining)})]})]}),!p&&m.jsxs("div",{className:"text-xs text-yellow-700 flex items-center",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"You're offline. Status updates will resume when you reconnect."]}),s.status==="failed"&&s.error&&m.jsxs("div",{className:"text-sm text-red-700",children:[m.jsx("p",{className:"font-medium",children:"Error details:"}),m.jsx("p",{children:s.error}),m.jsx("p",{className:"mt-2",children:"Please contact support if this issue persists."})]}),s.status==="completed"&&m.jsxs("div",{className:"flex items-center mt-2",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),m.jsx("p",{className:"text-sm text-green-700",children:"Your AI actor is ready! You can now generate images."})]})]})}const sw=()=>navigator.onLine;async function KM(n){if(!sw())throw new Error("Cannot start training while offline. Please connect to the internet and try again.");try{const r=(await wT(jv,"trainModel")({actorId:n})).data;return await Kc(Mn(st,"actors",n),{modelStatus:"training",trainingJobId:r.jobId,modelId:r.modelId}),r}catch(e){throw console.error("Error initiating training:",e),e.code==="functions/unavailable"?new Error("Training service is currently unavailable. Please try again later."):e.code==="functions/resource-exhausted"?new Error("Training capacity reached. Please try again later when system resources are available."):e.code==="functions/invalid-argument"?new Error("Invalid actor data. Please ensure you have uploaded enough clear images."):sw()?new Error(e.message||"Failed to start training. Please try again later."):new Error("Connection lost during training request. Please check your internet connection.")}}function YM(){const{actorId:n}=gw(),[e,t]=C.useState(null),[r,s]=C.useState(!0),[l,u]=C.useState(null),[f,p]=C.useState(!1),[v,_]=C.useState(navigator.onLine),[E,w]=C.useState(null),{currentUser:T,logOut:I}=vn(),L=zr();C.useEffect(()=>{const N=()=>{_(!0),P()},A=()=>_(!1);return window.addEventListener("online",N),window.addEventListener("offline",A),()=>{window.removeEventListener("online",N),window.removeEventListener("offline",A)}},[]);const P=async()=>{if(!(!n||!T))try{const N=Mn(st,"actors",n),A=await $c(N);if(!A.exists()){u("Actor not found"),s(!1);return}const D=A.data();if(D.userId!==(T==null?void 0:T.uid)){u("You do not have permission to view this actor"),s(!1);return}t({id:n,...D})}catch(N){console.error("Error fetching actor:",N),u("Failed to load actor details")}finally{s(!1)}};C.useEffect(()=>{console.log("ActorDetailPage mounted, fetching actor data"),P()},[n]),C.useEffect(()=>{},[e]);const V=async()=>{if(!e||!v)return;const N=!1;console.log("Starting training for actor:",e.id,"Development mode:",N);try{p(!0),u(null),console.log("Initiating training via training service");const A=await KM(e.id);console.log("Training initiated successfully:",A),t({...e,modelStatus:"training",trainingJobId:A.jobId});try{console.log("Updating Firestore document with training status"),await Kc(Mn(st,"actors",e.id),{modelStatus:"training",trainingJobId:A.jobId}),console.log("Firestore document updated successfully")}catch(D){if(console.error("Error updating Firestore:",D),!N)throw D}}catch(A){console.error("Error starting training:",A),u(A.message||"Failed to start training")}finally{p(!1)}},Y=async()=>{try{await I(),L("/login")}catch(N){console.error("Failed to log out",N)}},H=N=>N?(N.toDate?N.toDate():new Date(N)).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"}):"Unknown date",ee=N=>{w(N),document.body.style.overflow="hidden"},X=()=>{w(null),document.body.style.overflow="auto"},se=()=>{E===null||!e||w((E+1)%e.imageRefs.length)},M=()=>{E===null||!e||w((E-1+e.imageRefs.length)%e.imageRefs.length)};return m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx("header",{className:"bg-white shadow",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[m.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-primary-600",children:"AI Actor Generator"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"hidden sm:inline mr-4 text-sm text-gray-600",children:T==null?void 0:T.email}),m.jsx("button",{onClick:Y,className:"touch-target min-h-[44px] flex items-center justify-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-primary-600 transition-colors",children:"Log out"})]})]})}),m.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[!v&&m.jsx("div",{className:"mb-6 bg-yellow-50 border-l-4 border-yellow-400 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-yellow-700",children:"You're currently offline. Some features may be unavailable until you reconnect."})})]})}),m.jsx("div",{className:"mb-6",children:m.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:m.jsxs("ol",{className:"flex items-center space-x-4",children:[m.jsx("li",{children:m.jsx("div",{children:m.jsx(Ye,{to:"/dashboard",className:"text-gray-500 hover:text-gray-700 text-sm",children:"Dashboard"})})}),m.jsx("li",{children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:m.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})}),m.jsx("span",{className:"ml-4 text-sm font-medium text-gray-500",children:"Actor Details"})]})})]})})}),l&&m.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:m.jsx("div",{className:"flex",children:m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-red-700",children:l})})})}),r?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"inline-block animate-spin h-8 w-8 border-4 border-gray-200 rounded-full border-t-primary-600 mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Loading actor details..."})]}):e?m.jsxs("div",{className:"bg-white shadow overflow-hidden rounded-lg",children:[m.jsx("div",{className:"px-4 py-5 sm:px-6",children:m.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:e.name}),m.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Created on ",H(e.createdAt)]})]}),e.modelStatus==="completed"&&m.jsxs(Ye,{to:`/generate/${e.id}`,className:"touch-target inline-flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 min-h-[44px]",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M4 2a2 2 0 00-2 2v11a3 3 0 106 0V4a2 2 0 00-2-2H4zm1 14a1 1 0 100-2 1 1 0 000 2zm5-1.757l4.9-4.9a2 2 0 000-2.828L13.485 5.1a2 2 0 00-2.828 0L10 5.757v8.486zM16 18H9.071l6-6H16a2 2 0 012 2v2a2 2 0 01-2 2z",clipRule:"evenodd"})}),"Generate Images"]})]})}),m.jsx("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6",children:m.jsxs("dl",{className:"grid grid-cols-1 gap-x-4 gap-y-6 sm:grid-cols-2",children:[m.jsxs("div",{className:"sm:col-span-1",children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Gender"}),m.jsx("dd",{className:"mt-1 text-sm text-gray-900 capitalize",children:e.gender})]}),m.jsxs("div",{className:"sm:col-span-1",children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Total Images"}),m.jsxs("dd",{className:"mt-1 text-sm text-gray-900",children:[e.imageRefs.length," photos"]})]}),m.jsxs("div",{className:"sm:col-span-2",children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500",children:"Model Status"}),m.jsx("dd",{className:"mt-1",children:e.trainingJobId?m.jsx($M,{actorId:e.id,trainingJobId:e.trainingJobId,initialStatus:e.modelStatus,onComplete:()=>{t({...e,modelStatus:"completed"})}}):m.jsxs("div",{className:"flex items-center flex-wrap gap-4",children:[m.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${e.modelStatus==="pending"?"bg-yellow-100 text-yellow-800":e.modelStatus==="failed"?"bg-red-100 text-red-800":""}`,children:e.modelStatus.charAt(0).toUpperCase()+e.modelStatus.slice(1)}),e.modelStatus==="pending"&&m.jsx("button",{onClick:V,disabled:f||!v,className:"touch-target inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed min-h-[44px]",children:f?"Starting...":"Start Training Now"})]})})]}),m.jsxs("div",{className:"sm:col-span-2",children:[m.jsx("dt",{className:"text-sm font-medium text-gray-500 mb-2",children:"Reference Images"}),m.jsx("dd",{className:"text-sm text-gray-900",children:m.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:e.imageRefs.map((N,A)=>m.jsxs("div",{className:"relative rounded-lg overflow-hidden border border-gray-200 group cursor-pointer touch-target",onClick:()=>ee(A),children:[m.jsx("img",{src:N.url,alt:N.name||`Reference ${A+1}`,className:"w-full h-32 object-cover",loading:"lazy"}),m.jsx("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-30 transition-opacity"}),m.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:m.jsx("span",{className:"bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded",children:"View"})})]},N.id))})})]})]})}),m.jsxs("div",{className:"border-t border-gray-200 px-4 py-5 sm:px-6 bg-gray-50",children:[e.modelStatus==="pending"&&m.jsxs("div",{className:"text-sm text-gray-700",children:[m.jsx("h3",{className:"font-semibold",children:"What happens during training?"}),m.jsx("p",{className:"mt-1",children:"When you start training, our AI will learn the features of your actor from the uploaded images. This process typically takes 15-30 minutes. You'll be notified when it's complete and ready to generate new images."})]}),e.modelStatus==="training"&&m.jsxs("div",{className:"text-sm text-gray-700",children:[m.jsx("h3",{className:"font-semibold",children:"Training in progress"}),m.jsx("p",{className:"mt-1",children:"Your AI actor is currently being trained. This process typically takes 15-30 minutes. You can leave this page and come back later, or stay and watch the progress."})]}),e.modelStatus==="completed"&&m.jsxs("div",{className:"text-sm text-gray-700",children:[m.jsx("h3",{className:"font-semibold",children:"Training complete!"}),m.jsx("p",{className:"mt-1",children:'Your AI actor is ready to generate images. Click the "Generate Images" button to create amazing new images of your actor in different styles and settings.'})]}),e.modelStatus==="failed"&&m.jsxs("div",{className:"text-sm text-gray-700",children:[m.jsx("h3",{className:"font-semibold",children:"Training failed"}),m.jsx("p",{className:"mt-1",children:"Unfortunately, the training process failed. This could be due to issues with the uploaded images or temporary system problems. You can try again or contact support for assistance."})]})]})]}):m.jsx("div",{className:"text-center py-12",children:m.jsx("p",{className:"text-gray-600",children:"Actor not found"})}),e&&E!==null&&m.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4",children:m.jsxs("div",{className:"relative w-full max-w-3xl",children:[m.jsx("button",{onClick:X,className:"absolute top-0 right-0 -mt-12 -mr-4 text-white p-2 touch-target z-10",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:e.imageRefs[E].url,alt:e.imageRefs[E].name||`Image ${E+1}`,className:"max-h-[80vh] mx-auto object-contain"}),m.jsx("button",{onClick:M,className:"absolute left-0 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-r touch-target",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),m.jsx("button",{onClick:se,className:"absolute right-0 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-l touch-target",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),m.jsxs("div",{className:"text-center text-white mt-4",children:[E+1," / ",e.imageRefs.length]})]})}),m.jsxs("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 py-2 px-4 flex justify-around items-center",children:[m.jsxs(Ye,{to:"/dashboard",className:"flex flex-col items-center justify-center min-w-[64px] min-h-[44px] touch-target text-gray-600",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),m.jsx("span",{className:"text-xs mt-1",children:"Home"})]}),m.jsxs(Ye,{to:"/create-actor",className:"flex flex-col items-center justify-center min-w-[64px] min-h-[44px] touch-target text-gray-600",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),m.jsx("span",{className:"text-xs mt-1",children:"Create"})]}),m.jsxs("button",{onClick:Y,className:"flex flex-col items-center justify-center min-w-[64px] min-h-[44px] touch-target text-gray-600",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 00-1 1v12a1 1 0 001 1h12a1 1 0 001-1V7.414l-5-5H3zM2 4a2 2 0 012-2h5.586a1 1 0 01.707.293l6 6a1 1 0 01.293.707V16a2 2 0 01-2 2H4a2 2 0 01-2-2V4z",clipRule:"evenodd"}),m.jsx("path",{d:"M10 9V6m0 0v3m0-3h3m-3 0H7"})]}),m.jsx("span",{className:"text-xs mt-1",children:"Account"})]})]}),m.jsx("div",{className:"sm:hidden h-16"})]})]})}const LT=({showControls:n=!1,compact:e=!1,className:t=""})=>{const{isSupported:r,isCharging:s,batteryLevelPercentage:l,optimizationLevel:u,isBatteryLow:f,setOptimizationLevel:p,warningMessage:v}=cf();if(!r)return e?null:m.jsx("div",{className:`text-xs text-gray-500 ${t}`,children:"Battery status not available on this device"});const _=()=>s?"text-green-500":l===null?"text-gray-500":l<=15?"text-red-500":l<=30?"text-yellow-500":"text-green-500",E=()=>{if(l===null)return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})});const w=Math.max(0,Math.min(100,l));return m.jsxs("div",{className:"relative h-4 w-6",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[m.jsx("rect",{x:"2",y:"7",width:"16",height:"10",rx:"2",strokeWidth:"2"}),m.jsx("path",{d:"M20 11h2v2h-2v-2z",strokeWidth:"2"})]}),m.jsx("div",{className:`absolute top-1/2 left-[3px] transform -translate-y-1/2 h-2 rounded-sm transition-all duration-300 ease-in-out ${_()}`,style:{width:`${w*13/100}px`,backgroundColor:"currentColor"}}),s&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 text-white",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})})})]})};return e?m.jsx("div",{className:`flex items-center ${t}`,children:m.jsxs("div",{className:`flex items-center ${_()}`,children:[E(),m.jsxs("span",{className:"ml-1 text-xs",children:[l,"%"]}),s&&m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3 w-3 ml-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M11.3 1.046A1 1 0 0112 2v5h4a1 1 0 01.82 1.573l-7 10A1 1 0 018 18v-5H4a1 1 0 01-.82-1.573l7-10a1 1 0 011.12-.38z",clipRule:"evenodd"})})]})}):m.jsxs("div",{className:`p-2 rounded-md ${f?"bg-red-50":"bg-gray-50"} ${t}`,children:[m.jsxs("div",{className:"flex items-center mb-2",children:[m.jsxs("div",{className:`flex items-center ${_()}`,children:[E(),m.jsxs("span",{className:"ml-1 text-sm font-medium",children:[l!==null?`${l}%`:"Unknown",s&&" (Charging)"]})]}),v&&m.jsx("p",{className:"text-xs ml-2 text-gray-600",children:v})]}),n&&m.jsxs("div",{className:"mt-2",children:[m.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Power Optimization"}),m.jsxs("select",{value:u,onChange:w=>p(w.target.value),className:"block w-full pl-3 pr-10 py-2 text-sm border-gray-300 focus:outline-none focus:ring-primary-500 focus:border-primary-500 rounded-md",children:[m.jsx("option",{value:Tr.HIGH,children:"Maximum (Battery Saver)"}),m.jsx("option",{value:Tr.MEDIUM,children:"Balanced"}),m.jsx("option",{value:Tr.LOW,children:"Minimal"}),m.jsx("option",{value:Tr.NONE,children:"None (Best Quality)"})]}),m.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:[u===Tr.HIGH&&"Maximizes battery life, may reduce quality",u===Tr.MEDIUM&&"Balances battery life and quality",u===Tr.LOW&&"Prioritizes quality with some battery optimizations",u===Tr.NONE&&"No battery optimizations, maximizes quality"]})]})]})};function QM({onSubmit:n,isLoading:e}){const[t,r]=C.useState(""),[s,l]=C.useState(""),[u,f]=C.useState(7.5),[p,v]=C.useState(50),[_,E]=C.useState(!1),[w,T]=C.useState(!1),{imageGenerationSettings:I,shouldShowWarning:L,isBatteryLow:P,optimizationLevel:V}=cf();C.useEffect(()=>{w||(v(I.inferenceSteps),E(I.useLowMemoryMode))},[I,w]);const Y=H=>{H.preventDefault(),t.trim()&&n(t,{negativePrompt:s,guidanceScale:u,numInferenceSteps:p,useLowMemoryMode:_})};return m.jsxs("div",{className:"space-y-4",children:[(L||w)&&m.jsx("div",{className:"mb-4",children:m.jsx(LT,{showControls:w,compact:!w})}),m.jsxs("form",{onSubmit:Y,className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"prompt",className:"block text-sm font-medium text-gray-700 mb-1",children:"Describe what you want to generate"}),m.jsx("textarea",{id:"prompt",value:t,onChange:H=>r(H.target.value),placeholder:"Example: A photo of [your actor name] wearing a business suit in an office setting, professional lighting",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-base",required:!0}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Be as specific as possible. Include details like setting, outfit, pose, lighting, and style."})]}),m.jsx("button",{type:"button",onClick:()=>T(!w),className:"text-sm font-medium text-primary-600 hover:text-primary-500 transition-colors touch-target min-h-[44px] flex items-center",children:w?"Hide advanced settings":"Show advanced settings"}),w&&m.jsxs("div",{className:"space-y-4 p-4 border border-gray-200 rounded-md bg-gray-50",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"negativePrompt",className:"block text-sm font-medium text-gray-700 mb-1",children:"Negative Prompt"}),m.jsx("textarea",{id:"negativePrompt",value:s,onChange:H=>l(H.target.value),placeholder:"Elements you want to avoid (e.g., blurry, bad lighting, deformed face)",rows:2,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-primary-500 focus:border-primary-500 text-sm"}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Specify elements you don't want in the image"})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"guidanceScale",className:"block text-sm font-medium text-gray-700 mb-1",children:["Guidance Scale: ",u]}),m.jsx("input",{id:"guidanceScale",type:"range",min:"1",max:"20",step:"0.5",value:u,onChange:H=>f(parseFloat(H.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer touch-target"}),m.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Higher values make the image follow your prompt more closely (7-8 is recommended)"})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"numInferenceSteps",className:"block text-sm font-medium text-gray-700 mb-1",children:["Inference Steps: ",p]}),m.jsx("input",{id:"numInferenceSteps",type:"range",min:"20",max:"100",step:"1",value:p,onChange:H=>v(parseInt(H.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer touch-target"}),m.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["Higher values produce more detailed images but take longer (30-50 is recommended)",P&&!isCharging&&m.jsx("span",{className:"text-amber-600 ml-1",children:"Lower steps are recommended when battery is low"})]})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{id:"lowMemoryMode",type:"checkbox",checked:_,onChange:H=>E(H.target.checked),className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded touch-target"}),m.jsx("label",{htmlFor:"lowMemoryMode",className:"ml-2 block text-sm text-gray-700",children:"Use low memory mode (faster but slightly lower quality)"})]}),m.jsxs("div",{className:"text-sm text-gray-600 p-3 border border-gray-200 rounded bg-white",children:[m.jsx("strong",{children:"Current Optimization Level:"})," ",V,m.jsxs("p",{className:"text-xs mt-1",children:[V==="high"&&"Maximum battery saving mode - image quality may be reduced.",V==="medium"&&"Balanced mode - reasonable quality with good battery life.",V==="low"&&"Quality-focused mode with some battery optimization.",V==="none"&&"Maximum quality mode with no battery optimizations."]})]})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:e||!t.trim(),className:"w-full touch-target flex justify-center items-center gap-2 py-3 px-4 border border-transparent rounded-md shadow-sm text-base font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors min-h-[44px]",children:e?m.jsxs(m.Fragment,{children:[m.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m.jsx("span",{children:"Generating..."})]}):"Generate Image"})})]}),m.jsxs("div",{className:"p-4 bg-blue-50 rounded-md border border-blue-100",children:[m.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"Tips for best results"}),m.jsxs("ul",{className:"mt-2 text-sm text-blue-700 space-y-1 list-disc pl-5",children:[m.jsx("li",{children:"Be specific and detailed in your prompt"}),m.jsx("li",{children:"Include style (photorealistic, digital art, etc.)"}),m.jsx("li",{children:"Mention camera details for photos (portrait lens, studio lighting)"}),m.jsx("li",{children:"For artistic styles, reference specific artists or art movements"}),m.jsx("li",{children:"Use negative prompts to avoid unwanted elements"})]})]})]})}function WM({imageUrl:n,prompt:e,onDownload:t,onShare:r}){const[s,l]=C.useState(!0),u=()=>{l(!1)};return m.jsxs("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[m.jsxs("div",{className:"relative aspect-square",children:[s&&m.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100",children:m.jsxs("div",{className:"animate-pulse flex flex-col items-center",children:[m.jsxs("svg",{className:"animate-spin h-10 w-10 text-primary-500 mb-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m.jsx("span",{className:"text-sm text-gray-500",children:"Loading image..."})]})}),m.jsx("img",{src:n,alt:e,className:"w-full h-full object-cover",onLoad:u})]}),m.jsxs("div",{className:"p-4",children:[m.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-3",title:e,children:e}),m.jsxs("div",{className:"flex space-x-2",children:[t&&m.jsxs("button",{onClick:t,className:"flex-1 touch-target inline-flex justify-center items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Download"]}),r&&m.jsxs("button",{onClick:r,className:"flex-1 touch-target inline-flex justify-center items-center px-3 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"})}),"Share"]})]})]})]})}const Dh=()=>navigator.onLine,XM=()=>{if("connection"in navigator&&"effectiveType"in navigator.connection){const n=navigator.connection;return["slow-2g","2g","3g"].includes(n.effectiveType)}};async function JM(n,e,t){if(!Dh())throw new Error("Cannot generate images while offline. Please connect to the internet and try again.");XM()===!0&&console.warn("Generating images on a metered connection (like mobile data). This may use significant data.");try{const u=(await wT(jv,"generateImage")({actorId:n,prompt:e,negativePrompt:t.negativePrompt,guidanceScale:t.guidanceScale,numInferenceSteps:t.numInferenceSteps})).data;try{await QE(_i(st,"generatedImages"),{userId:(await st._getAuthToken()).uid,actorId:n,imageUrl:u.imageUrl,prompt:e,settings:t,createdAt:Yc()})}catch(f){console.error("Error saving generation to history:",f)}return u}catch(s){throw console.error("Error generating image:",s),Dh()?s.code==="functions/resource-exhausted"?new Error("Generation limit reached. Please try again later when system resources are available."):s.code==="functions/deadline-exceeded"?new Error("Image generation took too long. Please try a simpler prompt or try again later."):s.code==="functions/invalid-argument"?new Error("Invalid generation parameters. Please check your prompt and settings."):new Error(s.message||"Failed to generate image. Please try again."):new Error("Connection lost while generating image. Please check your connection and try again.")}}async function ZM(n,e=20){if(!Dh())throw new Error("Cannot fetch generated images while offline. Please connect to the internet and try again.");try{let r;try{r=(await st._getAuthToken()).uid}catch(s){throw console.error("Error getting auth token:",s),new Error("Authentication error. Please sign in again.")}try{console.log(`Querying for images with actorId=${n} and userId=${r}`);const s=Ma(_i(st,"generatedImages"),vi("actorId","==",n),vi("userId","==",r),Gc("createdAt","desc")),l=await La(s);console.log(`Query returned ${l.size} documents`);const u=[];return l.forEach(f=>{const p=f.data();u.push({id:f.id,imageUrl:p.imageUrl,prompt:p.prompt,createdAt:p.createdAt?p.createdAt.toDate():new Date,settings:p.settings||{}})}),{images:u.slice(0,e)}}catch(s){throw console.error("Error querying Firestore:",s),s}}catch(t){throw console.error("Error fetching generated images:",t),Dh()?t:new Error("Connection lost while fetching images. Please check your connection and try again.")}}function eL(){const{actorId:n}=gw(),[e,t]=C.useState(null),[r,s]=C.useState([]),[l,u]=C.useState(!0),[f,p]=C.useState(!1),[v,_]=C.useState(null),[E,w]=C.useState(navigator.onLine),[T,I]=C.useState(null),[L,P]=C.useState([]),[V,Y]=C.useState(null),{currentUser:H,logOut:ee}=vn(),X=zr(),{imageGenerationSettings:se,shouldShowWarning:M}=cf();C.useEffect(()=>{const re=()=>{w(!0),N(),A()},k=()=>w(!1);return window.addEventListener("online",re),window.addEventListener("offline",k),()=>{window.removeEventListener("online",re),window.removeEventListener("offline",k)}},[]),C.useEffect(()=>{if(V){const re=setTimeout(()=>{Y(null)},5e3);return()=>clearTimeout(re)}},[V]);const N=async()=>{if(!n)return;const re=!1;if(!H){console.log("No authenticated user and not in development mode"),_("You must be logged in to access this feature"),u(!1);return}if(!E){console.log("Device is offline and not in development mode"),u(!1);return}try{console.log("Fetching actor details:",n);try{const k=Mn(st,"actors",n),Q=await $c(k);if(Q.exists()){const le=Q.data();if(H&&le.userId!==H.uid&&!re){_("You do not have permission to access this actor"),u(!1);return}if(le.modelStatus!=="completed"&&!re){_("This actor model is not ready for image generation"),u(!1);return}t({id:n,...le}),console.log("Actor data loaded successfully")}else console.log("Actor document not found"),re||_("Actor not found")}catch(k){if(console.error("Firestore error:",k),!re)throw k}}catch(k){console.error("Error fetching actor:",k),_("Failed to load actor details")}finally{u(!1)}},A=async()=>{if(n&&E)try{console.log("Fetching generated images for actor:",n);const re=await ZM(n);console.log("Fetched generated images:",re.images.length),s(re.images);const k=[];re.images.forEach(Q=>{Q.prompt&&!k.includes(Q.prompt)&&k.push(Q.prompt)}),P(k.slice(0,5))}catch(re){console.error("Error fetching generated images:",re)}};C.useEffect(()=>{N(),A()},[n,H]);const D=async(re,k)=>{if(!(!e||!E))try{p(!0),_(null);const Q={...k,numInferenceSteps:k.numInferenceSteps||se.inferenceSteps,useLowMemoryMode:k.useLowMemoryMode||se.useLowMemoryMode},le=await JM(e.id,re,Q);s(de=>[{id:le.id,imageUrl:le.imageUrl,prompt:re,createdAt:new Date},...de]),L.includes(re)||P(de=>[re,...de.slice(0,4)]),Y("Image generated successfully!")}catch(Q){console.error("Error generating image:",Q),_(Q.message||"Failed to generate image. Please try again.")}finally{p(!1)}},U=async()=>{try{await ee(),X("/login")}catch(re){console.error("Failed to log out",re)}},B=async()=>{E&&(await Promise.all([N(),A()]),Y("Content refreshed"))},O=re=>{I(re),document.body.style.overflow="hidden"},me=()=>{I(null),document.body.style.overflow="auto"},xe=()=>{T===null||r.length===0||I((T+1)%r.length)},oe=()=>{T===null||r.length===0||I((T-1+r.length)%r.length)},ve=(re,k)=>{const Q=document.createElement("a");Q.href=re;const le=k.substring(0,20).replace(/[^a-z0-9]/gi,"_").toLowerCase();Q.download=`ai-actor-${le}-${Date.now()}.jpg`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q)},fe=async(re,k)=>{if(navigator.share)try{await navigator.share({title:"My Generated AI Image",text:k,url:re})}catch{console.log("Share cancelled")}else navigator.clipboard.writeText(re).then(()=>{alert("Image URL copied to clipboard!")}).catch(Q=>{console.error("Failed to copy URL:",Q),alert("Could not copy URL to clipboard")})};return m.jsxs("div",{className:"min-h-screen bg-gray-50",children:[m.jsx("header",{className:"bg-white shadow",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 flex justify-between items-center",children:[m.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-primary-600",children:"AI Actor Generator"}),m.jsxs("div",{className:"flex items-center",children:[m.jsx("span",{className:"hidden sm:inline mr-4 text-sm text-gray-600",children:H==null?void 0:H.email}),m.jsx("button",{onClick:U,className:"touch-target min-h-[44px] flex items-center justify-center px-3 py-2 text-sm font-medium text-gray-700 hover:text-primary-600 transition-colors",children:"Log out"})]})]})}),m.jsx(TT,{onRefresh:B,className:"h-full",refreshingText:"Refreshing images...",pullingText:"Pull down to refresh",releaseText:"Release to refresh",children:m.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[!E&&m.jsx("div",{className:"mb-6 bg-yellow-50 border-l-4 border-yellow-400 p-4",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-yellow-700",children:"You're currently offline. Image generation is unavailable until you reconnect."})})]})}),M&&m.jsx("div",{className:"mb-6",children:m.jsx(LT,{})}),V&&m.jsx("div",{className:"mb-6 bg-green-50 border-l-4 border-green-400 p-4 transition-opacity duration-500 ease-in-out",children:m.jsxs("div",{className:"flex",children:[m.jsx("div",{className:"flex-shrink-0",children:m.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:m.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})})}),m.jsx("div",{className:"ml-3 flex-grow",children:m.jsx("p",{className:"text-sm text-green-700",children:V})}),m.jsx("div",{className:"pl-3",children:m.jsxs("button",{type:"button",onClick:()=>Y(null),className:"inline-flex rounded-full p-1.5 text-green-500 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-green-600 focus:ring-offset-2 focus:ring-offset-green-50 touch-target",children:[m.jsx("span",{className:"sr-only",children:"Dismiss"}),m.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})]})})]})}),m.jsx("div",{className:"mb-6",children:m.jsx("nav",{className:"flex","aria-label":"Breadcrumb",children:m.jsxs("ol",{className:"flex items-center space-x-4",children:[m.jsx("li",{children:m.jsx("div",{children:m.jsx(Ye,{to:"/dashboard",className:"text-gray-500 hover:text-gray-700 text-sm",children:"Dashboard"})})}),m.jsx("li",{children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:m.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})}),m.jsx(Ye,{to:`/actors/${n}`,className:"ml-4 text-gray-500 hover:text-gray-700 text-sm",children:"Actor Details"})]})}),m.jsx("li",{children:m.jsxs("div",{className:"flex items-center",children:[m.jsx("svg",{className:"h-5 w-5 text-gray-400",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:m.jsx("path",{fillRule:"evenodd",d:"M7.21 14.77a.75.75 0 01.02-1.06L11.168 10 7.23 6.29a.75.75 0 111.04-1.08l4.5 4.25a.75.75 0 010 1.08l-4.5 4.25a.75.75 0 01-1.06-.02z",clipRule:"evenodd"})}),m.jsx("span",{className:"ml-4 text-sm font-medium text-gray-500",children:"Generate Images"})]})})]})})}),v&&m.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 mb-6",children:m.jsx("div",{className:"flex",children:m.jsx("div",{className:"ml-3",children:m.jsx("p",{className:"text-sm text-red-700",children:v})})})}),l?m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"inline-block animate-spin h-8 w-8 border-4 border-gray-200 rounded-full border-t-primary-600 mb-4"}),m.jsx("p",{className:"text-gray-600",children:"Loading actor details..."})]}):e?m.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[m.jsx("div",{children:m.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[m.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:["Generate Images of ",e.name]}),m.jsx(QM,{onSubmit:D,isLoading:f||!E}),L.length>0&&m.jsxs("div",{className:"mt-6",children:[m.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Previous prompts"}),m.jsx("div",{className:"space-y-2",children:L.map((re,k)=>m.jsx("button",{onClick:()=>{const Q=document.getElementById("prompt");if(Q){Q.value=re;const le=new Event("input",{bubbles:!0});Q.dispatchEvent(le)}},className:"block w-full text-left px-3 py-2 bg-gray-50 hover:bg-gray-100 border border-gray-200 rounded-md text-sm text-gray-700 truncate transition-colors touch-target text-ellipsis overflow-hidden",children:re},k))})]})]})}),m.jsx("div",{children:m.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[m.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:r.length>0?"Generated Images":"Your Generated Images"}),f&&m.jsx("div",{className:"mb-6 p-6 border border-gray-200 rounded-lg bg-gray-50 flex items-center justify-center",children:m.jsxs("div",{className:"flex flex-col items-center",children:[m.jsxs("svg",{className:"animate-spin h-10 w-10 text-primary-500 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[m.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),m.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),m.jsx("p",{className:"text-gray-700 font-medium",children:"Generating your image..."}),m.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"This may take up to 30 seconds"})]})}),r.length>0?m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:r.map((re,k)=>m.jsx("div",{className:"cursor-pointer",onClick:()=>O(k),children:m.jsx(WM,{imageUrl:re.imageUrl,prompt:re.prompt,onDownload:()=>ve(re.imageUrl,re.prompt),onShare:()=>fe(re.imageUrl,re.prompt)})},re.id))}):m.jsxs("div",{className:"text-center p-8 border border-gray-200 rounded-lg bg-gray-50",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),m.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No images generated yet"}),m.jsxs("p",{className:"text-gray-600",children:["Use the form to create your first AI-generated image of ",e.name]})]})]})})]}):m.jsx("div",{className:"text-center py-12",children:m.jsxs("div",{className:"bg-white shadow rounded-lg p-8 max-w-md mx-auto",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-red-500 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),m.jsx("h2",{className:"text-xl font-medium text-gray-900 mb-2",children:"Actor Not Available"}),m.jsx("p",{className:"text-gray-600 mb-6",children:"The AI actor you're trying to access is not available or not ready for image generation."}),m.jsx(Ye,{to:"/dashboard",className:"touch-target w-full inline-flex justify-center items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 min-h-[44px]",children:"Return to Dashboard"})]})}),r.length>0&&T!==null&&m.jsx("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-90 flex items-center justify-center p-4",children:m.jsxs("div",{className:"relative w-full max-w-3xl",children:[m.jsx("button",{onClick:me,className:"absolute top-0 right-0 -mt-12 -mr-4 text-white p-2 touch-target z-10 min-h-[44px] min-w-[44px]","aria-label":"Close image viewer",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),m.jsxs("div",{className:"relative",children:[m.jsx("img",{src:r[T].imageUrl,alt:r[T].prompt,className:"max-h-[80vh] mx-auto object-contain"}),m.jsx("button",{onClick:oe,className:"absolute left-0 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-r touch-target min-h-[44px] min-w-[44px]","aria-label":"Previous image",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),m.jsx("button",{onClick:xe,className:"absolute right-0 top-1/2 transform -translate-y-1/2 bg-black bg-opacity-50 text-white p-2 rounded-l touch-target min-h-[44px] min-w-[44px]","aria-label":"Next image",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),m.jsxs("div",{className:"text-white mt-4 max-w-2xl mx-auto",children:[m.jsx("p",{className:"text-sm break-words",children:r[T].prompt}),m.jsxs("div",{className:"mt-2 flex justify-between items-center",children:[m.jsxs("span",{className:"text-sm text-gray-300",children:[T+1," / ",r.length]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsxs("button",{onClick:()=>ve(r[T].imageUrl,r[T].prompt),className:"touch-target inline-flex items-center px-3 py-1 bg-white text-black rounded-md text-sm min-h-[44px]",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Download"]}),m.jsxs("button",{onClick:()=>fe(r[T].imageUrl,r[T].prompt),className:"touch-target inline-flex items-center px-3 py-1 bg-white text-black rounded-md text-sm min-h-[44px]",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M15 8a3 3 0 10-2.977-2.63l-4.94 2.47a3 3 0 100 4.319l4.94 2.47a3 3 0 10.895-1.789l-4.94-2.47a3.027 3.027 0 000-.74l4.94-2.47C13.456 7.68 14.19 8 15 8z"})}),"Share"]})]})]})]})]})}),m.jsxs("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 py-2 px-4 flex justify-around items-center",children:[m.jsxs(Ye,{to:"/dashboard",className:"flex flex-col items-center justify-center min-w-[64px] min-h-[44px] touch-target text-gray-600",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{d:"M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z"})}),m.jsx("span",{className:"text-xs mt-1",children:"Home"})]}),m.jsxs(Ye,{to:`/actors/${n}`,className:"flex flex-col items-center justify-center min-w-[64px] min-h-[44px] touch-target text-gray-600",children:[m.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:[m.jsx("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),m.jsx("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}),m.jsx("span",{className:"text-xs mt-1",children:"Details"})]}),m.jsxs(Ye,{to:"/create-actor",className:"flex flex-col items-center justify-center min-w-[64px] min-h-[44px] touch-target text-gray-600",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),m.jsx("span",{className:"text-xs mt-1",children:"Create"})]})]}),!l&&r.length>0&&m.jsxs("div",{className:"mt-6 text-center text-sm text-gray-500 sm:hidden",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 inline-block mr-1 animate-bounce",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})}),"Pull down to refresh"]}),m.jsx("div",{className:"sm:hidden h-16"})]})})]})}function tL(){const n=Xi();return C.useEffect(()=>{window.scrollTo(0,0)},[n.pathname]),m.jsxs(u2,{children:[m.jsx(Hi,{path:"/",element:m.jsx(PO,{})}),m.jsx(Hi,{path:"/login",element:m.jsx(MO,{})}),m.jsx(Hi,{path:"/register",element:m.jsx(LO,{})}),m.jsx(Hi,{path:"/forgot-password",element:m.jsx(UO,{})}),m.jsx(Hi,{path:"/dashboard",element:m.jsx(zd,{children:m.jsx(qP,{})})}),m.jsx(Hi,{path:"/create-actor",element:m.jsx(zd,{children:m.jsx(GM,{})})}),m.jsx(Hi,{path:"/actors/:actorId",element:m.jsx(zd,{children:m.jsx(YM,{})})}),m.jsx(Hi,{path:"/generate/:actorId",element:m.jsx(zd,{children:m.jsx(eL,{})})}),m.jsx(Hi,{path:"*",element:m.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-50 px-4",children:[m.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Page Not Found"}),m.jsx("p",{className:"text-gray-600 mb-8",children:"The page you are looking for does not exist."}),m.jsx("a",{href:"/",className:"touch-target px-4 py-2 text-white bg-primary-600 rounded-md hover:bg-primary-700 transition-colors min-h-[44px] flex items-center",children:"Return to Home"})]})})]})}const nL=()=>"serviceWorker"in navigator,iL=async()=>{if(!nL()){console.log("Service workers are not supported by this browser");return}try{const n=await navigator.serviceWorker.register("/service-worker.js",{scope:"/"});n.installing?console.log("Service worker installing"):n.waiting?(console.log("Service worker installed but waiting"),ow(n)):n.active&&console.log("Service worker active"),n.addEventListener("updatefound",()=>{const e=n.installing;e&&e.addEventListener("statechange",()=>{e.state==="installed"&&navigator.serviceWorker.controller&&ow(n)})}),setInterval(()=>{n.update()},60*60*1e3)}catch(n){console.error("Error during service worker registration:",n)}},ow=n=>{var t,r;const e=document.createElement("div");e.className="fixed bottom-0 left-0 right-0 bg-primary-600 text-white p-4 flex justify-between items-center z-50",e.innerHTML=`
    <div>
      <p class="font-medium">New version available!</p>
      <p class="text-sm">Refresh to update the app.</p>
    </div>
    <div class="flex space-x-2">
      <button id="sw-refresh" class="px-4 py-2 bg-white text-primary-600 rounded-md font-medium min-h-[44px]">
        Refresh Now
      </button>
      <button id="sw-dismiss" class="px-4 py-2 bg-transparent border border-white text-white rounded-md font-medium min-h-[44px]">
        Later
      </button>
    </div>
  `,document.body.appendChild(e),(t=document.getElementById("sw-refresh"))==null||t.addEventListener("click",()=>{n.waiting&&n.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload()}),(r=document.getElementById("sw-dismiss"))==null||r.addEventListener("click",()=>{e.remove()})};iL();_A.createRoot(document.getElementById("root")).render(m.jsx(C.StrictMode,{children:m.jsx(j2,{children:m.jsx(OO,{children:m.jsx(tL,{})})})}));
